{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp/src/app/api/auth/register/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { PrismaClient } from '@prisma/client';\r\nimport bcrypt from 'bcryptjs';\r\n\r\nconst prisma = new PrismaClient();\r\n\r\nexport async function POST(request: NextRequest) {\r\n    try {\r\n        const { nombre, nick, centro, curso, tipo, email, password } = await request.json();\r\n\r\n        // Verificar si el usuario ya existe\r\n        const existingUser = await prisma.user.findUnique({\r\n            where: { nick }\r\n        });\r\n\r\n        if (existingUser) {\r\n            return NextResponse.json({ error: 'El nick ya está en uso' }, { status: 400 });\r\n        }\r\n\r\n        // Hashear la contraseña\r\n        const hashedPassword = await bcrypt.hash(password, 10);\r\n\r\n        // Crear usuario\r\n        const user = await prisma.user.create({\r\n            data: {\r\n                nombre: nombre || null,\r\n                nick,\r\n                centro: centro || null,\r\n                curso: curso || null,\r\n                tipo: tipo || 'estudiante',\r\n                email: email || null,\r\n                password: hashedPassword,\r\n                fechaInscripcion: new Date(),\r\n                likes: 0,\r\n                respuestasAcertadas: 0,\r\n                competicionesSuperadas: 0,\r\n                concursosGanados: 0,\r\n                comentariosRecibidos: 0,\r\n                historiasCreadas: 0,\r\n                anosEnStoryUp: 0,\r\n                premium: false\r\n            } as any\r\n        });\r\n\r\n        return NextResponse.json({ message: 'Usuario registrado exitosamente', user: { id: user.id, nick: user.nick } });\r\n    } catch (error) {\r\n        console.error('Error registrando usuario:', error);\r\n        return NextResponse.json({ error: 'Error interno del servidor' }, { status: 500 });\r\n    }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,SAAS,IAAI,6IAAY;AAExB,eAAe,KAAK,OAAoB;IAC3C,IAAI;QACA,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEjF,oCAAoC;QACpC,MAAM,eAAe,MAAM,OAAO,IAAI,CAAC,UAAU,CAAC;YAC9C,OAAO;gBAAE;YAAK;QAClB;QAEA,IAAI,cAAc;YACd,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAyB,GAAG;gBAAE,QAAQ;YAAI;QAChF;QAEA,wBAAwB;QACxB,MAAM,iBAAiB,MAAM,8IAAM,CAAC,IAAI,CAAC,UAAU;QAEnD,gBAAgB;QAChB,MAAM,OAAO,MAAM,OAAO,IAAI,CAAC,MAAM,CAAC;YAClC,MAAM;gBACF,QAAQ,UAAU;gBAClB;gBACA,QAAQ,UAAU;gBAClB,OAAO,SAAS;gBAChB,MAAM,QAAQ;gBACd,OAAO,SAAS;gBAChB,UAAU;gBACV,kBAAkB,IAAI;gBACtB,OAAO;gBACP,qBAAqB;gBACrB,wBAAwB;gBACxB,kBAAkB;gBAClB,sBAAsB;gBACtB,kBAAkB;gBAClB,eAAe;gBACf,SAAS;YACb;QACJ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAmC,MAAM;gBAAE,IAAI,KAAK,EAAE;gBAAE,MAAM,KAAK,IAAI;YAAC;QAAE;IAClH,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA6B,GAAG;YAAE,QAAQ;QAAI;IACpF;AACJ","debugId":null}}]
}