{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es/src/app/centros-competencia/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { renderNick } from \"@/utils/renderNick\";\r\nimport trofeos from \"../../data/trofeos.json\";\r\nimport trofeosPremium from \"../../data/trofeos-premium.json\";\r\n\r\ninterface Usuario {\r\n    nick: string;\r\n    nombre: string;\r\n    email: string;\r\n    centro: string;\r\n    curso: string;\r\n    tipo: string;\r\n    fechaInscripcion: string;\r\n    likes: number;\r\n    amigos: string[];\r\n    respuestasAcertadas: number;\r\n    competicionesSuperadas: number;\r\n    concursosGanados: number;\r\n    comentariosRecibidos: number;\r\n    historiasCreadas: number;\r\n    anosEnStoryUp: number;\r\n    trofeos: any[];\r\n}\r\n\r\ninterface CentroStats {\r\n    nombre: string;\r\n    estudiantes: number;\r\n    estudiantesActivos: number; // activos en √∫ltimos 7 d√≠as\r\n    respuestasCorrectas: number;\r\n    concursosGanados: number;\r\n    historiasCreadas: number;\r\n    interaccionesSociales: number; // likes + mensajes + amigos\r\n    diasConsecutivos: number;\r\n    puntajeTotal: number;\r\n    ranking: number;\r\n    medalla: string;\r\n}\r\n\r\nexport default function CentrosCompetencia() {\r\n    const [loading, setLoading] = useState(true);\r\n    const [centros, setCentros] = useState<CentroStats[]>([]);\r\n    const [centrosAnuales, setCentrosAnuales] = useState<CentroStats[]>([]);\r\n    const [miCentro, setMiCentro] = useState<string>(\"\");\r\n    const [filtroMes, setFiltroMes] = useState<string>(\"actual\");\r\n    const [modoVisualizacion, setModoVisualizacion] = useState<\"actual\" | \"historico\" | \"anual\">(\"actual\");\r\n    const [mesSeleccionado, setMesSeleccionado] = useState<string>(\"\");\r\n    const fechaActual = new Date();\r\n    const [mesesDisponibles, setMesesDisponibles] = useState<string[]>([]);\r\n    const [historialGanadores, setHistorialGanadores] = useState<any[]>([]);\r\n    const [premiosDelMes, setPremiosDelMes] = useState<any[]>([]);\r\n    const [usuario, setUsuario] = useState<Usuario | null>(null);\r\n\r\n    // ‚úÖ MODO VACACIONES: Estados para funcionalidades especiales\r\n    const [modoVacaciones, setModoVacaciones] = useState<boolean>(false);\r\n    const [tipoVacacion, setTipoVacacion] = useState<string>(\"\");\r\n    const [eventoEspecial, setEventoEspecial] = useState<any>(null);\r\n\r\n    // ‚úÖ COMPETENCIAS POR ASIGNATURA: Estados para filtros espec√≠ficos\r\n    const [asignaturaSeleccionada, setAsignaturaSeleccionada] = useState<string>(\"todas\");\r\n    const [hayDatosAsignatura, setHayDatosAsignatura] = useState<boolean>(true);\r\n    const [cursoSeleccionado, setCursoSeleccionado] = useState<string>(\"todos\");\r\n    const asignaturas = [\"todas\", \"Matem√°ticas\", \"Lenguaje\", \"Literatura\", \"Historia\", \"Geograf√≠a\", \"Naturaleza\", \"Ingl√©s\", \"General\"];\r\n    const cursos = [\"todos\", \"1¬∫ Primaria\", \"2¬∫ Primaria\", \"3¬∫ Primaria\", \"4¬∫ Primaria\", \"5¬∫ Primaria\", \"6¬∫ Primaria\"];\r\n\r\n    // Nota: Los datos de asignaturas se almacenan cuando los usuarios responden preguntas\r\n    // Formato: \"{asignatura}_{nickname}\" ‚Üí puntos obtenidos\r\n    // Ejemplo: \"matematicas_PIPO68\" ‚Üí \"45\"\r\n\r\n    // ‚úÖ MODO VACACIONES: Funciones para detectar per√≠odos especiales\r\n    const detectarPeriodoVacaciones = (): { esVacacion: boolean; tipo: string; evento: any } => {\r\n        const ahora = new Date();\r\n        const mes = ahora.getMonth() + 1; // 1-12\r\n        const dia = ahora.getDate();\r\n        const a√±o = ahora.getFullYear();\r\n\r\n        // Per√≠odos de vacaciones escolares en Espa√±a\r\n        const vacaciones = [\r\n            { inicio: { mes: 6, dia: 15 }, fin: { mes: 9, dia: 15 }, tipo: \"Vacaciones de Verano\", emoji: \"üèñÔ∏è\", multiplicador: 1.5 },\r\n            { inicio: { mes: 12, dia: 20 }, fin: { mes: 1, dia: 7 }, tipo: \"Vacaciones de Navidad\", emoji: \"üéÑ\", multiplicador: 1.3 },\r\n            { inicio: { mes: 3, dia: 20 }, fin: { mes: 4, dia: 5 }, tipo: \"Vacaciones de Semana Santa\", emoji: \"üê∞\", multiplicador: 1.2 },\r\n            { inicio: { mes: 10, dia: 31 }, fin: { mes: 11, dia: 2 }, tipo: \"Puente de Halloween\", emoji: \"üéÉ\", multiplicador: 1.1 },\r\n            { inicio: { mes: 12, dia: 6 }, fin: { mes: 12, dia: 8 }, tipo: \"Puente de la Constituci√≥n\", emoji: \"üá™üá∏\", multiplicador: 1.1 }\r\n        ];\r\n\r\n        for (const vacacion of vacaciones) {\r\n            let enPeriodo = false;\r\n\r\n            if (vacacion.inicio.mes === vacacion.fin.mes) {\r\n                // Mismo mes\r\n                enPeriodo = mes === vacacion.inicio.mes && dia >= vacacion.inicio.dia && dia <= vacacion.fin.dia;\r\n            } else if (vacacion.inicio.mes === 12 && vacacion.fin.mes === 1) {\r\n                // Navidad (diciembre-enero)\r\n                enPeriodo = (mes === 12 && dia >= vacacion.inicio.dia) || (mes === 1 && dia <= vacacion.fin.dia);\r\n            } else {\r\n                // Diferentes meses\r\n                enPeriodo = (mes === vacacion.inicio.mes && dia >= vacacion.inicio.dia) ||\r\n                    (mes === vacacion.fin.mes && dia <= vacacion.fin.dia) ||\r\n                    (mes > vacacion.inicio.mes && mes < vacacion.fin.mes);\r\n            }\r\n\r\n            if (enPeriodo) {\r\n                return {\r\n                    esVacacion: true,\r\n                    tipo: vacacion.tipo,\r\n                    evento: {\r\n                        emoji: vacacion.emoji,\r\n                        multiplicador: vacacion.multiplicador,\r\n                        descripcion: `Durante ${vacacion.tipo.toLowerCase()}, ¬°los puntos se multiplican por ${vacacion.multiplicador}!`\r\n                    }\r\n                };\r\n            }\r\n        }\r\n\r\n        return { esVacacion: false, tipo: \"\", evento: null };\r\n    };\r\n\r\n    // ‚úÖ CHALLENGES ESPECIALES: Eventos tem√°ticos por fecha\r\n    const obtenerChallengeActual = (): any => {\r\n        const ahora = new Date();\r\n        const mes = ahora.getMonth() + 1;\r\n        const dia = ahora.getDate();\r\n\r\n        const challenges = [\r\n            { mes: 2, dia: 14, nombre: \"Challenge del Amor\", emoji: \"üíù\", bonus: \"Historias modo 'Coraz√≥n' +3 puntos\" },\r\n            { mes: 4, dia: 23, nombre: \"D√≠a del Libro\", emoji: \"üìö\", bonus: \"Crear cualquier historia +5 puntos extra\" },\r\n            { mes: 5, dia: 15, nombre: \"Challenge de la Familia\", emoji: \"üë®‚Äçüë©‚Äçüëß‚Äçüë¶\", bonus: \"Historias modo 'My Live' +2 puntos\" },\r\n            { mes: 10, dia: 31, nombre: \"Halloween Challenge\", emoji: \"üéÉ\", bonus: \"Historias modo 'Terror' +4 puntos\" },\r\n            { mes: 12, dia: 25, nombre: \"Challenge Navide√±o\", emoji: \"üéÖ\", bonus: \"Historias modo 'My Live' +6 puntos\" }\r\n        ];\r\n\r\n        return challenges.find(ch => ch.mes === mes && dia >= ch.dia - 3 && dia <= ch.dia + 3);\r\n    };\r\n\r\n    // Funci√≥n para calcular si un usuario estuvo activo en los √∫ltimos N d√≠as\r\n    const esUsuarioActivo = (usuario: Usuario, dias: number = 7): boolean => {\r\n        // Simulamos actividad basada en datos del usuario\r\n        // Usuarios con datos recientes se consideran activos\r\n        const tieneActividad = usuario.likes > 0 || usuario.historiasCreadas > 0 || usuario.concursosGanados > 0;\r\n        const tieneAmigos = usuario.amigos && usuario.amigos.length > 0;\r\n        const tieneInteracciones = usuario.comentariosRecibidos > 0;\r\n\r\n        // Un usuario se considera activo si tiene cualquier tipo de actividad\r\n        return tieneActividad || tieneAmigos || tieneInteracciones;\r\n    };\r\n\r\n    // Funci√≥n para obtener actividad de competiciones (campeonato)\r\n    const obtenerActividadCompeticiones = (centro: string): number => {\r\n        if (typeof window === \"undefined\") return 0;\r\n\r\n        try {\r\n            let puntosCompeticion = 0;\r\n\r\n            // Buscar datos de campeonato individual por curso y temporada\r\n            const cursos = ['1primaria', '2primaria', '3primaria', '4primaria', '5primaria', '6primaria'];\r\n            const temporadaActual = new Date().getFullYear();\r\n\r\n            // Datos de estudiantes\r\n            cursos.forEach(curso => {\r\n                const key = `campeonato_individual_t${temporadaActual}`;\r\n                const datos = localStorage.getItem(key);\r\n                if (datos) {\r\n                    try {\r\n                        const campeonato = JSON.parse(datos);\r\n                        // Sumar puntos de usuarios del centro\r\n                        Object.keys(campeonato).forEach(nick => {\r\n                            const userData = localStorage.getItem('users');\r\n                            if (userData) {\r\n                                const usuarios = JSON.parse(userData);\r\n                                const usuario = usuarios.find((u: Usuario) => u.nick.toLowerCase().replace(/\\s+/g, \"\") === nick);\r\n                                if (usuario && usuario.centro === centro) {\r\n                                    const datosUsuario = campeonato[nick];\r\n                                    puntosCompeticion += (datosUsuario.ganados || 0) * 10;\r\n                                    puntosCompeticion += (datosUsuario.acertadas || datosUsuario.preguntasAcertadas || 0) * 2;\r\n                                }\r\n                            }\r\n                        });\r\n                    } catch (e) {\r\n                        console.log('Error parseando datos de competici√≥n:', e);\r\n                    }\r\n                }\r\n            });\r\n\r\n            // Agregar datos de docentes\r\n            const docentesKey = `campeonato_docentes_t${temporadaActual}`;\r\n            const datosDocentes = localStorage.getItem(docentesKey);\r\n            if (datosDocentes) {\r\n                try {\r\n                    const campeonatoDocentes = JSON.parse(datosDocentes);\r\n                    Object.keys(campeonatoDocentes).forEach(nick => {\r\n                        const userData = localStorage.getItem('users');\r\n                        if (userData) {\r\n                            const usuarios = JSON.parse(userData);\r\n                            const usuario = usuarios.find((u: Usuario) => u.nick.toLowerCase().replace(/\\s+/g, \"\") === nick);\r\n                            if (usuario && usuario.centro === centro && usuario.tipo === \"docente\") {\r\n                                const datosUsuario = campeonatoDocentes[nick];\r\n                                // Los docentes obtienen m√°s puntos por su liderazgo\r\n                                puntosCompeticion += (datosUsuario.ganados || 0) * 15;\r\n                                puntosCompeticion += (datosUsuario.acertadas || datosUsuario.preguntasAcertadas || 0) * 3;\r\n                                puntosCompeticion += (datosUsuario.likes || 0) * 5; // Bonus por engagement\r\n                            }\r\n                        }\r\n                    });\r\n                } catch (e) {\r\n                    console.log('Error parseando datos de competici√≥n de docentes:', e);\r\n                }\r\n            }\r\n\r\n            return puntosCompeticion;\r\n        } catch (error) {\r\n            return 0;\r\n        }\r\n    };\r\n\r\n    // ‚úÖ COMPETENCIAS POR ASIGNATURA: Funci√≥n para obtener estad√≠sticas espec√≠ficas\r\n    const obtenerEstadisticasAsignatura = (asignatura: string, usuarios: Usuario[], cursoFiltro?: string): { [centro: string]: number } => {\r\n        if (typeof window === \"undefined\") return {};\r\n\r\n        const estadisticasCentros: { [centro: string]: number } = {};\r\n\r\n        if (asignatura === \"todas\") {\r\n            return {};\r\n        }\r\n\r\n        // Solo buscar datos espec√≠ficos reales por asignatura, no estimaciones\r\n        usuarios.forEach(usuario => {\r\n            if (!usuario.centro) return;\r\n\r\n            // ‚úÖ FILTRAR POR CURSO si se especifica\r\n            if (cursoFiltro && cursoFiltro !== \"todos\" && usuario.curso !== cursoFiltro) {\r\n                return;\r\n            }\r\n\r\n            const centro = usuario.centro;\r\n            if (!estadisticasCentros[centro]) {\r\n                estadisticasCentros[centro] = 0;\r\n            }\r\n\r\n            // Buscar datos espec√≠ficos por asignatura en localStorage\r\n            // Mapear de nombre display a nombre de localStorage\r\n            const mapaAsignaturasInverso: { [key: string]: string } = {\r\n                'Matem√°ticas': 'matematicas',\r\n                'Historia': 'historia',\r\n                'Geograf√≠a': 'geografia',\r\n                'Literatura': 'literatura',\r\n                'Ingl√©s': 'ingles',\r\n                'Naturaleza': 'naturaleza',\r\n                'Lenguaje': 'lenguaje',\r\n                'General': 'general'\r\n            };\r\n\r\n            const asignaturaParaLocalStorage = mapaAsignaturasInverso[asignatura] || asignatura.toLowerCase();\r\n            const claveAsignatura = `${asignaturaParaLocalStorage}_${usuario.nick}`;\r\n            const datosAsignatura = localStorage.getItem(claveAsignatura);\r\n\r\n            if (datosAsignatura && parseInt(datosAsignatura, 10) > 0) {\r\n                // Solo usar datos reales espec√≠ficos de la asignatura\r\n                estadisticasCentros[centro] += parseInt(datosAsignatura, 10);\r\n            }\r\n        });\r\n\r\n        return estadisticasCentros;\r\n    };\r\n\r\n    // Funci√≥n auxiliar - todas las asignaturas tienen la misma dificultad\r\n    const obtenerFactorAsignatura = (asignatura: string): number => {\r\n        // Todas las asignaturas tienen el mismo nivel de dificultad\r\n        return 1.0; // 100% para todas\r\n    };    // Funci√≥n para calcular estad√≠sticas de un centro\r\n    const calcularStatsDelCentro = (nombreCentro: string, usuarios: Usuario[]): CentroStats => {\r\n        // Separar estudiantes y docentes del centro\r\n        const estudiantesDelCentro = usuarios.filter(u =>\r\n            u.centro === nombreCentro && u.tipo !== \"docente\"\r\n        );\r\n\r\n        const docentesDelCentro = usuarios.filter(u =>\r\n            u.centro === nombreCentro && u.tipo === \"docente\"\r\n        );\r\n\r\n        const estudiantesActivos = estudiantesDelCentro.filter(u => esUsuarioActivo(u)).length;\r\n        const docentesActivos = docentesDelCentro.filter(u => esUsuarioActivo(u)).length;\r\n\r\n        let respuestasCorrectas, concursosGanados, historiasCreadas, interaccionesSociales;\r\n\r\n        // ‚úÖ APLICAR FILTRO POR ASIGNATURA SI EST√Å SELECCIONADO\r\n        if (asignaturaSeleccionada !== \"todas\") {\r\n            // Obtener estad√≠sticas espec√≠ficas de la asignatura\r\n            const statsAsignatura = obtenerEstadisticasAsignatura(asignaturaSeleccionada, usuarios, cursoSeleccionado);\r\n            const puntosAsignatura = statsAsignatura[nombreCentro] || 0;\r\n\r\n            // Para asignatura espec√≠fica, usamos los puntos espec√≠ficos obtenidos\r\n            respuestasCorrectas = puntosAsignatura;\r\n\r\n            // Si no hay datos espec√≠ficos, usar datos generales como fallback\r\n            if (puntosAsignatura === 0) {\r\n                const respuestasGenerales = estudiantesDelCentro.reduce((sum, u) => sum + (u.respuestasAcertadas || 0), 0) +\r\n                    docentesDelCentro.reduce((sum, u) => sum + (u.respuestasAcertadas || 0), 0);\r\n                respuestasCorrectas = respuestasGenerales;\r\n            }\r\n\r\n            // Para otras m√©tricas, usar los datos reales\r\n            concursosGanados = estudiantesDelCentro.reduce((sum, u) => sum + (u.concursosGanados || 0), 0) +\r\n                docentesDelCentro.reduce((sum, u) => sum + (u.concursosGanados || 0), 0);\r\n            historiasCreadas = estudiantesDelCentro.reduce((sum, u) => sum + (u.historiasCreadas || 0), 0) +\r\n                docentesDelCentro.reduce((sum, u) => sum + (u.historiasCreadas || 0), 0);\r\n            interaccionesSociales = estudiantesDelCentro.reduce((sum, u) =>\r\n                sum + (u.likes || 0) + (u.amigos?.length || 0) + (u.comentariosRecibidos || 0), 0) +\r\n                docentesDelCentro.reduce((sum, u) =>\r\n                    sum + (u.likes || 0) + (u.amigos?.length || 0) + (u.comentariosRecibidos || 0), 0);\r\n        } else {\r\n            // Estad√≠sticas generales (todas las asignaturas)\r\n            const respuestasCorrectasEstudiantes = estudiantesDelCentro.reduce((sum, u) => sum + (u.respuestasAcertadas || 0), 0);\r\n            const concursosGanadosEstudiantes = estudiantesDelCentro.reduce((sum, u) => sum + (u.concursosGanados || 0), 0);\r\n            const historiasCreadasEstudiantes = estudiantesDelCentro.reduce((sum, u) => sum + (u.historiasCreadas || 0), 0);\r\n            const interaccionesSocialesEstudiantes = estudiantesDelCentro.reduce((sum, u) =>\r\n                sum + (u.likes || 0) + (u.amigos?.length || 0) + (u.comentariosRecibidos || 0), 0);\r\n\r\n            // Estad√≠sticas de docentes  \r\n            const respuestasCorrectasDocentes = docentesDelCentro.reduce((sum, u) => sum + (u.respuestasAcertadas || 0), 0);\r\n            const concursosGanadosDocentes = docentesDelCentro.reduce((sum, u) => sum + (u.concursosGanados || 0), 0);\r\n            const historiasCreadasDocentes = docentesDelCentro.reduce((sum, u) => sum + (u.historiasCreadas || 0), 0);\r\n            const interaccionesSocialesDocentes = docentesDelCentro.reduce((sum, u) =>\r\n                sum + (u.likes || 0) + (u.amigos?.length || 0) + (u.comentariosRecibidos || 0), 0);\r\n\r\n            // Totales combinados\r\n            respuestasCorrectas = respuestasCorrectasEstudiantes + respuestasCorrectasDocentes;\r\n            concursosGanados = concursosGanadosEstudiantes + concursosGanadosDocentes;\r\n            historiasCreadas = historiasCreadasEstudiantes + historiasCreadasDocentes;\r\n            interaccionesSociales = interaccionesSocialesEstudiantes + interaccionesSocialesDocentes;\r\n        }\r\n\r\n        // Obtener actividad de competiciones (datos reales de campeonatos)\r\n        const puntosCompeticiones = obtenerActividadCompeticiones(nombreCentro);\r\n\r\n        // ‚úÖ PREMIOS: Obtener puntos extra por premios ganados\r\n        const premioCentro = obtenerPremioDelCentro(nombreCentro);\r\n        const puntosPremios = premioCentro ? premioCentro.puntosExtra : 0;\r\n\r\n        // Calcular puntuaci√≥n seg√∫n el sistema propuesto (incluyendo docentes)\r\n        const puntajeTotal =\r\n            (estudiantesActivos * 10) +           // Estudiantes activos\r\n            (docentesActivos * 20) +              // Docentes activos (m√°s valor por liderazgo)\r\n            (respuestasCorrectas * 5) +           // Respuestas correctas (filtradas por asignatura si aplica)\r\n            (concursosGanados * 50) +             // Concursos ganados \r\n            (historiasCreadas * 15) +             // Historias creadas \r\n            (interaccionesSociales * 2) +         // Interacciones sociales \r\n            puntosCompeticiones +                 // Actividad en competiciones\r\n            puntosPremios;                        // Bonus por premios ganados\r\n\r\n        return {\r\n            nombre: nombreCentro,\r\n            estudiantes: estudiantesDelCentro.length + docentesDelCentro.length, // Total de miembros\r\n            estudiantesActivos: estudiantesActivos + docentesActivos, // Total de activos\r\n            respuestasCorrectas,\r\n            concursosGanados,\r\n            historiasCreadas,\r\n            interaccionesSociales,\r\n            diasConsecutivos: 0, // Placeholder por ahora\r\n            puntajeTotal,\r\n            ranking: 0, // Se calcular√° despu√©s\r\n            medalla: \"\"\r\n        };\r\n    };\r\n\r\n    // Funci√≥n para obtener el logo/escudo de un centro\r\n    const obtenerLogoCentro = (nombreCentro: string): string => {\r\n        // Validaci√≥n: si nombreCentro es undefined, null o vac√≠o, devolver logo por defecto\r\n        if (!nombreCentro || typeof nombreCentro !== 'string') {\r\n            return \"logo-pipo.jpg\";\r\n        }\r\n\r\n        // Mapeo de nombres de centros a archivos de imagen\r\n        const logosDisponibles: { [key: string]: string } = {\r\n            \"Aguere\": \"Aguere.jpg\",\r\n            \"Angeles Bermejo\": \"Angeles Bermejo.jpg\",\r\n            \"Aregume\": \"Aregume.jpg\",\r\n            \"Buen Consejo\": \"Buen Consejo.png\",\r\n            \"Camino La Villa\": \"Camino La Villa.jpg\",\r\n            \"Camino Largo\": \"Camino Largo.jpg\",\r\n            \"Casa Azul\": \"Casa Azul.png\",\r\n            \"Chamberi\": \"Chamberi.png\",\r\n            \"Chayofa\": \"Chayofa.png\",\r\n            \"Cisneros Alter\": \"Cisneros Alter.jpg\",\r\n            \"Colegio Cervantes\": \"Colegio Cervantes.jpg\",\r\n            \"Costa Adeje I\": \"Costa Adeje I..jpg\",\r\n            \"Cuesta 25 de Julio\": \"Cuesta 25 de Julio.jpg\",\r\n            \"Dominguez Alfonso\": \"Dominguez Alfonso.jpg\",\r\n            \"Echeyde Arona\": \"Echeyde Arona.png\",\r\n            \"Echeyde La Laguna\": \"Echeyde La Laguna.png\",\r\n            \"El Monte\": \"El Monte.png\",\r\n            \"Escuela Rural\": \"Escuela Rural.png\",\r\n            \"Escuelas Pias\": \"Escuelas Pias.jpg\",\r\n            \"Gobierno de Canarias\": \"Gobierno de Canarias (Educacion).jpg\",\r\n            \"Hispano La Salud\": \"Hispano La Salud.png\",\r\n            \"La Cuesta B.N\": \"La Cuesta B.N.jpg\",\r\n            \"La Higuerita\": \"La Higuerita.jpg\",\r\n            \"La Rosa\": \"La Rosa.png\",\r\n            \"La Salle\": \"La Salle.png\",\r\n            \"La Vega\": \"La Vega.jpg\",\r\n            \"La Verdellada\": \"La Verdellada.jpg\",\r\n            \"Los Alisios\": \"Los Alisios.jpg\",\r\n            \"Los Menceyes\": \"Los Menceyes.jpg\",\r\n            \"Luis Alvarez Cruz\": \"Luis Alvarez Cruz.jpg\",\r\n            \"Luther King\": \"Luther King.jpg\",\r\n            \"Mayex\": \"Mayex.jpg\",\r\n            \"Montessori\": \"Montessori.png\",\r\n            \"Nuryana\": \"Nuryana.jpg\",\r\n            \"Punta Larga\": \"Punta Larga.jpg\",\r\n            \"Pureza de Maria\": \"Pureza de Maria.png\",\r\n            \"Ravelo\": \"Ravelo.jpg\",\r\n            \"Rodriguez Alberto\": \"Rodriguez Alberto.jpg\",\r\n            \"Rodriguez Campos\": \"Rodriguez Campos.png\",\r\n            \"Saint Andrew's\": \"Saint Andrew,s.jpg\",\r\n            \"Salesianas\": \"Salesianas.jpg\",\r\n            \"San Agustin\": \"San Agustin.jpg\",\r\n            \"San Fernando\": \"San Fernando.jpg\",\r\n            \"San Isidro\": \"San Isidro.jpg\",\r\n            \"San Pablo\": \"San Pablo.png\",\r\n            \"Santa Catalina de Siena\": \"Santa Catalina de Siena.jpg\",\r\n            \"Santa Cruz de California\": \"Santa Cruz de California.jpg\",\r\n            \"Santa Maria del Mar\": \"Santa Maria del Mar.jpg\",\r\n            \"Santa Rosa de Lima\": \"Santa Rosa de Lima.jpg\",\r\n            \"Tacoronte\": \"Tacoronte.jpg\",\r\n            \"Tagoror\": \"Tagoror.jpg\",\r\n            \"Teofilo Perez\": \"Teofilo Perez.png\",\r\n            \"Tincer\": \"Tincer.jpg\",\r\n            \"Virgen de Fatima\": \"Virgen de Fatima.jpg\",\r\n            \"Virgen del Mar\": \"Virgen del Mar.png\"\r\n        };\r\n\r\n        // Buscar coincidencia exacta\r\n        if (logosDisponibles[nombreCentro]) {\r\n            return logosDisponibles[nombreCentro];\r\n        }\r\n\r\n        // Buscar coincidencia parcial (por si el nombre est√° ligeramente diferente)\r\n        // Validaci√≥n adicional antes de usar toLowerCase()\r\n        if (typeof nombreCentro !== 'string' || !nombreCentro) {\r\n            return \"logo-pipo.jpg\";\r\n        }\r\n\r\n        const nombreLimpio = nombreCentro.toLowerCase().trim();\r\n        for (const [nombre, archivo] of Object.entries(logosDisponibles)) {\r\n            if (nombreLimpio.includes(nombre.toLowerCase()) || nombre.toLowerCase().includes(nombreLimpio)) {\r\n                return archivo;\r\n            }\r\n        }\r\n\r\n        // Si no encuentra imagen espec√≠fica, usar logo por defecto\r\n        return \"logo-pipo.jpg\"; // Fallback al logo de la aplicaci√≥n\r\n    };\r\n\r\n    // Funci√≥n auxiliar para verificar si es una imagen o emoji\r\n    const esImagen = (logo: string): boolean => {\r\n        return logo.includes('.jpg') || logo.includes('.png') || logo.includes('.jpeg');\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para obtener premios del mes actual\r\n    const obtenerPremiosDelMes = (): any[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        const fechaActual = new Date();\r\n        const clavePremios = `premios_mensuales_${fechaActual.getFullYear()}_${(fechaActual.getMonth() + 1).toString().padStart(2, '0')}`;\r\n\r\n        const premiosGuardados = localStorage.getItem(clavePremios);\r\n        if (premiosGuardados) {\r\n            try {\r\n                const parsed = JSON.parse(premiosGuardados);\r\n\r\n                // Normalizar premios (evitar que el campo `premio` sea un objeto)\r\n                // ‚Äî en versiones anteriores un bug pod√≠a guardar objetos (por ejemplo un evento)\r\n                //   dentro del campo `premio`. Aseguramos que sea siempre un string.\r\n                const normalized = parsed.map((p: any) => {\r\n                    const prem = p?.premio;\r\n                    if (typeof prem === 'object' && prem !== null) {\r\n                        const fallback = normalizarValorPremio(prem);\r\n                        // Console.warn s√≥lo la primera vez que migramos\r\n                        if (!localStorage.getItem(`${clavePremios}_migrated_v1`)) {\r\n                            console.warn('Premio con estructura incorrecta normalizado:', p, ' => ', fallback);\r\n                        }\r\n                        return { ...p, premio: fallback };\r\n                    }\r\n                    return p;\r\n                });\r\n\r\n                // Si hemos normalizado alg√∫n premio, sustituimos los premios guardados\r\n                // por la versi√≥n normalizada y marcamos la migraci√≥n para no repetir el log.\r\n                const needsMigration = normalized.some((p: any, idx: number) => typeof parsed[idx]?.premio === 'object' && parsed[idx]?.premio !== null);\r\n                if (needsMigration && !localStorage.getItem(`${clavePremios}_migrated_v1`)) {\r\n                    try {\r\n                        localStorage.setItem(clavePremios, JSON.stringify(normalized));\r\n                        localStorage.setItem(`${clavePremios}_migrated_v1`, 'true');\r\n                    } catch (e) {\r\n                        console.error('Error guardando premios normalizados en localStorage:', e);\r\n                    }\r\n                }\r\n\r\n                return normalized;\r\n            } catch (error) {\r\n                console.error(\"Error al cargar premios mensuales:\", error);\r\n            }\r\n        }\r\n\r\n        // Si no hay premios guardados, generar autom√°ticamente\r\n        return generarPremiosAutomaticos();\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para generar premios autom√°ticamente\r\n    const generarPremiosAutomaticos = (): any[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        // Obtener ranking del mes actual\r\n        const fechaActual = new Date();\r\n        const rankingMensual = cargarRankingMensual(fechaActual.getFullYear(), fechaActual.getMonth() + 1);\r\n\r\n        if (rankingMensual.length === 0) return [];\r\n\r\n        const premios = [\r\n            {\r\n                posicion: 1,\r\n                emoji: \"ü•á\",\r\n                titulo: \"1er lugar\",\r\n                premio: \"Trofeo digital especial\",\r\n                descripcion: \"Trofeo exclusivo del mes + 100 puntos extra\",\r\n                centro: rankingMensual[0]?.nombre || \"\",\r\n                puntosExtra: 100\r\n            },\r\n            {\r\n                posicion: 2,\r\n                emoji: \"ü•à\",\r\n                titulo: \"2do lugar\",\r\n                premio: \"Certificado de honor\",\r\n                descripcion: \"Certificado digital de excelencia\",\r\n                centro: rankingMensual[1]?.nombre || \"\",\r\n                puntosExtra: 50\r\n            },\r\n            {\r\n                posicion: 3,\r\n                emoji: \"ü•â\",\r\n                titulo: \"3er lugar\",\r\n                premio: \"Menci√≥n especial\",\r\n                descripcion: \"Menci√≥n honor√≠fica en el ranking\",\r\n                centro: rankingMensual[2]?.nombre || \"\",\r\n                puntosExtra: 25\r\n            }\r\n        ];\r\n\r\n        // Agregar premios para Top 10\r\n        for (let i = 3; i < Math.min(10, rankingMensual.length); i++) {\r\n            premios.push({\r\n                posicion: i + 1,\r\n                emoji: \"üèÜ\",\r\n                titulo: `Top ${i + 1}`,\r\n                premio: \"Badge exclusivo\",\r\n                descripcion: `Badge especial \"Top ${i + 1}\" del mes`,\r\n                centro: rankingMensual[i]?.nombre || \"\",\r\n                puntosExtra: 10\r\n            });\r\n        }\r\n\r\n        // Agregar premios de participaci√≥n para todos los centros con actividad\r\n        rankingMensual.forEach((centro, index) => {\r\n            if (index >= 10) { // Despu√©s del Top 10\r\n                premios.push({\r\n                    posicion: index + 1,\r\n                    emoji: \"üìö\",\r\n                    titulo: \"Participaci√≥n\",\r\n                    premio: \"Reconocimiento\",\r\n                    descripcion: \"Reconocimiento por participaci√≥n activa\",\r\n                    centro: centro.nombre,\r\n                    puntosExtra: 5\r\n                });\r\n            }\r\n        });\r\n\r\n        // ‚úÖ ASIGNAR TROFEOS AUTOM√ÅTICAMENTE A LOS CENTROS GANADORES (solo si no se han asignado ya)\r\n        if (!trofeosYaAsignadosEsteMes()) {\r\n            premios.forEach(premio => {\r\n                let idTrofeo = 0;\r\n                switch (premio.posicion) {\r\n                    case 1: idTrofeo = 25; break; // Campe√≥n Mensual\r\n                    case 2: idTrofeo = 26; break; // Subcampe√≥n Mensual\r\n                    case 3: idTrofeo = 27; break; // Tercer Lugar Mensual\r\n                    default:\r\n                        if (premio.posicion <= 10) {\r\n                            idTrofeo = 28; // Top 10 Mensual\r\n                        } else {\r\n                            idTrofeo = 29; // Participante Activo\r\n                        }\r\n                        break;\r\n                }\r\n                if (idTrofeo > 0 && premio.centro) {\r\n                    asignarTrofeoACentro(premio.centro, idTrofeo);\r\n                }\r\n            });\r\n            marcarTrofeosAsignadosEsteMes();\r\n        }\r\n\r\n        // Guardar premios generados\r\n        const clavePremios = `premios_mensuales_${fechaActual.getFullYear()}_${(fechaActual.getMonth() + 1).toString().padStart(2, '0')}`;\r\n        localStorage.setItem(clavePremios, JSON.stringify(premios));\r\n\r\n        return premios;\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para asignar trofeos a usuarios de un centro\r\n    const asignarTrofeoACentro = (nombreCentro: string, idTrofeo: number): void => {\r\n        if (typeof window === \"undefined\") return;\r\n\r\n        try {\r\n            const usersStr = localStorage.getItem(\"users\");\r\n            if (!usersStr) return;\r\n\r\n            const users = JSON.parse(usersStr);\r\n            let usuariosActualizados = false;\r\n\r\n            // Asignar trofeo a todos los usuarios del centro\r\n            users.forEach((user: any) => {\r\n                if (user.centro === nombreCentro) {\r\n                    if (!user.trofeos) {\r\n                        user.trofeos = [];\r\n                    }\r\n                    if (!user.trofeos.includes(idTrofeo)) {\r\n                        user.trofeos.push(idTrofeo);\r\n                        usuariosActualizados = true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (usuariosActualizados) {\r\n                localStorage.setItem(\"users\", JSON.stringify(users));\r\n                console.log(`üèÜ Trofeo ${idTrofeo} asignado a usuarios del centro ${nombreCentro}`);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error asignando trofeo:\", error);\r\n        }\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para verificar si los trofeos ya fueron asignados este mes\r\n    const trofeosYaAsignadosEsteMes = (): boolean => {\r\n        if (typeof window === \"undefined\") return false;\r\n\r\n        const fechaActual = new Date();\r\n        const claveTrofeosAsignados = `trofeos_asignados_${fechaActual.getFullYear()}_${(fechaActual.getMonth() + 1).toString().padStart(2, '0')}`;\r\n\r\n        return localStorage.getItem(claveTrofeosAsignados) === 'true';\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para marcar que los trofeos fueron asignados este mes\r\n    const marcarTrofeosAsignadosEsteMes = (): void => {\r\n        if (typeof window === \"undefined\") return;\r\n\r\n        const fechaActual = new Date();\r\n        const claveTrofeosAsignados = `trofeos_asignados_${fechaActual.getFullYear()}_${(fechaActual.getMonth() + 1).toString().padStart(2, '0')}`;\r\n\r\n        localStorage.setItem(claveTrofeosAsignados, 'true');\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para verificar si un centro gan√≥ premio\r\n    const obtenerPremioDelCentro = (nombreCentro: string): any => {\r\n        const premiosDelMes = obtenerPremiosDelMes();\r\n        return premiosDelMes.find(premio => premio.centro === nombreCentro);\r\n    };\r\n\r\n    // Normaliza un valor de premio para asegurarnos de devolver siempre una cadena\r\n    const normalizarValorPremio = (valor: any): string => {\r\n        if (valor == null) return \"\";\r\n        if (typeof valor === 'string') return valor;\r\n        if (typeof valor === 'number') return String(valor);\r\n        if (typeof valor === 'object') {\r\n            return valor.nombre || valor.titulo || valor.descripcion || JSON.stringify(valor);\r\n        }\r\n        return String(valor);\r\n    };\r\n\r\n    // Funci√≥n para obtener informaci√≥n del ciclo mensual\r\n    const obtenerInfoCicloMensual = () => {\r\n        const hoy = new Date();\r\n        const a√±oActual = hoy.getFullYear();\r\n        const mesActual = hoy.getMonth(); // 0-11\r\n        const diaActual = hoy.getDate();\r\n\r\n        // Calcular d√≠as restantes hasta fin de mes\r\n        const ultimoDiaDelMes = new Date(a√±oActual, mesActual + 1, 0).getDate();\r\n        const diasRestantes = ultimoDiaDelMes - diaActual + 1;\r\n\r\n        // Calcular progreso del mes\r\n        const progresoDelMes = Math.round((diaActual / ultimoDiaDelMes) * 100);\r\n\r\n        // Pr√≥ximo mes\r\n        const proximoMes = new Date(a√±oActual, mesActual + 1, 1);\r\n        const nombreProximoMes = proximoMes.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' });\r\n\r\n        return {\r\n            diasRestantes,\r\n            progresoDelMes,\r\n            nombreProximoMes\r\n        };\r\n    };\r\n\r\n    // Funci√≥n para generar clave de mes para localStorage\r\n    const generarClaveMes = (a√±o: number, mes: number): string => {\r\n        return `centros_ranking_${a√±o}_${mes.toString().padStart(2, '0')}`;\r\n    };\r\n\r\n    // Funci√≥n para obtener meses disponibles en historial\r\n    const obtenerMesesDisponibles = (): string[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        const meses = [];\r\n        const fechaActual = new Date();\r\n\r\n        // Agregar mes actual\r\n        const mesActual = `${fechaActual.getFullYear()}-${(fechaActual.getMonth() + 1).toString().padStart(2, '0')}`;\r\n        meses.push(mesActual);\r\n\r\n        // Buscar meses anteriores en localStorage\r\n        for (let i = 1; i <= 12; i++) {\r\n            const fecha = new Date(fechaActual);\r\n            fecha.setMonth(fecha.getMonth() - i);\r\n            const claveMes = generarClaveMes(fecha.getFullYear(), fecha.getMonth() + 1);\r\n\r\n            if (localStorage.getItem(claveMes)) {\r\n                const mesString = `${fecha.getFullYear()}-${(fecha.getMonth() + 1).toString().padStart(2, '0')}`;\r\n                meses.push(mesString);\r\n            }\r\n        }\r\n\r\n        return meses;\r\n    };\r\n\r\n    // Funci√≥n para guardar ranking mensual en historial\r\n    const guardarRankingMensual = (centros: CentroStats[]) => {\r\n        if (typeof window === \"undefined\") return;\r\n\r\n        const fechaActual = new Date();\r\n        const claveMes = generarClaveMes(fechaActual.getFullYear(), fechaActual.getMonth() + 1);\r\n\r\n        const datosRanking = {\r\n            fecha: fechaActual.toISOString(),\r\n            a√±o: fechaActual.getFullYear(),\r\n            mes: fechaActual.getMonth() + 1,\r\n            centros: centros,\r\n            ganador: centros[0]?.nombre || \"N/A\"\r\n        };\r\n\r\n        localStorage.setItem(claveMes, JSON.stringify(datosRanking));\r\n    };\r\n\r\n    // Funci√≥n para cargar ranking de un mes espec√≠fico\r\n    const cargarRankingMensual = (a√±o: number, mes: number): CentroStats[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        const claveMes = generarClaveMes(a√±o, mes);\r\n        const datos = localStorage.getItem(claveMes);\r\n\r\n        if (datos) {\r\n            try {\r\n                const ranking = JSON.parse(datos);\r\n                return ranking.centros || [];\r\n            } catch (error) {\r\n                console.error(\"Error al cargar ranking mensual:\", error);\r\n            }\r\n        }\r\n\r\n        return [];\r\n    };\r\n\r\n    // Funci√≥n para calcular ranking anual acumulativo\r\n    const calcularRankingAnual = (): CentroStats[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        const fechaActual = new Date();\r\n        const a√±oActual = fechaActual.getFullYear();\r\n        const centrosAcumulados: { [nombre: string]: CentroStats } = {};\r\n\r\n        // Sumar puntos de todos los meses del a√±o actual\r\n        for (let mes = 1; mes <= 12; mes++) {\r\n            const rankingMensual = cargarRankingMensual(a√±oActual, mes);\r\n\r\n            rankingMensual.forEach(centro => {\r\n                if (!centrosAcumulados[centro.nombre]) {\r\n                    centrosAcumulados[centro.nombre] = {\r\n                        ...centro,\r\n                        puntajeTotal: 0,\r\n                        ranking: 0\r\n                    };\r\n                }\r\n\r\n                centrosAcumulados[centro.nombre].puntajeTotal += centro.puntajeTotal;\r\n                centrosAcumulados[centro.nombre].respuestasCorrectas += centro.respuestasCorrectas;\r\n                centrosAcumulados[centro.nombre].concursosGanados += centro.concursosGanados;\r\n                centrosAcumulados[centro.nombre].historiasCreadas += centro.historiasCreadas;\r\n                centrosAcumulados[centro.nombre].interaccionesSociales += centro.interaccionesSociales;\r\n            });\r\n        }\r\n\r\n        // Convertir a array y ordenar\r\n        const centrosArray = Object.values(centrosAcumulados)\r\n            .sort((a, b) => b.puntajeTotal - a.puntajeTotal);\r\n\r\n        // Asignar medallas y rankings\r\n        return asignarMedallas(centrosArray);\r\n    };\r\n\r\n    // Funci√≥n para obtener historial de ganadores\r\n    const obtenerHistorialGanadores = (): any[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        const historial = [];\r\n        const fechaActual = new Date();\r\n\r\n        for (let i = 0; i < 12; i++) {\r\n            const fecha = new Date(fechaActual);\r\n            fecha.setMonth(fecha.getMonth() - i);\r\n\r\n            const rankingMensual = cargarRankingMensual(fecha.getFullYear(), fecha.getMonth() + 1);\r\n\r\n            if (rankingMensual.length > 0 && rankingMensual[0]) {\r\n                const ganador = rankingMensual[0];\r\n                historial.push({\r\n                    a√±o: fecha.getFullYear(),\r\n                    mes: fecha.toLocaleDateString('es-ES', { month: 'long' }),\r\n                    centro: ganador.nombre || \"Centro Desconocido\",\r\n                    puntaje: ganador.puntajeTotal || 0,\r\n                    ranking: 1\r\n                });\r\n            }\r\n        }\r\n\r\n        return historial;\r\n    };\r\n    const asignarMedallas = (centrosOrdenados: CentroStats[]): CentroStats[] => {\r\n        return centrosOrdenados.map((centro, index) => {\r\n            let medalla = \"\";\r\n            if (index === 0) medalla = \"ü•á\";\r\n            else if (index === 1) medalla = \"ü•à\";\r\n            else if (index === 2) medalla = \"ü•â\";\r\n            else if (index < 10) medalla = \"üèÜ\";\r\n            else medalla = \"üìö\";\r\n\r\n            return {\r\n                ...centro,\r\n                ranking: index + 1,\r\n                medalla\r\n            };\r\n        });\r\n    };\r\n\r\n    // Cargar datos y calcular estad√≠sticas\r\n    useEffect(() => {\r\n        const cargarDatos = () => {\r\n            try {\r\n                // Cargar usuario actual\r\n                const userData = localStorage.getItem('currentUser') || localStorage.getItem('user');\r\n                if (userData) {\r\n                    const user = JSON.parse(userData);\r\n                    setUsuario(user);\r\n                    setMiCentro(user.centro || \"\");\r\n                }\r\n\r\n                // Cargar datos hist√≥ricos\r\n                const mesesDisponibles = obtenerMesesDisponibles();\r\n                setMesesDisponibles(mesesDisponibles);\r\n\r\n                const historialGanadores = obtenerHistorialGanadores();\r\n                setHistorialGanadores(historialGanadores);\r\n\r\n                // Cargar todos los usuarios\r\n                const usuariosData = localStorage.getItem('users');\r\n                if (!usuariosData) {\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                const usuarios: Usuario[] = JSON.parse(usuariosData);\r\n\r\n                // ‚úÖ VERIFICAR SI HAY DATOS PARA LA ASIGNATURA SELECCIONADA\r\n                if (asignaturaSeleccionada !== \"todas\") {\r\n                    // Verificar si hay datos espec√≠ficos por asignatura\r\n                    const mapaAsignaturasInverso: { [key: string]: string } = {\r\n                        'Matem√°ticas': 'matematicas',\r\n                        'Historia': 'historia',\r\n                        'Geograf√≠a': 'geografia',\r\n                        'Literatura': 'literatura',\r\n                        'Ingl√©s': 'ingles',\r\n                        'Naturaleza': 'naturaleza',\r\n                        'Lenguaje': 'lenguaje',\r\n                        'General': 'general'\r\n                    };\r\n                    const asignaturaParaLocalStorage = mapaAsignaturasInverso[asignaturaSeleccionada] || asignaturaSeleccionada.toLowerCase();\r\n\r\n                    let hayDatosEspecificos = false;\r\n                    for (let i = 0; i < localStorage.length; i++) {\r\n                        const clave = localStorage.key(i);\r\n                        if (clave && clave.startsWith(`${asignaturaParaLocalStorage}_`)) {\r\n                            const valor = localStorage.getItem(clave);\r\n                            if (valor && parseInt(valor, 10) > 0) {\r\n                                hayDatosEspecificos = true;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    setHayDatosAsignatura(hayDatosEspecificos);\r\n                } else {\r\n                    setHayDatosAsignatura(true);\r\n                }\r\n\r\n                // Obtener lista √∫nica de centros\r\n                const centrosUnicos = [...new Set(usuarios\r\n                    .filter(u => u.centro && u.centro.trim() !== \"\")\r\n                    .map(u => u.centro))];\r\n\r\n                // Calcular estad√≠sticas para cada centro\r\n                const statsDeLosCentros = centrosUnicos.map(nombreCentro =>\r\n                    calcularStatsDelCentro(nombreCentro, usuarios)\r\n                );\r\n\r\n                // Ordenar por puntuaci√≥n y asignar medallas\r\n                const centrosOrdenados = statsDeLosCentros\r\n                    .sort((a, b) => b.puntajeTotal - a.puntajeTotal);\r\n\r\n                const centrosConMedallas = asignarMedallas(centrosOrdenados);\r\n\r\n                // Manejar diferentes modos de visualizaci√≥n\r\n                if (modoVisualizacion === 'anual') {\r\n                    const centrosAnuales = calcularRankingAnual();\r\n                    setCentrosAnuales(centrosAnuales);\r\n                } else if (mesSeleccionado && mesesDisponibles.includes(mesSeleccionado)) {\r\n                    // Cargar ranking de mes espec√≠fico\r\n                    // Extraer a√±o y mes del formato \"Enero 2024\"\r\n                    const partes = mesSeleccionado.split(' ');\r\n                    const nombreMes = partes[0];\r\n                    const a√±o = parseInt(partes[1]) || fechaActual.getFullYear();\r\n\r\n                    // Convertir nombre de mes a n√∫mero\r\n                    const mesesNombres = [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\",\r\n                        \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"];\r\n                    const numeroMes = mesesNombres.indexOf(nombreMes) + 1;\r\n\r\n                    if (numeroMes > 0) {\r\n                        const rankingMes = cargarRankingMensual(a√±o, numeroMes);\r\n                        if (rankingMes.length > 0) {\r\n                            setCentros(rankingMes);\r\n                        } else {\r\n                            setCentros(centrosConMedallas);\r\n                        }\r\n                    } else {\r\n                        setCentros(centrosConMedallas);\r\n                    }\r\n                } else {\r\n                    // Mes actual\r\n                    setCentros(centrosConMedallas);\r\n                    // Guardar ranking mensual autom√°ticamente\r\n                    guardarRankingMensual(centrosConMedallas);\r\n                }\r\n\r\n                // Cargar historial de ganadores\r\n                setHistorialGanadores(obtenerHistorialGanadores());\r\n\r\n                // Cargar premios del mes\r\n                setPremiosDelMes(obtenerPremiosDelMes());\r\n\r\n                setLoading(false);\r\n\r\n            } catch (error) {\r\n                console.error(\"Error cargando datos de competencia entre centros:\", error);\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        cargarDatos();\r\n    }, [modoVisualizacion, mesSeleccionado, asignaturaSeleccionada, cursoSeleccionado]);\r\n\r\n    // ‚úÖ DETECTAR EVENTOS ESPECIALES (vacaciones y challenges) - separado para que se ejecute en el mount\r\n    useEffect(() => {\r\n        // ‚úÖ DETECTAR MODO VACACIONES AUTOM√ÅTICAMENTE\r\n        const periodoVacaciones = detectarPeriodoVacaciones();\r\n        setModoVacaciones(periodoVacaciones.esVacacion);\r\n        setTipoVacacion(periodoVacaciones.tipo);\r\n\r\n        // Normalizamos la estructura de evento para evitar pasar objetos enteros\r\n        // directamente al renderizado (causa el error: Objects are not valid as a React child).\r\n        let eventoNormalizado: any = null;\r\n        if (periodoVacaciones.esVacacion && periodoVacaciones.evento) {\r\n            eventoNormalizado = {\r\n                nombre: periodoVacaciones.tipo,\r\n                descripcion: periodoVacaciones.evento.descripcion || \"\",\r\n                emoji: periodoVacaciones.evento.emoji || \"\",\r\n                tipo: \"vacacion\",\r\n                multiplicador: periodoVacaciones.evento.multiplicador || 1\r\n            };\r\n        }\r\n\r\n        // ‚úÖ DETECTAR CHALLENGE ESPECIAL\r\n        const challengeActual = obtenerChallengeActual();\r\n        if (challengeActual && !periodoVacaciones.esVacacion) {\r\n            // Tambi√©n normalizamos el challenge para que tenga campos consistentes\r\n            const challengeNormalizado = {\r\n                nombre: challengeActual.nombre || \"\",\r\n                descripcion: challengeActual.bonus || \"\",\r\n                emoji: challengeActual.emoji || \"\",\r\n                tipo: \"challenge\"\r\n            };\r\n            eventoNormalizado = challengeNormalizado;\r\n        }\r\n\r\n        setEventoEspecial(eventoNormalizado);\r\n    }, []); // Sin dependencias para que se ejecute solo en mount\r\n\r\n    // Obtener el centro del usuario actual\r\n    const centroDelUsuario = centros.find(c => c.nombre === miCentro);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 flex items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                    <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4\"></div>\r\n                    <p className=\"text-blue-600 font-semibold\">Cargando competencia entre centros...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 p-8\">\r\n            <div className=\"max-w-7xl mx-auto\">\r\n                {/* Header */}\r\n                <div className=\"text-center mb-8\">\r\n                    <h1 className=\"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-green-600 mb-4\">\r\n                        üè´ Liga de Centros Educativos\r\n                    </h1>\r\n                    <p className=\"text-lg text-gray-600 max-w-2xl mx-auto\">\r\n                        Competencia amistosa entre centros escolares. ¬°Trabajad en equipo para llevar vuestro centro a la cima!\r\n                    </p>\r\n                </div>\r\n\r\n                {/* ‚úÖ MODO VACACIONES: Banner especial */}\r\n                {modoVacaciones && eventoEspecial && (\r\n                    <div className=\"mb-8 bg-gradient-to-r from-orange-100 to-red-100 border-2 border-orange-300 rounded-xl p-6 shadow-lg animate-pulse\">\r\n                        <div className=\"text-center\">\r\n                            <h2 className=\"text-2xl font-bold text-orange-800 mb-2 flex items-center justify-center gap-2\">\r\n                                {eventoEspecial.emoji} ¬°{tipoVacacion} Activas! {eventoEspecial.emoji}\r\n                            </h2>\r\n                            <p className=\"text-lg text-orange-700 mb-4\">\r\n                                {eventoEspecial.descripcion}\r\n                            </p>\r\n                            <div className=\"bg-white bg-opacity-60 rounded-lg p-4 inline-block\">\r\n                                <p className=\"text-sm font-semibold text-orange-900\">\r\n                                    {eventoEspecial.tipo === 'vacacion' && eventoEspecial.multiplicador && (\r\n                                        <>üöÄ <strong>Multiplicador Activo:</strong> x{eventoEspecial.multiplicador}</>\r\n                                    )}\r\n                                </p>\r\n                                <p className=\"text-xs text-orange-800 mt-1\">\r\n                                    Todas las actividades dan puntos extra durante este per√≠odo especial\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* ‚úÖ CHALLENGE ESPECIAL: Banner de evento tem√°tico */}\r\n                {!modoVacaciones && eventoEspecial && eventoEspecial.nombre && (\r\n                    <div className=\"mb-8 bg-gradient-to-r from-purple-100 to-pink-100 border-2 border-purple-300 rounded-xl p-6 shadow-lg\">\r\n                        <div className=\"text-center\">\r\n                            <h2 className=\"text-xl font-bold text-purple-800 mb-2 flex items-center justify-center gap-2\">\r\n                                {eventoEspecial.emoji} {eventoEspecial.nombre} {eventoEspecial.emoji}\r\n                            </h2>\r\n                            <p className=\"text-purple-700 font-semibold\">\r\n                                üéÅ <strong>Bonus Especial:</strong> {eventoEspecial.descripcion}\r\n                            </p>\r\n                            <p className=\"text-xs text-purple-600 mt-2\">\r\n                                ¬°Evento limitado! Aprovecha para ganar puntos extra\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Controles de Navegaci√≥n Temporal */}\r\n                <div className=\"mb-8 bg-white rounded-lg shadow-lg border border-gray-200 p-6\">\r\n                    <div className=\"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between\">\r\n                        {/* Selector de Modo */}\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <label className=\"text-sm font-semibold text-gray-700\">Ver datos:</label>\r\n                            <div className=\"flex gap-2\">\r\n                                <button\r\n                                    onClick={() => setModoVisualizacion('actual')}\r\n                                    className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${modoVisualizacion === 'actual'\r\n                                        ? 'bg-blue-600 text-white shadow-lg'\r\n                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                                        }`}\r\n                                >\r\n                                    üìÖ Mes Actual\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setModoVisualizacion('historico')}\r\n                                    className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${modoVisualizacion === 'historico'\r\n                                        ? 'bg-blue-600 text-white shadow-lg'\r\n                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                                        }`}\r\n                                >\r\n                                    üìä Hist√≥rico\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setModoVisualizacion('anual')}\r\n                                    className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${modoVisualizacion === 'anual'\r\n                                        ? 'bg-blue-600 text-white shadow-lg'\r\n                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                                        }`}\r\n                                >\r\n                                    üèÜ Ranking Anual\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* ‚úÖ COMPETENCIAS POR ASIGNATURA: Selector de materia */}\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <label className=\"text-sm font-semibold text-gray-700\">Filtrar por asignatura:</label>\r\n                            <select\r\n                                value={asignaturaSeleccionada}\r\n                                onChange={(e) => setAsignaturaSeleccionada(e.target.value)}\r\n                                className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white\"\r\n                            >\r\n                                <option value=\"todas\">üìö Todas las asignaturas</option>\r\n                                <option value=\"Matem√°ticas\">üî¢ Matem√°ticas</option>\r\n                                <option value=\"Lenguaje\">üìù Lenguaje</option>\r\n                                <option value=\"Literatura\">üìñ Literatura</option>\r\n                                <option value=\"Historia\">üèõÔ∏è Historia</option>\r\n                                <option value=\"Geograf√≠a\">üó∫Ô∏è Geograf√≠a</option>\r\n                                <option value=\"Naturaleza\">üåø Ciencias Naturales</option>\r\n                                <option value=\"Ingl√©s\">üá¨üáß Ingl√©s</option>\r\n                                <option value=\"General\">üéØ General</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* ‚úÖ FILTRO POR CURSO: Selector de curso */}\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <label className=\"text-sm font-semibold text-gray-700\">Filtrar por curso:</label>\r\n                            <select\r\n                                value={cursoSeleccionado}\r\n                                onChange={(e) => setCursoSeleccionado(e.target.value)}\r\n                                className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white\"\r\n                            >\r\n                                <option value=\"todos\">üë• Todos los cursos</option>\r\n                                <option value=\"1¬∫ Primaria\">1Ô∏è‚É£ 1¬∫ Primaria</option>\r\n                                <option value=\"2¬∫ Primaria\">2Ô∏è‚É£ 2¬∫ Primaria</option>\r\n                                <option value=\"3¬∫ Primaria\">3Ô∏è‚É£ 3¬∫ Primaria</option>\r\n                                <option value=\"4¬∫ Primaria\">4Ô∏è‚É£ 4¬∫ Primaria</option>\r\n                                <option value=\"5¬∫ Primaria\">5Ô∏è‚É£ 5¬∫ Primaria</option>\r\n                                <option value=\"6¬∫ Primaria\">6Ô∏è‚É£ 6¬∫ Primaria</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Selector de Mes (solo en modo hist√≥rico) */}\r\n                        {modoVisualizacion === 'historico' && mesesDisponibles.length > 0 && (\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <label className=\"text-sm font-semibold text-gray-700\">Mes:</label>\r\n                                <select\r\n                                    value={mesSeleccionado}\r\n                                    onChange={(e) => setMesSeleccionado(e.target.value)}\r\n                                    className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                >\r\n                                    <option value=\"\">Seleccionar mes</option>\r\n                                    {mesesDisponibles.map((mes) => (\r\n                                        <option key={mes} value={mes}>\r\n                                            {mes}\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Indicador del per√≠odo actual */}\r\n                    <div className=\"mt-4 text-center\">\r\n                        {modoVisualizacion === 'actual' && (\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                üìÖ <strong>Mostrando:</strong> Competencia del mes actual ({fechaActual.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })})\r\n                            </p>\r\n                        )}\r\n                        {modoVisualizacion === 'historico' && mesSeleccionado && (\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                üìä <strong>Mostrando:</strong> Resultados hist√≥ricos de {mesSeleccionado}\r\n                            </p>\r\n                        )}\r\n                        {modoVisualizacion === 'anual' && (\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                üèÜ <strong>Mostrando:</strong> Ranking acumulativo anual (a√±o {fechaActual.getFullYear()})\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Mi Centro - Destacado */}\r\n                {centroDelUsuario && (\r\n                    <div className=\"mb-8 bg-gradient-to-r from-yellow-50 to-orange-50 border-l-4 border-yellow-400 rounded-lg p-6 shadow-lg\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div>\r\n                                <h3 className=\"text-xl font-bold text-yellow-800 mb-2 flex items-center\">\r\n                                    {esImagen(obtenerLogoCentro(centroDelUsuario.nombre)) ? (\r\n                                        <img\r\n                                            src={`/${obtenerLogoCentro(centroDelUsuario.nombre)}`}\r\n                                            alt={`Logo ${centroDelUsuario.nombre}`}\r\n                                            className=\"w-12 h-12 object-contain rounded-lg border-2 border-yellow-400 mr-3\"\r\n                                        />\r\n                                    ) : (\r\n                                        <span className=\"text-2xl mr-3\">{obtenerLogoCentro(centroDelUsuario.nombre)}</span>\r\n                                    )}\r\n                                    üè† Tu Centro: {centroDelUsuario.nombre}\r\n                                </h3>\r\n                                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\r\n                                    <div>\r\n                                        <span className=\"font-semibold text-yellow-700\">Ranking:</span>\r\n                                        <span className=\"ml-2 text-lg\">{centroDelUsuario.medalla} #{centroDelUsuario.ranking}</span>\r\n                                    </div>\r\n                                    <div>\r\n                                        <span className=\"font-semibold text-yellow-700\">Puntuaci√≥n:</span>\r\n                                        <span className=\"ml-2 text-lg font-bold\">{centroDelUsuario.puntajeTotal.toLocaleString()}</span>\r\n                                    </div>\r\n                                    <div>\r\n                                        <span className=\"font-semibold text-yellow-700\">Miembros:</span>\r\n                                        <span className=\"ml-2\">{centroDelUsuario.estudiantesActivos}/{centroDelUsuario.estudiantes}</span>\r\n                                        <div className=\"text-xs text-yellow-600\">estudiantes + docentes</div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <span className=\"font-semibold text-yellow-700\">Concursos:</span>\r\n                                        <span className=\"ml-2\">{centroDelUsuario.concursosGanados}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* ‚úÖ PREMIOS DEL CENTRO: Secci√≥n especial para premios ganados */}\r\n                {centroDelUsuario && (() => {\r\n                    const premioCentro = obtenerPremioDelCentro(centroDelUsuario.nombre);\r\n                    return premioCentro ? (\r\n                        <div className=\"mb-8 bg-gradient-to-r from-purple-50 to-pink-50 border-l-4 border-purple-400 rounded-lg p-6 shadow-lg\">\r\n                            <div className=\"flex items-center\">\r\n                                <div className=\"text-4xl mr-4\">üéâ</div>\r\n                                <div>\r\n                                    <h3 className=\"text-xl font-bold text-purple-800 mb-2\">\r\n                                        ¬°Felicitaciones! Tu centro ha ganado un premio\r\n                                    </h3>\r\n                                    <div className=\"bg-white bg-opacity-60 rounded-lg p-4 inline-block\">\r\n                                        <div className=\"flex items-center mb-2\">\r\n                                            <span className=\"text-2xl mr-2\">{premioCentro.emoji}</span>\r\n                                            <span className=\"font-bold text-purple-800\">{premioCentro.titulo}:</span>\r\n                                            <span className=\"ml-2 text-purple-700\">{normalizarValorPremio(premioCentro.premio)}</span>\r\n                                        </div>\r\n                                        <p className=\"text-sm text-purple-600 mb-2\">{premioCentro.descripcion}</p>\r\n                                        <div className=\"space-y-1\">\r\n                                            <p className=\"text-sm font-semibold text-purple-800\">\r\n                                                üèÜ <strong>Bonus obtenido:</strong> +{premioCentro.puntosExtra} puntos extra\r\n                                            </p>\r\n                                            <p className=\"text-sm text-purple-700 bg-purple-100 px-2 py-1 rounded inline-block\">\r\n                                                üèÖ <strong>Insignia autom√°tica:</strong> Asignada a todos los miembros del centro\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ) : null;\r\n                })()}\r\n\r\n                {/* ‚úÖ GR√ÅFICOS DE PROGRESO: Visualizaci√≥n avanzada de estad√≠sticas */}\r\n                <div className=\"mb-8 bg-gradient-to-br from-cyan-50 to-blue-50 border border-cyan-200 rounded-lg p-6 shadow-lg\">\r\n                    <h3 className=\"text-xl font-bold text-cyan-800 mb-6 flex items-center\">\r\n                        üìä Gr√°ficos de Progreso y An√°lisis\r\n                    </h3>\r\n\r\n                    {/* Top 3 Centros con Barras de Progreso */}\r\n                    <div className=\"mb-6\">\r\n                        <h4 className=\"text-lg font-semibold text-cyan-700 mb-4\">üèÜ Top 3 Centros - Barras de Progreso</h4>\r\n                        <div className=\"space-y-4\">\r\n                            {centros.slice(0, 3).map((centro, index) => {\r\n                                const maxPuntos = centros[0]?.puntajeTotal || 1;\r\n                                const porcentaje = (centro.puntajeTotal / maxPuntos) * 100;\r\n                                const colores = [\"from-yellow-400 to-orange-500\", \"from-gray-400 to-gray-600\", \"from-orange-400 to-red-500\"];\r\n\r\n                                return (\r\n                                    <div key={centro.nombre} className=\"bg-white rounded-lg p-4 shadow-sm\">\r\n                                        <div className=\"flex items-center justify-between mb-2\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <span className=\"text-2xl\">{centro.medalla}</span>\r\n                                                <span className=\"font-bold text-gray-800\">{centro.nombre}</span>\r\n                                            </div>\r\n                                            <span className=\"text-lg font-bold text-cyan-600\">\r\n                                                {centro.puntajeTotal.toLocaleString()} pts\r\n                                            </span>\r\n                                        </div>\r\n\r\n                                        {/* Barra de progreso animada */}\r\n                                        <div className=\"w-full bg-gray-200 rounded-full h-4 overflow-hidden\">\r\n                                            <div\r\n                                                className={`h-full bg-gradient-to-r ${colores[index]} transition-all duration-1000 ease-out rounded-full`}\r\n                                                style={{ width: `${porcentaje}%` }}\r\n                                            ></div>\r\n                                        </div>\r\n                                        <div className=\"text-xs text-gray-600 mt-1\">\r\n                                            {porcentaje.toFixed(1)}% del m√°ximo\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Estad√≠sticas por Asignatura */}\r\n                    {asignaturaSeleccionada !== \"todas\" && (\r\n                        <div className=\"mb-6\">\r\n                            <h4 className=\"text-lg font-semibold text-cyan-700 mb-4\">\r\n                                üìö An√°lisis Espec√≠fico: {asignaturaSeleccionada.charAt(0).toUpperCase() + asignaturaSeleccionada.slice(1)}\r\n                            </h4>\r\n\r\n                            {hayDatosAsignatura ? (\r\n                                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                                    <p className=\"text-sm text-blue-800\">\r\n                                        üîç <strong>Vista filtrada por asignatura:</strong> Mostrando solo actividad relacionada con {asignaturaSeleccionada}\r\n                                    </p>\r\n                                    <p className=\"text-xs text-blue-600 mt-2\">\r\n                                        Los puntos de respuestas correctas corresponden √∫nicamente a preguntas de esta materia espec√≠fica.\r\n                                        Las dem√°s m√©tricas (concursos, historias, interacciones) se muestran proporcionalmente.\r\n                                    </p>\r\n                                    <div className=\"mt-3 text-xs text-blue-500 bg-blue-100 rounded p-2\">\r\n                                        üí° <strong>Tip:</strong> Para ver el rendimiento completo de todos los centros, selecciona \"üìö todas las asignaturas\"\r\n                                    </div>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\r\n                                    <p className=\"text-sm text-orange-800\">\r\n                                        üìä <strong>Sin datos espec√≠ficos:</strong> A√∫n no hay actividad registrada para {asignaturaSeleccionada}\r\n                                    </p>\r\n                                    <p className=\"text-xs text-orange-600 mt-2\">\r\n                                        Los rankings mostrados son estimaciones basadas en el rendimiento general de cada centro.\r\n                                        Los datos reales aparecer√°n cuando los usuarios respondan preguntas de esta materia.\r\n                                    </p>\r\n                                    <div className=\"mt-3 text-xs text-orange-500 bg-orange-100 rounded p-2\">\r\n                                        üéØ <strong>Para generar datos reales:</strong> Los usuarios deben participar en competencias o responder preguntas espec√≠ficas de {asignaturaSeleccionada}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* M√©tricas de Participaci√≥n */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                        <div className=\"bg-white rounded-lg p-4 shadow-sm border-l-4 border-green-500\">\r\n                            <div className=\"text-sm font-semibold text-green-700\">Total de Centros</div>\r\n                            <div className=\"text-2xl font-bold text-green-800\">{centros.length}</div>\r\n                            <div className=\"text-xs text-green-600\">Participando en la liga</div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white rounded-lg p-4 shadow-sm border-l-4 border-blue-500\">\r\n                            <div className=\"text-sm font-semibold text-blue-700\">Puntuaci√≥n Total</div>\r\n                            <div className=\"text-2xl font-bold text-blue-800\">\r\n                                {centros.reduce((total, centro) => total + centro.puntajeTotal, 0).toLocaleString()}\r\n                            </div>\r\n                            <div className=\"text-xs text-blue-600\">Puntos acumulados</div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white rounded-lg p-4 shadow-sm border-l-4 border-purple-500\">\r\n                            <div className=\"text-sm font-semibold text-purple-700\">Promedio de Centro</div>\r\n                            <div className=\"text-2xl font-bold text-purple-800\">\r\n                                {Math.round(centros.reduce((total, centro) => total + centro.puntajeTotal, 0) / centros.length || 0).toLocaleString()}\r\n                            </div>\r\n                            <div className=\"text-xs text-purple-600\">Puntos por centro</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Informaci√≥n del Ciclo Mensual */}\r\n                <div className=\"mb-8 bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-6\">\r\n                    <h3 className=\"text-lg font-bold text-indigo-800 mb-4 flex items-center\">\r\n                        üìÖ Informaci√≥n del Ciclo de Competencia\r\n                    </h3>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                        <div className=\"bg-white rounded-lg p-4 border border-indigo-200\">\r\n                            <div className=\"text-sm text-indigo-600 font-semibold\">Mes Actual</div>\r\n                            <div className=\"text-xl font-bold text-indigo-800\">\r\n                                {new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}\r\n                            </div>\r\n                            <div className=\"text-sm text-indigo-600 mt-1\">\r\n                                Progreso: {obtenerInfoCicloMensual().progresoDelMes}%\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white rounded-lg p-4 border border-orange-200\">\r\n                            <div className=\"text-sm text-orange-600 font-semibold\">D√≠as Restantes</div>\r\n                            <div className=\"text-xl font-bold text-orange-800\">\r\n                                {obtenerInfoCicloMensual().diasRestantes} d√≠as\r\n                            </div>\r\n                            <div className=\"text-sm text-orange-600 mt-1\">\r\n                                Hasta pr√≥ximo ranking\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white rounded-lg p-4 border border-green-200\">\r\n                            <div className=\"text-sm text-green-600 font-semibold\">Pr√≥ximo Ciclo</div>\r\n                            <div className=\"text-xl font-bold text-green-800 text-sm\">\r\n                                {obtenerInfoCicloMensual().nombreProximoMes}\r\n                            </div>\r\n                            <div className=\"text-sm text-green-600 mt-1\">\r\n                                Nuevo ranking mensual\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"mt-4 text-xs text-indigo-600 bg-white rounded p-3 border border-indigo-200\">\r\n                        <strong>üìä Ciclo de Competencia:</strong> Los rankings se actualizan autom√°ticamente cada mes.\r\n                        Los puntos se acumulan desde el d√≠a 1 hasta el √∫ltimo d√≠a del mes, creando una competencia fresca cada 30 d√≠as.\r\n                        <strong> ¬°Cada mes es una nueva oportunidad para que tu centro llegue al primer puesto!</strong>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Sistema de Puntuaci√≥n */}\r\n                <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\r\n                    <h3 className=\"text-xl font-bold text-gray-800 mb-4\">üìä Sistema de Puntuaci√≥n</h3>\r\n                    <div className=\"mb-4 p-3 bg-gradient-to-r from-blue-50 to-green-50 rounded-lg border border-blue-200\">\r\n                        <p className=\"text-sm text-gray-700\">\r\n                            <strong>¬°Novedad!</strong> üéâ Ahora los <strong>docentes tambi√©n participan</strong> en el ranking de su centro.\r\n                            ¬°Profesores y estudiantes trabajando juntos por el √©xito del centro!\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-6 gap-4 text-sm\">\r\n                        <div className=\"bg-blue-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-blue-700\">Estudiantes Activos</div>\r\n                            <div className=\"text-2xl font-bold text-blue-800\">10 pts</div>\r\n                            <div className=\"text-xs text-blue-600\">por estudiante activo</div>\r\n                        </div>\r\n                        <div className=\"bg-indigo-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-indigo-700\">Docentes Activos</div>\r\n                            <div className=\"text-2xl font-bold text-indigo-800\">20 pts</div>\r\n                            <div className=\"text-xs text-indigo-600\">por docente activo</div>\r\n                        </div>\r\n                        <div className=\"bg-green-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-green-700\">Respuestas Correctas</div>\r\n                            <div className=\"text-2xl font-bold text-green-800\">5 pts</div>\r\n                            <div className=\"text-xs text-green-600\">estudiantes + docentes</div>\r\n                        </div>\r\n                        <div className=\"bg-yellow-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-yellow-700\">Concursos Ganados</div>\r\n                            <div className=\"text-2xl font-bold text-yellow-800\">50 pts</div>\r\n                            <div className=\"text-xs text-yellow-600\">estudiantes + docentes</div>\r\n                        </div>\r\n                        <div className=\"bg-purple-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-purple-700\">Historias Creadas</div>\r\n                            <div className=\"text-2xl font-bold text-purple-800\">15 pts</div>\r\n                            <div className=\"text-xs text-purple-600\">estudiantes + docentes</div>\r\n                        </div>\r\n                        <div className=\"bg-pink-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-pink-700\">Interacciones</div>\r\n                            <div className=\"text-2xl font-bold text-pink-800\">2 pts</div>\r\n                            <div className=\"text-xs text-pink-600\">likes, amigos, comentarios</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Ranking de Centros */}\r\n                <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\r\n                    <div className=\"bg-gradient-to-r from-blue-600 to-green-600 p-6 text-white\">\r\n                        <h3 className=\"text-2xl font-bold\">\r\n                            üèÜ Ranking de Centros Educativos\r\n                            {asignaturaSeleccionada !== \"todas\" && (\r\n                                <span className=\"text-lg font-normal opacity-90 ml-2\">\r\n                                    - {asignaturaSeleccionada.charAt(0).toUpperCase() + asignaturaSeleccionada.slice(1)}\r\n                                    {!hayDatosAsignatura && <span className=\"text-sm\"> (Estimado)</span>}\r\n                                </span>\r\n                            )}\r\n                            {cursoSeleccionado !== \"todos\" && (\r\n                                <span className=\"text-lg font-normal opacity-90 ml-2\">\r\n                                    - {cursoSeleccionado}\r\n                                </span>\r\n                            )}\r\n                        </h3>\r\n                        <p className=\"opacity-90\">\r\n                            {asignaturaSeleccionada === \"todas\" && cursoSeleccionado === \"todos\"\r\n                                ? `Competencia del mes de ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                                : asignaturaSeleccionada !== \"todas\" && cursoSeleccionado === \"todos\"\r\n                                    ? hayDatosAsignatura\r\n                                        ? `Vista espec√≠fica de ${asignaturaSeleccionada} - ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                                        : `Estimaciones para ${asignaturaSeleccionada} (sin datos espec√≠ficos a√∫n) - ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                                    : asignaturaSeleccionada === \"todas\" && cursoSeleccionado !== \"todos\"\r\n                                        ? `Vista espec√≠fica de ${cursoSeleccionado} - ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                                        : hayDatosAsignatura\r\n                                            ? `Vista espec√≠fica de ${asignaturaSeleccionada} (${cursoSeleccionado}) - ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                                            : `Estimaciones para ${asignaturaSeleccionada} (${cursoSeleccionado}) - ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                            }\r\n                        </p>\r\n                        <div className=\"mt-2 text-sm opacity-80\">\r\n                            üìÖ Se actualiza autom√°ticamente cada mes | üîÑ Datos en tiempo real\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"w-full\">\r\n                            <thead className=\"bg-gray-50\">\r\n                                <tr>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Ranking</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Centro</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Puntuaci√≥n</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Miembros</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Activos</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Respuestas</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Concursos</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Historias</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                                {centros.map((centro, index) => (\r\n                                    <tr\r\n                                        key={centro.nombre}\r\n                                        className={`hover:bg-gray-50 ${centro.nombre === miCentro ? 'bg-yellow-50 border-l-4 border-yellow-400' : ''}`}\r\n                                    >\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <div className=\"flex items-center\">\r\n                                                <span className=\"text-2xl mr-2\">{centro.medalla}</span>\r\n                                                <span className=\"text-lg font-bold text-gray-900\">#{centro.ranking}</span>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <div className=\"flex items-center\">\r\n                                                {esImagen(obtenerLogoCentro(centro.nombre)) ? (\r\n                                                    <img\r\n                                                        src={`/${obtenerLogoCentro(centro.nombre)}`}\r\n                                                        alt={`Logo ${centro.nombre}`}\r\n                                                        className=\"w-10 h-10 object-contain rounded-lg border border-gray-300 mr-3\"\r\n                                                    />\r\n                                                ) : (\r\n                                                    <span className=\"text-2xl mr-3\">{obtenerLogoCentro(centro.nombre)}</span>\r\n                                                )}\r\n                                                <div>\r\n                                                    <div className=\"font-medium text-gray-900\">{centro.nombre}</div>\r\n                                                    {centro.nombre === miCentro && (\r\n                                                        <div className=\"text-sm text-yellow-600\">üëà Tu centro</div>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <div className=\"text-2xl font-bold text-blue-600\">\r\n                                                {centro.puntajeTotal.toLocaleString()}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                                            {centro.estudiantes}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <span className=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800\">\r\n                                                {centro.estudiantesActivos}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                            {centro.respuestasCorrectas}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                            {centro.concursosGanados}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                            {centro.historiasCreadas}\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    {centros.length === 0 && (\r\n                        <div className=\"text-center py-12\">\r\n                            <div className=\"text-gray-400 text-xl mb-4\">üìä</div>\r\n                            <p className=\"text-gray-500\">No hay datos de centros disponibles todav√≠a.</p>\r\n                            <p className=\"text-sm text-gray-400 mt-2\">Los datos aparecer√°n cuando haya actividad de estudiantes.</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Informaci√≥n adicional */}\r\n                <div className=\"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                        <h4 className=\"font-bold text-blue-800 mb-2\">üéØ ¬øC√≥mo Participar?</h4>\r\n                        <ul className=\"text-sm text-blue-700 space-y-1\">\r\n                            <li>‚Ä¢ <strong>Estudiantes y Docentes</strong> pueden participar</li>\r\n                            <li>‚Ä¢ Mantente activo en la plataforma</li>\r\n                            <li>‚Ä¢ Responde preguntas correctamente</li>\r\n                            <li>‚Ä¢ Participa en concursos</li>\r\n                            <li>‚Ä¢ Crea historias interesantes</li>\r\n                            <li>‚Ä¢ Interact√∫a con compa√±eros y profesores</li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                        <h4 className=\"font-bold text-green-800 mb-2\">üèÜ Premios del Mes</h4>\r\n                        {premiosDelMes.length > 0 ? (\r\n                            <div className=\"space-y-2\">\r\n                                {premiosDelMes.slice(0, 10).map((premio, index) => (\r\n                                    <div key={index} className={`flex items-center justify-between p-2 rounded ${premio.centro === miCentro ? 'bg-yellow-100 border border-yellow-300' : 'bg-white'\r\n                                        }`}>\r\n                                        <div className=\"flex items-center\">\r\n                                            <span className=\"text-lg mr-2\">{premio.emoji}</span>\r\n                                            <div>\r\n                                                <span className=\"font-medium text-green-800\">{premio.titulo}:</span>\r\n                                                <span className=\"text-green-700 ml-1\">{premio.premio}</span>\r\n                                                {premio.centro === miCentro && (\r\n                                                    <span className=\"text-yellow-600 font-bold ml-2\">üéâ ¬°Tu centro!</span>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"text-right\">\r\n                                            <div className=\"text-sm font-semibold text-green-800\">{premio.centro}</div>\r\n                                            <div className=\"text-xs text-green-600\">+{premio.puntosExtra} pts</div>\r\n                                            <div className=\"text-xs text-green-500\">üèÖ Insignia asignada</div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                                {premiosDelMes.length > 10 && (\r\n                                    <div className=\"text-center text-sm text-green-600 mt-2\">\r\n                                        Y {premiosDelMes.length - 10} premios m√°s de participaci√≥n...\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ) : (\r\n                            <ul className=\"text-sm text-green-700 space-y-1\">\r\n                                <li>ü•á 1er lugar: Trofeo digital especial</li>\r\n                                <li>ü•à 2do lugar: Certificado de honor</li>\r\n                                <li>ü•â 3er lugar: Menci√≥n especial</li>\r\n                                <li>üèÜ Top 10: Badge exclusivo</li>\r\n                                <li>üìö Participaci√≥n: Reconocimiento</li>\r\n                            </ul>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                        <h4 className=\"font-bold text-green-800 mb-2\">‚úÖ Caracter√≠sticas Implementadas</h4>\r\n                        <ul className=\"text-sm text-green-700 space-y-1\">\r\n                            <li>‚úÖ Competencias por asignatura (selector activo)</li>\r\n                            <li>‚úÖ Gr√°ficos de progreso (rankings visuales)</li>\r\n                            <li>‚úÖ Modo vacaciones (detecci√≥n autom√°tica)</li>\r\n                            <li>‚úÖ Challenges especiales (eventos tem√°ticos)</li>\r\n                            <li>‚úÖ Sistema anti-trampa (cursos autom√°ticos)</li>\r\n                            <li>‚úÖ Rankings hist√≥ricos (persistencia completa)</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Ranking Anual - Solo visible en modo anual */}\r\n                {modoVisualizacion === 'anual' && centrosAnuales.length > 0 && (\r\n                    <div className=\"mt-8 bg-gradient-to-br from-amber-50 to-yellow-50 border border-amber-200 rounded-lg p-6 shadow-lg\">\r\n                        <h3 className=\"text-2xl font-bold text-amber-800 mb-6 flex items-center\">\r\n                            üèÜ Ranking Acumulativo Anual {fechaActual.getFullYear()}\r\n                        </h3>\r\n                        <div className=\"grid gap-4\">\r\n                            {centrosAnuales.slice(0, 10).map((centro, index) => (\r\n                                <div key={centro.nombre} className={`flex items-center justify-between p-4 rounded-lg border-2 ${index === 0 ? 'bg-gradient-to-r from-yellow-100 to-amber-100 border-yellow-400' :\r\n                                    index === 1 ? 'bg-gradient-to-r from-gray-100 to-slate-100 border-gray-400' :\r\n                                        index === 2 ? 'bg-gradient-to-r from-orange-100 to-amber-100 border-orange-400' :\r\n                                            'bg-white border-gray-200'\r\n                                    }`}>\r\n                                    <div className=\"flex items-center space-x-4\">\r\n                                        <span className={`text-2xl font-bold ${index === 0 ? 'text-yellow-600' :\r\n                                            index === 1 ? 'text-gray-600' :\r\n                                                index === 2 ? 'text-orange-600' :\r\n                                                    'text-gray-800'\r\n                                            }`}>\r\n                                            #{index + 1}\r\n                                        </span>\r\n                                        {esImagen(obtenerLogoCentro(centro.nombre)) ? (\r\n                                            <img\r\n                                                src={`/${obtenerLogoCentro(centro.nombre)}`}\r\n                                                alt={`Logo ${centro.nombre}`}\r\n                                                className=\"w-12 h-12 object-contain rounded-lg border border-gray-300\"\r\n                                            />\r\n                                        ) : (\r\n                                            <span className=\"text-3xl\">{obtenerLogoCentro(centro.nombre)}</span>\r\n                                        )}\r\n                                        <div>\r\n                                            <h4 className=\"font-bold text-gray-800\">{centro.nombre}</h4>\r\n                                            <p className=\"text-sm text-gray-600\">\r\n                                                Puntuaci√≥n acumulativa: <span className=\"font-semibold\">{centro.puntajeTotal.toLocaleString()}</span>\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"text-right\">\r\n                                        <span className={`text-3xl ${index === 0 ? 'ü•á' :\r\n                                            index === 1 ? 'ü•à' :\r\n                                                index === 2 ? 'ü•â' :\r\n                                                    'üèÖ'\r\n                                            }`}>\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Historial de Ganadores Mensuales */}\r\n                {historialGanadores.length > 0 && (\r\n                    <div className=\"mt-8 bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-6 shadow-lg\">\r\n                        <h3 className=\"text-2xl font-bold text-indigo-800 mb-6 flex items-center\">\r\n                            üìÖ Historial de Ganadores Mensuales\r\n                        </h3>\r\n                        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n                            {historialGanadores.slice(0, 12).map((ganador) => (\r\n                                <div key={`${ganador.mes}-${ganador.a√±o}`} className=\"bg-white rounded-lg border border-indigo-200 p-4 shadow-sm\">\r\n                                    <div className=\"text-center\">\r\n                                        <div className=\"flex justify-center mb-3\">\r\n                                            {esImagen(obtenerLogoCentro(ganador.centro || \"\")) ? (\r\n                                                <img\r\n                                                    src={`/${obtenerLogoCentro(ganador.centro || \"\")}`}\r\n                                                    alt={`Logo ${ganador.centro || \"Centro\"}`}\r\n                                                    className=\"w-16 h-16 object-contain rounded-lg border-2 border-yellow-400\"\r\n                                                />\r\n                                            ) : (\r\n                                                <span className=\"text-4xl\">{obtenerLogoCentro(ganador.centro || \"\")}</span>\r\n                                            )}\r\n                                        </div>\r\n                                        <h4 className=\"font-bold text-gray-800 mb-1\">{ganador.centro || \"Centro Desconocido\"}</h4>\r\n                                        <p className=\"text-sm text-gray-600 mb-2\">\r\n                                            {ganador.mes} {ganador.a√±o}\r\n                                        </p>\r\n                                        <p className=\"text-lg font-semibold text-indigo-600\">\r\n                                            {(ganador.puntaje || 0).toLocaleString()} pts\r\n                                        </p>\r\n                                        <div className=\"text-2xl mt-2\">üèÜ</div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        {historialGanadores.length > 12 && (\r\n                            <div className=\"text-center mt-4\">\r\n                                <p className=\"text-sm text-gray-600\">\r\n                                    Y {historialGanadores.length - 12} ganadores m√°s en el historial...\r\n                                </p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}