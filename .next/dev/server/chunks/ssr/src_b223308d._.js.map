{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/src/components/UserLink.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\ninterface UserLinkProps {\r\n    nick: string;\r\n    className?: string;\r\n}\r\n\r\nexport const UserLink: React.FC<UserLinkProps> = ({ nick, className }) => {\r\n    const [isPremium, setIsPremium] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const checkPremium = () => {\r\n            // Verificar si el usuario es Premium\r\n            if (typeof window !== \"undefined\" && nick) {\r\n                const premiumInfo = localStorage.getItem(`premium_${nick}`);\r\n                if (premiumInfo) {\r\n                    try {\r\n                        const premium = JSON.parse(premiumInfo);\r\n                        const isActive = new Date(premium.expiracion) > new Date();\r\n                        setIsPremium(isActive);\r\n                    } catch (error) {\r\n                        setIsPremium(false);\r\n                    }\r\n                } else {\r\n                    setIsPremium(false);\r\n                }\r\n            }\r\n        };\r\n\r\n        // Verificar inicialmente\r\n        checkPremium();\r\n\r\n        // Escuchar cambios en localStorage\r\n        const handleStorageChange = (e: StorageEvent) => {\r\n            if (e.key?.startsWith('premium_') || e.key === null) {\r\n                checkPremium();\r\n            }\r\n        };\r\n\r\n        // Escuchar eventos personalizados de premium\r\n        const handlePremiumUpdate = (e: CustomEvent) => {\r\n            if (e.detail.nick === nick) {\r\n                checkPremium();\r\n            }\r\n        };\r\n\r\n        window.addEventListener('storage', handleStorageChange);\r\n        window.addEventListener('premiumUpdate', handlePremiumUpdate as EventListener);\r\n\r\n        return () => {\r\n            window.removeEventListener('storage', handleStorageChange);\r\n            window.removeEventListener('premiumUpdate', handlePremiumUpdate as EventListener);\r\n        };\r\n    }, [nick]);\r\n\r\n    const normalized = (nick || \"\").trim().toLowerCase();\r\n    if (!nick || normalized === \"anonimo\" || normalized === \"an√≥nimo\") {\r\n        return <span className={className || \"text-gray-500\"}>{nick || \"(sin nick)\"}</span>;\r\n    }\r\n\r\n    return (\r\n        <a\r\n            href={`/perfil/${encodeURIComponent(nick)}`}\r\n            className={className || \"text-blue-600 underline hover:text-blue-800\"}\r\n            title={`Ver perfil de ${nick}${isPremium ? ' (Usuario Premium)' : ''}`}\r\n        >\r\n            {nick}\r\n            {isPremium && (\r\n                <span className=\"ml-1 inline-flex items-center\">\r\n                    <span\r\n                        className=\"bg-gradient-to-r from-sky-100 to-blue-100 text-amber-900 text-xs px-2 py-1 rounded-full font-bold shadow-md border border-sky-300\"\r\n                        title=\"Usuario Premium\"\r\n                    >\r\n                        üëë\r\n                    </span>\r\n                </span>\r\n            )}\r\n        </a>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAOO,MAAM,WAAoC,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE;IACjE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,IAAA,kNAAS,EAAC;QACN,MAAM,eAAe;YACjB,qCAAqC;YACrC;;QAcJ;QAEA,yBAAyB;QACzB;QAEA,mCAAmC;QACnC,MAAM,sBAAsB,CAAC;YACzB,IAAI,EAAE,GAAG,EAAE,WAAW,eAAe,EAAE,GAAG,KAAK,MAAM;gBACjD;YACJ;QACJ;QAEA,6CAA6C;QAC7C,MAAM,sBAAsB,CAAC;YACzB,IAAI,EAAE,MAAM,CAAC,IAAI,KAAK,MAAM;gBACxB;YACJ;QACJ;QAEA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,gBAAgB,CAAC,iBAAiB;QAEzC,OAAO;YACH,OAAO,mBAAmB,CAAC,WAAW;YACtC,OAAO,mBAAmB,CAAC,iBAAiB;QAChD;IACJ,GAAG;QAAC;KAAK;IAET,MAAM,aAAa,CAAC,QAAQ,EAAE,EAAE,IAAI,GAAG,WAAW;IAClD,IAAI,CAAC,QAAQ,eAAe,aAAa,eAAe,WAAW;QAC/D,qBAAO,8OAAC;YAAK,WAAW,aAAa;sBAAkB,QAAQ;;;;;;IACnE;IAEA,qBACI,8OAAC;QACG,MAAM,CAAC,QAAQ,EAAE,mBAAmB,OAAO;QAC3C,WAAW,aAAa;QACxB,OAAO,CAAC,cAAc,EAAE,OAAO,YAAY,uBAAuB,IAAI;;YAErE;YACA,2BACG,8OAAC;gBAAK,WAAU;0BACZ,cAAA,8OAAC;oBACG,WAAU;oBACV,OAAM;8BACT;;;;;;;;;;;;;;;;;AAOrB","debugId":null}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/src/utils/renderNick.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { UserLink } from \"@/components/UserLink\";\r\n\r\nexport function renderNick(nick: string, className?: string) {\r\n    return <UserLink nick={nick} className={className} />;\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAEO,SAAS,WAAW,IAAY,EAAE,SAAkB;IACvD,qBAAO,8OAAC,0IAAQ;QAAC,MAAM;QAAM,WAAW;;;;;;AAC5C","debugId":null}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/src/app/estadisticas/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport { renderNick } from \"@/utils/renderNick\";\r\nimport { useTranslation } from '@/utils/i18n';\r\n\r\nexport default function Estadisticas() {\r\n    const { t } = useTranslation();\r\n    // Estado para detectar si el usuario es Premium\r\n    const [isPremium, setIsPremium] = React.useState(false);\r\n    const [currentUser, setCurrentUser] = React.useState<any>(null);\r\n\r\n    // Funci√≥n para calcular puntos totales de un usuario\r\n    function calcularPuntosTotales(user: any): number {\r\n        if (!user || !user.nick) return 0;\r\n\r\n        let puntosTotales = 0;\r\n\r\n        // Puntos por asignaturas\r\n        const asignaturas = ['matematicas', 'lenguaje', 'geografia', 'historia', 'literatura', 'ingles', 'naturaleza'];\r\n        asignaturas.forEach(asignatura => {\r\n            const puntosAsignatura = parseInt(localStorage.getItem(`${asignatura}_${user.nick}`) || '0', 10);\r\n            puntosTotales += puntosAsignatura;\r\n        });\r\n\r\n        // Puntos por likes (cada like cuenta como punto)\r\n        puntosTotales += user.likes || 0;\r\n\r\n        // Puntos por competiciones superadas (cada competici√≥n superada vale 10 puntos)\r\n        puntosTotales += (user.competicionesSuperadas || 0) * 10;\r\n\r\n        // Puntos por preguntas acertadas (cada pregunta acertada vale 2 puntos)\r\n        puntosTotales += (user.preguntasAcertadas || 0) * 2;\r\n\r\n        return puntosTotales;\r\n    }\r\n\r\n    // Temporadas disponibles\r\n    function getCurrentSeason() {\r\n        const now = new Date();\r\n        const year = now.getFullYear();\r\n        if (now.getMonth() + 1 < 10) {\r\n            return year - 1;\r\n        }\r\n        return year;\r\n    }\r\n    const [temporadaSeleccionada, setTemporadaSeleccionada] = React.useState<number>(getCurrentSeason());\r\n    const [temporadasDisponibles, setTemporadasDisponibles] = React.useState<number[]>([]);\r\n    const [tablaIndividual, setTablaIndividual] = React.useState<Record<string, any>>({});\r\n    const [tablaCentro, setTablaCentro] = React.useState<Record<string, any>>({});\r\n    const [tablaDocentes, setTablaDocentes] = React.useState<Record<string, any>>({});\r\n    const [isClient, setIsClient] = React.useState(false);\r\n    const [rankingCentros, setRankingCentros] = React.useState<Array<{ centro: string; likes: number }>>([]);\r\n    const [centrosReady, setCentrosReady] = React.useState(false);\r\n    React.useEffect(() => {\r\n        setIsClient(true);\r\n\r\n        // Detectar si el usuario actual es Premium\r\n        if (typeof window !== \"undefined\") {\r\n            const userData = localStorage.getItem('currentUser') || localStorage.getItem('user');\r\n            if (userData) {\r\n                const user = JSON.parse(userData);\r\n                setCurrentUser(user);\r\n\r\n                // Verificar si tiene Premium activo\r\n                const premiumInfo = localStorage.getItem(`premium_${user.nick}`);\r\n                if (premiumInfo) {\r\n                    const premium = JSON.parse(premiumInfo);\r\n                    if (new Date(premium.expiracion) > new Date()) {\r\n                        setIsPremium(true);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function cargarDatos() {\r\n            // Forzar actualizaci√≥n de estado si es necesario\r\n            setTemporadasDisponibles((prev) => [...prev]);\r\n            setTablaIndividual((prev) => ({ ...prev }));\r\n            setTablaCentro((prev) => ({ ...prev }));\r\n            setTablaDocentes((prev) => ({ ...prev }));\r\n            setRankingCentros((prev) => [...prev]);\r\n            setCentrosReady((prev) => prev);\r\n        }\r\n        function handleStorage() {\r\n            cargarDatos();\r\n        }\r\n        window.addEventListener('storage', handleStorage);\r\n        return () => {\r\n            window.removeEventListener('storage', handleStorage);\r\n        };\r\n    }, []);\r\n    React.useEffect(() => {\r\n        function getTemporadasDisponibles() {\r\n            const temporadas: number[] = [];\r\n            if (typeof window !== \"undefined\") {\r\n                for (let i = 2023; i <= getCurrentSeason(); i++) {\r\n                    if (localStorage.getItem(`campeonato_individual_t${i}`) || localStorage.getItem(`campeonato_centro_t${i}`)) {\r\n                        temporadas.push(i);\r\n                    }\r\n                }\r\n                if (!temporadas.includes(getCurrentSeason())) {\r\n                    temporadas.push(getCurrentSeason());\r\n                }\r\n            }\r\n            return temporadas.sort((a, b) => b - a);\r\n        }\r\n        setTemporadasDisponibles(getTemporadasDisponibles());\r\n    }, []);\r\n    React.useEffect(() => {\r\n        if (typeof window !== \"undefined\") {\r\n            const keyInd = `campeonato_individual_t${temporadaSeleccionada}`;\r\n            const keyCentro = `campeonato_centro_t${temporadaSeleccionada}`;\r\n            let tablaInd = {};\r\n            let tablaCent = {};\r\n            try {\r\n                tablaInd = JSON.parse(localStorage.getItem(keyInd) || '{}');\r\n            } catch { tablaInd = {}; }\r\n            try {\r\n                tablaCent = JSON.parse(localStorage.getItem(keyCentro) || '{}');\r\n            } catch { tablaCent = {}; }\r\n            setTablaIndividual(tablaInd);\r\n            setTablaCentro(tablaCent);\r\n        }\r\n    }, [temporadaSeleccionada]);\r\n    React.useEffect(() => {\r\n        if (typeof window !== \"undefined\") {\r\n            const docentesStr = localStorage.getItem(`campeonato_docentes_t${temporadaSeleccionada}`);\r\n            let tablaDoc = {};\r\n            try {\r\n                tablaDoc = docentesStr ? JSON.parse(docentesStr) : {};\r\n            } catch { tablaDoc = {}; }\r\n            setTablaDocentes(tablaDoc);\r\n        }\r\n    }, [temporadaSeleccionada]);\r\n    React.useEffect(() => {\r\n        if (typeof window !== \"undefined\") {\r\n            const usersStr = localStorage.getItem(\"users\");\r\n            if (usersStr) {\r\n                try {\r\n                    const usersArr = JSON.parse(usersStr);\r\n                    const likesPorCentro: Record<string, number> = {};\r\n                    usersArr.forEach((u: any) => {\r\n                        if (u.centro) {\r\n                            if (!(u.centro in likesPorCentro)) likesPorCentro[u.centro] = 0;\r\n                            likesPorCentro[u.centro] += Number(u.likes) || 0;\r\n                        }\r\n                    });\r\n                    const ranking = Object.entries(likesPorCentro)\r\n                        .map(([centro, likes]) => ({ centro, likes }))\r\n                        .sort((a, b) => b.likes - a.likes);\r\n                    setRankingCentros(ranking);\r\n                } catch {\r\n                    setRankingCentros([]);\r\n                }\r\n            } else {\r\n                setRankingCentros([]);\r\n            }\r\n            setCentrosReady(true);\r\n        }\r\n    }, []);\r\n    function handleTemporadaChange(e: React.ChangeEvent<HTMLSelectElement>) {\r\n        setTemporadaSeleccionada(Number(e.target.value));\r\n    }\r\n    function getTablaIndividual(temporada: number) {\r\n        const key = `campeonato_individual_t${temporada}`;\r\n        return JSON.parse(localStorage.getItem(key) || '{}');\r\n    }\r\n    function getTablaCentro(temporada: number) {\r\n        const key = `campeonato_centro_t${temporada}`;\r\n        return JSON.parse(localStorage.getItem(key) || '{}');\r\n    }\r\n\r\n    // Utilidad para mostrar nick como link si es v√°lido\r\n    function NickLink({ nick }: { nick: string }) {\r\n        return renderNick(nick);\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-green-100 p-8\">\r\n            <div className=\"text-center mb-4\">\r\n                <h1 className=\"text-2xl font-bold\">\r\n                    {isPremium ? (\r\n                        <>\r\n                            <span className=\"text-yellow-600\">{t('estadisticasPremium')}</span>\r\n                            <div className=\"text-sm text-gray-600 mt-1\">\r\n                                ¬°Hola {currentUser?.nick}! Disfrutas de estad√≠sticas avanzadas\r\n                            </div>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            Estad√≠sticas\r\n                            <div className=\"text-sm text-blue-600 mt-1\">\r\n                                <button\r\n                                    onClick={() => window.location.href = '/premium-nuevo'}\r\n                                    className=\"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-xs hover:shadow-lg transform hover:scale-105 transition-all\"\r\n                                >\r\n                                    ‚ú® {t('haztePremiumParaVer')} ‚ú®\r\n                                </button>\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </h1>\r\n            </div>\r\n            {isClient && (\r\n                <>\r\n                    {/* Bloque 1: Estad√≠sticas Globales */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto\">\r\n                        <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                            <h2 className=\"text-lg font-bold mb-4 text-center\">{t('estadisticasGlobales')}</h2>\r\n                            <ul className=\"space-y-2\">\r\n                                <li><span className=\"mr-2 text-xl\">üèÜ</span><b>{t('totalCompeticionesSuperadas')}:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const usersStr = localStorage.getItem(\"users\");\r\n                                        if (usersStr) {\r\n                                            try {\r\n                                                const usersArr = JSON.parse(usersStr);\r\n                                                let total = 0;\r\n                                                usersArr.forEach((u: any) => {\r\n                                                    total += u.competicionesSuperadas || 0;\r\n                                                });\r\n                                                return total;\r\n                                            } catch { return 0; }\r\n                                        }\r\n                                    }\r\n                                    return 0;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">üë•</span><b>{t('totalUsuarios')}:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const usersStr = localStorage.getItem(\"users\");\r\n                                        if (usersStr) {\r\n                                            try {\r\n                                                const usersArr = JSON.parse(usersStr);\r\n                                                return usersArr.length;\r\n                                            } catch { return 0; }\r\n                                        }\r\n                                    }\r\n                                    return 0;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">üìñ</span><b>{t('totalHistoriasCreadas')}:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const historiasStr = localStorage.getItem(\"historias\");\r\n                                        if (historiasStr) {\r\n                                            try {\r\n                                                const historiasArr = JSON.parse(historiasStr);\r\n                                                return historiasArr.length;\r\n                                            } catch { return 0; }\r\n                                        }\r\n                                    }\r\n                                    return 0;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">üèÜ</span><b>{t('totalConcursosCreados')}:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const concursosStr = localStorage.getItem(\"concursos\");\r\n                                        if (concursosStr) {\r\n                                            try {\r\n                                                const concursosArr = JSON.parse(concursosStr);\r\n                                                return concursosArr.length;\r\n                                            } catch { return 0; }\r\n                                        }\r\n                                    }\r\n                                    return 0;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">üí¨</span><b>Total de comentarios realizados:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const historiasStr = localStorage.getItem(\"historias\");\r\n                                        if (historiasStr) {\r\n                                            try {\r\n                                                const historiasArr = JSON.parse(historiasStr);\r\n                                                let total = 0;\r\n                                                historiasArr.forEach((h: any) => {\r\n                                                    total += h.comentarios ? h.comentarios.length : 0;\r\n                                                });\r\n                                                return total;\r\n                                            } catch { return 0; }\r\n                                        }\r\n                                    }\r\n                                    return 0;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">üè´</span><b>Total de centros escolares registrados:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const usersStr = localStorage.getItem(\"users\");\r\n                                        if (usersStr) {\r\n                                            try {\r\n                                                const usersArr = JSON.parse(usersStr);\r\n                                                const centros = new Set(usersArr.map((u: any) => u.centro).filter(Boolean));\r\n                                                return centros.size;\r\n                                            } catch { return 0; }\r\n                                        }\r\n                                    }\r\n                                    return 0;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">üë®‚Äçüè´</span><b>Total de docentes registrados:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const usersStr = localStorage.getItem(\"users\");\r\n                                        if (usersStr) {\r\n                                            try {\r\n                                                const usersArr = JSON.parse(usersStr);\r\n                                                const docentesArr = usersArr.filter((u: any) => (u.tipo || \"\").toLowerCase() === \"docente\");\r\n                                                return docentesArr.length || 0;\r\n                                            } catch { return 0; }\r\n                                        }\r\n                                        return 0;\r\n                                    }\r\n                                    return 0;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">ü§ù</span><b>Total de amigos creados:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const usersStr = localStorage.getItem(\"users\");\r\n                                        if (usersStr) {\r\n                                            try {\r\n                                                const usersArr = JSON.parse(usersStr);\r\n                                                let total = 0;\r\n                                                usersArr.forEach((u: any) => {\r\n                                                    const amigosStr = localStorage.getItem(`amigos_${u.nick}`);\r\n                                                    if (amigosStr) {\r\n                                                        try {\r\n                                                            const amigosArr = JSON.parse(amigosStr);\r\n                                                            total += amigosArr.length;\r\n                                                        } catch { }\r\n                                                    }\r\n                                                });\r\n                                                return total > 0 ? total : 0;\r\n                                            } catch { return 0; }\r\n                                        }\r\n                                        return 0;\r\n                                    }\r\n                                    return 0;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">üèÖ</span><b>Total de historias ganadoras:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const concursosStr = localStorage.getItem(\"concursos\");\r\n                                        if (concursosStr) {\r\n                                            try {\r\n                                                const concursosArr = JSON.parse(concursosStr);\r\n                                                return concursosArr.filter((c: any) => c.historiaGanadora).length || 0;\r\n                                            } catch { return 0; }\r\n                                        }\r\n                                        return 0;\r\n                                    }\r\n                                    return 0;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span><b>Total de participantes en concursos:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const usersStr = localStorage.getItem(\"users\");\r\n                                        if (usersStr) {\r\n                                            try {\r\n                                                const usersArr = JSON.parse(usersStr);\r\n                                                let count = 0;\r\n                                                usersArr.forEach((u: any) => {\r\n                                                    if (u.historias && Array.isArray(u.historias) && u.historias.length > 0) {\r\n                                                        count++;\r\n                                                    }\r\n                                                });\r\n                                                return count;\r\n                                            } catch { return 0; }\r\n                                        }\r\n                                        return 0;\r\n                                    }\r\n                                    return 0;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">‚ù§Ô∏è</span><b>Total de likes:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const usersStr = localStorage.getItem(\"users\");\r\n                                        if (usersStr) {\r\n                                            try {\r\n                                                const usersArr = JSON.parse(usersStr);\r\n                                                let total = 0;\r\n                                                usersArr.forEach((u: any) => {\r\n                                                    total += (u.likes || 0);\r\n                                                });\r\n                                                return total;\r\n                                            } catch { return 0; }\r\n                                        }\r\n                                    }\r\n                                    return 0;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">‚ùì</span><b>Total de preguntas respondidas:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const usersStr = localStorage.getItem(\"users\");\r\n                                        if (usersStr) {\r\n                                            try {\r\n                                                const usersArr = JSON.parse(usersStr);\r\n                                                let totalAcertadas = 0;\r\n                                                let totalFalladas = 0;\r\n                                                usersArr.forEach((u: any) => {\r\n                                                    totalAcertadas += u.preguntasAcertadas || 0;\r\n                                                    totalFalladas += u.preguntasFalladas || 0;\r\n                                                    totalFalladas += parseInt(localStorage.getItem('falladas_' + u.nick) || '0', 10);\r\n                                                });\r\n                                                return totalAcertadas + totalFalladas;\r\n                                            } catch { return 0; }\r\n                                        }\r\n                                    }\r\n                                    return 0;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">‚ùì</span><b>{t('totalPreguntasAcertadas')}:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const usersStr = localStorage.getItem(\"users\");\r\n                                        if (usersStr) {\r\n                                            try {\r\n                                                const usersArr = JSON.parse(usersStr);\r\n                                                let total = 0;\r\n                                                usersArr.forEach((u: any) => {\r\n                                                    total += u.preguntasAcertadas || 0;\r\n                                                });\r\n                                                return total;\r\n                                            } catch { return 0; }\r\n                                        }\r\n                                    }\r\n                                    return 0;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">‚ùì</span><b>Total de preguntas falladas:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const usersStr = localStorage.getItem(\"users\");\r\n                                        if (usersStr) {\r\n                                            try {\r\n                                                const usersArr = JSON.parse(usersStr);\r\n                                                let total = 0;\r\n                                                usersArr.forEach((u: any) => {\r\n                                                    total += u.preguntasFalladas || 0;\r\n                                                    total += parseInt(localStorage.getItem('falladas_' + u.nick) || '0', 10);\r\n                                                });\r\n                                                return total;\r\n                                            } catch { return 0; }\r\n                                        }\r\n                                    }\r\n                                    return 0;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">üèÜ</span><b>Total de concursos ganados:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const usersStr = localStorage.getItem(\"users\");\r\n                                        if (usersStr) {\r\n                                            try {\r\n                                                const usersArr = JSON.parse(usersStr);\r\n                                                let total = 0;\r\n                                                usersArr.forEach((u: any) => {\r\n                                                    total += u.concursosGanados || 0;\r\n                                                });\r\n                                                return total;\r\n                                            } catch { return 0; }\r\n                                        }\r\n                                    }\r\n                                    return 0;\r\n                                })()}</li>\r\n                            </ul>\r\n                        </div>\r\n                        {/* Bloque 2: Rankings */}\r\n                        <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                            <h2 className=\"text-lg font-bold mb-4 text-center\">Rankings</h2>\r\n                            <ul className=\"space-y-2\">\r\n                                <li><span className=\"mr-2 text-xl\">‚ù§Ô∏è</span><b>{t('usuariosMasLikes')}:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const usersStr = localStorage.getItem(\"users\");\r\n                                        if (usersStr) {\r\n                                            try {\r\n                                                const usersArr = JSON.parse(usersStr);\r\n                                                const ranking = usersArr.map((u: any) => {\r\n                                                    return {\r\n                                                        nick: u.nick,\r\n                                                        nombre: u.nombre,\r\n                                                        totalLikes: (u.likes || 0)\r\n                                                    };\r\n                                                })\r\n                                                    .filter((u: { nick: string; nombre: string; totalLikes: number }) => u.nick && u.totalLikes > 0) // Solo usuarios con al menos 1 like\r\n                                                    .sort((a: { totalLikes: number }, b: { totalLikes: number }) => b.totalLikes - a.totalLikes)\r\n                                                    .slice(0, 5);\r\n                                                if (ranking.length === 0) return <span className=\"block\">No hay usuarios con likes.</span>;\r\n                                                return ranking.map((u: { nick: string; totalLikes: number }, i: number) => (\r\n                                                    <span key={u.nick} className=\"block\">{i + 1}. <b><NickLink nick={u.nick} /></b> ({u.totalLikes} likes)</span>\r\n                                                ));\r\n                                            } catch { return <span className=\"block\">No hay usuarios con likes.</span>; }\r\n                                        }\r\n                                    }\r\n                                    return <span className=\"block\">No hay usuarios con likes.</span>;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">üí¨</span><b>{t('usuariosMasComentarios')}:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const historiasStr = localStorage.getItem(\"historias\");\r\n                                        if (historiasStr) {\r\n                                            try {\r\n                                                const historiasArr = JSON.parse(historiasStr);\r\n                                                const comentariosPorAutor: Record<string, number> = {};\r\n                                                historiasArr.forEach((h: any) => {\r\n                                                    if (h.autor) {\r\n                                                        comentariosPorAutor[h.autor] = (comentariosPorAutor[h.autor] || 0) + (h.comentarios ? h.comentarios.length : 0);\r\n                                                    }\r\n                                                });\r\n                                                const ranking = Object.entries(comentariosPorAutor)\r\n                                                    .map(([nick, totalComentarios]: [string, number]) => ({ nick, totalComentarios }))\r\n                                                    .filter((u: { nick: string; totalComentarios: number }) => u.nick && u.totalComentarios > 0)\r\n                                                    .sort((a: { totalComentarios: number }, b: { totalComentarios: number }) => b.totalComentarios - a.totalComentarios)\r\n                                                    .slice(0, 5);\r\n                                                if (ranking.length === 0) return <span className=\"block\">No hay usuarios con comentarios a√∫n.</span>;\r\n                                                return ranking.map((u: { nick: string; totalComentarios: number }, i: number) => (\r\n                                                    <span key={u.nick} className=\"block\">{i + 1}. <b><NickLink nick={u.nick} /></b> ({u.totalComentarios} comentarios)</span>\r\n                                                ));\r\n                                            } catch { return <span className=\"block\">No hay usuarios con comentarios a√∫n.</span>; }\r\n                                        }\r\n                                    }\r\n                                    return <span className=\"block\">No hay usuarios con comentarios a√∫n.</span>;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">ü§ù</span><b>Usuarios con m√°s amigos:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const usersStr = localStorage.getItem(\"users\");\r\n                                        if (usersStr) {\r\n                                            try {\r\n                                                const usersArr = JSON.parse(usersStr);\r\n                                                const ranking = usersArr\r\n                                                    .map((u: any) => {\r\n                                                        const amigosStr = localStorage.getItem(`amigos_${u.nick}`);\r\n                                                        let numAmigos = 0;\r\n                                                        if (amigosStr) {\r\n                                                            try {\r\n                                                                const amigosArr = JSON.parse(amigosStr);\r\n                                                                numAmigos = Array.isArray(amigosArr) ? amigosArr.length : 0;\r\n                                                            } catch { numAmigos = 0; }\r\n                                                        }\r\n                                                        return {\r\n                                                            nick: u.nick,\r\n                                                            numAmigos\r\n                                                        };\r\n                                                    })\r\n                                                    .filter((u: { nick: string; numAmigos: number }) => u.nick && u.numAmigos > 0)\r\n                                                    .sort((a: { numAmigos: number }, b: { numAmigos: number }) => b.numAmigos - a.numAmigos)\r\n                                                    .slice(0, 5);\r\n                                                if (ranking.length === 0) return <span className=\"block\">No hay usuarios con amigos a√∫n.</span>;\r\n                                                return ranking.map((u: { nick: string; numAmigos: number }, i: number) => (\r\n                                                    <span key={u.nick} className=\"block\">{i + 1}. <b><NickLink nick={u.nick} /></b> ({u.numAmigos} amigos)</span>\r\n                                                ));\r\n                                            } catch { return <span className=\"block\">No hay usuarios con amigos a√∫n.</span>; }\r\n                                        }\r\n                                    }\r\n                                    return <span className=\"block\">No hay usuarios con amigos a√∫n.</span>;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">üìñ</span><b>Usuarios con m√°s historias:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const historiasStr = localStorage.getItem(\"historias\");\r\n                                        if (historiasStr) {\r\n                                            try {\r\n                                                const historiasArr = JSON.parse(historiasStr);\r\n                                                const historiasPorAutor: Record<string, number> = {};\r\n                                                historiasArr.forEach((h: any) => {\r\n                                                    if (h.autor) {\r\n                                                        historiasPorAutor[h.autor] = (historiasPorAutor[h.autor] || 0) + 1;\r\n                                                    }\r\n                                                });\r\n                                                const ranking = Object.entries(historiasPorAutor)\r\n                                                    .map(([nick, totalHistorias]: [string, number]) => ({ nick, totalHistorias }))\r\n                                                    .filter((u: { nick: string; totalHistorias: number }) => u.nick && u.totalHistorias > 0)\r\n                                                    .sort((a: { totalHistorias: number }, b: { totalHistorias: number }) => b.totalHistorias - a.totalHistorias)\r\n                                                    .slice(0, 5);\r\n                                                if (ranking.length === 0) return <span className=\"block\">No hay usuarios con historias a√∫n.</span>;\r\n                                                return ranking.map((u: { nick: string; totalHistorias: number }, i: number) => (\r\n                                                    <span key={u.nick} className=\"block\">{i + 1}. <b><NickLink nick={u.nick} /></b> ({u.totalHistorias} historias)</span>\r\n                                                ));\r\n                                            } catch { return <span className=\"block\">No hay usuarios con historias a√∫n.</span>; }\r\n                                        }\r\n                                    }\r\n                                    return <span className=\"block\">No hay usuarios con historias a√∫n.</span>;\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">üèÜ</span><b>Usuarios con m√°s concursos ganados:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const usersStr = localStorage.getItem(\"users\");\r\n                                        if (usersStr) {\r\n                                            try {\r\n                                                const usersArr = JSON.parse(usersStr);\r\n                                                const ranking = usersArr.map((u: any) => ({\r\n                                                    nick: u.nick,\r\n                                                    nombre: u.nombre,\r\n                                                    totalConcursos: u.concursosGanados || 0\r\n                                                }))\r\n                                                    .filter((u: { nick: string; nombre: string; totalConcursos: number }) => u.totalConcursos > 0)\r\n                                                    .sort((a: { totalConcursos: number }, b: { totalConcursos: number }) => b.totalConcursos - a.totalConcursos)\r\n                                                    .slice(0, 5);\r\n                                                if (ranking.length === 0) return <span className=\"block\">No hay usuarios con concursos ganados a√∫n.</span>;\r\n                                                return ranking.map((u: { nick: string; totalConcursos: number }, i: number) => (\r\n                                                    <span key={u.nick} className=\"block\">{i + 1}. <b><NickLink nick={u.nick} /></b> ({u.totalConcursos} concursos)</span>\r\n                                                ));\r\n                                            } catch { return \"-\"; }\r\n                                        }\r\n                                    }\r\n                                    return \"-\";\r\n                                })()}</li>\r\n                                <li><span className=\"mr-2 text-xl\">üèÜ</span><b>Usuarios con m√°s competiciones superadas:</b> {(() => {\r\n                                    if (typeof window !== \"undefined\") {\r\n                                        const usersStr = localStorage.getItem(\"users\");\r\n                                        if (usersStr) {\r\n                                            try {\r\n                                                const usersArr = JSON.parse(usersStr);\r\n                                                const ranking = usersArr\r\n                                                    .map((u: any) => ({\r\n                                                        nick: u.nick,\r\n                                                        nombre: u.nombre,\r\n                                                        totalCompeticiones: u.competicionesSuperadas || 0\r\n                                                    }))\r\n                                                    .filter((u: { totalCompeticiones: number }) => u.totalCompeticiones > 0)\r\n                                                    .sort((a: { totalCompeticiones: number }, b: { totalCompeticiones: number }) => b.totalCompeticiones - a.totalCompeticiones)\r\n                                                    .slice(0, 5);\r\n                                                if (ranking.length === 0) return <span className=\"block\">No hay usuarios con competiciones superadas a√∫n.</span>;\r\n                                                return ranking.map((u: { nick: string; totalCompeticiones: number }, i: number) => (\r\n                                                    <span key={u.nick} className=\"block\">{i + 1}. <b><NickLink nick={u.nick} /></b> ({u.totalCompeticiones} competiciones)</span>\r\n                                                ));\r\n                                            } catch { return \"-\"; }\r\n                                        }\r\n                                    }\r\n                                    return \"-\";\r\n                                })()}</li>\r\n\r\n                            </ul>\r\n                        </div>\r\n                    </div >\r\n\r\n                    {/* Bloque Premium: Estad√≠sticas Avanzadas Solo para Premium */}\r\n                    {isPremium && (\r\n                        <div className=\"max-w-5xl mx-auto mt-8\">\r\n                            <div className=\"bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 rounded-2xl p-1 shadow-2xl\">\r\n                                <div className=\"bg-white rounded-2xl p-6\">\r\n                                    <h2 className=\"text-xl font-bold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-600\">\r\n                                        üëë Estad√≠sticas Premium Avanzadas üëë\r\n                                    </h2>\r\n\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                                        {/* An√°lisis Personal Premium */}\r\n                                        <div className=\"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-4\">\r\n                                            <h3 className=\"font-bold text-blue-800 mb-3 text-center\">üìà Tu An√°lisis Personal</h3>\r\n                                            <ul className=\"space-y-2 text-sm\">\r\n                                                <li className=\"flex justify-between\">\r\n                                                    <span>üéØ Precisi√≥n promedio:</span>\r\n                                                    <span className=\"font-bold text-blue-600\">{(() => {\r\n                                                        if (currentUser) {\r\n                                                            const acertadas = (currentUser.preguntasAcertadas || 0) + parseInt(localStorage.getItem('acertadas_' + currentUser.nick) || '0', 10);\r\n                                                            const falladas = (currentUser.preguntasFalladas || 0) + parseInt(localStorage.getItem('falladas_' + currentUser.nick) || '0', 10);\r\n                                                            const total = acertadas + falladas;\r\n                                                            return total > 0 ? ((acertadas / total) * 100).toFixed(1) + '%' : '0%';\r\n                                                        }\r\n                                                        return '0%';\r\n                                                    })()}</span>\r\n                                                </li>\r\n                                                <li className=\"flex justify-between\">\r\n                                                    <span>‚ö° Racha actual:</span>\r\n                                                    <span className=\"font-bold text-blue-600\">{currentUser?.racha || 0} d√≠as</span>\r\n                                                </li>\r\n                                                <li className=\"flex justify-between\">\r\n                                                    <span>üìÖ D√≠as activo:</span>\r\n                                                    <span className=\"font-bold text-blue-600\">{(() => {\r\n                                                        if (currentUser?.fechaRegistro) {\r\n                                                            const fechaReg = new Date(currentUser.fechaRegistro);\r\n                                                            const ahora = new Date();\r\n                                                            const diffTime = Math.abs(ahora.getTime() - fechaReg.getTime());\r\n                                                            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n                                                            return diffDays;\r\n                                                        }\r\n                                                        return 0;\r\n                                                    })()}</span>\r\n                                                </li>\r\n                                                <li className=\"flex justify-between\">\r\n                                                    <span>üèÜ Tu ranking:</span>\r\n                                                    <span className=\"font-bold text-blue-600\">{(() => {\r\n                                                        const usersStr = localStorage.getItem(\"users\");\r\n                                                        if (usersStr && currentUser) {\r\n                                                            const usersArr = JSON.parse(usersStr);\r\n                                                            const usersWithPoints = usersArr.map((u: any) => ({\r\n                                                                ...u,\r\n                                                                puntosTotales: calcularPuntosTotales(u)\r\n                                                            }));\r\n                                                            const sorted = usersWithPoints.sort((a: any, b: any) => b.puntosTotales - a.puntosTotales);\r\n                                                            const position = sorted.findIndex((u: any) => u.nick === currentUser.nick) + 1;\r\n                                                            return position > 0 ? `#${position}` : '-';\r\n                                                        }\r\n                                                        return '-';\r\n                                                    })()}</span>\r\n                                                </li>\r\n                                            </ul>\r\n                                        </div>\r\n\r\n                                        {/* An√°lisis de Materias Premium */}\r\n                                        <div className=\"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-4\">\r\n                                            <h3 className=\"font-bold text-green-800 mb-3 text-center\">üìö An√°lisis por Materias</h3>\r\n                                            <ul className=\"space-y-2 text-sm\">\r\n                                                <li className=\"flex justify-between\">\r\n                                                    <span>üî¨ Matem√°ticas:</span>\r\n                                                    <span className=\"font-bold text-green-600\">{(() => {\r\n                                                        if (currentUser) {\r\n                                                            const puntos = parseInt(localStorage.getItem(`matematicas_${currentUser.nick}`) || '0', 10);\r\n                                                            const nivel = Math.floor(puntos / 5) + 1;\r\n                                                            return `Nivel ${nivel}`;\r\n                                                        }\r\n                                                        return 'Nivel 1';\r\n                                                    })()}</span>\r\n                                                </li>\r\n                                                <li className=\"flex justify-between\">\r\n                                                    <span>üìñ Lenguaje:</span>\r\n                                                    <span className=\"font-bold text-green-600\">{(() => {\r\n                                                        if (currentUser) {\r\n                                                            const puntos = parseInt(localStorage.getItem(`lenguaje_${currentUser.nick}`) || '0', 10);\r\n                                                            const nivel = Math.floor(puntos / 5) + 1;\r\n                                                            return `Nivel ${nivel}`;\r\n                                                        }\r\n                                                        return 'Nivel 1';\r\n                                                    })()}</span>\r\n                                                </li>\r\n                                                <li className=\"flex justify-between\">\r\n                                                    <span>üåç Geograf√≠a:</span>\r\n                                                    <span className=\"font-bold text-green-600\">{(() => {\r\n                                                        if (currentUser) {\r\n                                                            const puntos = parseInt(localStorage.getItem(`geografia_${currentUser.nick}`) || '0', 10);\r\n                                                            const nivel = Math.floor(puntos / 5) + 1;\r\n                                                            return `Nivel ${nivel}`;\r\n                                                        }\r\n                                                        return 'Nivel 1';\r\n                                                    })()}</span>\r\n                                                </li>\r\n                                                <li className=\"flex justify-between\">\r\n                                                    <span>üìö Historia:</span>\r\n                                                    <span className=\"font-bold text-green-600\">{(() => {\r\n                                                        if (currentUser) {\r\n                                                            const puntos = parseInt(localStorage.getItem(`historia_${currentUser.nick}`) || '0', 10);\r\n                                                            const nivel = Math.floor(puntos / 5) + 1;\r\n                                                            return `Nivel ${nivel}`;\r\n                                                        }\r\n                                                        return 'Nivel 1';\r\n                                                    })()}</span>\r\n                                                </li>\r\n                                                <li className=\"flex justify-between\">\r\n                                                    <span>üé® Tu fuerte:</span>\r\n                                                    <span className=\"font-bold text-green-600\">{(() => {\r\n                                                        if (currentUser) {\r\n                                                            const asignaturas = [\r\n                                                                { nombre: 'Matem√°ticas', puntos: parseInt(localStorage.getItem(`matematicas_${currentUser.nick}`) || '0', 10) },\r\n                                                                { nombre: 'Lenguaje', puntos: parseInt(localStorage.getItem(`lenguaje_${currentUser.nick}`) || '0', 10) },\r\n                                                                { nombre: 'Geograf√≠a', puntos: parseInt(localStorage.getItem(`geografia_${currentUser.nick}`) || '0', 10) },\r\n                                                                { nombre: 'Historia', puntos: parseInt(localStorage.getItem(`historia_${currentUser.nick}`) || '0', 10) },\r\n                                                                { nombre: 'Literatura', puntos: parseInt(localStorage.getItem(`literatura_${currentUser.nick}`) || '0', 10) },\r\n                                                                { nombre: 'Ingl√©s', puntos: parseInt(localStorage.getItem(`ingles_${currentUser.nick}`) || '0', 10) },\r\n                                                                { nombre: 'Naturaleza', puntos: parseInt(localStorage.getItem(`naturaleza_${currentUser.nick}`) || '0', 10) }\r\n                                                            ];\r\n                                                            const mejor = asignaturas.reduce((max, actual) => actual.puntos > max.puntos ? actual : max);\r\n                                                            return mejor.puntos > 0 ? mejor.nombre : 'Ninguna a√∫n';\r\n                                                        }\r\n                                                        return 'Ninguna a√∫n';\r\n                                                    })()}</span>\r\n                                                </li>\r\n                                            </ul>\r\n                                        </div>\r\n\r\n                                        {/* Logros y Proyecci√≥n Premium */}\r\n                                        <div className=\"bg-gradient-to-br from-purple-50 to-violet-100 rounded-xl p-4\">\r\n                                            <h3 className=\"font-bold text-purple-800 mb-3 text-center\">üéØ Logros y Proyecci√≥n</h3>\r\n                                            <ul className=\"space-y-2 text-sm\">\r\n                                                <li className=\"flex justify-between\">\r\n                                                    <span>üìà Crecimiento:</span>\r\n                                                    <span className=\"font-bold text-purple-600\">{(() => {\r\n                                                        if (currentUser) {\r\n                                                            const acertadas = currentUser.preguntasAcertadas || 0;\r\n                                                            const falladas = (currentUser.preguntasFalladas || 0) + parseInt(localStorage.getItem('falladas_' + currentUser.nick) || '0', 10);\r\n                                                            const total = acertadas + falladas;\r\n                                                            if (total > 0) {\r\n                                                                const precision = (acertadas / total) * 100;\r\n                                                                const crecimiento = Math.max(0, Math.floor(precision - 50));\r\n                                                                return `+${crecimiento}% sem.`;\r\n                                                            }\r\n                                                        }\r\n                                                        return '+0% sem.';\r\n                                                    })()}</span>\r\n                                                </li>\r\n                                                <li className=\"flex justify-between\">\r\n                                                    <span>üéØ Meta semanal:</span>\r\n                                                    <span className=\"font-bold text-purple-600\">{(() => {\r\n                                                        if (currentUser) {\r\n                                                            const acertadas = (currentUser.preguntasAcertadas || 0) + parseInt(localStorage.getItem('acertadas_' + currentUser.nick) || '0', 10);\r\n                                                            const falladas = (currentUser.preguntasFalladas || 0) + parseInt(localStorage.getItem('falladas_' + currentUser.nick) || '0', 10);\r\n                                                            const total = acertadas + falladas;\r\n                                                            if (total > 0) {\r\n                                                                const precision = (acertadas / total) * 100;\r\n                                                                return precision >= 75 ? '75% ‚úÖ' : `${precision.toFixed(1)}% ‚ùå`;\r\n                                                            }\r\n                                                        }\r\n                                                        return '0% ‚ùå';\r\n                                                    })()}</span>\r\n                                                </li>\r\n                                                <li className=\"flex justify-between\">\r\n                                                    <span>‚≠ê Pr√≥ximo nivel:</span>\r\n                                                    <span className=\"font-bold text-purple-600\">{(() => {\r\n                                                        if (currentUser) {\r\n                                                            const puntosActuales = calcularPuntosTotales(currentUser);\r\n                                                            const nivelActual = Math.floor(puntosActuales / 100);\r\n                                                            const puntosParaSiguiente = ((nivelActual + 1) * 100) - puntosActuales;\r\n                                                            return `${puntosParaSiguiente} pts`;\r\n                                                        }\r\n                                                        return '100 pts';\r\n                                                    })()}</span>\r\n                                                </li>\r\n                                            </ul>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Gr√°fico de Progreso Premium */}\r\n                                    <div className=\"mt-6 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4\">\r\n                                        <h3 className=\"font-bold text-indigo-800 mb-3 text-center\">üìä Gr√°fico de Progreso Semanal</h3>\r\n                                        <div className=\"flex items-end justify-between h-32 gap-2\">\r\n                                            {[...Array(7)].map((_, i) => {\r\n                                                const dayActivities = (() => {\r\n                                                    if (currentUser) {\r\n                                                        const acertadas = parseInt(localStorage.getItem('acertadas_' + currentUser.nick) || '0', 10);\r\n                                                        const falladas = parseInt(localStorage.getItem('falladas_' + currentUser.nick) || '0', 10);\r\n                                                        const total = acertadas + falladas;\r\n\r\n                                                        // Simular actividad distribuida a lo largo de la semana\r\n                                                        const baseActivity = Math.floor(total / 7);\r\n                                                        const variation = Math.floor(Math.random() * 5) - 2; // -2 a +2\r\n                                                        return Math.max(0, baseActivity + variation);\r\n                                                    }\r\n                                                    return Math.floor(Math.random() * 5) + 1;\r\n                                                })();\r\n\r\n                                                const maxHeight = 25; // altura m√°xima esperada\r\n                                                const height = Math.max(20, Math.min(100, (dayActivities / maxHeight) * 80 + 20));\r\n                                                const day = ['L', 'M', 'X', 'J', 'V', 'S', 'D'][i];\r\n                                                const isToday = i === new Date().getDay() - 1 || (new Date().getDay() === 0 && i === 6);\r\n\r\n                                                return (\r\n                                                    <div key={i} className=\"flex flex-col items-center\">\r\n                                                        <div\r\n                                                            className={`w-8 rounded-t-md ${isToday ? 'bg-gradient-to-t from-orange-500 to-red-500' : 'bg-gradient-to-t from-blue-500 to-purple-500'}`}\r\n                                                            style={{ height: `${height}%` }}\r\n                                                        ></div>\r\n                                                        <span className={`text-xs mt-1 font-semibold ${isToday ? 'text-orange-600' : 'text-indigo-600'}`}>\r\n                                                            {day}\r\n                                                        </span>\r\n                                                        <span className=\"text-xs text-gray-500\">\r\n                                                            {dayActivities}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                );\r\n                                            })}\r\n                                        </div>\r\n                                        <div className=\"text-center mt-3 text-sm text-indigo-600\">\r\n                                            üìà <strong>Tendencia:</strong> {(() => {\r\n                                                if (currentUser) {\r\n                                                    const acertadas = (currentUser.preguntasAcertadas || 0) + parseInt(localStorage.getItem('acertadas_' + currentUser.nick) || '0', 10);\r\n                                                    const falladas = (currentUser.preguntasFalladas || 0) + parseInt(localStorage.getItem('falladas_' + currentUser.nick) || '0', 10);\r\n                                                    const precision = falladas + acertadas > 0 ? (acertadas / (falladas + acertadas)) * 100 : 0;\r\n\r\n                                                    if (precision >= 80) return '¬°Excelente! Mant√©n este nivel de precisi√≥n.';\r\n                                                    if (precision >= 60) return '¬°Vas muy bien! Mant√©n el ritmo esta semana.';\r\n                                                    if (precision >= 40) return 'Buen progreso. ¬°Sigue practicando!';\r\n                                                    return 'Empezando bien. ¬°Cada respuesta cuenta!';\r\n                                                }\r\n                                                return '¬°Empieza tu aventura de aprendizaje!';\r\n                                            })()}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Comparativa Premium */}\r\n                                    <div className=\"mt-6 bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4\">\r\n                                        <h3 className=\"font-bold text-orange-800 mb-3 text-center\">‚öîÔ∏è Tu Posici√≥n vs. Mejores</h3>\r\n                                        <div className=\"grid grid-cols-3 gap-4 text-center\">\r\n                                            <div className=\"bg-white rounded-lg p-3\">\r\n                                                <div className=\"text-2xl\">ü•á</div>\r\n                                                <div className=\"text-xs text-gray-600\">1¬∫ Lugar</div>\r\n                                                <div className=\"font-bold text-yellow-600\">{(() => {\r\n                                                    if (typeof window !== \"undefined\") {\r\n                                                        const users = JSON.parse(localStorage.getItem(\"users\") || \"[]\");\r\n                                                        if (users.length > 0) {\r\n                                                            const usersWithPoints = users.map((u: any) => ({\r\n                                                                ...u,\r\n                                                                puntosTotales: calcularPuntosTotales(u)\r\n                                                            }));\r\n                                                            const sorted = usersWithPoints.sort((a: any, b: any) => b.puntosTotales - a.puntosTotales);\r\n                                                            return sorted[0]?.puntosTotales || 0;\r\n                                                        }\r\n                                                    }\r\n                                                    return 0;\r\n                                                })()}</div>\r\n                                                <div className=\"text-xs text-gray-500\">{(() => {\r\n                                                    if (typeof window !== \"undefined\") {\r\n                                                        const users = JSON.parse(localStorage.getItem(\"users\") || \"[]\");\r\n                                                        if (users.length > 0) {\r\n                                                            const usersWithPoints = users.map((u: any) => ({\r\n                                                                ...u,\r\n                                                                puntosTotales: calcularPuntosTotales(u)\r\n                                                            }));\r\n                                                            const sorted = usersWithPoints.sort((a: any, b: any) => b.puntosTotales - a.puntosTotales);\r\n                                                            return sorted[0]?.nick || 'Nadie';\r\n                                                        }\r\n                                                    }\r\n                                                    return 'Nadie';\r\n                                                })()}</div>\r\n                                            </div>\r\n                                            <div className=\"bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg p-3 border-2 border-blue-300\">\r\n                                                <div className=\"text-2xl\">üëë</div>\r\n                                                <div className=\"text-xs text-blue-600 font-bold\">T√ö</div>\r\n                                                <div className=\"font-bold text-blue-600\">{currentUser ? calcularPuntosTotales(currentUser) : 0}</div>\r\n                                                <div className=\"text-xs text-blue-500\">{(() => {\r\n                                                    if (typeof window !== \"undefined\" && currentUser) {\r\n                                                        const users = JSON.parse(localStorage.getItem(\"users\") || \"[]\");\r\n                                                        if (users.length > 0) {\r\n                                                            const usersWithPoints = users.map((u: any) => ({\r\n                                                                ...u,\r\n                                                                puntosTotales: calcularPuntosTotales(u)\r\n                                                            }));\r\n                                                            const sorted = usersWithPoints.sort((a: any, b: any) => b.puntosTotales - a.puntosTotales);\r\n                                                            const position = sorted.findIndex((u: any) => u.nick === currentUser.nick) + 1;\r\n                                                            return position > 0 ? `Posici√≥n #${position}` : 'Sin clasificar';\r\n                                                        }\r\n                                                    }\r\n                                                    return 'Sin clasificar';\r\n                                                })()}</div>\r\n                                            </div>\r\n                                            <div className=\"bg-white rounded-lg p-3\">\r\n                                                <div className=\"text-2xl\">üéØ</div>\r\n                                                <div className=\"text-xs text-gray-600\">Promedio</div>\r\n                                                <div className=\"font-bold text-gray-600\">{(() => {\r\n                                                    if (typeof window !== \"undefined\") {\r\n                                                        const users = JSON.parse(localStorage.getItem(\"users\") || \"[]\");\r\n                                                        if (users.length > 0) {\r\n                                                            const total = users.reduce((sum: number, u: any) => sum + calcularPuntosTotales(u), 0);\r\n                                                            return Math.floor(total / users.length);\r\n                                                        }\r\n                                                    }\r\n                                                    return 0;\r\n                                                })()}</div>\r\n                                                <div className=\"text-xs text-gray-500\">{(() => {\r\n                                                    if (typeof window !== \"undefined\") {\r\n                                                        const users = JSON.parse(localStorage.getItem(\"users\") || \"[]\");\r\n                                                        return `${users.length} usuarios`;\r\n                                                    }\r\n                                                    return '0 usuarios';\r\n                                                })()}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                        {/* Indicador de diferencia con el promedio */}\r\n                                        <div className=\"mt-3 text-center text-sm\">\r\n                                            {(() => {\r\n                                                if (typeof window !== \"undefined\" && currentUser) {\r\n                                                    const users = JSON.parse(localStorage.getItem(\"users\") || \"[]\");\r\n                                                    if (users.length > 0) {\r\n                                                        const total = users.reduce((sum: number, u: any) => sum + calcularPuntosTotales(u), 0);\r\n                                                        const promedio = Math.floor(total / users.length);\r\n                                                        const tusPuntos = calcularPuntosTotales(currentUser);\r\n                                                        const diferencia = tusPuntos - promedio;\r\n\r\n                                                        if (diferencia > 0) {\r\n                                                            return <span className=\"text-green-600\">üìà +{diferencia} puntos sobre el promedio</span>;\r\n                                                        } else if (diferencia < 0) {\r\n                                                            return <span className=\"text-red-600\">üìâ {Math.abs(diferencia)} puntos bajo el promedio</span>;\r\n                                                        } else {\r\n                                                            return <span className=\"text-blue-600\">üéØ Exactamente en el promedio</span>;\r\n                                                        }\r\n                                                    }\r\n                                                }\r\n                                                return <span className=\"text-gray-500\">Sin datos para comparar</span>;\r\n                                            })()}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Bloque 3: Mejores estad√≠sticas y curiosidades */}\r\n                    <div className=\"bg-white rounded-lg shadow-md p-6 max-w-5xl mx-auto mt-8\" >\r\n                        <h2 className=\"text-lg font-bold mb-4 text-center\">Mejores estad√≠sticas</h2>\r\n                        <ul className=\"space-y-2 text-center\">\r\n                            <li><span className=\"mr-2 text-xl\">üìñ</span><b>Historia con m√°s likes:</b> {(() => {\r\n                                if (typeof window !== \"undefined\") {\r\n                                    const historiasStr = localStorage.getItem(\"historias\");\r\n                                    if (historiasStr) {\r\n                                        try {\r\n                                            const historiasArr = JSON.parse(historiasStr);\r\n                                            if (historiasArr.length === 0) return \"-\";\r\n                                            const top = historiasArr.reduce((max: any, h: any) => {\r\n                                                if ((h.likes || 0) > (max.likes || 0)) return h;\r\n                                                return max;\r\n                                            }, historiasArr[0]);\r\n                                            return (\r\n                                                <span>\r\n                                                    <b>{top.titulo}</b> por <b><NickLink nick={top.autor} /></b> <span className=\"text-pink-600\">‚ù§Ô∏è {top.likes || 0}</span>\r\n                                                </span>\r\n                                            );\r\n                                        } catch { return \"-\"; }\r\n                                    }\r\n                                }\r\n                                return \"-\";\r\n                            })()}</li>\r\n                            <li><span className=\"mr-2 text-xl\">üí¨</span><b>Historia m√°s comentada:</b> {(() => {\r\n                                if (typeof window !== \"undefined\") {\r\n                                    const historiasStr = localStorage.getItem(\"historias\");\r\n                                    if (historiasStr) {\r\n                                        try {\r\n                                            const historiasArr = JSON.parse(historiasStr);\r\n                                            if (historiasArr.length === 0) return \"-\";\r\n                                            const top = historiasArr.reduce((max: any, h: any) => {\r\n                                                const comentarios = h.comentarios ? h.comentarios.length : 0;\r\n                                                const maxComentarios = max.comentarios ? max.comentarios.length : 0;\r\n                                                if (comentarios > maxComentarios) return h;\r\n                                                return max;\r\n                                            }, historiasArr[0]);\r\n                                            return (\r\n                                                <span>\r\n                                                    <b>{top.titulo}</b> por <b><NickLink nick={top.autor} /></b> <span className=\"text-blue-600\">üí¨ {top.comentarios ? top.comentarios.length : 0}</span>\r\n                                                </span>\r\n                                            );\r\n                                        } catch { return \"-\"; }\r\n                                    }\r\n                                }\r\n                                return \"-\";\r\n                            })()}</li>\r\n                            <li><span className=\"mr-2 text-xl\">üè´</span><b>Centro con m√°s historias creadas:</b> {(() => {\r\n                                if (typeof window !== \"undefined\") {\r\n                                    const historiasStr = localStorage.getItem(\"historias\");\r\n                                    const usersStr = localStorage.getItem(\"users\");\r\n                                    if (historiasStr && usersStr) {\r\n                                        try {\r\n                                            const historiasArr = JSON.parse(historiasStr);\r\n                                            const usersArr = JSON.parse(usersStr);\r\n                                            if (historiasArr.length === 0 || usersArr.length === 0) return \"-\";\r\n                                            const nickToCentro: Record<string, string> = {};\r\n                                            usersArr.forEach((u: any) => {\r\n                                                if (u.nick && u.centro) {\r\n                                                    nickToCentro[u.nick] = u.centro;\r\n                                                }\r\n                                            });\r\n                                            const historiasPorCentro: Record<string, number> = {};\r\n                                            historiasArr.forEach((h: any) => {\r\n                                                const centro = h.centro || nickToCentro[h.autor] || null;\r\n                                                if (centro) {\r\n                                                    historiasPorCentro[centro] = (historiasPorCentro[centro] || 0) + 1;\r\n                                                }\r\n                                            });\r\n                                            const top = Object.entries(historiasPorCentro).sort((a, b) => b[1] - a[1])[0];\r\n                                            if (!top) return \"-\";\r\n                                            return (\r\n                                                <span>\r\n                                                    <b>{top[0]}</b> <span className=\"text-purple-600\">üè´ {top[1]}</span>\r\n                                                </span>\r\n                                            );\r\n                                        } catch { return <span>-</span>; }\r\n                                    }\r\n                                }\r\n                                return \"-\";\r\n                            })()}</li>\r\n                            <li><span className=\"mr-2 text-xl\">üè´</span><b>Centro Escolar con m√°s usuarios activos:</b> {(() => {\r\n                                if (typeof window !== \"undefined\") {\r\n                                    const usersStr = localStorage.getItem(\"users\");\r\n                                    if (usersStr) {\r\n                                        try {\r\n                                            const usersArr = JSON.parse(usersStr);\r\n                                            if (usersArr.length === 0) return \"-\";\r\n                                            const usuariosPorCentro: Record<string, number> = {};\r\n                                            usersArr.forEach((u: any) => {\r\n                                                if (u.centro) {\r\n                                                    usuariosPorCentro[u.centro] = (usuariosPorCentro[u.centro] || 0) + 1;\r\n                                                }\r\n                                            });\r\n                                            const top = Object.entries(usuariosPorCentro).sort((a, b) => b[1] - a[1])[0];\r\n                                            if (!top) return \"-\";\r\n                                            return (\r\n                                                <span>\r\n                                                    <b>{top[0]}</b> <span className=\"text-blue-600\">üè´ {top[1]}</span>\r\n                                                </span>\r\n                                            );\r\n                                        } catch { return \"-\"; }\r\n                                    }\r\n                                }\r\n                                return \"-\";\r\n                            })()}</li>\r\n                        </ul>\r\n                    </div >\r\n                </>\r\n            )}\r\n        </div >\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}