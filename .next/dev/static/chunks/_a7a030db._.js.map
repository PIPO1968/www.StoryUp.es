{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/src/components/UserLink.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\ninterface UserLinkProps {\r\n    nick: string;\r\n    className?: string;\r\n}\r\n\r\nexport const UserLink: React.FC<UserLinkProps> = ({ nick, className }) => {\r\n    const [isPremium, setIsPremium] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const checkPremium = () => {\r\n            // Verificar si el usuario es Premium\r\n            if (typeof window !== \"undefined\" && nick) {\r\n                const premiumInfo = localStorage.getItem(`premium_${nick}`);\r\n                if (premiumInfo) {\r\n                    try {\r\n                        const premium = JSON.parse(premiumInfo);\r\n                        const isActive = new Date(premium.expiracion) > new Date();\r\n                        setIsPremium(isActive);\r\n                    } catch (error) {\r\n                        setIsPremium(false);\r\n                    }\r\n                } else {\r\n                    setIsPremium(false);\r\n                }\r\n            }\r\n        };\r\n\r\n        // Verificar inicialmente\r\n        checkPremium();\r\n\r\n        // Escuchar cambios en localStorage\r\n        const handleStorageChange = (e: StorageEvent) => {\r\n            if (e.key?.startsWith('premium_') || e.key === null) {\r\n                checkPremium();\r\n            }\r\n        };\r\n\r\n        // Escuchar eventos personalizados de premium\r\n        const handlePremiumUpdate = (e: CustomEvent) => {\r\n            if (e.detail.nick === nick) {\r\n                checkPremium();\r\n            }\r\n        };\r\n\r\n        window.addEventListener('storage', handleStorageChange);\r\n        window.addEventListener('premiumUpdate', handlePremiumUpdate as EventListener);\r\n\r\n        return () => {\r\n            window.removeEventListener('storage', handleStorageChange);\r\n            window.removeEventListener('premiumUpdate', handlePremiumUpdate as EventListener);\r\n        };\r\n    }, [nick]);\r\n\r\n    const normalized = (nick || \"\").trim().toLowerCase();\r\n    if (!nick || normalized === \"anonimo\" || normalized === \"an√≥nimo\") {\r\n        return <span className={className || \"text-gray-500\"}>{nick || \"(sin nick)\"}</span>;\r\n    }\r\n\r\n    return (\r\n        <a\r\n            href={`/perfil/${encodeURIComponent(nick)}`}\r\n            className={className || \"text-blue-600 underline hover:text-blue-800\"}\r\n            title={`Ver perfil de ${nick}${isPremium ? ' (Usuario Premium)' : ''}`}\r\n        >\r\n            {nick}\r\n            {isPremium && (\r\n                <span className=\"ml-1 inline-flex items-center\">\r\n                    <span\r\n                        className=\"bg-gradient-to-r from-sky-100 to-blue-100 text-amber-900 text-xs px-2 py-1 rounded-full font-bold shadow-md border border-sky-300\"\r\n                        title=\"Usuario Premium\"\r\n                    >\r\n                        üëë\r\n                    </span>\r\n                </span>\r\n            )}\r\n        </a>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;;;;AAOO,MAAM,WAAoC,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE;;IACjE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,IAAA,0KAAS;8BAAC;YACN,MAAM;mDAAe;oBACjB,qCAAqC;oBACrC,IAAI,+CAAkB,eAAe,MAAM;wBACvC,MAAM,cAAc,aAAa,OAAO,CAAC,CAAC,QAAQ,EAAE,MAAM;wBAC1D,IAAI,aAAa;4BACb,IAAI;gCACA,MAAM,UAAU,KAAK,KAAK,CAAC;gCAC3B,MAAM,WAAW,IAAI,KAAK,QAAQ,UAAU,IAAI,IAAI;gCACpD,aAAa;4BACjB,EAAE,OAAO,OAAO;gCACZ,aAAa;4BACjB;wBACJ,OAAO;4BACH,aAAa;wBACjB;oBACJ;gBACJ;;YAEA,yBAAyB;YACzB;YAEA,mCAAmC;YACnC,MAAM;0DAAsB,CAAC;oBACzB,IAAI,EAAE,GAAG,EAAE,WAAW,eAAe,EAAE,GAAG,KAAK,MAAM;wBACjD;oBACJ;gBACJ;;YAEA,6CAA6C;YAC7C,MAAM;0DAAsB,CAAC;oBACzB,IAAI,EAAE,MAAM,CAAC,IAAI,KAAK,MAAM;wBACxB;oBACJ;gBACJ;;YAEA,OAAO,gBAAgB,CAAC,WAAW;YACnC,OAAO,gBAAgB,CAAC,iBAAiB;YAEzC;sCAAO;oBACH,OAAO,mBAAmB,CAAC,WAAW;oBACtC,OAAO,mBAAmB,CAAC,iBAAiB;gBAChD;;QACJ;6BAAG;QAAC;KAAK;IAET,MAAM,aAAa,CAAC,QAAQ,EAAE,EAAE,IAAI,GAAG,WAAW;IAClD,IAAI,CAAC,QAAQ,eAAe,aAAa,eAAe,WAAW;QAC/D,qBAAO,6LAAC;YAAK,WAAW,aAAa;sBAAkB,QAAQ;;;;;;IACnE;IAEA,qBACI,6LAAC;QACG,MAAM,CAAC,QAAQ,EAAE,mBAAmB,OAAO;QAC3C,WAAW,aAAa;QACxB,OAAO,CAAC,cAAc,EAAE,OAAO,YAAY,uBAAuB,IAAI;;YAErE;YACA,2BACG,6LAAC;gBAAK,WAAU;0BACZ,cAAA,6LAAC;oBACG,WAAU;oBACV,OAAM;8BACT;;;;;;;;;;;;;;;;;AAOrB;GAxEa;KAAA","debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/src/utils/renderNick.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { UserLink } from \"@/components/UserLink\";\r\n\r\nexport function renderNick(nick: string, className?: string) {\r\n    return <UserLink nick={nick} className={className} />;\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAEO,SAAS,WAAW,IAAY,EAAE,SAAkB;IACvD,qBAAO,6LAAC,6IAAQ;QAAC,MAAM;QAAM,WAAW;;;;;;AAC5C","debugId":null}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/src/components/BotonesAmistad.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\ninterface BotonesAmistadProps {\r\n    perfilNick: string;\r\n}\r\n\r\nconst BotonesAmistad: React.FC<BotonesAmistadProps> = ({ perfilNick }) => {\r\n    const [user, setUser] = useState<any>(null);\r\n    const [esAmigo, setEsAmigo] = useState(false);\r\n    const [pendiente, setPendiente] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (typeof window !== \"undefined\") {\r\n            const userStr = localStorage.getItem(\"user\");\r\n            if (!userStr) return;\r\n            const userObj = JSON.parse(userStr);\r\n            setUser(userObj);\r\n            if (!perfilNick || perfilNick === userObj.nick) return;\r\n            // Amistad\r\n            const amigosStr = localStorage.getItem(`amigos_${userObj.nick}`);\r\n            let amigos = [];\r\n            if (amigosStr) {\r\n                try { amigos = JSON.parse(amigosStr); } catch { }\r\n            }\r\n            setEsAmigo(amigos.some((a: any) => a.nick === perfilNick));\r\n            // Solicitud pendiente\r\n            const solicitudesEnviadas = localStorage.getItem(`solicitudes_${perfilNick}`);\r\n            let pendienteTmp = false;\r\n            if (solicitudesEnviadas) {\r\n                try {\r\n                    const arr = JSON.parse(solicitudesEnviadas);\r\n                    pendienteTmp = arr.some((s: any) => s.origen === userObj.nick && s.estado === \"pendiente\");\r\n                } catch { }\r\n            }\r\n            setPendiente(pendienteTmp);\r\n        }\r\n    }, [perfilNick]);\r\n\r\n    const handleSolicitar = () => {\r\n        if (!user) return;\r\n        if (!perfilNick || perfilNick === user.nick) return;\r\n        const nuevaSolicitud = {\r\n            origen: user.nick,\r\n            destino: perfilNick,\r\n            estado: \"pendiente\",\r\n        };\r\n        const solicitudesGuardadas = localStorage.getItem(`solicitudes_${perfilNick}`);\r\n        const solicitudesActualizadas = solicitudesGuardadas ? JSON.parse(solicitudesGuardadas) : [];\r\n        solicitudesActualizadas.push(nuevaSolicitud);\r\n        localStorage.setItem(`solicitudes_${perfilNick}`, JSON.stringify(solicitudesActualizadas));\r\n        setPendiente(true);\r\n        alert(`Solicitud de amistad enviada a ${perfilNick}`);\r\n    };\r\n\r\n    const handleFinalizar = () => {\r\n        if (!user) return;\r\n        // Eliminar amistad de ambos lados\r\n        const amigosStr = localStorage.getItem(`amigos_${user.nick}`);\r\n        let amigos = amigosStr ? JSON.parse(amigosStr) : [];\r\n        amigos = amigos.filter((a: any) => a.nick !== perfilNick);\r\n        localStorage.setItem(`amigos_${user.nick}`, JSON.stringify(amigos));\r\n        const amigosDelOtroStr = localStorage.getItem(`amigos_${perfilNick}`);\r\n        let amigosDelOtro = amigosDelOtroStr ? JSON.parse(amigosDelOtroStr) : [];\r\n        amigosDelOtro = amigosDelOtro.filter((a: any) => a.nick !== user.nick);\r\n        localStorage.setItem(`amigos_${perfilNick}`, JSON.stringify(amigosDelOtro));\r\n        // Actualizar el objeto user y el array de usuarios en localStorage\r\n        const userObj = { ...user, amigos };\r\n        localStorage.setItem(\"user\", JSON.stringify(userObj));\r\n        const usersStr = localStorage.getItem(\"users\");\r\n        if (usersStr) {\r\n            let usersArr = JSON.parse(usersStr);\r\n            usersArr = usersArr.map((u: any) =>\r\n                u.nick === user.nick ? { ...u, amigos } : u\r\n            );\r\n            localStorage.setItem(\"users\", JSON.stringify(usersArr));\r\n        }\r\n        setEsAmigo(false);\r\n        alert(`Has eliminado la amistad con ${perfilNick}`);\r\n    };\r\n\r\n    if (!user || perfilNick === user.nick) return null;\r\n    if (esAmigo) {\r\n        return (\r\n            <button\r\n                className=\"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-6 rounded-xl text-base shadow mb-2 animate-pulse\"\r\n                onClick={handleFinalizar}\r\n            >Finalizar amistad</button>\r\n        );\r\n    }\r\n    if (pendiente) {\r\n        return (\r\n            <span className=\"bg-yellow-300 text-yellow-900 font-bold py-2 px-6 rounded-xl text-base shadow mb-2 animate-pulse flex items-center gap-2\">\r\n                Amistad pendiente\r\n                <a\r\n                    href=\"#\"\r\n                    className=\"text-green-700 underline text-xs ml-2\"\r\n                    onClick={e => {\r\n                        e.preventDefault();\r\n                        // Aceptar amistad\r\n                        // A√±adir a amigos de ambos lados\r\n                        const amigosUser = JSON.parse(localStorage.getItem(`amigos_${user.nick}`) || \"[]\");\r\n                        amigosUser.push({ nick: perfilNick });\r\n                        localStorage.setItem(`amigos_${user.nick}`, JSON.stringify(amigosUser));\r\n                        const amigosPerfil = JSON.parse(localStorage.getItem(`amigos_${perfilNick}`) || \"[]\");\r\n                        amigosPerfil.push({ nick: user.nick });\r\n                        localStorage.setItem(`amigos_${perfilNick}`, JSON.stringify(amigosPerfil));\r\n                        // Actualizar el objeto user y el array de usuarios en localStorage\r\n                        const userObj = { ...user, amigos: amigosUser };\r\n                        localStorage.setItem(\"user\", JSON.stringify(userObj));\r\n                        const usersStr = localStorage.getItem(\"users\");\r\n                        if (usersStr) {\r\n                            let usersArr = JSON.parse(usersStr);\r\n                            usersArr = usersArr.map((u: any) =>\r\n                                u.nick === user.nick ? { ...u, amigos: amigosUser } : u\r\n                            );\r\n                            localStorage.setItem(\"users\", JSON.stringify(usersArr));\r\n                        }\r\n                        // Eliminar solicitud pendiente\r\n                        const solicitudesGuardadas = localStorage.getItem(`solicitudes_${perfilNick}`);\r\n                        let solicitudes = solicitudesGuardadas ? JSON.parse(solicitudesGuardadas) : [];\r\n                        solicitudes = solicitudes.filter((s: any) => !(s.origen === user.nick && s.estado === \"pendiente\"));\r\n                        localStorage.setItem(`solicitudes_${perfilNick}`, JSON.stringify(solicitudes));\r\n                        setPendiente(false);\r\n                        setEsAmigo(true);\r\n                        alert(\"¬°Amistad aceptada!\");\r\n                    }}\r\n                >Aceptar</a>\r\n                <a\r\n                    href=\"#\"\r\n                    className=\"text-red-700 underline text-xs ml-2\"\r\n                    onClick={e => {\r\n                        e.preventDefault();\r\n                        // Rechazar amistad\r\n                        const solicitudesGuardadas = localStorage.getItem(`solicitudes_${perfilNick}`);\r\n                        let solicitudes = solicitudesGuardadas ? JSON.parse(solicitudesGuardadas) : [];\r\n                        solicitudes = solicitudes.filter((s: any) => !(s.origen === user.nick && s.estado === \"pendiente\"));\r\n                        localStorage.setItem(`solicitudes_${perfilNick}`, JSON.stringify(solicitudes));\r\n                        setPendiente(false);\r\n                        alert(\"Solicitud de amistad rechazada\");\r\n                    }}\r\n                >Rechazar</a>\r\n            </span>\r\n        );\r\n    }\r\n    return (\r\n        <button\r\n            className=\"bg-blue-600 hover:bg-blue-800 text-white font-bold py-2 px-6 rounded-xl text-base shadow mb-2 animate-bounce\"\r\n            onClick={handleSolicitar}\r\n        >Solicitar Amistad</button>\r\n    );\r\n};\r\n\r\nexport default BotonesAmistad;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 349, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/src/app/perfil/%5Bnick%5D/page.tsx"],"sourcesContent":["\r\n\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\n\r\nimport { renderNick } from \"@/utils/renderNick\";\r\nimport BotonesAmistad from \"@/components/BotonesAmistad\";\r\n\r\nexport default function PerfilPorNick() {\r\n    const params = useParams();\r\n    const nick = params?.nick as string;\r\n    const [perfil, setPerfil] = useState<any>(null); // El perfil mostrado\r\n    const [user, setUser] = useState<any>(null); // El usuario logueado\r\n    const [esAmigo, setEsAmigo] = useState(false);\r\n    const [solicitudPendiente, setSolicitudPendiente] = useState(false);\r\n\r\n    const isPerfilPremium = perfil ? (() => {\r\n        const premiumData = localStorage.getItem(`premium_${perfil.nick}`);\r\n        if (premiumData) {\r\n            try {\r\n                const data = JSON.parse(premiumData);\r\n                return data.activo === true;\r\n            } catch {\r\n                return false;\r\n            }\r\n        }\r\n        return false;\r\n    })() : false;\r\n\r\n    useEffect(() => {\r\n        if (typeof window !== \"undefined\") {\r\n            const userStr = localStorage.getItem(\"user\");\r\n            const usersStr = localStorage.getItem(\"users\");\r\n            if (!userStr || !usersStr) return;\r\n            const userObj = JSON.parse(userStr);\r\n            setUser(userObj);\r\n            const usersArr = JSON.parse(usersStr);\r\n            const perfilObj = usersArr.find((u: any) => u.nick === nick);\r\n            if (!perfilObj) {\r\n                setPerfil(null);\r\n                return;\r\n            }\r\n            setPerfil(perfilObj);\r\n            // Amistad\r\n            const amigosStr = localStorage.getItem(`amigos_${userObj.nick}`);\r\n            let amigos = [];\r\n            if (amigosStr) {\r\n                try { amigos = JSON.parse(amigosStr); } catch { }\r\n            }\r\n            setEsAmigo(amigos.some((a: any) => a.nick === perfilObj.nick));\r\n            // Verificar si hay solicitud pendiente\r\n            const solicitudesGuardadas = localStorage.getItem(`solicitudes_${perfilObj.nick}`);\r\n            let solicitudes = [];\r\n            if (solicitudesGuardadas) {\r\n                try { solicitudes = JSON.parse(solicitudesGuardadas); } catch { }\r\n            }\r\n            setSolicitudPendiente(solicitudes.some((s: any) => s.origen === userObj.nick && s.estado === \"pendiente\"));\r\n            // Likes y comentarios (puedes mantener tu l√≥gica aqu√≠)\r\n        }\r\n    }, [nick]);\r\n\r\n    if (!perfil) {\r\n        return (\r\n            <div className=\"min-h-screen bg-red-100 p-8 flex flex-col items-center justify-center\">\r\n                <h1 className=\"text-2xl font-bold mb-4 text-center text-red-700\">Usuario no encontrado</h1>\r\n                <p className=\"text-center\">El perfil solicitado no existe o es an√≥nimo.</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-green-100 p-8\">\r\n            <h1 className=\"text-2xl font-bold mb-4 text-center\">Informaci√≥n Personal</h1>\r\n\r\n            {/* Indicador Premium Animado */}\r\n            {isPerfilPremium && (\r\n                <div className=\"flex justify-center mt-2 mb-4\">\r\n                    <div className=\"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 text-white px-6 py-2 rounded-full font-bold text-lg shadow-lg shadow-yellow-500/50 animate-pulse flex items-center gap-2\">\r\n                        <span className=\"animate-bounce\">üëë</span>\r\n                        <span>PREMIUM ACTIVO</span>\r\n                        <span className=\"animate-bounce\">‚ú®</span>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <div className={`max-w-lg mx-auto bg-white rounded-lg shadow-md p-6 flex flex-col items-center relative transition-all duration-500 ${isPerfilPremium\r\n                    ? 'border-4 border-yellow-400 shadow-2xl shadow-yellow-400/50 animate-pulse overflow-hidden'\r\n                    : ''\r\n                }`}>\r\n                {/* Efecto de part√≠culas para premium */}\r\n                {isPerfilPremium && (\r\n                    <div className=\"absolute inset-0 pointer-events-none\">\r\n                        <div className=\"absolute top-2 right-2 w-2 h-2 bg-yellow-400 rounded-full animate-ping opacity-75\"></div>\r\n                        <div className=\"absolute top-4 left-4 w-1 h-1 bg-yellow-300 rounded-full animate-bounce opacity-60\"></div>\r\n                        <div className=\"absolute bottom-4 right-6 w-1.5 h-1.5 bg-yellow-500 rounded-full animate-pulse opacity-80\"></div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Botones de amistad globales */}\r\n                <BotonesAmistad perfilNick={perfil.nick} />\r\n\r\n                <div className=\"flex justify-between items-center mb-4 relative\">\r\n                    <h3 className={`text-xl font-bold text-center w-full transition-all duration-300 ${isPerfilPremium ? 'text-yellow-600' : ''\r\n                        }`}>\r\n                        Informaci√≥n Personal\r\n                        {isPerfilPremium && (\r\n                            <span className=\"ml-2 animate-spin\">üëë</span>\r\n                        )}\r\n                    </h3>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col items-center mb-4 relative\">\r\n                    <div className={`relative ${isPerfilPremium ? '' : ''}`}>\r\n                        <img src={perfil.avatar || \"/avatars/default.png\"} alt=\"Avatar\" className={`w-20 h-20 rounded-full mb-2 transition-all duration-300 ${isPerfilPremium\r\n                                ? 'ring-4 ring-yellow-400 ring-opacity-70 shadow-lg shadow-yellow-400/50 hover:scale-110'\r\n                                : ''\r\n                            }`} />\r\n                        {isPerfilPremium && (\r\n                            <div className=\"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-xs animate-bounce\">\r\n                                ‚ú®\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex justify-between items-center mb-4 relative\">\r\n                    <h3 className={`text-xl font-bold text-center w-full transition-all duration-300 ${isPerfilPremium ? 'text-yellow-600' : ''\r\n                        }`}>\r\n                        Informaci√≥n Personal\r\n                        {isPerfilPremium && (\r\n                            <span className=\"ml-2 animate-spin\">üëë</span>\r\n                        )}\r\n                    </h3>\r\n                </div>\r\n                <p><strong>Nick:</strong> {renderNick(perfil.nick)}</p>\r\n                <p><strong>Email:</strong> {perfil.email}</p>\r\n                <p><strong>Centro Educativo:</strong> {perfil.centro}</p>\r\n                <p><strong>Curso:</strong> {perfil.curso}</p>\r\n                <p><strong>Tipo de Usuario:</strong> {perfil.tipo}</p>\r\n                <p><strong>Fecha de Inscripci√≥n:</strong> {perfil.fechaInscripcion ? new Date(perfil.fechaInscripcion).toLocaleDateString('es-ES') : ''}</p>\r\n                <div className=\"mb-2 flex items-center\">\r\n                    <div className=\"flex flex-col mt-2 gap-y-4\">\r\n                        <div className=\"flex flex-row gap-x-12\">\r\n                            <div className=\"flex items-center\">\r\n                                <span className=\"mr-2 text-lg\">üëç</span>\r\n                                <strong>Likes:</strong>\r\n                                <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-green-300 text-green-900 font-bold text-sm\">{perfil.likes || 0}</span>\r\n                            </div>\r\n                            <div className=\"flex items-center ml-8\">\r\n                                <span className=\"mr-2 text-lg\">üë•</span>\r\n                                <strong>Total de Amigos:</strong>\r\n                                <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-300 text-blue-900 font-bold text-sm\">{perfil.amigos ? perfil.amigos.length : 0}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex flex-row gap-x-12\">\r\n                            <div className=\"flex items-center\">\r\n                                <span className=\"mr-2 text-lg\">üìñ</span>\r\n                                <strong>Total de Historias:</strong>\r\n                                <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-purple-200 text-purple-900 font-bold text-sm\">{perfil.historias ? perfil.historias.length : 0}</span>\r\n                            </div>\r\n                            <div className=\"flex items-center\">\r\n                                <span className=\"mr-2 text-lg\">üí¨</span>\r\n                                <strong>Total de Comentarios:</strong>\r\n                                <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-yellow-200 text-yellow-900 font-bold text-sm\">{perfil.comentariosRecibidos || 0}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex flex-row gap-x-12\">\r\n                            <div className=\"flex items-center\">\r\n                                <span className=\"mr-2 text-lg\">üèÜ</span>\r\n                                <strong>Trofeos Desbloqueados:</strong>\r\n                                {(() => {\r\n                                    const trofeos = Array.isArray(perfil.trofeos) ? perfil.trofeos : [];\r\n                                    const total = trofeos.length;\r\n                                    return (\r\n                                        <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-pink-200 text-pink-900 font-bold text-sm\">{total}</span>\r\n                                    );\r\n                                })()}\r\n                            </div>\r\n                            <div className=\"flex items-center\">\r\n                                <span className=\"mr-2 text-lg\">‚úÖ</span>\r\n                                <strong>Respuestas acertadas:</strong>\r\n                                <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-indigo-200 text-indigo-900 font-bold text-sm\">{perfil.preguntasAcertadas || 0}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex flex-row gap-x-12\">\r\n                            <div className=\"flex items-center\">\r\n                                <span className=\"mr-2 text-lg\">ü•á</span>\r\n                                <strong>Competiciones:</strong>\r\n                                <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-teal-200 text-teal-900 font-bold text-sm\">{perfil.competicionesSuperadas || 0}</span>\r\n                            </div>\r\n                            <div className=\"flex items-center\">\r\n                                <span className=\"mr-2 text-lg\">üéâ</span>\r\n                                <strong>Concursos:</strong>\r\n                                <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-red-200 text-red-900 font-bold text-sm\">{perfil.concursosGanados || 0}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1071, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}