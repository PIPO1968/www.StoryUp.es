{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es/src/utils/normalizadores.ts"],"sourcesContent":["// Utilidades para normalizar datos que provienen de localStorage o de la API\r\n// Objetivo: evitar renderizar objetos directamente en JSX y mantener consistencia\r\n\r\nexport const normalizarValorPremio = (valor: any): string => {\r\n    if (valor == null) return \"\";\r\n    if (typeof valor === 'string') return valor;\r\n    if (typeof valor === 'number') return String(valor);\r\n    if (typeof valor === 'object') {\r\n        // Preferimos campos legibles: nombre > titulo > descripcion\r\n        // Si no hay ninguno, guardamos JSON como fallback.\r\n        return valor.nombre || valor.titulo || valor.descripcion || JSON.stringify(valor);\r\n    }\r\n    // Guardar algo sensato para otros tipos\r\n    return String(valor);\r\n};\r\n\r\nexport const normalizarEventoEspecial = (evento: any) => {\r\n    if (!evento) return null;\r\n    if (typeof evento === 'string') {\r\n        return { nombre: evento, descripcion: evento, emoji: '', tipo: '' };\r\n    }\r\n\r\n    if (typeof evento === 'object') {\r\n        return {\r\n            nombre: evento.nombre || evento.tipo || '',\r\n            descripcion: evento.descripcion || evento.bonus || '',\r\n            emoji: evento.emoji || '',\r\n            tipo: evento.tipo || '',\r\n            multiplicador: evento.multiplicador || null\r\n        };\r\n    }\r\n\r\n    return null;\r\n};\r\n"],"names":[],"mappings":"AAAA,6EAA6E;AAC7E,kFAAkF;;;;;;;AAE3E,MAAM,wBAAwB,CAAC;IAClC,IAAI,SAAS,MAAM,OAAO;IAC1B,IAAI,OAAO,UAAU,UAAU,OAAO;IACtC,IAAI,OAAO,UAAU,UAAU,OAAO,OAAO;IAC7C,IAAI,OAAO,UAAU,UAAU;QAC3B,4DAA4D;QAC5D,mDAAmD;QACnD,OAAO,MAAM,MAAM,IAAI,MAAM,MAAM,IAAI,MAAM,WAAW,IAAI,KAAK,SAAS,CAAC;IAC/E;IACA,wCAAwC;IACxC,OAAO,OAAO;AAClB;AAEO,MAAM,2BAA2B,CAAC;IACrC,IAAI,CAAC,QAAQ,OAAO;IACpB,IAAI,OAAO,WAAW,UAAU;QAC5B,OAAO;YAAE,QAAQ;YAAQ,aAAa;YAAQ,OAAO;YAAI,MAAM;QAAG;IACtE;IAEA,IAAI,OAAO,WAAW,UAAU;QAC5B,OAAO;YACH,QAAQ,OAAO,MAAM,IAAI,OAAO,IAAI,IAAI;YACxC,aAAa,OAAO,WAAW,IAAI,OAAO,KAAK,IAAI;YACnD,OAAO,OAAO,KAAK,IAAI;YACvB,MAAM,OAAO,IAAI,IAAI;YACrB,eAAe,OAAO,aAAa,IAAI;QAC3C;IACJ;IAEA,OAAO;AACX","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es/src/app/centros-competencia/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useTranslation } from '@/utils/i18n';\r\nimport { normalizarValorPremio, normalizarEventoEspecial } from '@/utils/normalizadores';\r\nimport { renderNick } from \"@/utils/renderNick\";\r\nimport trofeos from \"../../data/trofeos.json\";\r\nimport trofeosPremium from \"../../data/trofeos-premium.json\";\r\n\r\ninterface Usuario {\r\n    nick: string;\r\n    nombre: string;\r\n    email: string;\r\n    centro: string;\r\n    curso: string;\r\n    tipo: string;\r\n    fechaInscripcion: string;\r\n    likes: number;\r\n    amigos: string[];\r\n    respuestasAcertadas: number;\r\n    competicionesSuperadas: number;\r\n    concursosGanados: number;\r\n    comentariosRecibidos: number;\r\n    historiasCreadas: number;\r\n    historias?: any[];\r\n    anosEnStoryUp: number;\r\n    trofeos: any[];\r\n}\r\n\r\ninterface CentroStats {\r\n    nombre: string;\r\n    estudiantes: number;\r\n    estudiantesActivos: number; // activos en √∫ltimos 7 d√≠as\r\n    respuestasCorrectas: number;\r\n    concursosGanados: number;\r\n    historiasCreadas: number;\r\n    interaccionesSociales: number; // likes + mensajes + amigos\r\n    diasConsecutivos: number;\r\n    puntajeTotal: number;\r\n    ranking: number;\r\n    medalla: string;\r\n}\r\n\r\nexport default function CentrosCompetencia() {\r\n    const [loading, setLoading] = useState(true);\r\n    const [centros, setCentros] = useState<CentroStats[]>([]);\r\n    const [centrosAnuales, setCentrosAnuales] = useState<CentroStats[]>([]);\r\n    const [miCentro, setMiCentro] = useState<string>(\"\");\r\n    const [filtroMes, setFiltroMes] = useState<string>(\"actual\");\r\n    const [modoVisualizacion, setModoVisualizacion] = useState<\"actual\" | \"historico\" | \"anual\">(\"actual\");\r\n    const [mesSeleccionado, setMesSeleccionado] = useState<string>(\"\");\r\n    const fechaActual = new Date();\r\n    const { t } = useTranslation();\r\n    const [mesesDisponibles, setMesesDisponibles] = useState<string[]>([]);\r\n    const [historialGanadores, setHistorialGanadores] = useState<any[]>([]);\r\n    const [premiosDelMes, setPremiosDelMes] = useState<any[]>([]);\r\n    const [usuario, setUsuario] = useState<Usuario | null>(null);\r\n\r\n    // ‚úÖ MODO VACACIONES: Estados para funcionalidades especiales\r\n    const [modoVacaciones, setModoVacaciones] = useState<boolean>(false);\r\n    const [tipoVacacion, setTipoVacacion] = useState<string>(\"\");\r\n    const [eventoEspecial, setEventoEspecial] = useState<any>(null);\r\n\r\n    // ‚úÖ COMPETENCIAS POR ASIGNATURA: Estados para filtros espec√≠ficos\r\n    const [asignaturaSeleccionada, setAsignaturaSeleccionada] = useState<string>(\"todas\");\r\n    const [hayDatosAsignatura, setHayDatosAsignatura] = useState<boolean>(true);\r\n    const [cursoSeleccionado, setCursoSeleccionado] = useState<string>(\"todos\");\r\n    const asignaturas = [\"todas\", \"Matem√°ticas\", \"Lenguaje\", \"Literatura\", \"Historia\", \"Geograf√≠a\", \"Naturaleza\", \"Ingl√©s\", \"General\"];\r\n    const cursos = [\"todos\", \"1¬∫ Primaria\", \"2¬∫ Primaria\", \"3¬∫ Primaria\", \"4¬∫ Primaria\", \"5¬∫ Primaria\", \"6¬∫ Primaria\"];\r\n\r\n    // Nota: Los datos de asignaturas se almacenan cuando los usuarios responden preguntas\r\n    // Formato: \"{asignatura}_{nickname}\" ‚Üí puntos obtenidos\r\n    // Ejemplo: \"matematicas_PIPO68\" ‚Üí \"45\"\r\n\r\n    // ‚úÖ MODO VACACIONES: Funciones para detectar per√≠odos especiales\r\n    const detectarPeriodoVacaciones = (): { esVacacion: boolean; tipo: string; evento: any } => {\r\n        const ahora = new Date();\r\n        const mes = ahora.getMonth() + 1; // 1-12\r\n        const dia = ahora.getDate();\r\n        const a√±o = ahora.getFullYear();\r\n\r\n        // Per√≠odos de vacaciones escolares en Espa√±a\r\n        const vacaciones = [\r\n            { inicio: { mes: 6, dia: 15 }, fin: { mes: 9, dia: 15 }, tipo: \"Vacaciones de Verano\", emoji: \"üèñÔ∏è\", multiplicador: 1.5 },\r\n            { inicio: { mes: 12, dia: 20 }, fin: { mes: 1, dia: 7 }, tipo: \"Vacaciones de Navidad\", emoji: \"üéÑ\", multiplicador: 1.3 },\r\n            { inicio: { mes: 3, dia: 20 }, fin: { mes: 4, dia: 5 }, tipo: \"Vacaciones de Semana Santa\", emoji: \"üê∞\", multiplicador: 1.2 },\r\n            { inicio: { mes: 10, dia: 31 }, fin: { mes: 11, dia: 2 }, tipo: \"Puente de Halloween\", emoji: \"üéÉ\", multiplicador: 1.1 },\r\n            { inicio: { mes: 12, dia: 6 }, fin: { mes: 12, dia: 8 }, tipo: \"Puente de la Constituci√≥n\", emoji: \"üá™üá∏\", multiplicador: 1.1 }\r\n        ];\r\n\r\n        for (const vacacion of vacaciones) {\r\n            let enPeriodo = false;\r\n\r\n            if (vacacion.inicio.mes === vacacion.fin.mes) {\r\n                // Mismo mes\r\n                enPeriodo = mes === vacacion.inicio.mes && dia >= vacacion.inicio.dia && dia <= vacacion.fin.dia;\r\n            } else if (vacacion.inicio.mes === 12 && vacacion.fin.mes === 1) {\r\n                // Navidad (diciembre-enero)\r\n                enPeriodo = (mes === 12 && dia >= vacacion.inicio.dia) || (mes === 1 && dia <= vacacion.fin.dia);\r\n            } else {\r\n                // Diferentes meses\r\n                enPeriodo = (mes === vacacion.inicio.mes && dia >= vacacion.inicio.dia) ||\r\n                    (mes === vacacion.fin.mes && dia <= vacacion.fin.dia) ||\r\n                    (mes > vacacion.inicio.mes && mes < vacacion.fin.mes);\r\n            }\r\n\r\n            if (enPeriodo) {\r\n                return {\r\n                    esVacacion: true,\r\n                    tipo: vacacion.tipo,\r\n                    evento: {\r\n                        emoji: vacacion.emoji,\r\n                        multiplicador: vacacion.multiplicador,\r\n                        descripcion: `Durante ${vacacion.tipo.toLowerCase()}, ¬°los puntos se multiplican por ${vacacion.multiplicador}!`\r\n                    }\r\n                };\r\n            }\r\n        }\r\n\r\n        return { esVacacion: false, tipo: \"\", evento: null };\r\n    };\r\n\r\n    // ‚úÖ CHALLENGES ESPECIALES: Eventos tem√°ticos por fecha\r\n    const obtenerChallengeActual = (): any => {\r\n        const ahora = new Date();\r\n        const mes = ahora.getMonth() + 1;\r\n        const dia = ahora.getDate();\r\n\r\n        const challenges = [\r\n            { mes: 2, dia: 14, nombre: \"Challenge del Amor\", emoji: \"üíù\", bonus: \"Historias modo 'Coraz√≥n' +3 puntos\" },\r\n            { mes: 4, dia: 23, nombre: \"D√≠a del Libro\", emoji: \"üìö\", bonus: \"Crear cualquier historia +5 puntos extra\" },\r\n            { mes: 5, dia: 15, nombre: \"Challenge de la Familia\", emoji: \"üë®‚Äçüë©‚Äçüëß‚Äçüë¶\", bonus: \"Historias modo 'My Live' +2 puntos\" },\r\n            { mes: 10, dia: 31, nombre: \"Halloween Challenge\", emoji: \"üéÉ\", bonus: \"Historias modo 'Terror' +4 puntos\" },\r\n            { mes: 12, dia: 25, nombre: \"Challenge Navide√±o\", emoji: \"üéÖ\", bonus: \"Historias modo 'My Live' +6 puntos\" }\r\n        ];\r\n\r\n        return challenges.find(ch => ch.mes === mes && dia >= ch.dia - 3 && dia <= ch.dia + 3);\r\n    };\r\n\r\n    // Funci√≥n para calcular si un usuario estuvo activo en los √∫ltimos N d√≠as\r\n    const esUsuarioActivo = (usuario: Usuario, dias: number = 7): boolean => {\r\n        // Simulamos actividad basada en datos del usuario\r\n        // Usuarios con datos recientes se consideran activos\r\n        const tieneActividad = usuario.likes > 0 || usuario.historiasCreadas > 0 || usuario.concursosGanados > 0;\r\n        const tieneAmigos = usuario.amigos && usuario.amigos.length > 0;\r\n        const tieneInteracciones = usuario.comentariosRecibidos > 0;\r\n\r\n        // Un usuario se considera activo si tiene cualquier tipo de actividad\r\n        return tieneActividad || tieneAmigos || tieneInteracciones;\r\n    };\r\n\r\n    // Funci√≥n para obtener actividad de competiciones (campeonato)\r\n    const obtenerActividadCompeticiones = (centro: string): number => {\r\n        if (typeof window === \"undefined\") return 0;\r\n\r\n        try {\r\n            let puntosCompeticion = 0;\r\n\r\n            // Buscar datos de campeonato individual por curso y temporada\r\n            const cursos = ['1primaria', '2primaria', '3primaria', '4primaria', '5primaria', '6primaria'];\r\n            const temporadaActual = new Date().getFullYear();\r\n\r\n            // Datos de estudiantes\r\n            cursos.forEach(curso => {\r\n                const key = `campeonato_individual_t${temporadaActual}`;\r\n                const datos = localStorage.getItem(key);\r\n                if (datos) {\r\n                    try {\r\n                        const campeonato = JSON.parse(datos);\r\n                        // Sumar puntos de usuarios del centro\r\n                        Object.keys(campeonato).forEach(nick => {\r\n                            const userData = localStorage.getItem('users');\r\n                            if (userData) {\r\n                                const usuarios = JSON.parse(userData);\r\n                                const usuario = usuarios.find((u: Usuario) => u.nick.toLowerCase().replace(/\\s+/g, \"\") === nick);\r\n                                if (usuario && usuario.centro === centro) {\r\n                                    const datosUsuario = campeonato[nick];\r\n                                    puntosCompeticion += (Number(datosUsuario.ganados) || 0) * 10;\r\n                                    puntosCompeticion += (Number(datosUsuario.acertadas) || Number(datosUsuario.preguntasAcertadas) || 0) * 2;\r\n                                }\r\n                            }\r\n                        });\r\n                    } catch (e) {\r\n                        // Silent fail: no console logs to keep output clean for real data presentation\r\n                    }\r\n                }\r\n            });\r\n\r\n            // Agregar datos de docentes\r\n            const docentesKey = `campeonato_docentes_t${temporadaActual}`;\r\n            const datosDocentes = localStorage.getItem(docentesKey);\r\n            if (datosDocentes) {\r\n                try {\r\n                    const campeonatoDocentes = JSON.parse(datosDocentes);\r\n                    Object.keys(campeonatoDocentes).forEach(nick => {\r\n                        const userData = localStorage.getItem('users');\r\n                        if (userData) {\r\n                            const usuarios = JSON.parse(userData);\r\n                            const usuario = usuarios.find((u: Usuario) => u.nick.toLowerCase().replace(/\\s+/g, \"\") === nick);\r\n                            if (usuario && usuario.centro === centro && usuario.tipo === \"docente\") {\r\n                                const datosUsuario = campeonatoDocentes[nick];\r\n                                // Los docentes obtienen m√°s puntos por su liderazgo\r\n                                puntosCompeticion += (Number(datosUsuario.ganados) || 0) * 15;\r\n                                puntosCompeticion += (Number(datosUsuario.acertadas) || Number(datosUsuario.preguntasAcertadas) || 0) * 3;\r\n                                puntosCompeticion += (Number(datosUsuario.likes) || 0) * 5; // Bonus por engagement\r\n                            }\r\n                        }\r\n                    });\r\n                } catch (e) {\r\n                    // Silent fail\r\n                }\r\n            }\r\n\r\n            return puntosCompeticion;\r\n        } catch (error) {\r\n            return 0;\r\n        }\r\n    };\r\n\r\n    // ‚úÖ COMPETENCIAS POR ASIGNATURA: Funci√≥n para obtener estad√≠sticas espec√≠ficas\r\n    const obtenerEstadisticasAsignatura = (asignatura: string, usuarios: Usuario[], cursoFiltro?: string): { [centro: string]: number } => {\r\n        if (typeof window === \"undefined\") return {};\r\n\r\n        const estadisticasCentros: { [centro: string]: number } = {};\r\n\r\n        if (asignatura === \"todas\") {\r\n            return {};\r\n        }\r\n\r\n        // Solo buscar datos espec√≠ficos reales por asignatura, no estimaciones\r\n        usuarios.forEach(usuario => {\r\n            if (!usuario.centro) return;\r\n\r\n            // ‚úÖ FILTRAR POR CURSO si se especifica\r\n            if (cursoFiltro && cursoFiltro !== \"todos\" && usuario.curso !== cursoFiltro) {\r\n                return;\r\n            }\r\n\r\n            const centro = usuario.centro;\r\n            if (!estadisticasCentros[centro]) {\r\n                estadisticasCentros[centro] = 0;\r\n            }\r\n\r\n            // Buscar datos espec√≠ficos por asignatura en localStorage\r\n            // Mapear de nombre display a nombre de localStorage\r\n            const mapaAsignaturasInverso: { [key: string]: string } = {\r\n                'Matem√°ticas': 'matematicas',\r\n                'Historia': 'historia',\r\n                'Geograf√≠a': 'geografia',\r\n                'Literatura': 'literatura',\r\n                'Ingl√©s': 'ingles',\r\n                'Naturaleza': 'naturaleza',\r\n                'Lenguaje': 'lenguaje',\r\n                'General': 'general'\r\n            };\r\n\r\n            const asignaturaParaLocalStorage = mapaAsignaturasInverso[asignatura] || asignatura.toLowerCase();\r\n            const claveAsignatura = `${asignaturaParaLocalStorage}_${usuario.nick}`;\r\n            const datosAsignatura = localStorage.getItem(claveAsignatura);\r\n\r\n            if (datosAsignatura && parseInt(datosAsignatura, 10) > 0) {\r\n                // Solo usar datos reales espec√≠ficos de la asignatura\r\n                estadisticasCentros[centro] += parseInt(datosAsignatura, 10);\r\n            }\r\n        });\r\n\r\n        return estadisticasCentros;\r\n    };\r\n\r\n    // Funci√≥n auxiliar - todas las asignaturas tienen la misma dificultad\r\n    const obtenerFactorAsignatura = (asignatura: string): number => {\r\n        // Todas las asignaturas tienen el mismo nivel de dificultad\r\n        return 1.0; // 100% para todas\r\n    };    // Funci√≥n para calcular estad√≠sticas de un centro\r\n    const calcularStatsDelCentro = (nombreCentro: string, usuarios: Usuario[]): CentroStats => {\r\n        // Separar estudiantes y docentes del centro\r\n        const estudiantesDelCentro = usuarios.filter(u =>\r\n            u.centro === nombreCentro && u.tipo !== \"docente\"\r\n        );\r\n\r\n        const docentesDelCentro = usuarios.filter(u =>\r\n            u.centro === nombreCentro && u.tipo === \"docente\"\r\n        );\r\n\r\n        const estudiantesActivos = estudiantesDelCentro.filter(u => esUsuarioActivo(u)).length;\r\n        const docentesActivos = docentesDelCentro.filter(u => esUsuarioActivo(u)).length;\r\n\r\n        let respuestasCorrectas, concursosGanados, historiasCreadas, interaccionesSociales;\r\n\r\n        // ‚úÖ APLICAR FILTRO POR ASIGNATURA SI EST√Å SELECCIONADO\r\n        if (asignaturaSeleccionada !== \"todas\") {\r\n            // Obtener estad√≠sticas espec√≠ficas de la asignatura\r\n            const statsAsignatura = obtenerEstadisticasAsignatura(asignaturaSeleccionada, usuarios, cursoSeleccionado);\r\n            const puntosAsignatura = statsAsignatura[nombreCentro] || 0;\r\n\r\n            // Para asignatura espec√≠fica, usamos los puntos espec√≠ficos obtenidos\r\n            respuestasCorrectas = puntosAsignatura;\r\n\r\n            // Si no hay datos espec√≠ficos, usar datos generales como fallback\r\n            if (puntosAsignatura === 0) {\r\n                const respuestasGenerales = estudiantesDelCentro.reduce((sum, u) => sum + (Number(u.respuestasAcertadas) || 0), 0) +\r\n                    docentesDelCentro.reduce((sum, u) => sum + (Number(u.respuestasAcertadas) || 0), 0);\r\n                respuestasCorrectas = respuestasGenerales;\r\n            }\r\n\r\n            // Para otras m√©tricas, usar los datos reales\r\n            concursosGanados = estudiantesDelCentro.reduce((sum, u) => sum + (Number(u.concursosGanados) || 0), 0) +\r\n                docentesDelCentro.reduce((sum, u) => sum + (Number(u.concursosGanados) || 0), 0);\r\n            historiasCreadas = estudiantesDelCentro.reduce((sum, u) => sum + (Array.isArray(u.historias) ? u.historias.length : (Number(u.historiasCreadas) || 0)), 0) +\r\n                docentesDelCentro.reduce((sum, u) => sum + (Array.isArray(u.historias) ? u.historias.length : (Number(u.historiasCreadas) || 0)), 0);\r\n            interaccionesSociales = estudiantesDelCentro.reduce((sum, u) =>\r\n                sum + (Number(u.likes) || 0) + (u.amigos?.length || 0) + (Number(u.comentariosRecibidos) || 0), 0) +\r\n                docentesDelCentro.reduce((sum, u) =>\r\n                    sum + (Number(u.likes) || 0) + (u.amigos?.length || 0) + (Number(u.comentariosRecibidos) || 0), 0);\r\n        } else {\r\n            // Estad√≠sticas generales (todas las asignaturas)\r\n            const respuestasCorrectasEstudiantes = estudiantesDelCentro.reduce((sum, u) => sum + (Number(u.respuestasAcertadas) || 0), 0);\r\n            const concursosGanadosEstudiantes = estudiantesDelCentro.reduce((sum, u) => sum + (Number(u.concursosGanados) || 0), 0);\r\n            const historiasCreadasEstudiantes = estudiantesDelCentro.reduce((sum, u) => sum + (Array.isArray(u.historias) ? u.historias.length : (Number(u.historiasCreadas) || 0)), 0);\r\n            const interaccionesSocialesEstudiantes = estudiantesDelCentro.reduce((sum, u) =>\r\n                sum + (Number(u.likes) || 0) + (u.amigos?.length || 0) + (Number(u.comentariosRecibidos) || 0), 0);\r\n\r\n            // Estad√≠sticas de docentes  \r\n            const respuestasCorrectasDocentes = docentesDelCentro.reduce((sum, u) => sum + (Number(u.respuestasAcertadas) || 0), 0);\r\n            const concursosGanadosDocentes = docentesDelCentro.reduce((sum, u) => sum + (Number(u.concursosGanados) || 0), 0);\r\n            const historiasCreadasDocentes = docentesDelCentro.reduce((sum, u) => sum + (Array.isArray(u.historias) ? u.historias.length : (Number(u.historiasCreadas) || 0)), 0);\r\n            const interaccionesSocialesDocentes = docentesDelCentro.reduce((sum, u) =>\r\n                sum + (Number(u.likes) || 0) + (u.amigos?.length || 0) + (Number(u.comentariosRecibidos) || 0), 0);\r\n\r\n            // Totales combinados\r\n            respuestasCorrectas = respuestasCorrectasEstudiantes + respuestasCorrectasDocentes;\r\n            concursosGanados = concursosGanadosEstudiantes + concursosGanadosDocentes;\r\n            historiasCreadas = historiasCreadasEstudiantes + historiasCreadasDocentes;\r\n            interaccionesSociales = interaccionesSocialesEstudiantes + interaccionesSocialesDocentes;\r\n        }\r\n\r\n        // Obtener actividad de competiciones (datos reales de campeonatos)\r\n        const puntosCompeticiones = obtenerActividadCompeticiones(nombreCentro);\r\n\r\n        // ‚úÖ PREMIOS: Obtener puntos extra por premios ganados\r\n        const premioCentro = obtenerPremioDelCentro(nombreCentro);\r\n        const puntosPremios = premioCentro ? (Number(premioCentro.puntosExtra) || 0) : 0;\r\n\r\n        // Calcular puntuaci√≥n seg√∫n el sistema propuesto (incluyendo docentes)\r\n        const puntajeTotal =\r\n            (estudiantesActivos * 10) +           // Estudiantes activos\r\n            (docentesActivos * 20) +              // Docentes activos (m√°s valor por liderazgo)\r\n            (respuestasCorrectas * 5) +           // Respuestas correctas (filtradas por asignatura si aplica)\r\n            (concursosGanados * 50) +             // Concursos ganados \r\n            (historiasCreadas * 15) +             // Historias creadas \r\n            (interaccionesSociales * 2) +         // Interacciones sociales \r\n            puntosCompeticiones +                 // Actividad en competiciones\r\n            puntosPremios;                        // Bonus por premios ganados\r\n\r\n        return {\r\n            nombre: nombreCentro,\r\n            estudiantes: estudiantesDelCentro.length + docentesDelCentro.length, // Total de miembros\r\n            estudiantesActivos: estudiantesActivos + docentesActivos, // Total de activos\r\n            respuestasCorrectas,\r\n            concursosGanados,\r\n            historiasCreadas,\r\n            interaccionesSociales,\r\n            diasConsecutivos: 0, // Placeholder por ahora\r\n            // Asegurar que puntajeTotal sea siempre number (evitar NaN por datos mal formateados)\r\n            puntajeTotal: Number(puntajeTotal) || 0,\r\n            ranking: 0, // Se calcular√° despu√©s\r\n            medalla: \"\"\r\n        };\r\n    };\r\n\r\n    // Funci√≥n para obtener el logo/escudo de un centro\r\n    const obtenerLogoCentro = (nombreCentro: string): string => {\r\n        // Validaci√≥n: si nombreCentro es undefined, null o vac√≠o, devolver logo por defecto\r\n        if (!nombreCentro || typeof nombreCentro !== 'string') {\r\n            return \"logo-pipo.jpg\";\r\n        }\r\n\r\n        // Mapeo de nombres de centros a archivos de imagen\r\n        const logosDisponibles: { [key: string]: string } = {\r\n            \"Aguere\": \"Aguere.jpg\",\r\n            \"Angeles Bermejo\": \"Angeles Bermejo.jpg\",\r\n            \"Aregume\": \"Aregume.jpg\",\r\n            \"Buen Consejo\": \"Buen Consejo.png\",\r\n            \"Camino La Villa\": \"Camino La Villa.jpg\",\r\n            \"Camino Largo\": \"Camino Largo.jpg\",\r\n            \"Casa Azul\": \"Casa Azul.png\",\r\n            \"Chamberi\": \"Chamberi.png\",\r\n            \"Chayofa\": \"Chayofa.png\",\r\n            \"Cisneros Alter\": \"Cisneros Alter.jpg\",\r\n            \"Colegio Cervantes\": \"Colegio Cervantes.jpg\",\r\n            \"Costa Adeje I\": \"Costa Adeje I..jpg\",\r\n            \"Cuesta 25 de Julio\": \"Cuesta 25 de Julio.jpg\",\r\n            \"Dominguez Alfonso\": \"Dominguez Alfonso.jpg\",\r\n            \"Echeyde Arona\": \"Echeyde Arona.png\",\r\n            \"Echeyde La Laguna\": \"Echeyde La Laguna.png\",\r\n            \"El Monte\": \"El Monte.png\",\r\n            \"Escuela Rural\": \"Escuela Rural.png\",\r\n            \"Escuelas Pias\": \"Escuelas Pias.jpg\",\r\n            \"Gobierno de Canarias\": \"Gobierno de Canarias (Educacion).jpg\",\r\n            \"Hispano La Salud\": \"Hispano La Salud.png\",\r\n            \"La Cuesta B.N\": \"La Cuesta B.N.jpg\",\r\n            \"La Higuerita\": \"La Higuerita.jpg\",\r\n            \"La Rosa\": \"La Rosa.png\",\r\n            \"La Salle\": \"La Salle.png\",\r\n            \"La Vega\": \"La Vega.jpg\",\r\n            \"La Verdellada\": \"La Verdellada.jpg\",\r\n            \"Los Alisios\": \"Los Alisios.jpg\",\r\n            \"Los Menceyes\": \"Los Menceyes.jpg\",\r\n            \"Luis Alvarez Cruz\": \"Luis Alvarez Cruz.jpg\",\r\n            \"Luther King\": \"Luther King.jpg\",\r\n            \"Mayex\": \"Mayex.jpg\",\r\n            \"Montessori\": \"Montessori.png\",\r\n            \"Nuryana\": \"Nuryana.jpg\",\r\n            \"Punta Larga\": \"Punta Larga.jpg\",\r\n            \"Pureza de Maria\": \"Pureza de Maria.png\",\r\n            \"Ravelo\": \"Ravelo.jpg\",\r\n            \"Rodriguez Alberto\": \"Rodriguez Alberto.jpg\",\r\n            \"Rodriguez Campos\": \"Rodriguez Campos.png\",\r\n            \"Saint Andrew's\": \"Saint Andrew,s.jpg\",\r\n            \"Salesianas\": \"Salesianas.jpg\",\r\n            \"San Agustin\": \"San Agustin.jpg\",\r\n            \"San Fernando\": \"San Fernando.jpg\",\r\n            \"San Isidro\": \"San Isidro.jpg\",\r\n            \"San Pablo\": \"San Pablo.png\",\r\n            \"Santa Catalina de Siena\": \"Santa Catalina de Siena.jpg\",\r\n            \"Santa Cruz de California\": \"Santa Cruz de California.jpg\",\r\n            \"Santa Maria del Mar\": \"Santa Maria del Mar.jpg\",\r\n            \"Santa Rosa de Lima\": \"Santa Rosa de Lima.jpg\",\r\n            \"Tacoronte\": \"Tacoronte.jpg\",\r\n            \"Tagoror\": \"Tagoror.jpg\",\r\n            \"Teofilo Perez\": \"Teofilo Perez.png\",\r\n            \"Tincer\": \"Tincer.jpg\",\r\n            \"Virgen de Fatima\": \"Virgen de Fatima.jpg\",\r\n            \"Virgen del Mar\": \"Virgen del Mar.png\"\r\n        };\r\n\r\n        // Buscar coincidencia exacta\r\n        if (logosDisponibles[nombreCentro]) {\r\n            return logosDisponibles[nombreCentro];\r\n        }\r\n\r\n        // Buscar coincidencia parcial (por si el nombre est√° ligeramente diferente)\r\n        // Validaci√≥n adicional antes de usar toLowerCase()\r\n        if (typeof nombreCentro !== 'string' || !nombreCentro) {\r\n            return \"logo-pipo.jpg\";\r\n        }\r\n\r\n        const nombreLimpio = nombreCentro.toLowerCase().trim();\r\n        for (const [nombre, archivo] of Object.entries(logosDisponibles)) {\r\n            if (nombreLimpio.includes(nombre.toLowerCase()) || nombre.toLowerCase().includes(nombreLimpio)) {\r\n                return archivo;\r\n            }\r\n        }\r\n\r\n        // Si no encuentra imagen espec√≠fica, usar logo por defecto\r\n        return \"logo-pipo.jpg\"; // Fallback al logo de la aplicaci√≥n\r\n    };\r\n\r\n    // Funci√≥n auxiliar para verificar si es una imagen o emoji\r\n    const esImagen = (logo: string): boolean => {\r\n        return logo.includes('.jpg') || logo.includes('.png') || logo.includes('.jpeg');\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para obtener premios del mes actual\r\n    const obtenerPremiosDelMes = (): any[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        const fechaActual = new Date();\r\n        const a√±oActual = fechaActual.getFullYear();\r\n        const mesActual = fechaActual.getMonth() + 1; // 1-12\r\n\r\n        // Clave para premios del mes actual\r\n        const clavePremiosActual = `premios_mensuales_${a√±oActual}_${mesActual.toString().padStart(2, '0')}`;\r\n\r\n        // Calcular mes anterior\r\n        let mesAnterior = mesActual - 1;\r\n        let a√±oAnterior = a√±oActual;\r\n        if (mesAnterior === 0) {\r\n            mesAnterior = 12;\r\n            a√±oAnterior = a√±oActual - 1;\r\n        }\r\n        const clavePremiosAnterior = `premios_mensuales_${a√±oAnterior}_${mesAnterior.toString().padStart(2, '0')}`;\r\n\r\n        // Si es un nuevo mes y no hay premios para el mes anterior, generarlos\r\n        if (!localStorage.getItem(clavePremiosAnterior)) {\r\n            const premiosGenerados = generarPremiosAutomaticos(mesAnterior, a√±oAnterior);\r\n            if (premiosGenerados.length > 0) {\r\n                try {\r\n                    localStorage.setItem(clavePremiosActual, JSON.stringify(premiosGenerados));\r\n                } catch (e) {\r\n                    // Silent fail\r\n                }\r\n            }\r\n        }\r\n\r\n        // Devolver premios del mes actual (que ser√°n los del mes anterior si acabamos de generarlos)\r\n        const premiosGuardados = localStorage.getItem(clavePremiosActual);\r\n        if (premiosGuardados) {\r\n            try {\r\n                const parsed = JSON.parse(premiosGuardados);\r\n\r\n                // Normalizar premios (evitar que el campo `premio` sea un objeto)\r\n                const normalized = parsed.map((p: any) => {\r\n                    const prem = p?.premio;\r\n                    if (typeof prem === 'object' && prem !== null) {\r\n                        const fallback = normalizarValorPremio(prem);\r\n                        return { ...p, premio: fallback };\r\n                    }\r\n                    return p;\r\n                });\r\n\r\n                const needsMigration = normalized.some((p: any, idx: number) => typeof parsed[idx]?.premio === 'object' && parsed[idx]?.premio !== null);\r\n                if (needsMigration && !localStorage.getItem(`${clavePremiosActual}_migrated_v1`)) {\r\n                    try {\r\n                        localStorage.setItem(clavePremiosActual, JSON.stringify(normalized));\r\n                        localStorage.setItem(`${clavePremiosActual}_migrated_v1`, 'true');\r\n                    } catch (e) {\r\n                        // Silent fail\r\n                    }\r\n                }\r\n\r\n                return normalized;\r\n            } catch (error) {\r\n                // Silent fail\r\n            }\r\n        }\r\n\r\n        return [];\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para generar premios autom√°ticamente\r\n    const generarPremiosAutomaticos = (mes?: number, a√±o?: number): any[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        // Usar mes y a√±o proporcionados, o el actual si no se especifican\r\n        const fechaActual = new Date();\r\n        const mesUsar = mes || (fechaActual.getMonth() + 1);\r\n        const a√±oUsar = a√±o || fechaActual.getFullYear();\r\n\r\n        // Obtener ranking del mes especificado\r\n        const rankingMensual = cargarRankingMensual(a√±oUsar, mesUsar);\r\n\r\n        if (rankingMensual.length === 0) return [];\r\n\r\n        const premios = [\r\n            {\r\n                posicion: 1,\r\n                emoji: \"ü•á\",\r\n                titulo: \"1er lugar\",\r\n                premio: \"Trofeo digital especial\",\r\n                descripcion: \"Trofeo exclusivo del mes + 100 puntos extra\",\r\n                centro: rankingMensual[0]?.nombre || \"\",\r\n                puntosExtra: 100\r\n            },\r\n            {\r\n                posicion: 2,\r\n                emoji: \"ü•à\",\r\n                titulo: \"2do lugar\",\r\n                premio: \"Certificado de honor\",\r\n                descripcion: \"Certificado digital de excelencia\",\r\n                centro: rankingMensual[1]?.nombre || \"\",\r\n                puntosExtra: 50\r\n            },\r\n            {\r\n                posicion: 3,\r\n                emoji: \"ü•â\",\r\n                titulo: \"3er lugar\",\r\n                premio: \"Menci√≥n especial\",\r\n                descripcion: \"Menci√≥n honor√≠fica en el ranking\",\r\n                centro: rankingMensual[2]?.nombre || \"\",\r\n                puntosExtra: 25\r\n            }\r\n        ];\r\n\r\n        // Agregar premios para Top 10\r\n        for (let i = 3; i < Math.min(10, rankingMensual.length); i++) {\r\n            premios.push({\r\n                posicion: i + 1,\r\n                emoji: \"üèÜ\",\r\n                titulo: `Top ${i + 1}`,\r\n                premio: \"Badge exclusivo\",\r\n                descripcion: `Badge especial \"Top ${i + 1}\" del mes`,\r\n                centro: rankingMensual[i]?.nombre || \"\",\r\n                puntosExtra: 10\r\n            });\r\n        }\r\n\r\n        // Agregar premios de participaci√≥n para todos los centros con actividad\r\n        rankingMensual.forEach((centro, index) => {\r\n            if (index >= 10) { // Despu√©s del Top 10\r\n                premios.push({\r\n                    posicion: index + 1,\r\n                    emoji: \"üìö\",\r\n                    titulo: \"Participaci√≥n\",\r\n                    premio: \"Reconocimiento\",\r\n                    descripcion: \"Reconocimiento por participaci√≥n activa\",\r\n                    centro: centro.nombre,\r\n                    puntosExtra: 5\r\n                });\r\n            }\r\n        });\r\n\r\n        // Nota: La asignaci√≥n de trofeos se ha movido a la p√°gina de perfil de usuario\r\n        // para que se desbloqueen solo para usuarios individuales de ese centro.\r\n\r\n        return premios;\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para asignar trofeos a usuarios de un centro\r\n    const asignarTrofeoACentro = (nombreCentro: string, idTrofeo: number): void => {\r\n        if (typeof window === \"undefined\") return;\r\n\r\n        try {\r\n            const usersStr = localStorage.getItem(\"users\");\r\n            if (!usersStr) return;\r\n\r\n            const users = JSON.parse(usersStr);\r\n            let usuariosActualizados = false;\r\n\r\n            // Asignar trofeo a todos los usuarios del centro\r\n            users.forEach((user: any) => {\r\n                if (user.centro === nombreCentro) {\r\n                    if (!user.trofeos) {\r\n                        user.trofeos = [];\r\n                    }\r\n                    if (!user.trofeos.includes(idTrofeo)) {\r\n                        user.trofeos.push(idTrofeo);\r\n                        usuariosActualizados = true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (usuariosActualizados) {\r\n                localStorage.setItem(\"users\", JSON.stringify(users));\r\n            }\r\n        } catch (error) {\r\n            // Silent fail\r\n        }\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para verificar si los trofeos ya fueron asignados este mes\r\n    const trofeosYaAsignadosEsteMes = (): boolean => {\r\n        if (typeof window === \"undefined\") return false;\r\n\r\n        const fechaActual = new Date();\r\n        const claveTrofeosAsignados = `trofeos_asignados_${fechaActual.getFullYear()}_${(fechaActual.getMonth() + 1).toString().padStart(2, '0')}`;\r\n\r\n        return localStorage.getItem(claveTrofeosAsignados) === 'true';\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para marcar que los trofeos fueron asignados este mes\r\n    const marcarTrofeosAsignadosEsteMes = (): void => {\r\n        if (typeof window === \"undefined\") return;\r\n\r\n        const fechaActual = new Date();\r\n        const claveTrofeosAsignados = `trofeos_asignados_${fechaActual.getFullYear()}_${(fechaActual.getMonth() + 1).toString().padStart(2, '0')}`;\r\n\r\n        localStorage.setItem(claveTrofeosAsignados, 'true');\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para verificar si un centro gan√≥ premio\r\n    const obtenerPremioDelCentro = (nombreCentro: string): any => {\r\n        const premiosDelMes = obtenerPremiosDelMes();\r\n        return premiosDelMes.find(premio => premio.centro === nombreCentro);\r\n    };\r\n\r\n    // Normaliza un valor de premio para asegurarnos de devolver siempre una cadena\r\n    // Normalizaci√≥n sustituida por util compartido `normalizarValorPremio` en `src/utils/normalizadores.ts`\r\n\r\n    // Funci√≥n para obtener informaci√≥n del ciclo mensual\r\n    const obtenerInfoCicloMensual = () => {\r\n        const hoy = new Date();\r\n        const a√±oActual = hoy.getFullYear();\r\n        const mesActual = hoy.getMonth(); // 0-11\r\n        const diaActual = hoy.getDate();\r\n\r\n        // Calcular d√≠as restantes hasta fin de mes\r\n        const ultimoDiaDelMes = new Date(a√±oActual, mesActual + 1, 0).getDate();\r\n        const diasRestantes = ultimoDiaDelMes - diaActual + 1;\r\n\r\n        // Calcular progreso del mes\r\n        const progresoDelMes = Math.round((diaActual / ultimoDiaDelMes) * 100);\r\n\r\n        // Pr√≥ximo mes\r\n        const proximoMes = new Date(a√±oActual, mesActual + 1, 1);\r\n        const nombreProximoMes = proximoMes.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' });\r\n\r\n        return {\r\n            diasRestantes,\r\n            progresoDelMes,\r\n            nombreProximoMes\r\n        };\r\n    };\r\n\r\n    // Funci√≥n para generar clave de mes para localStorage\r\n    const generarClaveMes = (a√±o: number, mes: number): string => {\r\n        return `centros_ranking_${a√±o}_${mes.toString().padStart(2, '0')}`;\r\n    };\r\n\r\n    // Funci√≥n para obtener meses disponibles en historial\r\n    const obtenerMesesDisponibles = (): string[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        const meses = [];\r\n        const fechaActual = new Date();\r\n\r\n        // Agregar mes actual\r\n        const mesActual = `${fechaActual.getFullYear()}-${(fechaActual.getMonth() + 1).toString().padStart(2, '0')}`;\r\n        meses.push(mesActual);\r\n\r\n        // Buscar meses anteriores en localStorage\r\n        for (let i = 1; i <= 12; i++) {\r\n            const fecha = new Date(fechaActual);\r\n            fecha.setMonth(fecha.getMonth() - i);\r\n            const claveMes = generarClaveMes(fecha.getFullYear(), fecha.getMonth() + 1);\r\n\r\n            if (localStorage.getItem(claveMes)) {\r\n                const mesString = `${fecha.getFullYear()}-${(fecha.getMonth() + 1).toString().padStart(2, '0')}`;\r\n                meses.push(mesString);\r\n            }\r\n        }\r\n\r\n        return meses;\r\n    };\r\n\r\n    // Funci√≥n para guardar ranking mensual en historial\r\n    const guardarRankingMensual = (centros: CentroStats[]) => {\r\n        if (typeof window === \"undefined\") return;\r\n\r\n        const fechaActual = new Date();\r\n        const claveMes = generarClaveMes(fechaActual.getFullYear(), fechaActual.getMonth() + 1);\r\n\r\n        const datosRanking = {\r\n            fecha: fechaActual.toISOString(),\r\n            a√±o: fechaActual.getFullYear(),\r\n            mes: fechaActual.getMonth() + 1,\r\n            centros: centros,\r\n            ganador: centros[0]?.nombre || \"N/A\"\r\n        };\r\n\r\n        localStorage.setItem(claveMes, JSON.stringify(datosRanking));\r\n    };\r\n\r\n    // Funci√≥n para cargar ranking de un mes espec√≠fico\r\n    const cargarRankingMensual = (a√±o: number, mes: number): CentroStats[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        const claveMes = generarClaveMes(a√±o, mes);\r\n        const datos = localStorage.getItem(claveMes);\r\n\r\n        if (datos) {\r\n            try {\r\n                const ranking = JSON.parse(datos);\r\n                return ranking.centros || [];\r\n            } catch (error) {\r\n                // Silent fail\r\n            }\r\n        }\r\n\r\n        return [];\r\n    };\r\n\r\n    // Funci√≥n para calcular ranking anual acumulativo\r\n    const calcularRankingAnual = (): CentroStats[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        const fechaActual = new Date();\r\n        const a√±oActual = fechaActual.getFullYear();\r\n        const centrosAcumulados: { [nombre: string]: CentroStats } = {};\r\n\r\n        // Sumar puntos de todos los meses del a√±o actual\r\n        for (let mes = 1; mes <= 12; mes++) {\r\n            const rankingMensual = cargarRankingMensual(a√±oActual, mes);\r\n\r\n            rankingMensual.forEach(centro => {\r\n                if (!centrosAcumulados[centro.nombre]) {\r\n                    centrosAcumulados[centro.nombre] = {\r\n                        ...centro,\r\n                        puntajeTotal: 0,\r\n                        ranking: 0\r\n                    };\r\n                }\r\n\r\n                centrosAcumulados[centro.nombre].puntajeTotal += Number(centro.puntajeTotal) || 0;\r\n                centrosAcumulados[centro.nombre].respuestasCorrectas += Number(centro.respuestasCorrectas) || 0;\r\n                centrosAcumulados[centro.nombre].concursosGanados += Number(centro.concursosGanados) || 0;\r\n                centrosAcumulados[centro.nombre].historiasCreadas += Number(centro.historiasCreadas) || 0;\r\n                centrosAcumulados[centro.nombre].interaccionesSociales += Number(centro.interaccionesSociales) || 0;\r\n            });\r\n        }\r\n\r\n        // Convertir a array y ordenar\r\n        const centrosArray = Object.values(centrosAcumulados)\r\n            .sort((a, b) => b.puntajeTotal - a.puntajeTotal);\r\n\r\n        // Asignar medallas y rankings\r\n        return asignarMedallas(centrosArray);\r\n    };\r\n\r\n    // Funci√≥n para obtener historial de ganadores\r\n    const obtenerHistorialGanadores = (): any[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        const historial = [];\r\n        const fechaActual = new Date();\r\n\r\n        for (let i = 0; i < 12; i++) {\r\n            const fecha = new Date(fechaActual);\r\n            fecha.setMonth(fecha.getMonth() - i);\r\n\r\n            const rankingMensual = cargarRankingMensual(fecha.getFullYear(), fecha.getMonth() + 1);\r\n\r\n            if (rankingMensual.length > 0 && rankingMensual[0]) {\r\n                const ganador = rankingMensual[0];\r\n                historial.push({\r\n                    a√±o: fecha.getFullYear(),\r\n                    mes: fecha.toLocaleDateString('es-ES', { month: 'long' }),\r\n                    centro: ganador.nombre || \"Centro Desconocido\",\r\n                    puntaje: ganador.puntajeTotal || 0,\r\n                    ranking: 1\r\n                });\r\n            }\r\n        }\r\n\r\n        return historial;\r\n    };\r\n    const asignarMedallas = (centrosOrdenados: CentroStats[]): CentroStats[] => {\r\n        return centrosOrdenados.map((centro, index) => {\r\n            let medalla = \"\";\r\n            if (index === 0) medalla = \"ü•á\";\r\n            else if (index === 1) medalla = \"ü•à\";\r\n            else if (index === 2) medalla = \"ü•â\";\r\n            else if (index < 10) medalla = \"üèÜ\";\r\n            else medalla = \"üìö\";\r\n\r\n            return {\r\n                ...centro,\r\n                ranking: index + 1,\r\n                medalla\r\n            };\r\n        });\r\n    };\r\n\r\n    // Cargar datos y calcular estad√≠sticas\r\n    useEffect(() => {\r\n        const cargarDatos = () => {\r\n            try {\r\n                // Cargar usuario actual\r\n                const userData = localStorage.getItem('currentUser') || localStorage.getItem('user');\r\n                if (userData) {\r\n                    const user = JSON.parse(userData);\r\n                    setUsuario(user);\r\n                    setMiCentro(user.centro || \"\");\r\n                }\r\n\r\n                // Cargar datos hist√≥ricos\r\n                const mesesDisponibles = obtenerMesesDisponibles();\r\n                setMesesDisponibles(mesesDisponibles);\r\n\r\n                const historialGanadores = obtenerHistorialGanadores();\r\n                setHistorialGanadores(historialGanadores);\r\n\r\n                // Cargar todos los usuarios\r\n                const usuariosData = localStorage.getItem('users');\r\n                if (!usuariosData) {\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                const usuarios: Usuario[] = JSON.parse(usuariosData);\r\n\r\n                // ‚úÖ VERIFICAR SI HAY DATOS PARA LA ASIGNATURA SELECCIONADA\r\n                if (asignaturaSeleccionada !== \"todas\") {\r\n                    // Verificar si hay datos espec√≠ficos por asignatura\r\n                    const mapaAsignaturasInverso: { [key: string]: string } = {\r\n                        'Matem√°ticas': 'matematicas',\r\n                        'Historia': 'historia',\r\n                        'Geograf√≠a': 'geografia',\r\n                        'Literatura': 'literatura',\r\n                        'Ingl√©s': 'ingles',\r\n                        'Naturaleza': 'naturaleza',\r\n                        'Lenguaje': 'lenguaje',\r\n                        'General': 'general'\r\n                    };\r\n                    const asignaturaParaLocalStorage = mapaAsignaturasInverso[asignaturaSeleccionada] || asignaturaSeleccionada.toLowerCase();\r\n\r\n                    let hayDatosEspecificos = false;\r\n                    for (let i = 0; i < localStorage.length; i++) {\r\n                        const clave = localStorage.key(i);\r\n                        if (clave && clave.startsWith(`${asignaturaParaLocalStorage}_`)) {\r\n                            const valor = localStorage.getItem(clave);\r\n                            if (valor && parseInt(valor, 10) > 0) {\r\n                                hayDatosEspecificos = true;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    setHayDatosAsignatura(hayDatosEspecificos);\r\n                } else {\r\n                    setHayDatosAsignatura(true);\r\n                }\r\n\r\n                // Obtener lista √∫nica de centros\r\n                const centrosUnicos = [...new Set(usuarios\r\n                    .filter(u => u.centro && u.centro.trim() !== \"\")\r\n                    .map(u => u.centro))];\r\n\r\n                // Calcular estad√≠sticas para cada centro\r\n                const statsDeLosCentros = centrosUnicos.map(nombreCentro =>\r\n                    calcularStatsDelCentro(nombreCentro, usuarios)\r\n                );\r\n\r\n                // Ordenar por puntuaci√≥n y asignar medallas\r\n                const centrosOrdenados = statsDeLosCentros\r\n                    .sort((a, b) => b.puntajeTotal - a.puntajeTotal);\r\n\r\n                const centrosConMedallas = asignarMedallas(centrosOrdenados);\r\n\r\n                // Manejar diferentes modos de visualizaci√≥n\r\n                if (modoVisualizacion === 'anual') {\r\n                    const centrosAnuales = calcularRankingAnual();\r\n                    setCentrosAnuales(centrosAnuales);\r\n                } else if (mesSeleccionado && mesesDisponibles.includes(mesSeleccionado)) {\r\n                    // Cargar ranking de mes espec√≠fico\r\n                    // Extraer a√±o y mes del formato \"Enero 2024\"\r\n                    const partes = mesSeleccionado.split(' ');\r\n                    const nombreMes = partes[0];\r\n                    const a√±o = parseInt(partes[1]) || fechaActual.getFullYear();\r\n\r\n                    // Convertir nombre de mes a n√∫mero\r\n                    const mesesNombres = [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\",\r\n                        \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"];\r\n                    const numeroMes = mesesNombres.indexOf(nombreMes) + 1;\r\n\r\n                    if (numeroMes > 0) {\r\n                        const rankingMes = cargarRankingMensual(a√±o, numeroMes);\r\n                        if (rankingMes.length > 0) {\r\n                            setCentros(rankingMes);\r\n                        } else {\r\n                            setCentros(centrosConMedallas);\r\n                        }\r\n                    } else {\r\n                        setCentros(centrosConMedallas);\r\n                    }\r\n                } else {\r\n                    // Mes actual\r\n                    setCentros(centrosConMedallas);\r\n                    // Guardar ranking mensual autom√°ticamente\r\n                    guardarRankingMensual(centrosConMedallas);\r\n                }\r\n\r\n                // Cargar historial de ganadores\r\n                setHistorialGanadores(obtenerHistorialGanadores());\r\n\r\n                // Cargar premios del mes\r\n                setPremiosDelMes(obtenerPremiosDelMes());\r\n\r\n                setLoading(false);\r\n\r\n            } catch (error) {\r\n                // Silent fail\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        cargarDatos();\r\n    }, [modoVisualizacion, mesSeleccionado, asignaturaSeleccionada, cursoSeleccionado]);\r\n\r\n    // ‚úÖ DETECTAR EVENTOS ESPECIALES (vacaciones y challenges) - separado para que se ejecute en el mount\r\n    useEffect(() => {\r\n        // ‚úÖ DETECTAR MODO VACACIONES AUTOM√ÅTICAMENTE\r\n        const periodoVacaciones = detectarPeriodoVacaciones();\r\n        setModoVacaciones(periodoVacaciones.esVacacion);\r\n        setTipoVacacion(periodoVacaciones.tipo);\r\n\r\n        // Normalizamos la estructura de evento para evitar pasar objetos enteros\r\n        // directamente al renderizado (causa el error: Objects are not valid as a React child).\r\n        let eventoNormalizado: any = null;\r\n        if (periodoVacaciones.esVacacion && periodoVacaciones.evento) {\r\n            eventoNormalizado = normalizarEventoEspecial({\r\n                nombre: periodoVacaciones.tipo,\r\n                descripcion: periodoVacaciones.evento.descripcion || \"\",\r\n                emoji: periodoVacaciones.evento.emoji || \"\",\r\n                tipo: \"vacacion\",\r\n                multiplicador: periodoVacaciones.evento.multiplicador || 1\r\n            });\r\n        }\r\n\r\n        // ‚úÖ DETECTAR CHALLENGE ESPECIAL\r\n        const challengeActual = obtenerChallengeActual();\r\n        if (challengeActual && !periodoVacaciones.esVacacion) {\r\n            // Tambi√©n normalizamos el challenge para que tenga campos consistentes\r\n            eventoNormalizado = normalizarEventoEspecial({\r\n                nombre: challengeActual.nombre || \"\",\r\n                descripcion: challengeActual.bonus || \"\",\r\n                emoji: challengeActual.emoji || \"\",\r\n                tipo: \"challenge\"\r\n            });\r\n        }\r\n\r\n        setEventoEspecial(eventoNormalizado);\r\n    }, []); // Sin dependencias para que se ejecute solo en mount\r\n\r\n    // Obtener el centro del usuario actual\r\n    const centroDelUsuario = centros.find(c => c.nombre === miCentro);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 flex items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                    <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4\"></div>\r\n                    <p className=\"text-blue-600 font-semibold\">Cargando competencia entre centros...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 p-8\">\r\n            <div className=\"max-w-7xl mx-auto\">\r\n                {/* Header */}\r\n                <div className=\"text-center mb-8\">\r\n                    <h1 className=\"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-green-600 mb-4\">\r\n                        üè´ {t('leagueTitle')}\r\n                    </h1>\r\n                    <p className=\"text-lg text-gray-700 max-w-2xl mx-auto\">\r\n                        {t('leagueSubtitle')}\r\n                    </p>\r\n                </div>\r\n\r\n                {/* ‚úÖ MODO VACACIONES: Banner especial */}\r\n                {modoVacaciones && eventoEspecial && (\r\n                    <div role=\"status\" aria-live=\"polite\" aria-label={eventoEspecial.nombre || 'Evento especial'} className=\"mb-8 bg-gradient-to-r from-orange-100 to-red-100 border-2 border-orange-300 rounded-xl p-6 shadow-lg animate-pulse\">\r\n                        <div className=\"text-center\">\r\n                            <h2 className=\"text-2xl font-bold text-orange-800 mb-2 flex items-center justify-center gap-2\">\r\n                                {eventoEspecial.emoji} ¬°{tipoVacacion} Activas! {eventoEspecial.emoji}\r\n                            </h2>\r\n                            <p className=\"text-lg text-orange-700 mb-4\">\r\n                                {eventoEspecial.descripcion}\r\n                            </p>\r\n                            <div className=\"bg-white bg-opacity-60 rounded-lg p-4 inline-block\">\r\n                                <p className=\"text-sm font-semibold text-orange-900\">\r\n                                    {eventoEspecial.tipo === 'vacacion' && eventoEspecial.multiplicador && (\r\n                                        <>üöÄ <strong>{t('multiplicadorActivo')}:</strong> x{eventoEspecial.multiplicador}</>\r\n                                    )}\r\n                                </p>\r\n                                <p className=\"text-xs text-orange-900 mt-1\">\r\n                                    Todas las actividades dan puntos extra durante este per√≠odo especial\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* ‚úÖ CHALLENGE ESPECIAL: Banner de evento tem√°tico */}\r\n                {!modoVacaciones && eventoEspecial && eventoEspecial.nombre && (\r\n                    <div role=\"status\" aria-live=\"polite\" aria-label={eventoEspecial.nombre || 'Evento especial'} className=\"mb-8 bg-gradient-to-r from-purple-100 to-pink-100 border-2 border-purple-300 rounded-xl p-6 shadow-lg\">\r\n                        <div className=\"text-center\">\r\n                            <h2 className=\"text-xl font-bold text-purple-800 mb-2 flex items-center justify-center gap-2\">\r\n                                {eventoEspecial.emoji} {eventoEspecial.nombre} {eventoEspecial.emoji}\r\n                            </h2>\r\n                            <p className=\"text-purple-700 font-semibold\">\r\n                                üéÅ <strong>Bonus Especial:</strong> {eventoEspecial.descripcion}\r\n                            </p>\r\n                            <p className=\"text-xs text-purple-700 mt-2\">\r\n                                {t('eventoLimitado')}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Controles de Navegaci√≥n Temporal */}\r\n                <div className=\"mb-8 bg-white rounded-lg shadow-lg border border-gray-200 p-6\">\r\n                    <div className=\"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between\">\r\n                        {/* Selector de Modo */}\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <label className=\"text-sm font-semibold text-gray-700\">Ver datos:</label>\r\n                            <div className=\"flex gap-2\">\r\n                                <button\r\n                                    onClick={() => setModoVisualizacion('actual')}\r\n                                    className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${modoVisualizacion === 'actual'\r\n                                        ? 'bg-blue-600 text-white shadow-lg'\r\n                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                                        }`}\r\n                                >\r\n                                    üìÖ Mes Actual\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setModoVisualizacion('historico')}\r\n                                    className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${modoVisualizacion === 'historico'\r\n                                        ? 'bg-blue-600 text-white shadow-lg'\r\n                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                                        }`}\r\n                                >\r\n                                    üìä Hist√≥rico\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setModoVisualizacion('anual')}\r\n                                    className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${modoVisualizacion === 'anual'\r\n                                        ? 'bg-blue-600 text-white shadow-lg'\r\n                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                                        }`}\r\n                                >\r\n                                    üèÜ Ranking Anual\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* ‚úÖ COMPETENCIAS POR ASIGNATURA: Selector de materia */}\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <label className=\"text-sm font-semibold text-gray-700\">{t('filtrarAsignatura')}</label>\r\n                            <select\r\n                                value={asignaturaSeleccionada}\r\n                                onChange={(e) => setAsignaturaSeleccionada(e.target.value)}\r\n                                className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white\"\r\n                            >\r\n                                <option value=\"todas\">üìö {t('todasAsignaturas')}</option>\r\n                                <option value=\"Matem√°ticas\">üî¢ Matem√°ticas</option>\r\n                                <option value=\"Lenguaje\">üìù Lenguaje</option>\r\n                                <option value=\"Literatura\">üìñ Literatura</option>\r\n                                <option value=\"Historia\">üèõÔ∏è Historia</option>\r\n                                <option value=\"Geograf√≠a\">üó∫Ô∏è Geograf√≠a</option>\r\n                                <option value=\"Naturaleza\">üåø Ciencias Naturales</option>\r\n                                <option value=\"Ingl√©s\">üá¨üáß Ingl√©s</option>\r\n                                <option value=\"General\">üéØ General</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* ‚úÖ FILTRO POR CURSO: Selector de curso */}\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <label className=\"text-sm font-semibold text-gray-700\">{t('filtrarCurso')}</label>\r\n                            <select\r\n                                value={cursoSeleccionado}\r\n                                onChange={(e) => setCursoSeleccionado(e.target.value)}\r\n                                className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white\"\r\n                            >\r\n                                <option value=\"todos\">üë• {t('todosCursos')}</option>\r\n                                <option value=\"1¬∫ Primaria\">1Ô∏è‚É£ 1¬∫ Primaria</option>\r\n                                <option value=\"2¬∫ Primaria\">2Ô∏è‚É£ 2¬∫ Primaria</option>\r\n                                <option value=\"3¬∫ Primaria\">3Ô∏è‚É£ 3¬∫ Primaria</option>\r\n                                <option value=\"4¬∫ Primaria\">4Ô∏è‚É£ 4¬∫ Primaria</option>\r\n                                <option value=\"5¬∫ Primaria\">5Ô∏è‚É£ 5¬∫ Primaria</option>\r\n                                <option value=\"6¬∫ Primaria\">6Ô∏è‚É£ 6¬∫ Primaria</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Selector de Mes (solo en modo hist√≥rico) */}\r\n                        {modoVisualizacion === 'historico' && mesesDisponibles.length > 0 && (\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <label className=\"text-sm font-semibold text-gray-700\">{t('mes')}</label>\r\n                                <select\r\n                                    value={mesSeleccionado}\r\n                                    onChange={(e) => setMesSeleccionado(e.target.value)}\r\n                                    className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                >\r\n                                    <option value=\"\">{t('seleccionarMes')}</option>\r\n                                    {mesesDisponibles.map((mes) => (\r\n                                        <option key={mes} value={mes}>\r\n                                            {mes}\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Indicador del per√≠odo actual */}\r\n                    <div className=\"mt-4 text-center\">\r\n                        {modoVisualizacion === 'actual' && (\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                üìÖ <strong>{t('mostrar')}</strong> {t('competenciaMesActual')} ({fechaActual.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })})\r\n                            </p>\r\n                        )}\r\n                        {modoVisualizacion === 'historico' && mesSeleccionado && (\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                üìä <strong>{t('mostrar')}</strong> {t('resultadosHistoricos')} {mesSeleccionado}\r\n                            </p>\r\n                        )}\r\n                        {modoVisualizacion === 'anual' && (\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                üèÜ <strong>{t('mostrar')}</strong> {t('rankingAnual')} (a√±o {fechaActual.getFullYear()})\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Mi Centro - Destacado */}\r\n                {centroDelUsuario && (\r\n                    <div role=\"region\" aria-labelledby=\"mi-centro-title\" className=\"mb-8 bg-gradient-to-r from-yellow-50 to-orange-50 border-l-4 border-yellow-400 rounded-lg p-6 shadow-lg\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div>\r\n                                <h3 id=\"mi-centro-title\" className=\"text-xl font-bold text-yellow-800 mb-2 flex items-center\" aria-label={t('tuCentro')}>\r\n                                    {esImagen(obtenerLogoCentro(centroDelUsuario.nombre)) ? (\r\n                                        <img\r\n                                            src={`/${obtenerLogoCentro(centroDelUsuario.nombre)}`}\r\n                                            alt={`Logo ${centroDelUsuario.nombre}`}\r\n                                            className=\"w-12 h-12 object-contain rounded-lg border-2 border-yellow-400 mr-3\"\r\n                                        />\r\n                                    ) : (\r\n                                        <span className=\"text-2xl mr-3\">{obtenerLogoCentro(centroDelUsuario.nombre)}</span>\r\n                                    )}\r\n                                    üè† {t('tuCentro')}: {centroDelUsuario.nombre}\r\n                                </h3>\r\n                                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\r\n                                    <div>\r\n                                        <span className=\"font-semibold text-yellow-700\">{t('ranking')}:</span>\r\n                                        <span className=\"ml-2 text-lg\">{centroDelUsuario.medalla} #{centroDelUsuario.ranking}</span>\r\n                                    </div>\r\n                                    <div>\r\n                                        <span className=\"font-semibold text-yellow-700\">{t('puntuacion')}:</span>\r\n                                        <span className=\"ml-2 text-lg font-bold\">{centroDelUsuario.puntajeTotal.toLocaleString()}</span>\r\n                                    </div>\r\n                                    <div>\r\n                                        <span className=\"font-semibold text-yellow-700\">{t('miembros')}:</span>\r\n                                        <span className=\"ml-2\">{centroDelUsuario.estudiantesActivos}/{centroDelUsuario.estudiantes}</span>\r\n                                        <div className=\"text-xs text-yellow-600\">estudiantes + docentes</div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <span className=\"font-semibold text-yellow-700\">{t('concursos')}:</span>\r\n                                        <span className=\"ml-2\">{centroDelUsuario.concursosGanados}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* ‚úÖ PREMIOS DEL CENTRO: Secci√≥n especial para premios ganados */}\r\n                {centroDelUsuario && (() => {\r\n                    const premioCentro = obtenerPremioDelCentro(centroDelUsuario.nombre);\r\n                    return premioCentro ? (\r\n                        <div role=\"region\" aria-labelledby=\"premio-centro-title\" className=\"mb-8 bg-gradient-to-r from-purple-50 to-pink-50 border-l-4 border-purple-400 rounded-lg p-6 shadow-lg\">\r\n                            <div className=\"flex items-center\">\r\n                                <div className=\"text-4xl mr-4\">üéâ</div>\r\n                                <div>\r\n                                    <h3 id=\"premio-centro-title\" className=\"text-xl font-bold text-purple-800 mb-2\">\r\n                                        {t('felicitacionesPremio')}\r\n                                    </h3>\r\n                                    <div className=\"bg-white bg-opacity-60 rounded-lg p-4 inline-block\">\r\n                                        <div className=\"flex items-center mb-2\">\r\n                                            <span className=\"text-2xl mr-2\">{premioCentro.emoji}</span>\r\n                                            <span className=\"font-bold text-purple-800\">{premioCentro.titulo}:</span>\r\n                                            <span className=\"ml-2 text-purple-700\">{normalizarValorPremio(premioCentro.premio)}</span>\r\n                                        </div>\r\n                                        <p className=\"text-sm text-purple-600 mb-2\">{premioCentro.descripcion}</p>\r\n                                        <div className=\"space-y-1\">\r\n                                            <p className=\"text-sm font-semibold text-purple-800\">\r\n                                                üèÜ <strong>{t('bonusObtenido')}:</strong> +{Number(premioCentro.puntosExtra) || 0} puntos extra\r\n                                            </p>\r\n                                            <p className=\"text-sm text-purple-700 bg-purple-100 px-2 py-1 rounded inline-block\">\r\n                                                üèÖ <strong>{t('insigniaAutomatica')}:</strong> {t('premio')}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ) : null;\r\n                })()}\r\n\r\n                {/* ‚úÖ GR√ÅFICOS DE PROGRESO: Visualizaci√≥n avanzada de estad√≠sticas */}\r\n                <div className=\"mb-8 bg-gradient-to-br from-cyan-50 to-blue-50 border border-cyan-200 rounded-lg p-6 shadow-lg\">\r\n                    <h3 className=\"text-xl font-bold text-cyan-800 mb-6 flex items-center\" role=\"region\" aria-labelledby=\"graficos-title\">\r\n                        <span id=\"graficos-title\">üìä {t('gr√°ficosProgreso')}</span>\r\n                    </h3>\r\n\r\n                    {/* Top 3 Centros con Barras de Progreso */}\r\n                    <div className=\"mb-6\">\r\n                        <h4 className=\"text-lg font-semibold text-cyan-700 mb-4\">üèÜ Top 3 Centros - Barras de Progreso</h4>\r\n                        <div className=\"space-y-4\">\r\n                            {centros.slice(0, 3).map((centro, index) => {\r\n                                const maxPuntos = Number(centros[0]?.puntajeTotal) || 1;\r\n                                const porcentaje = (centro.puntajeTotal / maxPuntos) * 100;\r\n                                const colores = [\"from-yellow-400 to-orange-500\", \"from-gray-400 to-gray-600\", \"from-orange-400 to-red-500\"];\r\n\r\n                                return (\r\n                                    <div key={centro.nombre} className=\"bg-white rounded-lg p-4 shadow-sm\">\r\n                                        <div className=\"flex items-center justify-between mb-2\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <span className=\"text-2xl\">{centro.medalla}</span>\r\n                                                <span className=\"font-bold text-gray-800\">{centro.nombre}</span>\r\n                                            </div>\r\n                                            <span className=\"text-lg font-bold text-cyan-600\">\r\n                                                {centro.puntajeTotal.toLocaleString()} pts\r\n                                            </span>\r\n                                        </div>\r\n\r\n                                        {/* Barra de progreso animada */}\r\n                                        <div className=\"w-full bg-gray-200 rounded-full h-4 overflow-hidden\">\r\n                                            <div\r\n                                                className={`h-full bg-gradient-to-r ${colores[index]} transition-all duration-1000 ease-out rounded-full`}\r\n                                                style={{ width: `${porcentaje}%` }}\r\n                                            ></div>\r\n                                        </div>\r\n                                        <div className=\"text-xs text-gray-600 mt-1\">\r\n                                            {porcentaje.toFixed(1)}% del m√°ximo\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Estad√≠sticas por Asignatura */}\r\n                    {asignaturaSeleccionada !== \"todas\" && (\r\n                        <div className=\"mb-6\">\r\n                            <h4 className=\"text-lg font-semibold text-cyan-700 mb-4\">\r\n                                üìö An√°lisis Espec√≠fico: {asignaturaSeleccionada.charAt(0).toUpperCase() + asignaturaSeleccionada.slice(1)}\r\n                            </h4>\r\n\r\n                            {hayDatosAsignatura ? (\r\n                                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                                    <p className=\"text-sm text-blue-800\">\r\n                                        üîç <strong>Vista filtrada por asignatura:</strong> Mostrando solo actividad relacionada con {asignaturaSeleccionada}\r\n                                    </p>\r\n                                    <p className=\"text-xs text-blue-600 mt-2\">\r\n                                        Los puntos de respuestas correctas corresponden √∫nicamente a preguntas de esta materia espec√≠fica.\r\n                                        Las dem√°s m√©tricas (concursos, historias, interacciones) se muestran proporcionalmente.\r\n                                    </p>\r\n                                    <div className=\"mt-3 text-xs text-blue-500 bg-blue-100 rounded p-2\">\r\n                                        üí° <strong>Tip:</strong> Para ver el rendimiento completo de todos los centros, selecciona \"üìö todas las asignaturas\"\r\n                                    </div>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\r\n                                    <p className=\"text-sm text-orange-800\">\r\n                                        üìä <strong>Sin datos espec√≠ficos:</strong> A√∫n no hay actividad registrada para {asignaturaSeleccionada}\r\n                                    </p>\r\n                                    <p className=\"text-xs text-orange-600 mt-2\">\r\n                                        Los rankings mostrados son estimaciones basadas en el rendimiento general de cada centro.\r\n                                        Los datos reales aparecer√°n cuando los usuarios respondan preguntas de esta materia.\r\n                                    </p>\r\n                                    <div className=\"mt-3 text-xs text-orange-500 bg-orange-100 rounded p-2\">\r\n                                        üéØ <strong>Para generar datos reales:</strong> Los usuarios deben participar en competencias o responder preguntas espec√≠ficas de {asignaturaSeleccionada}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* M√©tricas de Participaci√≥n */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                        <div className=\"bg-white rounded-lg p-4 shadow-sm border-l-4 border-green-500\">\r\n                            <div className=\"text-sm font-semibold text-green-700\">Total de Centros</div>\r\n                            <div className=\"text-2xl font-bold text-green-800\">{centros.length}</div>\r\n                            <div className=\"text-xs text-green-600\">Participando en la liga</div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white rounded-lg p-4 shadow-sm border-l-4 border-blue-500\">\r\n                            <div className=\"text-sm font-semibold text-blue-700\">Puntuaci√≥n Total</div>\r\n                            <div className=\"text-2xl font-bold text-blue-800\">\r\n                                {centros.reduce((total, centro) => total + (Number(centro.puntajeTotal) || 0), 0).toLocaleString()}\r\n                            </div>\r\n                            <div className=\"text-xs text-blue-600\">Puntos acumulados</div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white rounded-lg p-4 shadow-sm border-l-4 border-purple-500\">\r\n                            <div className=\"text-sm font-semibold text-purple-700\">Promedio de Centro</div>\r\n                            <div className=\"text-2xl font-bold text-purple-800\">\r\n                                {Math.round(centros.reduce((total, centro) => total + (Number(centro.puntajeTotal) || 0), 0) / (centros.length || 1)).toLocaleString()}\r\n                            </div>\r\n                            <div className=\"text-xs text-purple-600\">Puntos por centro</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Informaci√≥n del Ciclo Mensual */}\r\n                <div className=\"mb-8 bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-6\">\r\n                    <h3 className=\"text-lg font-bold text-indigo-800 mb-4 flex items-center\">\r\n                        üìÖ Informaci√≥n del Ciclo de Competencia\r\n                    </h3>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                        <div className=\"bg-white rounded-lg p-4 border border-indigo-200\">\r\n                            <div className=\"text-sm text-indigo-600 font-semibold\">Mes Actual</div>\r\n                            <div className=\"text-xl font-bold text-indigo-800\">\r\n                                {new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}\r\n                            </div>\r\n                            <div className=\"text-sm text-indigo-600 mt-1\">\r\n                                Progreso: {obtenerInfoCicloMensual().progresoDelMes}%\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white rounded-lg p-4 border border-orange-200\">\r\n                            <div className=\"text-sm text-orange-600 font-semibold\">D√≠as Restantes</div>\r\n                            <div className=\"text-xl font-bold text-orange-800\">\r\n                                {obtenerInfoCicloMensual().diasRestantes} d√≠as\r\n                            </div>\r\n                            <div className=\"text-sm text-orange-600 mt-1\">\r\n                                Hasta pr√≥ximo ranking\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white rounded-lg p-4 border border-green-200\">\r\n                            <div className=\"text-sm text-green-600 font-semibold\">Pr√≥ximo Ciclo</div>\r\n                            <div className=\"text-xl font-bold text-green-800 text-sm\">\r\n                                {obtenerInfoCicloMensual().nombreProximoMes}\r\n                            </div>\r\n                            <div className=\"text-sm text-green-600 mt-1\">\r\n                                Nuevo ranking mensual\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"mt-4 text-xs text-indigo-600 bg-white rounded p-3 border border-indigo-200\">\r\n                        <strong>üìä Ciclo de Competencia:</strong> Los rankings se actualizan autom√°ticamente cada mes.\r\n                        Los puntos se acumulan desde el d√≠a 1 hasta el √∫ltimo d√≠a del mes, creando una competencia fresca cada 30 d√≠as.\r\n                        <strong> ¬°Cada mes es una nueva oportunidad para que tu centro llegue al primer puesto!</strong>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Sistema de Puntuaci√≥n */}\r\n                <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\r\n                    <h3 className=\"text-xl font-bold text-gray-800 mb-4\">üìä Sistema de Puntuaci√≥n</h3>\r\n                    <div className=\"mb-4 p-3 bg-gradient-to-r from-blue-50 to-green-50 rounded-lg border border-blue-200\">\r\n                        <p className=\"text-sm text-gray-700\">\r\n                            <strong>¬°Novedad!</strong> üéâ Ahora los <strong>docentes tambi√©n participan</strong> en el ranking de su centro.\r\n                            ¬°Profesores y estudiantes trabajando juntos por el √©xito del centro!\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-6 gap-4 text-sm\">\r\n                        <div className=\"bg-blue-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-blue-700\">Estudiantes Activos</div>\r\n                            <div className=\"text-2xl font-bold text-blue-800\">10 pts</div>\r\n                            <div className=\"text-xs text-blue-600\">por estudiante activo</div>\r\n                        </div>\r\n                        <div className=\"bg-indigo-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-indigo-700\">Docentes Activos</div>\r\n                            <div className=\"text-2xl font-bold text-indigo-800\">20 pts</div>\r\n                            <div className=\"text-xs text-indigo-600\">por docente activo</div>\r\n                        </div>\r\n                        <div className=\"bg-green-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-green-700\">Respuestas Correctas</div>\r\n                            <div className=\"text-2xl font-bold text-green-800\">5 pts</div>\r\n                            <div className=\"text-xs text-green-600\">estudiantes + docentes</div>\r\n                        </div>\r\n                        <div className=\"bg-yellow-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-yellow-700\">Concursos Ganados</div>\r\n                            <div className=\"text-2xl font-bold text-yellow-800\">50 pts</div>\r\n                            <div className=\"text-xs text-yellow-600\">estudiantes + docentes</div>\r\n                        </div>\r\n                        <div className=\"bg-purple-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-purple-700\">Historias Creadas</div>\r\n                            <div className=\"text-2xl font-bold text-purple-800\">15 pts</div>\r\n                            <div className=\"text-xs text-purple-600\">estudiantes + docentes</div>\r\n                        </div>\r\n                        <div className=\"bg-pink-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-pink-700\">Interacciones</div>\r\n                            <div className=\"text-2xl font-bold text-pink-800\">2 pts</div>\r\n                            <div className=\"text-xs text-pink-600\">likes, amigos, comentarios</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Ranking de Centros */}\r\n                <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\r\n                    <div className=\"bg-gradient-to-r from-blue-600 to-green-600 p-6 text-white\">\r\n                        <h3 className=\"text-2xl font-bold\">\r\n                            üèÜ Ranking de Centros Educativos\r\n                            {asignaturaSeleccionada !== \"todas\" && (\r\n                                <span className=\"text-lg font-normal opacity-90 ml-2\">\r\n                                    - {asignaturaSeleccionada.charAt(0).toUpperCase() + asignaturaSeleccionada.slice(1)}\r\n                                    {!hayDatosAsignatura && <span className=\"text-sm\"> (Estimado)</span>}\r\n                                </span>\r\n                            )}\r\n                            {cursoSeleccionado !== \"todos\" && (\r\n                                <span className=\"text-lg font-normal opacity-90 ml-2\">\r\n                                    - {cursoSeleccionado}\r\n                                </span>\r\n                            )}\r\n                        </h3>\r\n                        <p className=\"opacity-90\">\r\n                            {asignaturaSeleccionada === \"todas\" && cursoSeleccionado === \"todos\"\r\n                                ? `Competencia del mes de ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                                : asignaturaSeleccionada !== \"todas\" && cursoSeleccionado === \"todos\"\r\n                                    ? hayDatosAsignatura\r\n                                        ? `Vista espec√≠fica de ${asignaturaSeleccionada} - ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                                        : `Estimaciones para ${asignaturaSeleccionada} (sin datos espec√≠ficos a√∫n) - ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                                    : asignaturaSeleccionada === \"todas\" && cursoSeleccionado !== \"todos\"\r\n                                        ? `Vista espec√≠fica de ${cursoSeleccionado} - ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                                        : hayDatosAsignatura\r\n                                            ? `Vista espec√≠fica de ${asignaturaSeleccionada} (${cursoSeleccionado}) - ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                                            : `Estimaciones para ${asignaturaSeleccionada} (${cursoSeleccionado}) - ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                            }\r\n                        </p>\r\n                        <div className=\"mt-2 text-sm opacity-80\">\r\n                            üìÖ Se actualiza autom√°ticamente cada mes | üîÑ Datos en tiempo real\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"w-full\">\r\n                            <thead className=\"bg-gray-50\">\r\n                                <tr>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Ranking</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Centro</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Puntuaci√≥n</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Miembros</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Activos</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Respuestas</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Concursos</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Historias</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                                {centros.map((centro, index) => (\r\n                                    <tr\r\n                                        key={centro.nombre}\r\n                                        className={`hover:bg-gray-50 ${centro.nombre === miCentro ? 'bg-yellow-50 border-l-4 border-yellow-400' : ''}`}\r\n                                    >\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <div className=\"flex items-center\">\r\n                                                <span className=\"text-2xl mr-2\">{centro.medalla}</span>\r\n                                                <span className=\"text-lg font-bold text-gray-900\">#{centro.ranking}</span>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <div className=\"flex items-center\">\r\n                                                {esImagen(obtenerLogoCentro(centro.nombre)) ? (\r\n                                                    <img\r\n                                                        src={`/${obtenerLogoCentro(centro.nombre)}`}\r\n                                                        alt={`Logo ${centro.nombre}`}\r\n                                                        className=\"w-10 h-10 object-contain rounded-lg border border-gray-300 mr-3\"\r\n                                                    />\r\n                                                ) : (\r\n                                                    <span className=\"text-2xl mr-3\">{obtenerLogoCentro(centro.nombre)}</span>\r\n                                                )}\r\n                                                <div>\r\n                                                    <div className=\"font-medium text-gray-900\">{centro.nombre}</div>\r\n                                                    {centro.nombre === miCentro && (\r\n                                                        <div className=\"text-sm text-yellow-600\">üëà Tu centro</div>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <div className=\"text-2xl font-bold text-blue-600\">\r\n                                                {centro.puntajeTotal.toLocaleString()}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                                            {centro.estudiantes}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <span className=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800\">\r\n                                                {centro.estudiantesActivos}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                            {centro.respuestasCorrectas}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                            {centro.concursosGanados}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                            {centro.historiasCreadas}\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    {centros.length === 0 && (\r\n                        <div className=\"text-center py-12\">\r\n                            <div className=\"text-gray-400 text-xl mb-4\">üìä</div>\r\n                            <p className=\"text-gray-500\">No hay datos de centros disponibles todav√≠a.</p>\r\n                            <p className=\"text-sm text-gray-400 mt-2\">Los datos aparecer√°n cuando haya actividad de estudiantes.</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Informaci√≥n adicional */}\r\n                <div className=\"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                        <h4 className=\"font-bold text-blue-800 mb-2\">üéØ ¬øC√≥mo Participar?</h4>\r\n                        <ul className=\"text-sm text-blue-700 space-y-1\">\r\n                            <li>‚Ä¢ <strong>Estudiantes y Docentes</strong> pueden participar</li>\r\n                            <li>‚Ä¢ Mantente activo en la plataforma</li>\r\n                            <li>‚Ä¢ Responde preguntas correctamente</li>\r\n                            <li>‚Ä¢ Participa en concursos</li>\r\n                            <li>‚Ä¢ Crea historias interesantes</li>\r\n                            <li>‚Ä¢ Interact√∫a con compa√±eros y profesores</li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                        <h4 className=\"font-bold text-green-800 mb-2\">üèÜ {t('premiosDelMes')}</h4>\r\n                        {premiosDelMes.length > 0 ? (\r\n                            <div className=\"space-y-2\">\r\n                                {premiosDelMes.slice(0, 10).map((premio, index) => (\r\n                                    <div key={index} className={`flex items-center justify-between p-2 rounded ${premio.centro === miCentro ? 'bg-yellow-100 border border-yellow-300' : 'bg-white'\r\n                                        }`}>\r\n                                        <div className=\"flex items-center\">\r\n                                            <span className=\"text-lg mr-2\">{premio.emoji}</span>\r\n                                            <div>\r\n                                                <span className=\"font-medium text-green-800\">{premio.titulo}:</span>\r\n                                                <span className=\"text-green-700 ml-1\">{premio.premio}</span>\r\n                                                {premio.centro === miCentro && (\r\n                                                    <span className=\"text-yellow-600 font-bold ml-2\">üéâ ¬°Tu centro!</span>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"text-right\">\r\n                                            <div className=\"text-sm font-semibold text-green-800\">{premio.centro}</div>\r\n                                            <div className=\"text-xs text-green-600\">+{premio.puntosExtra} pts</div>\r\n                                            <div className=\"text-xs text-green-500\">üèÖ Insignia asignada</div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                                {premiosDelMes.length > 10 && (\r\n                                    <div className=\"text-center text-sm text-green-600 mt-2\">\r\n                                        Y {premiosDelMes.length - 10} premios m√°s de participaci√≥n...\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ) : (\r\n                            <ul className=\"text-sm text-green-700 space-y-1\">\r\n                                <li>ü•á 1er lugar: Trofeo digital especial</li>\r\n                                <li>ü•à 2do lugar: Certificado de honor</li>\r\n                                <li>ü•â 3er lugar: Menci√≥n especial</li>\r\n                                <li>üèÜ Top 10: Badge exclusivo</li>\r\n                                <li>üìö Participaci√≥n: Reconocimiento</li>\r\n                            </ul>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                        <h4 className=\"font-bold text-green-800 mb-2\">‚úÖ Caracter√≠sticas Implementadas</h4>\r\n                        <ul className=\"text-sm text-green-700 space-y-1\">\r\n                            <li>‚úÖ Competencias por asignatura (selector activo)</li>\r\n                            <li>‚úÖ Gr√°ficos de progreso (rankings visuales)</li>\r\n                            <li>‚úÖ Modo vacaciones (detecci√≥n autom√°tica)</li>\r\n                            <li>‚úÖ Challenges especiales (eventos tem√°ticos)</li>\r\n                            <li>‚úÖ Sistema anti-trampa (cursos autom√°ticos)</li>\r\n                            <li>‚úÖ Rankings hist√≥ricos (persistencia completa)</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Ranking Anual - Solo visible en modo anual */}\r\n                {modoVisualizacion === 'anual' && centrosAnuales.length > 0 && (\r\n                    <div className=\"mt-8 bg-gradient-to-br from-amber-50 to-yellow-50 border border-amber-200 rounded-lg p-6 shadow-lg\">\r\n                        <h3 className=\"text-2xl font-bold text-amber-800 mb-6 flex items-center\">\r\n                            üèÜ Ranking Acumulativo Anual {fechaActual.getFullYear()}\r\n                        </h3>\r\n                        <div className=\"grid gap-4\">\r\n                            {centrosAnuales.slice(0, 10).map((centro, index) => (\r\n                                <div key={centro.nombre} className={`flex items-center justify-between p-4 rounded-lg border-2 ${index === 0 ? 'bg-gradient-to-r from-yellow-100 to-amber-100 border-yellow-400' :\r\n                                    index === 1 ? 'bg-gradient-to-r from-gray-100 to-slate-100 border-gray-400' :\r\n                                        index === 2 ? 'bg-gradient-to-r from-orange-100 to-amber-100 border-orange-400' :\r\n                                            'bg-white border-gray-200'\r\n                                    }`}>\r\n                                    <div className=\"flex items-center space-x-4\">\r\n                                        <span className={`text-2xl font-bold ${index === 0 ? 'text-yellow-600' :\r\n                                            index === 1 ? 'text-gray-600' :\r\n                                                index === 2 ? 'text-orange-600' :\r\n                                                    'text-gray-800'\r\n                                            }`}>\r\n                                            #{index + 1}\r\n                                        </span>\r\n                                        {esImagen(obtenerLogoCentro(centro.nombre)) ? (\r\n                                            <img\r\n                                                src={`/${obtenerLogoCentro(centro.nombre)}`}\r\n                                                alt={`Logo ${centro.nombre}`}\r\n                                                className=\"w-12 h-12 object-contain rounded-lg border border-gray-300\"\r\n                                            />\r\n                                        ) : (\r\n                                            <span className=\"text-3xl\">{obtenerLogoCentro(centro.nombre)}</span>\r\n                                        )}\r\n                                        <div>\r\n                                            <h4 className=\"font-bold text-gray-800\">{centro.nombre}</h4>\r\n                                            <p className=\"text-sm text-gray-600\">\r\n                                                Puntuaci√≥n acumulativa: <span className=\"font-semibold\">{centro.puntajeTotal.toLocaleString()}</span>\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"text-right\">\r\n                                        <span className={`text-3xl ${index === 0 ? 'ü•á' :\r\n                                            index === 1 ? 'ü•à' :\r\n                                                index === 2 ? 'ü•â' :\r\n                                                    'üèÖ'\r\n                                            }`}>\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Historial de Ganadores Mensuales */}\r\n                {historialGanadores.length > 0 && (\r\n                    <div className=\"mt-8 bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-6 shadow-lg\">\r\n                        <h3 className=\"text-2xl font-bold text-indigo-800 mb-6 flex items-center\">\r\n                            üìÖ Historial de Ganadores Mensuales\r\n                        </h3>\r\n                        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n                            {historialGanadores.slice(0, 12).map((ganador) => (\r\n                                <div key={`${ganador.mes}-${ganador.a√±o}`} className=\"bg-white rounded-lg border border-indigo-200 p-4 shadow-sm\">\r\n                                    <div className=\"text-center\">\r\n                                        <div className=\"flex justify-center mb-3\">\r\n                                            {esImagen(obtenerLogoCentro(ganador.centro || \"\")) ? (\r\n                                                <img\r\n                                                    src={`/${obtenerLogoCentro(ganador.centro || \"\")}`}\r\n                                                    alt={`Logo ${ganador.centro || \"Centro\"}`}\r\n                                                    className=\"w-16 h-16 object-contain rounded-lg border-2 border-yellow-400\"\r\n                                                />\r\n                                            ) : (\r\n                                                <span className=\"text-4xl\">{obtenerLogoCentro(ganador.centro || \"\")}</span>\r\n                                            )}\r\n                                        </div>\r\n                                        <h4 className=\"font-bold text-gray-800 mb-1\">{ganador.centro || \"Centro Desconocido\"}</h4>\r\n                                        <p className=\"text-sm text-gray-600 mb-2\">\r\n                                            {ganador.mes} {ganador.a√±o}\r\n                                        </p>\r\n                                        <p className=\"text-lg font-semibold text-indigo-600\">\r\n                                            {(ganador.puntaje || 0).toLocaleString()} pts\r\n                                        </p>\r\n                                        <div className=\"text-2xl mt-2\">üèÜ</div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        {historialGanadores.length > 12 && (\r\n                            <div className=\"text-center mt-4\">\r\n                                <p className=\"text-sm text-gray-600\">\r\n                                    Y {historialGanadores.length - 12} ganadores m√°s en el historial...\r\n                                </p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;;AAHA;;;;AA0Ce,SAAS;;IACpB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAgB,EAAE;IACxD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAgB,EAAE;IACtE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAS;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAS;IACnD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAmC;IAC7F,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAS;IAC/D,MAAM,cAAc,IAAI;IACxB,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,0IAAc;IAC5B,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAW,EAAE;IACrE,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IACtE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAC5D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAiB;IAEvD,6DAA6D;IAC7D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAU;IAC9D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAS;IACzD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAM;IAE1D,kEAAkE;IAClE,MAAM,CAAC,wBAAwB,0BAA0B,GAAG,IAAA,yKAAQ,EAAS;IAC7E,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,yKAAQ,EAAU;IACtE,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAS;IACnE,MAAM,cAAc;QAAC;QAAS;QAAe;QAAY;QAAc;QAAY;QAAa;QAAc;QAAU;KAAU;IAClI,MAAM,SAAS;QAAC;QAAS;QAAe;QAAe;QAAe;QAAe;QAAe;KAAc;IAElH,sFAAsF;IACtF,wDAAwD;IACxD,uCAAuC;IAEvC,iEAAiE;IACjE,MAAM,4BAA4B;QAC9B,MAAM,QAAQ,IAAI;QAClB,MAAM,MAAM,MAAM,QAAQ,KAAK,GAAG,OAAO;QACzC,MAAM,MAAM,MAAM,OAAO;QACzB,MAAM,MAAM,MAAM,WAAW;QAE7B,6CAA6C;QAC7C,MAAM,aAAa;YACf;gBAAE,QAAQ;oBAAE,KAAK;oBAAG,KAAK;gBAAG;gBAAG,KAAK;oBAAE,KAAK;oBAAG,KAAK;gBAAG;gBAAG,MAAM;gBAAwB,OAAO;gBAAO,eAAe;YAAI;YACxH;gBAAE,QAAQ;oBAAE,KAAK;oBAAI,KAAK;gBAAG;gBAAG,KAAK;oBAAE,KAAK;oBAAG,KAAK;gBAAE;gBAAG,MAAM;gBAAyB,OAAO;gBAAM,eAAe;YAAI;YACxH;gBAAE,QAAQ;oBAAE,KAAK;oBAAG,KAAK;gBAAG;gBAAG,KAAK;oBAAE,KAAK;oBAAG,KAAK;gBAAE;gBAAG,MAAM;gBAA8B,OAAO;gBAAM,eAAe;YAAI;YAC5H;gBAAE,QAAQ;oBAAE,KAAK;oBAAI,KAAK;gBAAG;gBAAG,KAAK;oBAAE,KAAK;oBAAI,KAAK;gBAAE;gBAAG,MAAM;gBAAuB,OAAO;gBAAM,eAAe;YAAI;YACvH;gBAAE,QAAQ;oBAAE,KAAK;oBAAI,KAAK;gBAAE;gBAAG,KAAK;oBAAE,KAAK;oBAAI,KAAK;gBAAE;gBAAG,MAAM;gBAA6B,OAAO;gBAAQ,eAAe;YAAI;SACjI;QAED,KAAK,MAAM,YAAY,WAAY;YAC/B,IAAI,YAAY;YAEhB,IAAI,SAAS,MAAM,CAAC,GAAG,KAAK,SAAS,GAAG,CAAC,GAAG,EAAE;gBAC1C,YAAY;gBACZ,YAAY,QAAQ,SAAS,MAAM,CAAC,GAAG,IAAI,OAAO,SAAS,MAAM,CAAC,GAAG,IAAI,OAAO,SAAS,GAAG,CAAC,GAAG;YACpG,OAAO,IAAI,SAAS,MAAM,CAAC,GAAG,KAAK,MAAM,SAAS,GAAG,CAAC,GAAG,KAAK,GAAG;gBAC7D,4BAA4B;gBAC5B,YAAY,AAAC,QAAQ,MAAM,OAAO,SAAS,MAAM,CAAC,GAAG,IAAM,QAAQ,KAAK,OAAO,SAAS,GAAG,CAAC,GAAG;YACnG,OAAO;gBACH,mBAAmB;gBACnB,YAAY,AAAC,QAAQ,SAAS,MAAM,CAAC,GAAG,IAAI,OAAO,SAAS,MAAM,CAAC,GAAG,IACjE,QAAQ,SAAS,GAAG,CAAC,GAAG,IAAI,OAAO,SAAS,GAAG,CAAC,GAAG,IACnD,MAAM,SAAS,MAAM,CAAC,GAAG,IAAI,MAAM,SAAS,GAAG,CAAC,GAAG;YAC5D;YAEA,IAAI,WAAW;gBACX,OAAO;oBACH,YAAY;oBACZ,MAAM,SAAS,IAAI;oBACnB,QAAQ;wBACJ,OAAO,SAAS,KAAK;wBACrB,eAAe,SAAS,aAAa;wBACrC,aAAa,CAAC,QAAQ,EAAE,SAAS,IAAI,CAAC,WAAW,GAAG,iCAAiC,EAAE,SAAS,aAAa,CAAC,CAAC,CAAC;oBACpH;gBACJ;YACJ;QACJ;QAEA,OAAO;YAAE,YAAY;YAAO,MAAM;YAAI,QAAQ;QAAK;IACvD;IAEA,uDAAuD;IACvD,MAAM,yBAAyB;QAC3B,MAAM,QAAQ,IAAI;QAClB,MAAM,MAAM,MAAM,QAAQ,KAAK;QAC/B,MAAM,MAAM,MAAM,OAAO;QAEzB,MAAM,aAAa;YACf;gBAAE,KAAK;gBAAG,KAAK;gBAAI,QAAQ;gBAAsB,OAAO;gBAAM,OAAO;YAAqC;YAC1G;gBAAE,KAAK;gBAAG,KAAK;gBAAI,QAAQ;gBAAiB,OAAO;gBAAM,OAAO;YAA2C;YAC3G;gBAAE,KAAK;gBAAG,KAAK;gBAAI,QAAQ;gBAA2B,OAAO;gBAAe,OAAO;YAAqC;YACxH;gBAAE,KAAK;gBAAI,KAAK;gBAAI,QAAQ;gBAAuB,OAAO;gBAAM,OAAO;YAAoC;YAC3G;gBAAE,KAAK;gBAAI,KAAK;gBAAI,QAAQ;gBAAsB,OAAO;gBAAM,OAAO;YAAqC;SAC9G;QAED,OAAO,WAAW,IAAI,CAAC,CAAA,KAAM,GAAG,GAAG,KAAK,OAAO,OAAO,GAAG,GAAG,GAAG,KAAK,OAAO,GAAG,GAAG,GAAG;IACxF;IAEA,0EAA0E;IAC1E,MAAM,kBAAkB,CAAC,SAAkB,OAAe,CAAC;QACvD,kDAAkD;QAClD,qDAAqD;QACrD,MAAM,iBAAiB,QAAQ,KAAK,GAAG,KAAK,QAAQ,gBAAgB,GAAG,KAAK,QAAQ,gBAAgB,GAAG;QACvG,MAAM,cAAc,QAAQ,MAAM,IAAI,QAAQ,MAAM,CAAC,MAAM,GAAG;QAC9D,MAAM,qBAAqB,QAAQ,oBAAoB,GAAG;QAE1D,sEAAsE;QACtE,OAAO,kBAAkB,eAAe;IAC5C;IAEA,+DAA+D;IAC/D,MAAM,gCAAgC,CAAC;QACnC;;QAEA,IAAI;YACA,IAAI,oBAAoB;YAExB,8DAA8D;YAC9D,MAAM,SAAS;gBAAC;gBAAa;gBAAa;gBAAa;gBAAa;gBAAa;aAAY;YAC7F,MAAM,kBAAkB,IAAI,OAAO,WAAW;YAE9C,uBAAuB;YACvB,OAAO,OAAO,CAAC,CAAA;gBACX,MAAM,MAAM,CAAC,uBAAuB,EAAE,iBAAiB;gBACvD,MAAM,QAAQ,aAAa,OAAO,CAAC;gBACnC,IAAI,OAAO;oBACP,IAAI;wBACA,MAAM,aAAa,KAAK,KAAK,CAAC;wBAC9B,sCAAsC;wBACtC,OAAO,IAAI,CAAC,YAAY,OAAO,CAAC,CAAA;4BAC5B,MAAM,WAAW,aAAa,OAAO,CAAC;4BACtC,IAAI,UAAU;gCACV,MAAM,WAAW,KAAK,KAAK,CAAC;gCAC5B,MAAM,UAAU,SAAS,IAAI,CAAC,CAAC,IAAe,EAAE,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,QAAQ,QAAQ;gCAC3F,IAAI,WAAW,QAAQ,MAAM,KAAK,QAAQ;oCACtC,MAAM,eAAe,UAAU,CAAC,KAAK;oCACrC,qBAAqB,CAAC,OAAO,aAAa,OAAO,KAAK,CAAC,IAAI;oCAC3D,qBAAqB,CAAC,OAAO,aAAa,SAAS,KAAK,OAAO,aAAa,kBAAkB,KAAK,CAAC,IAAI;gCAC5G;4BACJ;wBACJ;oBACJ,EAAE,OAAO,GAAG;oBACR,+EAA+E;oBACnF;gBACJ;YACJ;YAEA,4BAA4B;YAC5B,MAAM,cAAc,CAAC,qBAAqB,EAAE,iBAAiB;YAC7D,MAAM,gBAAgB,aAAa,OAAO,CAAC;YAC3C,IAAI,eAAe;gBACf,IAAI;oBACA,MAAM,qBAAqB,KAAK,KAAK,CAAC;oBACtC,OAAO,IAAI,CAAC,oBAAoB,OAAO,CAAC,CAAA;wBACpC,MAAM,WAAW,aAAa,OAAO,CAAC;wBACtC,IAAI,UAAU;4BACV,MAAM,WAAW,KAAK,KAAK,CAAC;4BAC5B,MAAM,UAAU,SAAS,IAAI,CAAC,CAAC,IAAe,EAAE,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,QAAQ,QAAQ;4BAC3F,IAAI,WAAW,QAAQ,MAAM,KAAK,UAAU,QAAQ,IAAI,KAAK,WAAW;gCACpE,MAAM,eAAe,kBAAkB,CAAC,KAAK;gCAC7C,oDAAoD;gCACpD,qBAAqB,CAAC,OAAO,aAAa,OAAO,KAAK,CAAC,IAAI;gCAC3D,qBAAqB,CAAC,OAAO,aAAa,SAAS,KAAK,OAAO,aAAa,kBAAkB,KAAK,CAAC,IAAI;gCACxG,qBAAqB,CAAC,OAAO,aAAa,KAAK,KAAK,CAAC,IAAI,GAAG,uBAAuB;4BACvF;wBACJ;oBACJ;gBACJ,EAAE,OAAO,GAAG;gBACR,cAAc;gBAClB;YACJ;YAEA,OAAO;QACX,EAAE,OAAO,OAAO;YACZ,OAAO;QACX;IACJ;IAEA,+EAA+E;IAC/E,MAAM,gCAAgC,CAAC,YAAoB,UAAqB;QAC5E;;QAEA,MAAM,sBAAoD,CAAC;QAE3D,IAAI,eAAe,SAAS;YACxB,OAAO,CAAC;QACZ;QAEA,uEAAuE;QACvE,SAAS,OAAO,CAAC,CAAA;YACb,IAAI,CAAC,QAAQ,MAAM,EAAE;YAErB,uCAAuC;YACvC,IAAI,eAAe,gBAAgB,WAAW,QAAQ,KAAK,KAAK,aAAa;gBACzE;YACJ;YAEA,MAAM,SAAS,QAAQ,MAAM;YAC7B,IAAI,CAAC,mBAAmB,CAAC,OAAO,EAAE;gBAC9B,mBAAmB,CAAC,OAAO,GAAG;YAClC;YAEA,0DAA0D;YAC1D,oDAAoD;YACpD,MAAM,yBAAoD;gBACtD,eAAe;gBACf,YAAY;gBACZ,aAAa;gBACb,cAAc;gBACd,UAAU;gBACV,cAAc;gBACd,YAAY;gBACZ,WAAW;YACf;YAEA,MAAM,6BAA6B,sBAAsB,CAAC,WAAW,IAAI,WAAW,WAAW;YAC/F,MAAM,kBAAkB,GAAG,2BAA2B,CAAC,EAAE,QAAQ,IAAI,EAAE;YACvE,MAAM,kBAAkB,aAAa,OAAO,CAAC;YAE7C,IAAI,mBAAmB,SAAS,iBAAiB,MAAM,GAAG;gBACtD,sDAAsD;gBACtD,mBAAmB,CAAC,OAAO,IAAI,SAAS,iBAAiB;YAC7D;QACJ;QAEA,OAAO;IACX;IAEA,sEAAsE;IACtE,MAAM,0BAA0B,CAAC;QAC7B,4DAA4D;QAC5D,OAAO,KAAK,kBAAkB;IAClC,GAAM,kDAAkD;IACxD,MAAM,yBAAyB,CAAC,cAAsB;QAClD,4CAA4C;QAC5C,MAAM,uBAAuB,SAAS,MAAM,CAAC,CAAA,IACzC,EAAE,MAAM,KAAK,gBAAgB,EAAE,IAAI,KAAK;QAG5C,MAAM,oBAAoB,SAAS,MAAM,CAAC,CAAA,IACtC,EAAE,MAAM,KAAK,gBAAgB,EAAE,IAAI,KAAK;QAG5C,MAAM,qBAAqB,qBAAqB,MAAM,CAAC,CAAA,IAAK,gBAAgB,IAAI,MAAM;QACtF,MAAM,kBAAkB,kBAAkB,MAAM,CAAC,CAAA,IAAK,gBAAgB,IAAI,MAAM;QAEhF,IAAI,qBAAqB,kBAAkB,kBAAkB;QAE7D,uDAAuD;QACvD,IAAI,2BAA2B,SAAS;YACpC,oDAAoD;YACpD,MAAM,kBAAkB,8BAA8B,wBAAwB,UAAU;YACxF,MAAM,mBAAmB,eAAe,CAAC,aAAa,IAAI;YAE1D,sEAAsE;YACtE,sBAAsB;YAEtB,kEAAkE;YAClE,IAAI,qBAAqB,GAAG;gBACxB,MAAM,sBAAsB,qBAAqB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,OAAO,EAAE,mBAAmB,KAAK,CAAC,GAAG,KAC5G,kBAAkB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,OAAO,EAAE,mBAAmB,KAAK,CAAC,GAAG;gBACrF,sBAAsB;YAC1B;YAEA,6CAA6C;YAC7C,mBAAmB,qBAAqB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,OAAO,EAAE,gBAAgB,KAAK,CAAC,GAAG,KAChG,kBAAkB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,OAAO,EAAE,gBAAgB,KAAK,CAAC,GAAG;YAClF,mBAAmB,qBAAqB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,MAAM,OAAO,CAAC,EAAE,SAAS,IAAI,EAAE,SAAS,CAAC,MAAM,GAAI,OAAO,EAAE,gBAAgB,KAAK,CAAE,GAAG,KACpJ,kBAAkB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,MAAM,OAAO,CAAC,EAAE,SAAS,IAAI,EAAE,SAAS,CAAC,MAAM,GAAI,OAAO,EAAE,gBAAgB,KAAK,CAAE,GAAG;YACtI,wBAAwB,qBAAqB,MAAM,CAAC,CAAC,KAAK,IACtD,MAAM,CAAC,OAAO,EAAE,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,oBAAoB,KAAK,CAAC,GAAG,KAChG,kBAAkB,MAAM,CAAC,CAAC,KAAK,IAC3B,MAAM,CAAC,OAAO,EAAE,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,oBAAoB,KAAK,CAAC,GAAG;QAC5G,OAAO;YACH,iDAAiD;YACjD,MAAM,iCAAiC,qBAAqB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,OAAO,EAAE,mBAAmB,KAAK,CAAC,GAAG;YAC3H,MAAM,8BAA8B,qBAAqB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,OAAO,EAAE,gBAAgB,KAAK,CAAC,GAAG;YACrH,MAAM,8BAA8B,qBAAqB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,MAAM,OAAO,CAAC,EAAE,SAAS,IAAI,EAAE,SAAS,CAAC,MAAM,GAAI,OAAO,EAAE,gBAAgB,KAAK,CAAE,GAAG;YACzK,MAAM,mCAAmC,qBAAqB,MAAM,CAAC,CAAC,KAAK,IACvE,MAAM,CAAC,OAAO,EAAE,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,oBAAoB,KAAK,CAAC,GAAG;YAEpG,6BAA6B;YAC7B,MAAM,8BAA8B,kBAAkB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,OAAO,EAAE,mBAAmB,KAAK,CAAC,GAAG;YACrH,MAAM,2BAA2B,kBAAkB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,OAAO,EAAE,gBAAgB,KAAK,CAAC,GAAG;YAC/G,MAAM,2BAA2B,kBAAkB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,MAAM,OAAO,CAAC,EAAE,SAAS,IAAI,EAAE,SAAS,CAAC,MAAM,GAAI,OAAO,EAAE,gBAAgB,KAAK,CAAE,GAAG;YACnK,MAAM,gCAAgC,kBAAkB,MAAM,CAAC,CAAC,KAAK,IACjE,MAAM,CAAC,OAAO,EAAE,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,oBAAoB,KAAK,CAAC,GAAG;YAEpG,qBAAqB;YACrB,sBAAsB,iCAAiC;YACvD,mBAAmB,8BAA8B;YACjD,mBAAmB,8BAA8B;YACjD,wBAAwB,mCAAmC;QAC/D;QAEA,mEAAmE;QACnE,MAAM,sBAAsB,8BAA8B;QAE1D,sDAAsD;QACtD,MAAM,eAAe,uBAAuB;QAC5C,MAAM,gBAAgB,eAAgB,OAAO,aAAa,WAAW,KAAK,IAAK;QAE/E,uEAAuE;QACvE,MAAM,eACF,AAAC,qBAAqB,KACrB,kBAAkB,KAClB,sBAAsB,IACtB,mBAAmB,KACnB,mBAAmB,KACnB,wBAAwB,IAAa,0BAA0B;QAChE,sBAAsC,6BAA6B;QACnE,eAAsC,4BAA4B;QAEtE,OAAO;YACH,QAAQ;YACR,aAAa,qBAAqB,MAAM,GAAG,kBAAkB,MAAM;YACnE,oBAAoB,qBAAqB;YACzC;YACA;YACA;YACA;YACA,kBAAkB;YAClB,sFAAsF;YACtF,cAAc,OAAO,iBAAiB;YACtC,SAAS;YACT,SAAS;QACb;IACJ;IAEA,mDAAmD;IACnD,MAAM,oBAAoB,CAAC;QACvB,oFAAoF;QACpF,IAAI,CAAC,gBAAgB,OAAO,iBAAiB,UAAU;YACnD,OAAO;QACX;QAEA,mDAAmD;QACnD,MAAM,mBAA8C;YAChD,UAAU;YACV,mBAAmB;YACnB,WAAW;YACX,gBAAgB;YAChB,mBAAmB;YACnB,gBAAgB;YAChB,aAAa;YACb,YAAY;YACZ,WAAW;YACX,kBAAkB;YAClB,qBAAqB;YACrB,iBAAiB;YACjB,sBAAsB;YACtB,qBAAqB;YACrB,iBAAiB;YACjB,qBAAqB;YACrB,YAAY;YACZ,iBAAiB;YACjB,iBAAiB;YACjB,wBAAwB;YACxB,oBAAoB;YACpB,iBAAiB;YACjB,gBAAgB;YAChB,WAAW;YACX,YAAY;YACZ,WAAW;YACX,iBAAiB;YACjB,eAAe;YACf,gBAAgB;YAChB,qBAAqB;YACrB,eAAe;YACf,SAAS;YACT,cAAc;YACd,WAAW;YACX,eAAe;YACf,mBAAmB;YACnB,UAAU;YACV,qBAAqB;YACrB,oBAAoB;YACpB,kBAAkB;YAClB,cAAc;YACd,eAAe;YACf,gBAAgB;YAChB,cAAc;YACd,aAAa;YACb,2BAA2B;YAC3B,4BAA4B;YAC5B,uBAAuB;YACvB,sBAAsB;YACtB,aAAa;YACb,WAAW;YACX,iBAAiB;YACjB,UAAU;YACV,oBAAoB;YACpB,kBAAkB;QACtB;QAEA,6BAA6B;QAC7B,IAAI,gBAAgB,CAAC,aAAa,EAAE;YAChC,OAAO,gBAAgB,CAAC,aAAa;QACzC;QAEA,4EAA4E;QAC5E,mDAAmD;QACnD,IAAI,OAAO,iBAAiB,YAAY,CAAC,cAAc;YACnD,OAAO;QACX;QAEA,MAAM,eAAe,aAAa,WAAW,GAAG,IAAI;QACpD,KAAK,MAAM,CAAC,QAAQ,QAAQ,IAAI,OAAO,OAAO,CAAC,kBAAmB;YAC9D,IAAI,aAAa,QAAQ,CAAC,OAAO,WAAW,OAAO,OAAO,WAAW,GAAG,QAAQ,CAAC,eAAe;gBAC5F,OAAO;YACX;QACJ;QAEA,2DAA2D;QAC3D,OAAO,iBAAiB,oCAAoC;IAChE;IAEA,2DAA2D;IAC3D,MAAM,WAAW,CAAC;QACd,OAAO,KAAK,QAAQ,CAAC,WAAW,KAAK,QAAQ,CAAC,WAAW,KAAK,QAAQ,CAAC;IAC3E;IAEA,oEAAoE;IACpE,MAAM,uBAAuB;QACzB;;QAEA,MAAM,cAAc,IAAI;QACxB,MAAM,YAAY,YAAY,WAAW;QACzC,MAAM,YAAY,YAAY,QAAQ,KAAK,GAAG,OAAO;QAErD,oCAAoC;QACpC,MAAM,qBAAqB,CAAC,kBAAkB,EAAE,UAAU,CAAC,EAAE,UAAU,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;QAEpG,wBAAwB;QACxB,IAAI,cAAc,YAAY;QAC9B,IAAI,cAAc;QAClB,IAAI,gBAAgB,GAAG;YACnB,cAAc;YACd,cAAc,YAAY;QAC9B;QACA,MAAM,uBAAuB,CAAC,kBAAkB,EAAE,YAAY,CAAC,EAAE,YAAY,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;QAE1G,uEAAuE;QACvE,IAAI,CAAC,aAAa,OAAO,CAAC,uBAAuB;YAC7C,MAAM,mBAAmB,0BAA0B,aAAa;YAChE,IAAI,iBAAiB,MAAM,GAAG,GAAG;gBAC7B,IAAI;oBACA,aAAa,OAAO,CAAC,oBAAoB,KAAK,SAAS,CAAC;gBAC5D,EAAE,OAAO,GAAG;gBACR,cAAc;gBAClB;YACJ;QACJ;QAEA,6FAA6F;QAC7F,MAAM,mBAAmB,aAAa,OAAO,CAAC;QAC9C,IAAI,kBAAkB;YAClB,IAAI;gBACA,MAAM,SAAS,KAAK,KAAK,CAAC;gBAE1B,kEAAkE;gBAClE,MAAM,aAAa,OAAO,GAAG,CAAC,CAAC;oBAC3B,MAAM,OAAO,GAAG;oBAChB,IAAI,OAAO,SAAS,YAAY,SAAS,MAAM;wBAC3C,MAAM,WAAW,IAAA,0JAAqB,EAAC;wBACvC,OAAO;4BAAE,GAAG,CAAC;4BAAE,QAAQ;wBAAS;oBACpC;oBACA,OAAO;gBACX;gBAEA,MAAM,iBAAiB,WAAW,IAAI,CAAC,CAAC,GAAQ,MAAgB,OAAO,MAAM,CAAC,IAAI,EAAE,WAAW,YAAY,MAAM,CAAC,IAAI,EAAE,WAAW;gBACnI,IAAI,kBAAkB,CAAC,aAAa,OAAO,CAAC,GAAG,mBAAmB,YAAY,CAAC,GAAG;oBAC9E,IAAI;wBACA,aAAa,OAAO,CAAC,oBAAoB,KAAK,SAAS,CAAC;wBACxD,aAAa,OAAO,CAAC,GAAG,mBAAmB,YAAY,CAAC,EAAE;oBAC9D,EAAE,OAAO,GAAG;oBACR,cAAc;oBAClB;gBACJ;gBAEA,OAAO;YACX,EAAE,OAAO,OAAO;YACZ,cAAc;YAClB;QACJ;QAEA,OAAO,EAAE;IACb;IAEA,qEAAqE;IACrE,MAAM,4BAA4B,CAAC,KAAc;QAC7C;;QAEA,kEAAkE;QAClE,MAAM,cAAc,IAAI;QACxB,MAAM,UAAU,OAAQ,YAAY,QAAQ,KAAK;QACjD,MAAM,UAAU,OAAO,YAAY,WAAW;QAE9C,uCAAuC;QACvC,MAAM,iBAAiB,qBAAqB,SAAS;QAErD,IAAI,eAAe,MAAM,KAAK,GAAG,OAAO,EAAE;QAE1C,MAAM,UAAU;YACZ;gBACI,UAAU;gBACV,OAAO;gBACP,QAAQ;gBACR,QAAQ;gBACR,aAAa;gBACb,QAAQ,cAAc,CAAC,EAAE,EAAE,UAAU;gBACrC,aAAa;YACjB;YACA;gBACI,UAAU;gBACV,OAAO;gBACP,QAAQ;gBACR,QAAQ;gBACR,aAAa;gBACb,QAAQ,cAAc,CAAC,EAAE,EAAE,UAAU;gBACrC,aAAa;YACjB;YACA;gBACI,UAAU;gBACV,OAAO;gBACP,QAAQ;gBACR,QAAQ;gBACR,aAAa;gBACb,QAAQ,cAAc,CAAC,EAAE,EAAE,UAAU;gBACrC,aAAa;YACjB;SACH;QAED,8BAA8B;QAC9B,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,GAAG,CAAC,IAAI,eAAe,MAAM,GAAG,IAAK;YAC1D,QAAQ,IAAI,CAAC;gBACT,UAAU,IAAI;gBACd,OAAO;gBACP,QAAQ,CAAC,IAAI,EAAE,IAAI,GAAG;gBACtB,QAAQ;gBACR,aAAa,CAAC,oBAAoB,EAAE,IAAI,EAAE,SAAS,CAAC;gBACpD,QAAQ,cAAc,CAAC,EAAE,EAAE,UAAU;gBACrC,aAAa;YACjB;QACJ;QAEA,wEAAwE;QACxE,eAAe,OAAO,CAAC,CAAC,QAAQ;YAC5B,IAAI,SAAS,IAAI;gBACb,QAAQ,IAAI,CAAC;oBACT,UAAU,QAAQ;oBAClB,OAAO;oBACP,QAAQ;oBACR,QAAQ;oBACR,aAAa;oBACb,QAAQ,OAAO,MAAM;oBACrB,aAAa;gBACjB;YACJ;QACJ;QAEA,+EAA+E;QAC/E,yEAAyE;QAEzE,OAAO;IACX;IAEA,6EAA6E;IAC7E,MAAM,uBAAuB,CAAC,cAAsB;QAChD;;QAEA,IAAI;YACA,MAAM,WAAW,aAAa,OAAO,CAAC;YACtC,IAAI,CAAC,UAAU;YAEf,MAAM,QAAQ,KAAK,KAAK,CAAC;YACzB,IAAI,uBAAuB;YAE3B,iDAAiD;YACjD,MAAM,OAAO,CAAC,CAAC;gBACX,IAAI,KAAK,MAAM,KAAK,cAAc;oBAC9B,IAAI,CAAC,KAAK,OAAO,EAAE;wBACf,KAAK,OAAO,GAAG,EAAE;oBACrB;oBACA,IAAI,CAAC,KAAK,OAAO,CAAC,QAAQ,CAAC,WAAW;wBAClC,KAAK,OAAO,CAAC,IAAI,CAAC;wBAClB,uBAAuB;oBAC3B;gBACJ;YACJ;YAEA,IAAI,sBAAsB;gBACtB,aAAa,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC;YACjD;QACJ,EAAE,OAAO,OAAO;QACZ,cAAc;QAClB;IACJ;IAEA,2FAA2F;IAC3F,MAAM,4BAA4B;QAC9B;;QAEA,MAAM,cAAc,IAAI;QACxB,MAAM,wBAAwB,CAAC,kBAAkB,EAAE,YAAY,WAAW,GAAG,CAAC,EAAE,CAAC,YAAY,QAAQ,KAAK,CAAC,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;QAE1I,OAAO,aAAa,OAAO,CAAC,2BAA2B;IAC3D;IAEA,sFAAsF;IACtF,MAAM,gCAAgC;QAClC;;QAEA,MAAM,cAAc,IAAI;QACxB,MAAM,wBAAwB,CAAC,kBAAkB,EAAE,YAAY,WAAW,GAAG,CAAC,EAAE,CAAC,YAAY,QAAQ,KAAK,CAAC,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;QAE1I,aAAa,OAAO,CAAC,uBAAuB;IAChD;IAEA,wEAAwE;IACxE,MAAM,yBAAyB,CAAC;QAC5B,MAAM,gBAAgB;QACtB,OAAO,cAAc,IAAI,CAAC,CAAA,SAAU,OAAO,MAAM,KAAK;IAC1D;IAEA,+EAA+E;IAC/E,wGAAwG;IAExG,qDAAqD;IACrD,MAAM,0BAA0B;QAC5B,MAAM,MAAM,IAAI;QAChB,MAAM,YAAY,IAAI,WAAW;QACjC,MAAM,YAAY,IAAI,QAAQ,IAAI,OAAO;QACzC,MAAM,YAAY,IAAI,OAAO;QAE7B,2CAA2C;QAC3C,MAAM,kBAAkB,IAAI,KAAK,WAAW,YAAY,GAAG,GAAG,OAAO;QACrE,MAAM,gBAAgB,kBAAkB,YAAY;QAEpD,4BAA4B;QAC5B,MAAM,iBAAiB,KAAK,KAAK,CAAC,AAAC,YAAY,kBAAmB;QAElE,cAAc;QACd,MAAM,aAAa,IAAI,KAAK,WAAW,YAAY,GAAG;QACtD,MAAM,mBAAmB,WAAW,kBAAkB,CAAC,SAAS;YAAE,OAAO;YAAQ,MAAM;QAAU;QAEjG,OAAO;YACH;YACA;YACA;QACJ;IACJ;IAEA,sDAAsD;IACtD,MAAM,kBAAkB,CAAC,KAAa;QAClC,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAAC,EAAE,IAAI,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;IACtE;IAEA,sDAAsD;IACtD,MAAM,0BAA0B;QAC5B;;QAEA,MAAM,QAAQ,EAAE;QAChB,MAAM,cAAc,IAAI;QAExB,qBAAqB;QACrB,MAAM,YAAY,GAAG,YAAY,WAAW,GAAG,CAAC,EAAE,CAAC,YAAY,QAAQ,KAAK,CAAC,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;QAC5G,MAAM,IAAI,CAAC;QAEX,0CAA0C;QAC1C,IAAK,IAAI,IAAI,GAAG,KAAK,IAAI,IAAK;YAC1B,MAAM,QAAQ,IAAI,KAAK;YACvB,MAAM,QAAQ,CAAC,MAAM,QAAQ,KAAK;YAClC,MAAM,WAAW,gBAAgB,MAAM,WAAW,IAAI,MAAM,QAAQ,KAAK;YAEzE,IAAI,aAAa,OAAO,CAAC,WAAW;gBAChC,MAAM,YAAY,GAAG,MAAM,WAAW,GAAG,CAAC,EAAE,CAAC,MAAM,QAAQ,KAAK,CAAC,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;gBAChG,MAAM,IAAI,CAAC;YACf;QACJ;QAEA,OAAO;IACX;IAEA,oDAAoD;IACpD,MAAM,wBAAwB,CAAC;QAC3B;;QAEA,MAAM,cAAc,IAAI;QACxB,MAAM,WAAW,gBAAgB,YAAY,WAAW,IAAI,YAAY,QAAQ,KAAK;QAErF,MAAM,eAAe;YACjB,OAAO,YAAY,WAAW;YAC9B,KAAK,YAAY,WAAW;YAC5B,KAAK,YAAY,QAAQ,KAAK;YAC9B,SAAS;YACT,SAAS,OAAO,CAAC,EAAE,EAAE,UAAU;QACnC;QAEA,aAAa,OAAO,CAAC,UAAU,KAAK,SAAS,CAAC;IAClD;IAEA,mDAAmD;IACnD,MAAM,uBAAuB,CAAC,KAAa;QACvC;;QAEA,MAAM,WAAW,gBAAgB,KAAK;QACtC,MAAM,QAAQ,aAAa,OAAO,CAAC;QAEnC,IAAI,OAAO;YACP,IAAI;gBACA,MAAM,UAAU,KAAK,KAAK,CAAC;gBAC3B,OAAO,QAAQ,OAAO,IAAI,EAAE;YAChC,EAAE,OAAO,OAAO;YACZ,cAAc;YAClB;QACJ;QAEA,OAAO,EAAE;IACb;IAEA,kDAAkD;IAClD,MAAM,uBAAuB;QACzB;;QAEA,MAAM,cAAc,IAAI;QACxB,MAAM,YAAY,YAAY,WAAW;QACzC,MAAM,oBAAuD,CAAC;QAE9D,iDAAiD;QACjD,IAAK,IAAI,MAAM,GAAG,OAAO,IAAI,MAAO;YAChC,MAAM,iBAAiB,qBAAqB,WAAW;YAEvD,eAAe,OAAO,CAAC,CAAA;gBACnB,IAAI,CAAC,iBAAiB,CAAC,OAAO,MAAM,CAAC,EAAE;oBACnC,iBAAiB,CAAC,OAAO,MAAM,CAAC,GAAG;wBAC/B,GAAG,MAAM;wBACT,cAAc;wBACd,SAAS;oBACb;gBACJ;gBAEA,iBAAiB,CAAC,OAAO,MAAM,CAAC,CAAC,YAAY,IAAI,OAAO,OAAO,YAAY,KAAK;gBAChF,iBAAiB,CAAC,OAAO,MAAM,CAAC,CAAC,mBAAmB,IAAI,OAAO,OAAO,mBAAmB,KAAK;gBAC9F,iBAAiB,CAAC,OAAO,MAAM,CAAC,CAAC,gBAAgB,IAAI,OAAO,OAAO,gBAAgB,KAAK;gBACxF,iBAAiB,CAAC,OAAO,MAAM,CAAC,CAAC,gBAAgB,IAAI,OAAO,OAAO,gBAAgB,KAAK;gBACxF,iBAAiB,CAAC,OAAO,MAAM,CAAC,CAAC,qBAAqB,IAAI,OAAO,OAAO,qBAAqB,KAAK;YACtG;QACJ;QAEA,8BAA8B;QAC9B,MAAM,eAAe,OAAO,MAAM,CAAC,mBAC9B,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,YAAY,GAAG,EAAE,YAAY;QAEnD,8BAA8B;QAC9B,OAAO,gBAAgB;IAC3B;IAEA,8CAA8C;IAC9C,MAAM,4BAA4B;QAC9B;;QAEA,MAAM,YAAY,EAAE;QACpB,MAAM,cAAc,IAAI;QAExB,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,IAAK;YACzB,MAAM,QAAQ,IAAI,KAAK;YACvB,MAAM,QAAQ,CAAC,MAAM,QAAQ,KAAK;YAElC,MAAM,iBAAiB,qBAAqB,MAAM,WAAW,IAAI,MAAM,QAAQ,KAAK;YAEpF,IAAI,eAAe,MAAM,GAAG,KAAK,cAAc,CAAC,EAAE,EAAE;gBAChD,MAAM,UAAU,cAAc,CAAC,EAAE;gBACjC,UAAU,IAAI,CAAC;oBACX,KAAK,MAAM,WAAW;oBACtB,KAAK,MAAM,kBAAkB,CAAC,SAAS;wBAAE,OAAO;oBAAO;oBACvD,QAAQ,QAAQ,MAAM,IAAI;oBAC1B,SAAS,QAAQ,YAAY,IAAI;oBACjC,SAAS;gBACb;YACJ;QACJ;QAEA,OAAO;IACX;IACA,MAAM,kBAAkB,CAAC;QACrB,OAAO,iBAAiB,GAAG,CAAC,CAAC,QAAQ;YACjC,IAAI,UAAU;YACd,IAAI,UAAU,GAAG,UAAU;iBACtB,IAAI,UAAU,GAAG,UAAU;iBAC3B,IAAI,UAAU,GAAG,UAAU;iBAC3B,IAAI,QAAQ,IAAI,UAAU;iBAC1B,UAAU;YAEf,OAAO;gBACH,GAAG,MAAM;gBACT,SAAS,QAAQ;gBACjB;YACJ;QACJ;IACJ;IAEA,uCAAuC;IACvC,IAAA,0KAAS;wCAAC;YACN,MAAM;4DAAc;oBAChB,IAAI;wBACA,wBAAwB;wBACxB,MAAM,WAAW,aAAa,OAAO,CAAC,kBAAkB,aAAa,OAAO,CAAC;wBAC7E,IAAI,UAAU;4BACV,MAAM,OAAO,KAAK,KAAK,CAAC;4BACxB,WAAW;4BACX,YAAY,KAAK,MAAM,IAAI;wBAC/B;wBAEA,0BAA0B;wBAC1B,MAAM,mBAAmB;wBACzB,oBAAoB;wBAEpB,MAAM,qBAAqB;wBAC3B,sBAAsB;wBAEtB,4BAA4B;wBAC5B,MAAM,eAAe,aAAa,OAAO,CAAC;wBAC1C,IAAI,CAAC,cAAc;4BACf,WAAW;4BACX;wBACJ;wBAEA,MAAM,WAAsB,KAAK,KAAK,CAAC;wBAEvC,2DAA2D;wBAC3D,IAAI,2BAA2B,SAAS;4BACpC,oDAAoD;4BACpD,MAAM,yBAAoD;gCACtD,eAAe;gCACf,YAAY;gCACZ,aAAa;gCACb,cAAc;gCACd,UAAU;gCACV,cAAc;gCACd,YAAY;gCACZ,WAAW;4BACf;4BACA,MAAM,6BAA6B,sBAAsB,CAAC,uBAAuB,IAAI,uBAAuB,WAAW;4BAEvH,IAAI,sBAAsB;4BAC1B,IAAK,IAAI,IAAI,GAAG,IAAI,aAAa,MAAM,EAAE,IAAK;gCAC1C,MAAM,QAAQ,aAAa,GAAG,CAAC;gCAC/B,IAAI,SAAS,MAAM,UAAU,CAAC,GAAG,2BAA2B,CAAC,CAAC,GAAG;oCAC7D,MAAM,QAAQ,aAAa,OAAO,CAAC;oCACnC,IAAI,SAAS,SAAS,OAAO,MAAM,GAAG;wCAClC,sBAAsB;wCACtB;oCACJ;gCACJ;4BACJ;4BACA,sBAAsB;wBAC1B,OAAO;4BACH,sBAAsB;wBAC1B;wBAEA,iCAAiC;wBACjC,MAAM,gBAAgB;+BAAI,IAAI,IAAI,SAC7B,MAAM;4EAAC,CAAA,IAAK,EAAE,MAAM,IAAI,EAAE,MAAM,CAAC,IAAI,OAAO;2EAC5C,GAAG;4EAAC,CAAA,IAAK,EAAE,MAAM;;yBAAG;wBAEzB,yCAAyC;wBACzC,MAAM,oBAAoB,cAAc,GAAG;0FAAC,CAAA,eACxC,uBAAuB,cAAc;;wBAGzC,4CAA4C;wBAC5C,MAAM,mBAAmB,kBACpB,IAAI;yFAAC,CAAC,GAAG,IAAM,EAAE,YAAY,GAAG,EAAE,YAAY;;wBAEnD,MAAM,qBAAqB,gBAAgB;wBAE3C,4CAA4C;wBAC5C,IAAI,sBAAsB,SAAS;4BAC/B,MAAM,iBAAiB;4BACvB,kBAAkB;wBACtB,OAAO,IAAI,mBAAmB,iBAAiB,QAAQ,CAAC,kBAAkB;4BACtE,mCAAmC;4BACnC,6CAA6C;4BAC7C,MAAM,SAAS,gBAAgB,KAAK,CAAC;4BACrC,MAAM,YAAY,MAAM,CAAC,EAAE;4BAC3B,MAAM,MAAM,SAAS,MAAM,CAAC,EAAE,KAAK,YAAY,WAAW;4BAE1D,mCAAmC;4BACnC,MAAM,eAAe;gCAAC;gCAAS;gCAAW;gCAAS;gCAAS;gCAAQ;gCAChE;gCAAS;gCAAU;gCAAc;gCAAW;gCAAa;6BAAY;4BACzE,MAAM,YAAY,aAAa,OAAO,CAAC,aAAa;4BAEpD,IAAI,YAAY,GAAG;gCACf,MAAM,aAAa,qBAAqB,KAAK;gCAC7C,IAAI,WAAW,MAAM,GAAG,GAAG;oCACvB,WAAW;gCACf,OAAO;oCACH,WAAW;gCACf;4BACJ,OAAO;gCACH,WAAW;4BACf;wBACJ,OAAO;4BACH,aAAa;4BACb,WAAW;4BACX,0CAA0C;4BAC1C,sBAAsB;wBAC1B;wBAEA,gCAAgC;wBAChC,sBAAsB;wBAEtB,yBAAyB;wBACzB,iBAAiB;wBAEjB,WAAW;oBAEf,EAAE,OAAO,OAAO;wBACZ,cAAc;wBACd,WAAW;oBACf;gBACJ;;YAEA;QACJ;uCAAG;QAAC;QAAmB;QAAiB;QAAwB;KAAkB;IAElF,qGAAqG;IACrG,IAAA,0KAAS;wCAAC;YACN,6CAA6C;YAC7C,MAAM,oBAAoB;YAC1B,kBAAkB,kBAAkB,UAAU;YAC9C,gBAAgB,kBAAkB,IAAI;YAEtC,yEAAyE;YACzE,wFAAwF;YACxF,IAAI,oBAAyB;YAC7B,IAAI,kBAAkB,UAAU,IAAI,kBAAkB,MAAM,EAAE;gBAC1D,oBAAoB,IAAA,6JAAwB,EAAC;oBACzC,QAAQ,kBAAkB,IAAI;oBAC9B,aAAa,kBAAkB,MAAM,CAAC,WAAW,IAAI;oBACrD,OAAO,kBAAkB,MAAM,CAAC,KAAK,IAAI;oBACzC,MAAM;oBACN,eAAe,kBAAkB,MAAM,CAAC,aAAa,IAAI;gBAC7D;YACJ;YAEA,gCAAgC;YAChC,MAAM,kBAAkB;YACxB,IAAI,mBAAmB,CAAC,kBAAkB,UAAU,EAAE;gBAClD,uEAAuE;gBACvE,oBAAoB,IAAA,6JAAwB,EAAC;oBACzC,QAAQ,gBAAgB,MAAM,IAAI;oBAClC,aAAa,gBAAgB,KAAK,IAAI;oBACtC,OAAO,gBAAgB,KAAK,IAAI;oBAChC,MAAM;gBACV;YACJ;YAEA,kBAAkB;QACtB;uCAAG,EAAE,GAAG,qDAAqD;IAE7D,uCAAuC;IACvC,MAAM,mBAAmB,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK;IAExD,IAAI,SAAS;QACT,qBACI,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAE,WAAU;kCAA8B;;;;;;;;;;;;;;;;;IAI3D;IAEA,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BAEX,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAG,WAAU;;gCAAoG;gCAC1G,EAAE;;;;;;;sCAEV,6LAAC;4BAAE,WAAU;sCACR,EAAE;;;;;;;;;;;;gBAKV,kBAAkB,gCACf,6LAAC;oBAAI,MAAK;oBAAS,aAAU;oBAAS,cAAY,eAAe,MAAM,IAAI;oBAAmB,WAAU;8BACpG,cAAA,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAG,WAAU;;oCACT,eAAe,KAAK;oCAAC;oCAAG;oCAAa;oCAAW,eAAe,KAAK;;;;;;;0CAEzE,6LAAC;gCAAE,WAAU;0CACR,eAAe,WAAW;;;;;;0CAE/B,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAE,WAAU;kDACR,eAAe,IAAI,KAAK,cAAc,eAAe,aAAa,kBAC/D;;gDAAE;8DAAG,6LAAC;;wDAAQ,EAAE;wDAAuB;;;;;;;gDAAU;gDAAG,eAAe,aAAa;;;;;;;;kDAGxF,6LAAC;wCAAE,WAAU;kDAA+B;;;;;;;;;;;;;;;;;;;;;;;gBAS3D,CAAC,kBAAkB,kBAAkB,eAAe,MAAM,kBACvD,6LAAC;oBAAI,MAAK;oBAAS,aAAU;oBAAS,cAAY,eAAe,MAAM,IAAI;oBAAmB,WAAU;8BACpG,cAAA,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAG,WAAU;;oCACT,eAAe,KAAK;oCAAC;oCAAE,eAAe,MAAM;oCAAC;oCAAE,eAAe,KAAK;;;;;;;0CAExE,6LAAC;gCAAE,WAAU;;oCAAgC;kDACtC,6LAAC;kDAAO;;;;;;oCAAwB;oCAAE,eAAe,WAAW;;;;;;;0CAEnE,6LAAC;gCAAE,WAAU;0CACR,EAAE;;;;;;;;;;;;;;;;;8BAOnB,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;;8CAEX,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAM,WAAU;sDAAsC;;;;;;sDACvD,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDACG,SAAS,IAAM,qBAAqB;oDACpC,WAAW,CAAC,wDAAwD,EAAE,sBAAsB,WACtF,qCACA,+CACA;8DACT;;;;;;8DAGD,6LAAC;oDACG,SAAS,IAAM,qBAAqB;oDACpC,WAAW,CAAC,wDAAwD,EAAE,sBAAsB,cACtF,qCACA,+CACA;8DACT;;;;;;8DAGD,6LAAC;oDACG,SAAS,IAAM,qBAAqB;oDACpC,WAAW,CAAC,wDAAwD,EAAE,sBAAsB,UACtF,qCACA,+CACA;8DACT;;;;;;;;;;;;;;;;;;8CAOT,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAM,WAAU;sDAAuC,EAAE;;;;;;sDAC1D,6LAAC;4CACG,OAAO;4CACP,UAAU,CAAC,IAAM,0BAA0B,EAAE,MAAM,CAAC,KAAK;4CACzD,WAAU;;8DAEV,6LAAC;oDAAO,OAAM;;wDAAQ;wDAAI,EAAE;;;;;;;8DAC5B,6LAAC;oDAAO,OAAM;8DAAc;;;;;;8DAC5B,6LAAC;oDAAO,OAAM;8DAAW;;;;;;8DACzB,6LAAC;oDAAO,OAAM;8DAAa;;;;;;8DAC3B,6LAAC;oDAAO,OAAM;8DAAW;;;;;;8DACzB,6LAAC;oDAAO,OAAM;8DAAY;;;;;;8DAC1B,6LAAC;oDAAO,OAAM;8DAAa;;;;;;8DAC3B,6LAAC;oDAAO,OAAM;8DAAS;;;;;;8DACvB,6LAAC;oDAAO,OAAM;8DAAU;;;;;;;;;;;;;;;;;;8CAKhC,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAM,WAAU;sDAAuC,EAAE;;;;;;sDAC1D,6LAAC;4CACG,OAAO;4CACP,UAAU,CAAC,IAAM,qBAAqB,EAAE,MAAM,CAAC,KAAK;4CACpD,WAAU;;8DAEV,6LAAC;oDAAO,OAAM;;wDAAQ;wDAAI,EAAE;;;;;;;8DAC5B,6LAAC;oDAAO,OAAM;8DAAc;;;;;;8DAC5B,6LAAC;oDAAO,OAAM;8DAAc;;;;;;8DAC5B,6LAAC;oDAAO,OAAM;8DAAc;;;;;;8DAC5B,6LAAC;oDAAO,OAAM;8DAAc;;;;;;8DAC5B,6LAAC;oDAAO,OAAM;8DAAc;;;;;;8DAC5B,6LAAC;oDAAO,OAAM;8DAAc;;;;;;;;;;;;;;;;;;gCAKnC,sBAAsB,eAAe,iBAAiB,MAAM,GAAG,mBAC5D,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAM,WAAU;sDAAuC,EAAE;;;;;;sDAC1D,6LAAC;4CACG,OAAO;4CACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;4CAClD,WAAU;;8DAEV,6LAAC;oDAAO,OAAM;8DAAI,EAAE;;;;;;gDACnB,iBAAiB,GAAG,CAAC,CAAC,oBACnB,6LAAC;wDAAiB,OAAO;kEACpB;uDADQ;;;;;;;;;;;;;;;;;;;;;;;sCAUjC,6LAAC;4BAAI,WAAU;;gCACV,sBAAsB,0BACnB,6LAAC;oCAAE,WAAU;;wCAAwB;sDAC9B,6LAAC;sDAAQ,EAAE;;;;;;wCAAoB;wCAAE,EAAE;wCAAwB;wCAAG,YAAY,kBAAkB,CAAC,SAAS;4CAAE,OAAO;4CAAQ,MAAM;wCAAU;wCAAG;;;;;;;gCAGpJ,sBAAsB,eAAe,iCAClC,6LAAC;oCAAE,WAAU;;wCAAwB;sDAC9B,6LAAC;sDAAQ,EAAE;;;;;;wCAAoB;wCAAE,EAAE;wCAAwB;wCAAE;;;;;;;gCAGvE,sBAAsB,yBACnB,6LAAC;oCAAE,WAAU;;wCAAwB;sDAC9B,6LAAC;sDAAQ,EAAE;;;;;;wCAAoB;wCAAE,EAAE;wCAAgB;wCAAO,YAAY,WAAW;wCAAG;;;;;;;;;;;;;;;;;;;gBAOtG,kCACG,6LAAC;oBAAI,MAAK;oBAAS,mBAAgB;oBAAkB,WAAU;8BAC3D,cAAA,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC;;8CACG,6LAAC;oCAAG,IAAG;oCAAkB,WAAU;oCAA2D,cAAY,EAAE;;wCACvG,SAAS,kBAAkB,iBAAiB,MAAM,mBAC/C,6LAAC;4CACG,KAAK,CAAC,CAAC,EAAE,kBAAkB,iBAAiB,MAAM,GAAG;4CACrD,KAAK,CAAC,KAAK,EAAE,iBAAiB,MAAM,EAAE;4CACtC,WAAU;;;;;iEAGd,6LAAC;4CAAK,WAAU;sDAAiB,kBAAkB,iBAAiB,MAAM;;;;;;wCAC5E;wCACE,EAAE;wCAAY;wCAAG,iBAAiB,MAAM;;;;;;;8CAEhD,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;;8DACG,6LAAC;oDAAK,WAAU;;wDAAiC,EAAE;wDAAW;;;;;;;8DAC9D,6LAAC;oDAAK,WAAU;;wDAAgB,iBAAiB,OAAO;wDAAC;wDAAG,iBAAiB,OAAO;;;;;;;;;;;;;sDAExF,6LAAC;;8DACG,6LAAC;oDAAK,WAAU;;wDAAiC,EAAE;wDAAc;;;;;;;8DACjE,6LAAC;oDAAK,WAAU;8DAA0B,iBAAiB,YAAY,CAAC,cAAc;;;;;;;;;;;;sDAE1F,6LAAC;;8DACG,6LAAC;oDAAK,WAAU;;wDAAiC,EAAE;wDAAY;;;;;;;8DAC/D,6LAAC;oDAAK,WAAU;;wDAAQ,iBAAiB,kBAAkB;wDAAC;wDAAE,iBAAiB,WAAW;;;;;;;8DAC1F,6LAAC;oDAAI,WAAU;8DAA0B;;;;;;;;;;;;sDAE7C,6LAAC;;8DACG,6LAAC;oDAAK,WAAU;;wDAAiC,EAAE;wDAAa;;;;;;;8DAChE,6LAAC;oDAAK,WAAU;8DAAQ,iBAAiB,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAShF,oBAAoB,CAAC;oBAClB,MAAM,eAAe,uBAAuB,iBAAiB,MAAM;oBACnE,OAAO,6BACH,6LAAC;wBAAI,MAAK;wBAAS,mBAAgB;wBAAsB,WAAU;kCAC/D,cAAA,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;8CAAgB;;;;;;8CAC/B,6LAAC;;sDACG,6LAAC;4CAAG,IAAG;4CAAsB,WAAU;sDAClC,EAAE;;;;;;sDAEP,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAK,WAAU;sEAAiB,aAAa,KAAK;;;;;;sEACnD,6LAAC;4DAAK,WAAU;;gEAA6B,aAAa,MAAM;gEAAC;;;;;;;sEACjE,6LAAC;4DAAK,WAAU;sEAAwB,IAAA,0JAAqB,EAAC,aAAa,MAAM;;;;;;;;;;;;8DAErF,6LAAC;oDAAE,WAAU;8DAAgC,aAAa,WAAW;;;;;;8DACrE,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAE,WAAU;;gEAAwC;8EAC9C,6LAAC;;wEAAQ,EAAE;wEAAiB;;;;;;;gEAAU;gEAAG,OAAO,aAAa,WAAW,KAAK;gEAAE;;;;;;;sEAEtF,6LAAC;4DAAE,WAAU;;gEAAuE;8EAC7E,6LAAC;;wEAAQ,EAAE;wEAAsB;;;;;;;gEAAU;gEAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BAO1E;gBACR,CAAC;8BAGD,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAG,WAAU;4BAAyD,MAAK;4BAAS,mBAAgB;sCACjG,cAAA,6LAAC;gCAAK,IAAG;;oCAAiB;oCAAI,EAAE;;;;;;;;;;;;sCAIpC,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAG,WAAU;8CAA2C;;;;;;8CACzD,6LAAC;oCAAI,WAAU;8CACV,QAAQ,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,QAAQ;wCAC9B,MAAM,YAAY,OAAO,OAAO,CAAC,EAAE,EAAE,iBAAiB;wCACtD,MAAM,aAAa,AAAC,OAAO,YAAY,GAAG,YAAa;wCACvD,MAAM,UAAU;4CAAC;4CAAiC;4CAA6B;yCAA6B;wCAE5G,qBACI,6LAAC;4CAAwB,WAAU;;8DAC/B,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAI,WAAU;;8EACX,6LAAC;oEAAK,WAAU;8EAAY,OAAO,OAAO;;;;;;8EAC1C,6LAAC;oEAAK,WAAU;8EAA2B,OAAO,MAAM;;;;;;;;;;;;sEAE5D,6LAAC;4DAAK,WAAU;;gEACX,OAAO,YAAY,CAAC,cAAc;gEAAG;;;;;;;;;;;;;8DAK9C,6LAAC;oDAAI,WAAU;8DACX,cAAA,6LAAC;wDACG,WAAW,CAAC,wBAAwB,EAAE,OAAO,CAAC,MAAM,CAAC,mDAAmD,CAAC;wDACzG,OAAO;4DAAE,OAAO,GAAG,WAAW,CAAC,CAAC;wDAAC;;;;;;;;;;;8DAGzC,6LAAC;oDAAI,WAAU;;wDACV,WAAW,OAAO,CAAC;wDAAG;;;;;;;;2CAnBrB,OAAO,MAAM;;;;;oCAuB/B;;;;;;;;;;;;wBAKP,2BAA2B,yBACxB,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAG,WAAU;;wCAA2C;wCAC5B,uBAAuB,MAAM,CAAC,GAAG,WAAW,KAAK,uBAAuB,KAAK,CAAC;;;;;;;gCAG1G,mCACG,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAE,WAAU;;gDAAwB;8DAC9B,6LAAC;8DAAO;;;;;;gDAAuC;gDAA2C;;;;;;;sDAEjG,6LAAC;4CAAE,WAAU;sDAA6B;;;;;;sDAI1C,6LAAC;4CAAI,WAAU;;gDAAqD;8DAC7D,6LAAC;8DAAO;;;;;;gDAAa;;;;;;;;;;;;yDAIhC,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAE,WAAU;;gDAA0B;8DAChC,6LAAC;8DAAO;;;;;;gDAA+B;gDAAuC;;;;;;;sDAErF,6LAAC;4CAAE,WAAU;sDAA+B;;;;;;sDAI5C,6LAAC;4CAAI,WAAU;;gDAAyD;8DACjE,6LAAC;8DAAO;;;;;;gDAAmC;gDAAqF;;;;;;;;;;;;;;;;;;;sCAQvJ,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAAuC;;;;;;sDACtD,6LAAC;4CAAI,WAAU;sDAAqC,QAAQ,MAAM;;;;;;sDAClE,6LAAC;4CAAI,WAAU;sDAAyB;;;;;;;;;;;;8CAG5C,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAAsC;;;;;;sDACrD,6LAAC;4CAAI,WAAU;sDACV,QAAQ,MAAM,CAAC,CAAC,OAAO,SAAW,QAAQ,CAAC,OAAO,OAAO,YAAY,KAAK,CAAC,GAAG,GAAG,cAAc;;;;;;sDAEpG,6LAAC;4CAAI,WAAU;sDAAwB;;;;;;;;;;;;8CAG3C,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAAwC;;;;;;sDACvD,6LAAC;4CAAI,WAAU;sDACV,KAAK,KAAK,CAAC,QAAQ,MAAM,CAAC,CAAC,OAAO,SAAW,QAAQ,CAAC,OAAO,OAAO,YAAY,KAAK,CAAC,GAAG,KAAK,CAAC,QAAQ,MAAM,IAAI,CAAC,GAAG,cAAc;;;;;;sDAExI,6LAAC;4CAAI,WAAU;sDAA0B;;;;;;;;;;;;;;;;;;;;;;;;8BAMrD,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAG,WAAU;sCAA2D;;;;;;sCAGzE,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAAwC;;;;;;sDACvD,6LAAC;4CAAI,WAAU;sDACV,IAAI,OAAO,kBAAkB,CAAC,SAAS;gDAAE,OAAO;gDAAQ,MAAM;4CAAU;;;;;;sDAE7E,6LAAC;4CAAI,WAAU;;gDAA+B;gDAC/B,0BAA0B,cAAc;gDAAC;;;;;;;;;;;;;8CAI5D,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAAwC;;;;;;sDACvD,6LAAC;4CAAI,WAAU;;gDACV,0BAA0B,aAAa;gDAAC;;;;;;;sDAE7C,6LAAC;4CAAI,WAAU;sDAA+B;;;;;;;;;;;;8CAKlD,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAAuC;;;;;;sDACtD,6LAAC;4CAAI,WAAU;sDACV,0BAA0B,gBAAgB;;;;;;sDAE/C,6LAAC;4CAAI,WAAU;sDAA8B;;;;;;;;;;;;;;;;;;sCAKrD,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;8CAAO;;;;;;gCAAiC;8CAEzC,6LAAC;8CAAO;;;;;;;;;;;;;;;;;;8BAKhB,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAG,WAAU;sCAAuC;;;;;;sCACrD,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC;gCAAE,WAAU;;kDACT,6LAAC;kDAAO;;;;;;oCAAkB;kDAAc,6LAAC;kDAAO;;;;;;oCAAoC;;;;;;;;;;;;sCAI5F,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAA8B;;;;;;sDAC7C,6LAAC;4CAAI,WAAU;sDAAmC;;;;;;sDAClD,6LAAC;4CAAI,WAAU;sDAAwB;;;;;;;;;;;;8CAE3C,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAAgC;;;;;;sDAC/C,6LAAC;4CAAI,WAAU;sDAAqC;;;;;;sDACpD,6LAAC;4CAAI,WAAU;sDAA0B;;;;;;;;;;;;8CAE7C,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAA+B;;;;;;sDAC9C,6LAAC;4CAAI,WAAU;sDAAoC;;;;;;sDACnD,6LAAC;4CAAI,WAAU;sDAAyB;;;;;;;;;;;;8CAE5C,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAAgC;;;;;;sDAC/C,6LAAC;4CAAI,WAAU;sDAAqC;;;;;;sDACpD,6LAAC;4CAAI,WAAU;sDAA0B;;;;;;;;;;;;8CAE7C,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAAgC;;;;;;sDAC/C,6LAAC;4CAAI,WAAU;sDAAqC;;;;;;sDACpD,6LAAC;4CAAI,WAAU;sDAA0B;;;;;;;;;;;;8CAE7C,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;sDAA8B;;;;;;sDAC7C,6LAAC;4CAAI,WAAU;sDAAmC;;;;;;sDAClD,6LAAC;4CAAI,WAAU;sDAAwB;;;;;;;;;;;;;;;;;;;;;;;;8BAMnD,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAG,WAAU;;wCAAqB;wCAE9B,2BAA2B,yBACxB,6LAAC;4CAAK,WAAU;;gDAAsC;gDAC/C,uBAAuB,MAAM,CAAC,GAAG,WAAW,KAAK,uBAAuB,KAAK,CAAC;gDAChF,CAAC,oCAAsB,6LAAC;oDAAK,WAAU;8DAAU;;;;;;;;;;;;wCAGzD,sBAAsB,yBACnB,6LAAC;4CAAK,WAAU;;gDAAsC;gDAC/C;;;;;;;;;;;;;8CAIf,6LAAC;oCAAE,WAAU;8CACR,2BAA2B,WAAW,sBAAsB,UACvD,CAAC,uBAAuB,EAAE,IAAI,OAAO,kBAAkB,CAAC,SAAS;wCAAE,OAAO;wCAAQ,MAAM;oCAAU,IAAI,GACtG,2BAA2B,WAAW,sBAAsB,UACxD,qBACI,CAAC,oBAAoB,EAAE,uBAAuB,GAAG,EAAE,IAAI,OAAO,kBAAkB,CAAC,SAAS;wCAAE,OAAO;wCAAQ,MAAM;oCAAU,IAAI,GAC/H,CAAC,kBAAkB,EAAE,uBAAuB,+BAA+B,EAAE,IAAI,OAAO,kBAAkB,CAAC,SAAS;wCAAE,OAAO;wCAAQ,MAAM;oCAAU,IAAI,GAC7J,2BAA2B,WAAW,sBAAsB,UACxD,CAAC,oBAAoB,EAAE,kBAAkB,GAAG,EAAE,IAAI,OAAO,kBAAkB,CAAC,SAAS;wCAAE,OAAO;wCAAQ,MAAM;oCAAU,IAAI,GAC1H,qBACI,CAAC,oBAAoB,EAAE,uBAAuB,EAAE,EAAE,kBAAkB,IAAI,EAAE,IAAI,OAAO,kBAAkB,CAAC,SAAS;wCAAE,OAAO;wCAAQ,MAAM;oCAAU,IAAI,GACtJ,CAAC,kBAAkB,EAAE,uBAAuB,EAAE,EAAE,kBAAkB,IAAI,EAAE,IAAI,OAAO,kBAAkB,CAAC,SAAS;wCAAE,OAAO;wCAAQ,MAAM;oCAAU,IAAI;;;;;;8CAG1K,6LAAC;oCAAI,WAAU;8CAA0B;;;;;;;;;;;;sCAK7C,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC;gCAAM,WAAU;;kDACb,6LAAC;wCAAM,WAAU;kDACb,cAAA,6LAAC;;8DACG,6LAAC;oDAAG,WAAU;8DAAiF;;;;;;8DAC/F,6LAAC;oDAAG,WAAU;8DAAiF;;;;;;8DAC/F,6LAAC;oDAAG,WAAU;8DAAiF;;;;;;8DAC/F,6LAAC;oDAAG,WAAU;8DAAiF;;;;;;8DAC/F,6LAAC;oDAAG,WAAU;8DAAiF;;;;;;8DAC/F,6LAAC;oDAAG,WAAU;8DAAiF;;;;;;8DAC/F,6LAAC;oDAAG,WAAU;8DAAiF;;;;;;8DAC/F,6LAAC;oDAAG,WAAU;8DAAiF;;;;;;;;;;;;;;;;;kDAGvG,6LAAC;wCAAM,WAAU;kDACZ,QAAQ,GAAG,CAAC,CAAC,QAAQ,sBAClB,6LAAC;gDAEG,WAAW,CAAC,iBAAiB,EAAE,OAAO,MAAM,KAAK,WAAW,8CAA8C,IAAI;;kEAE9G,6LAAC;wDAAG,WAAU;kEACV,cAAA,6LAAC;4DAAI,WAAU;;8EACX,6LAAC;oEAAK,WAAU;8EAAiB,OAAO,OAAO;;;;;;8EAC/C,6LAAC;oEAAK,WAAU;;wEAAkC;wEAAE,OAAO,OAAO;;;;;;;;;;;;;;;;;;kEAG1E,6LAAC;wDAAG,WAAU;kEACV,cAAA,6LAAC;4DAAI,WAAU;;gEACV,SAAS,kBAAkB,OAAO,MAAM,mBACrC,6LAAC;oEACG,KAAK,CAAC,CAAC,EAAE,kBAAkB,OAAO,MAAM,GAAG;oEAC3C,KAAK,CAAC,KAAK,EAAE,OAAO,MAAM,EAAE;oEAC5B,WAAU;;;;;yFAGd,6LAAC;oEAAK,WAAU;8EAAiB,kBAAkB,OAAO,MAAM;;;;;;8EAEpE,6LAAC;;sFACG,6LAAC;4EAAI,WAAU;sFAA6B,OAAO,MAAM;;;;;;wEACxD,OAAO,MAAM,KAAK,0BACf,6LAAC;4EAAI,WAAU;sFAA0B;;;;;;;;;;;;;;;;;;;;;;;kEAKzD,6LAAC;wDAAG,WAAU;kEACV,cAAA,6LAAC;4DAAI,WAAU;sEACV,OAAO,YAAY,CAAC,cAAc;;;;;;;;;;;kEAG3C,6LAAC;wDAAG,WAAU;kEACT,OAAO,WAAW;;;;;;kEAEvB,6LAAC;wDAAG,WAAU;kEACV,cAAA,6LAAC;4DAAK,WAAU;sEACX,OAAO,kBAAkB;;;;;;;;;;;kEAGlC,6LAAC;wDAAG,WAAU;kEACT,OAAO,mBAAmB;;;;;;kEAE/B,6LAAC;wDAAG,WAAU;kEACT,OAAO,gBAAgB;;;;;;kEAE5B,6LAAC;wDAAG,WAAU;kEACT,OAAO,gBAAgB;;;;;;;+CAhDvB,OAAO,MAAM;;;;;;;;;;;;;;;;;;;;;wBAwDrC,QAAQ,MAAM,KAAK,mBAChB,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;8CAA6B;;;;;;8CAC5C,6LAAC;oCAAE,WAAU;8CAAgB;;;;;;8CAC7B,6LAAC;oCAAE,WAAU;8CAA6B;;;;;;;;;;;;;;;;;;8BAMtD,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAG,WAAU;8CAA+B;;;;;;8CAC7C,6LAAC;oCAAG,WAAU;;sDACV,6LAAC;;gDAAG;8DAAE,6LAAC;8DAAO;;;;;;gDAA+B;;;;;;;sDAC7C,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;;;;;;;;;;;;;sCAIZ,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAG,WAAU;;wCAAgC;wCAAI,EAAE;;;;;;;gCACnD,cAAc,MAAM,GAAG,kBACpB,6LAAC;oCAAI,WAAU;;wCACV,cAAc,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,QAAQ,sBACrC,6LAAC;gDAAgB,WAAW,CAAC,8CAA8C,EAAE,OAAO,MAAM,KAAK,WAAW,2CAA2C,YAC/I;;kEACF,6LAAC;wDAAI,WAAU;;0EACX,6LAAC;gEAAK,WAAU;0EAAgB,OAAO,KAAK;;;;;;0EAC5C,6LAAC;;kFACG,6LAAC;wEAAK,WAAU;;4EAA8B,OAAO,MAAM;4EAAC;;;;;;;kFAC5D,6LAAC;wEAAK,WAAU;kFAAuB,OAAO,MAAM;;;;;;oEACnD,OAAO,MAAM,KAAK,0BACf,6LAAC;wEAAK,WAAU;kFAAiC;;;;;;;;;;;;;;;;;;kEAI7D,6LAAC;wDAAI,WAAU;;0EACX,6LAAC;gEAAI,WAAU;0EAAwC,OAAO,MAAM;;;;;;0EACpE,6LAAC;gEAAI,WAAU;;oEAAyB;oEAAE,OAAO,WAAW;oEAAC;;;;;;;0EAC7D,6LAAC;gEAAI,WAAU;0EAAyB;;;;;;;;;;;;;+CAftC;;;;;wCAmBb,cAAc,MAAM,GAAG,oBACpB,6LAAC;4CAAI,WAAU;;gDAA0C;gDAClD,cAAc,MAAM,GAAG;gDAAG;;;;;;;;;;;;yDAKzC,6LAAC;oCAAG,WAAU;;sDACV,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;;;;;;;;;;;;;sCAKhB,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAG,WAAU;8CAAgC;;;;;;8CAC9C,6LAAC;oCAAG,WAAU;;sDACV,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;;;;;;;;;;;;;;;;;;;gBAMf,sBAAsB,WAAW,eAAe,MAAM,GAAG,mBACtD,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAG,WAAU;;gCAA2D;gCACvC,YAAY,WAAW;;;;;;;sCAEzD,6LAAC;4BAAI,WAAU;sCACV,eAAe,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,QAAQ,sBACtC,6LAAC;oCAAwB,WAAW,CAAC,0DAA0D,EAAE,UAAU,IAAI,oEAC3G,UAAU,IAAI,gEACV,UAAU,IAAI,oEACV,4BACN;;sDACF,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAK,WAAW,CAAC,mBAAmB,EAAE,UAAU,IAAI,oBACjD,UAAU,IAAI,kBACV,UAAU,IAAI,oBACV,iBACN;;wDAAE;wDACF,QAAQ;;;;;;;gDAEb,SAAS,kBAAkB,OAAO,MAAM,mBACrC,6LAAC;oDACG,KAAK,CAAC,CAAC,EAAE,kBAAkB,OAAO,MAAM,GAAG;oDAC3C,KAAK,CAAC,KAAK,EAAE,OAAO,MAAM,EAAE;oDAC5B,WAAU;;;;;yEAGd,6LAAC;oDAAK,WAAU;8DAAY,kBAAkB,OAAO,MAAM;;;;;;8DAE/D,6LAAC;;sEACG,6LAAC;4DAAG,WAAU;sEAA2B,OAAO,MAAM;;;;;;sEACtD,6LAAC;4DAAE,WAAU;;gEAAwB;8EACT,6LAAC;oEAAK,WAAU;8EAAiB,OAAO,YAAY,CAAC,cAAc;;;;;;;;;;;;;;;;;;;;;;;;sDAIvG,6LAAC;4CAAI,WAAU;sDACX,cAAA,6LAAC;gDAAK,WAAW,CAAC,SAAS,EAAE,UAAU,IAAI,OACvC,UAAU,IAAI,OACV,UAAU,IAAI,OACV,MACN;;;;;;;;;;;;mCAlCJ,OAAO,MAAM;;;;;;;;;;;;;;;;gBA4CtC,mBAAmB,MAAM,GAAG,mBACzB,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAG,WAAU;sCAA4D;;;;;;sCAG1E,6LAAC;4BAAI,WAAU;sCACV,mBAAmB,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,wBAClC,6LAAC;oCAA0C,WAAU;8CACjD,cAAA,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAI,WAAU;0DACV,SAAS,kBAAkB,QAAQ,MAAM,IAAI,qBAC1C,6LAAC;oDACG,KAAK,CAAC,CAAC,EAAE,kBAAkB,QAAQ,MAAM,IAAI,KAAK;oDAClD,KAAK,CAAC,KAAK,EAAE,QAAQ,MAAM,IAAI,UAAU;oDACzC,WAAU;;;;;yEAGd,6LAAC;oDAAK,WAAU;8DAAY,kBAAkB,QAAQ,MAAM,IAAI;;;;;;;;;;;0DAGxE,6LAAC;gDAAG,WAAU;0DAAgC,QAAQ,MAAM,IAAI;;;;;;0DAChE,6LAAC;gDAAE,WAAU;;oDACR,QAAQ,GAAG;oDAAC;oDAAE,QAAQ,GAAG;;;;;;;0DAE9B,6LAAC;gDAAE,WAAU;;oDACR,CAAC,QAAQ,OAAO,IAAI,CAAC,EAAE,cAAc;oDAAG;;;;;;;0DAE7C,6LAAC;gDAAI,WAAU;0DAAgB;;;;;;;;;;;;mCApB7B,GAAG,QAAQ,GAAG,CAAC,CAAC,EAAE,QAAQ,GAAG,EAAE;;;;;;;;;;wBAyBhD,mBAAmB,MAAM,GAAG,oBACzB,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC;gCAAE,WAAU;;oCAAwB;oCAC9B,mBAAmB,MAAM,GAAG;oCAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAStE;GA3pDwB;;QASN,0IAAc;;;KATR","debugId":null}}]
}