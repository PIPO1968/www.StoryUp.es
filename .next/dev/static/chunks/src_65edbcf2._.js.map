{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/src/components/UserLink.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\ninterface UserLinkProps {\r\n    nick: string;\r\n    className?: string;\r\n}\r\n\r\nexport const UserLink: React.FC<UserLinkProps> = ({ nick, className }) => {\r\n    const [isPremium, setIsPremium] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const checkPremium = () => {\r\n            // Verificar si el usuario es Premium\r\n            if (typeof window !== \"undefined\" && nick) {\r\n                const premiumInfo = localStorage.getItem(`premium_${nick}`);\r\n                if (premiumInfo) {\r\n                    try {\r\n                        const premium = JSON.parse(premiumInfo);\r\n                        const isActive = new Date(premium.expiracion) > new Date();\r\n                        setIsPremium(isActive);\r\n                    } catch (error) {\r\n                        setIsPremium(false);\r\n                    }\r\n                } else {\r\n                    setIsPremium(false);\r\n                }\r\n            }\r\n        };\r\n\r\n        // Verificar inicialmente\r\n        checkPremium();\r\n\r\n        // Escuchar cambios en localStorage\r\n        const handleStorageChange = (e: StorageEvent) => {\r\n            if (e.key?.startsWith('premium_') || e.key === null) {\r\n                checkPremium();\r\n            }\r\n        };\r\n\r\n        // Escuchar eventos personalizados de premium\r\n        const handlePremiumUpdate = (e: CustomEvent) => {\r\n            if (e.detail.nick === nick) {\r\n                checkPremium();\r\n            }\r\n        };\r\n\r\n        window.addEventListener('storage', handleStorageChange);\r\n        window.addEventListener('premiumUpdate', handlePremiumUpdate as EventListener);\r\n\r\n        return () => {\r\n            window.removeEventListener('storage', handleStorageChange);\r\n            window.removeEventListener('premiumUpdate', handlePremiumUpdate as EventListener);\r\n        };\r\n    }, [nick]);\r\n\r\n    const normalized = (nick || \"\").trim().toLowerCase();\r\n    if (!nick || normalized === \"anonimo\" || normalized === \"an칩nimo\") {\r\n        return <span className={className || \"text-gray-500\"}>{nick || \"(sin nick)\"}</span>;\r\n    }\r\n\r\n    return (\r\n        <a\r\n            href={`/perfil/${encodeURIComponent(nick)}`}\r\n            className={className || \"text-blue-600 underline hover:text-blue-800\"}\r\n            title={`Ver perfil de ${nick}${isPremium ? ' (Usuario Premium)' : ''}`}\r\n        >\r\n            {nick}\r\n            {isPremium && (\r\n                <span className=\"ml-1 inline-flex items-center\">\r\n                    <span\r\n                        className=\"bg-gradient-to-r from-sky-100 to-blue-100 text-amber-900 text-xs px-2 py-1 rounded-full font-bold shadow-md border border-sky-300\"\r\n                        title=\"Usuario Premium\"\r\n                    >\r\n                        游녬\r\n                    </span>\r\n                </span>\r\n            )}\r\n        </a>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;;;;AAOO,MAAM,WAAoC,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE;;IACjE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,IAAA,0KAAS;8BAAC;YACN,MAAM;mDAAe;oBACjB,qCAAqC;oBACrC,IAAI,+CAAkB,eAAe,MAAM;wBACvC,MAAM,cAAc,aAAa,OAAO,CAAC,CAAC,QAAQ,EAAE,MAAM;wBAC1D,IAAI,aAAa;4BACb,IAAI;gCACA,MAAM,UAAU,KAAK,KAAK,CAAC;gCAC3B,MAAM,WAAW,IAAI,KAAK,QAAQ,UAAU,IAAI,IAAI;gCACpD,aAAa;4BACjB,EAAE,OAAO,OAAO;gCACZ,aAAa;4BACjB;wBACJ,OAAO;4BACH,aAAa;wBACjB;oBACJ;gBACJ;;YAEA,yBAAyB;YACzB;YAEA,mCAAmC;YACnC,MAAM;0DAAsB,CAAC;oBACzB,IAAI,EAAE,GAAG,EAAE,WAAW,eAAe,EAAE,GAAG,KAAK,MAAM;wBACjD;oBACJ;gBACJ;;YAEA,6CAA6C;YAC7C,MAAM;0DAAsB,CAAC;oBACzB,IAAI,EAAE,MAAM,CAAC,IAAI,KAAK,MAAM;wBACxB;oBACJ;gBACJ;;YAEA,OAAO,gBAAgB,CAAC,WAAW;YACnC,OAAO,gBAAgB,CAAC,iBAAiB;YAEzC;sCAAO;oBACH,OAAO,mBAAmB,CAAC,WAAW;oBACtC,OAAO,mBAAmB,CAAC,iBAAiB;gBAChD;;QACJ;6BAAG;QAAC;KAAK;IAET,MAAM,aAAa,CAAC,QAAQ,EAAE,EAAE,IAAI,GAAG,WAAW;IAClD,IAAI,CAAC,QAAQ,eAAe,aAAa,eAAe,WAAW;QAC/D,qBAAO,6LAAC;YAAK,WAAW,aAAa;sBAAkB,QAAQ;;;;;;IACnE;IAEA,qBACI,6LAAC;QACG,MAAM,CAAC,QAAQ,EAAE,mBAAmB,OAAO;QAC3C,WAAW,aAAa;QACxB,OAAO,CAAC,cAAc,EAAE,OAAO,YAAY,uBAAuB,IAAI;;YAErE;YACA,2BACG,6LAAC;gBAAK,WAAU;0BACZ,cAAA,6LAAC;oBACG,WAAU;oBACV,OAAM;8BACT;;;;;;;;;;;;;;;;;AAOrB;GAxEa;KAAA","debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/src/utils/renderNick.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { UserLink } from \"@/components/UserLink\";\r\n\r\nexport function renderNick(nick: string, className?: string) {\r\n    return <UserLink nick={nick} className={className} />;\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAEO,SAAS,WAAW,IAAY,EAAE,SAAkB;IACvD,qBAAO,6LAAC,6IAAQ;QAAC,MAAM;QAAM,WAAW;;;;;;AAC5C","debugId":null}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/data/trofeos-premium.json"],"sourcesContent":["[{\"id\":101,\"titulo\":\"Historiador Premium\",\"descripcion\":\"Tus primeras 35 historias.\",\"imagen\":\"/premium1.jpg\",\"criterio\":\"historiasCreadas >= 5\",\"exclusivoPremium\":true,\"beneficio\":\"Badge especial de historiador\"},{\"id\":102,\"titulo\":\"Sabio Premium\",\"descripcion\":\"100 preguntas acertadas en Aprende con Pipo siendo Premium\",\"imagen\":\"/premium2.jpg\",\"criterio\":\"preguntasAcertadas >= 100\",\"exclusivoPremium\":true,\"beneficio\":\"T칤tulo de Sabio en perfil\"},{\"id\":103,\"titulo\":\"Amigo Premium\",\"descripcion\":\"Conseguir 10 amigos siendo usuario Premium\",\"imagen\":\"/premium3.jpg\",\"criterio\":\"amigosPremium >= 10\",\"exclusivoPremium\":true,\"beneficio\":\"Badge de amistad especial\"},{\"id\":104,\"titulo\":\"Esp칤ritu Navide침o Premium\",\"descripcion\":\"Crear historias durante eventos especiales siendo Premium\",\"imagen\":\"/premium4.jpg\",\"criterio\":\"historiasEventos >= 3\",\"exclusivoPremium\":true,\"beneficio\":\"Badge de celebraci칩n especial\"},{\"id\":105,\"titulo\":\"Verano Dorado Premium\",\"descripcion\":\"Mantener racha de actividad durante vacaciones siendo Premium\",\"imagen\":\"/premium5.jpg\",\"criterio\":\"rachaVerano >= 15\",\"exclusivoPremium\":true,\"beneficio\":\"Efecto de verano en perfil\"},{\"id\":106,\"titulo\":\"Veterano Dorado\",\"descripcion\":\"6 meses consecutivos como usuario Premium\",\"imagen\":\"/premium6.jpg\",\"criterio\":\"mesesPremium >= 6\",\"exclusivoPremium\":true,\"beneficio\":\"Crown dorada permanente\"},{\"id\":107,\"titulo\":\"Dise침ador del Futuro\",\"descripcion\":\"Crear el futuro logo de StoryUp con herramientas como Paint\",\"imagen\":\"/premium7.png\",\"criterio\":\"logoStoryUpCreado == true\",\"exclusivoPremium\":true,\"beneficio\":\"Reconocimiento como dise침ador oficial\",\"otorgadoPorAdmin\":true},{\"id\":108,\"titulo\":\"Escritor Premium\",\"descripcion\":\"Crear 15+ historias siendo usuario Premium\",\"imagen\":\"/premium8.png\",\"criterio\":\"historiasCreadas >= 15\",\"exclusivoPremium\":true,\"beneficio\":\"Badge de escritor prol칤fico\"},{\"id\":109,\"titulo\":\"Competidor Premium\",\"descripcion\":\"Aparecer en Top 5 de cualquier ranking siendo Premium\",\"imagen\":\"/premium9.jpg\",\"criterio\":\"enTop5Rankings == true\",\"exclusivoPremium\":true,\"beneficio\":\"Destacado en rankings\"},{\"id\":110,\"titulo\":\"Cerebro de Oro\",\"descripcion\":\"1000+ preguntas acertadas siendo usuario Premium\",\"imagen\":\"/premium10.jpg\",\"criterio\":\"preguntasAcertadas >= 1000\",\"exclusivoPremium\":true,\"beneficio\":\"T칤tulo de genio acad칠mico\"},{\"id\":111,\"titulo\":\"Perfeccionista Premium\",\"descripcion\":\"Conseguir precisi칩n de 80%+ en Aprende con Pipo siendo Premium\",\"imagen\":\"/premium11.jpg\",\"criterio\":\"precision >= 80\",\"exclusivoPremium\":true,\"beneficio\":\"Badge de perfecci칩n acad칠mica\"},{\"id\":112,\"titulo\":\"Red Social Premium\",\"descripcion\":\"Conseguir 50+ amigos siendo usuario Premium\",\"imagen\":\"/premium12.jpg\",\"criterio\":\"amigosPremium >= 50\",\"exclusivoPremium\":true,\"beneficio\":\"T칤tulo de influencer social Premium\"}]"],"names":[],"mappings":"AAAA"}},
    {"offset": {"line": 142, "column": 2856}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/src/data/trofeosPremiumImport.ts"],"sourcesContent":["// Archivo para importar y transformar trofeos premium desde el JSON\r\nimport trofeosPremium from './trofeos-premium.json';\r\n\r\nexport const TROFEOS_PREMIUM = trofeosPremium.map(t => ({\r\n    src: t.imagen,\r\n    texto: `${t.titulo}\\n${t.descripcion}`,\r\n    tipo: 'manual'\r\n}));\r\n"],"names":[],"mappings":"AAAA,oEAAoE;;;;;AACpE;;AAEO,MAAM,kBAAkB,oHAAc,CAAC,GAAG,MAAC,CAAA,IAAK,CAAC;QACpD,KAAK,EAAE,MAAM;QACb,OAAO,GAAG,EAAE,MAAM,CAAC,EAAE,EAAE,EAAE,WAAW,EAAE;QACtC,MAAM;IACV,CAAC","debugId":null}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/src/app/perfil/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { renderNick } from \"@/utils/renderNick\";\r\nimport { TROFEOS_PREMIUM } from \"@/data/trofeosPremiumImport\";\r\nimport { useTranslation } from \"@/utils/i18n\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface Usuario {\r\n    nick: string;\r\n    nombre: string;\r\n    email: string;\r\n    centro: string;\r\n    curso: string;\r\n    tipo: string;\r\n    fechaInscripcion: string;\r\n    likes: number;\r\n    amigos: string[];\r\n    respuestasAcertadas: number;\r\n    competicionesSuperadas: number;\r\n    concursosGanados: number;\r\n    comentariosRecibidos: number;\r\n    historiasCreadas: number;\r\n    anosEnStoryUp: number;\r\n    trofeos: any[];\r\n}\r\n\r\nconst PerfilUsuario: React.FC = () => {\r\n    const router = useRouter();\r\n    // Funci칩n para bloquear manualmente el trofeo 10 al usuario seleccionado\r\n    // Funci칩n para bloquear manualmente cualquier trofeo al usuario seleccionado\r\n    const handleLockTrofeo = (trofeoIdx: number) => {\r\n        if (!selectedUser) return;\r\n        const updatedUsers = usuarios.map((u: any) =>\r\n            u.nick === selectedUser\r\n                ? {\r\n                    ...u,\r\n                    trofeosDesbloqueados: Array.isArray(u.trofeosDesbloqueados)\r\n                        ? u.trofeosDesbloqueados.filter((idx: number) => idx !== trofeoIdx)\r\n                        : [],\r\n                    trofeosBloqueados: Array.isArray(u.trofeosBloqueados)\r\n                        ? [...new Set([...(u.trofeosBloqueados || []), trofeoIdx])]\r\n                        : [trofeoIdx]\r\n                }\r\n                : u\r\n        );\r\n        setUsuarios(updatedUsers);\r\n        localStorage.setItem(\"users\", JSON.stringify(updatedUsers));\r\n        const userTrofeos = updatedUsers.find((u: any) => u.nick === selectedUser)?.trofeosDesbloqueados || [];\r\n        const userBloqueados = updatedUsers.find((u: any) => u.nick === selectedUser)?.trofeosBloqueados || [];\r\n        localStorage.setItem(`trofeos_${selectedUser}`, JSON.stringify(userTrofeos));\r\n        localStorage.setItem(`bloqueados_${selectedUser}`, JSON.stringify(userBloqueados));\r\n        // Si el usuario administrado es el actual, actualiza tambi칠n el estado y localStorage\r\n        if (user && user.nick === selectedUser) {\r\n            setUser({ ...user, trofeosDesbloqueados: userTrofeos, trofeosBloqueados: userBloqueados });\r\n            localStorage.setItem(\"user\", JSON.stringify({ ...user, trofeosDesbloqueados: userTrofeos, trofeosBloqueados: userBloqueados }));\r\n        }\r\n        // Disparar evento para refrescar la UI\r\n        window.dispatchEvent(new Event('storage'));\r\n        alert(`Trofeo #${trofeoIdx + 1} bloqueado manualmente para ${selectedUser}`);\r\n    };\r\n\r\n    // Funci칩n para asignar trofeos al usuario si su centro gan칩 premios este mes\r\n    const asignarTrofeosUsuario = (usuario: Usuario) => {\r\n        if (typeof window === \"undefined\") return;\r\n\r\n        const fechaActual = new Date();\r\n        const clavePremios = `premios_mensuales_${fechaActual.getFullYear()}_${(fechaActual.getMonth() + 1).toString().padStart(2, '0')}`;\r\n\r\n        const premiosGuardados = localStorage.getItem(clavePremios);\r\n        if (!premiosGuardados) return;\r\n\r\n        try {\r\n            const premios = JSON.parse(premiosGuardados);\r\n            const premioCentro = premios.find((p: any) => p.centro === usuario.centro);\r\n\r\n            if (premioCentro) {\r\n                let idTrofeo = 0;\r\n                switch (premioCentro.posicion) {\r\n                    case 1: idTrofeo = 25; break; // Campe칩n Mensual\r\n                    case 2: idTrofeo = 26; break; // Subcampe칩n Mensual\r\n                    case 3: idTrofeo = 27; break; // Tercer Lugar Mensual\r\n                    default:\r\n                        if (premioCentro.posicion <= 10) {\r\n                            idTrofeo = 28; // Top 10 Mensual\r\n                        } else {\r\n                            idTrofeo = 29; // Participante Activo\r\n                        }\r\n                        break;\r\n                }\r\n\r\n                if (idTrofeo > 0 && !usuario.trofeos.includes(idTrofeo)) {\r\n                    usuario.trofeos.push(idTrofeo);\r\n                    // Actualizar localStorage\r\n                    const usersStr = localStorage.getItem(\"users\");\r\n                    if (usersStr) {\r\n                        const users = JSON.parse(usersStr);\r\n                        const index = users.findIndex((u: Usuario) => u.nick === usuario.nick);\r\n                        if (index !== -1) {\r\n                            users[index] = usuario;\r\n                            localStorage.setItem(\"users\", JSON.stringify(users));\r\n                        }\r\n                    }\r\n                    // Mostrar notificaci칩n de nuevo trofeo\r\n                    alert(`춰Felicitaciones! Has desbloqueado un nuevo trofeo: ${premioCentro.titulo}`);\r\n                }\r\n            }\r\n        } catch (e) {\r\n            // Silent fail\r\n        }\r\n    };\r\n\r\n    const [user, setUser] = useState<any>(null);\r\n    const [bullyingActivo, setBullyingActivo] = useState(false);\r\n    const [usuarioBullying, setUsuarioBullying] = useState(\"\");\r\n    const [palabraProhibida, setPalabraProhibida] = useState(\"\");\r\n    const [concursoTitulo, setConcursoTitulo] = useState(\"\");\r\n    const [concursoTexto, setConcursoTexto] = useState(\"\");\r\n    const [fechaInicio, setFechaInicio] = useState(\"\");\r\n    const [fechaFin, setFechaFin] = useState(\"\");\r\n    const [usuarioGanador, setUsuarioGanador] = useState(\"\");\r\n    const [concursoId, setConcursoId] = useState(1);\r\n    const [nombreArchivo, setNombreArchivo] = useState(\"\");\r\n    const [usuarios, setUsuarios] = useState<any[]>([]);\r\n    const [selectedUser, setSelectedUser] = useState(\"\");\r\n    const [chatInput, setChatInput] = useState(\"\");\r\n    const [chatMessages, setChatMessages] = useState<{ from: string, to: string, text: string, fecha?: string }[]>([]);\r\n    const [mensajeRecibido, setMensajeRecibido] = useState(false);\r\n    const [noticiaTitulo, setNoticiaTitulo] = useState(\"\");\r\n    const [noticiaTexto, setNoticiaTexto] = useState(\"\");\r\n    const [noticiaImagen, setNoticiaImagen] = useState<string>(\"\");\r\n    // Estado para el trofeo seleccionado por el admin\r\n    const [trofeoSeleccionado, setTrofeoSeleccionado] = useState(\"\");\r\n    // Estados para gestionar concursos finalizados\r\n    const [concursoSeleccionado, setConcursoSeleccionado] = useState(\"\");\r\n    const [ganadorSeleccionado, setGanadorSeleccionado] = useState(\"\");\r\n    const [refreshKey, setRefreshKey] = useState(0);\r\n    // Estados para preguntas\r\n    const [cursoSeleccionado, setCursoSeleccionado] = useState<string>(\"1primaria\");\r\n    const [asignaturaSeleccionada, setAsignaturaSeleccionada] = useState<string>(\"matematicas\");\r\n    const [pregunta, setPregunta] = useState<string>(\"\");\r\n    const [respuesta, setRespuesta] = useState<string>(\"\");\r\n\r\n    const { t } = useTranslation();\r\n\r\n    // Inicializaci칩n y sincronizaci칩n de usuario y rankings SOLO una vez\r\n    useEffect(() => {\r\n        if (typeof window !== \"undefined\") {\r\n            const usersStr = localStorage.getItem(\"users\");\r\n            if (usersStr) {\r\n                let usersArr = JSON.parse(usersStr);\r\n                usersArr = usersArr.map((u: any) => ({\r\n                    ...u,\r\n                    trofeosDesbloqueados: Array.isArray(u.trofeosDesbloqueados)\r\n                        ? u.trofeosDesbloqueados.filter((idx: number) => idx !== 9)\r\n                        : []\r\n                }));\r\n                localStorage.setItem(\"users\", JSON.stringify(usersArr));\r\n            }\r\n        }\r\n        if (typeof window !== \"undefined\") {\r\n            const usersStr = localStorage.getItem(\"users\");\r\n            const userStr = localStorage.getItem(\"user\");\r\n            if (usersStr && userStr) {\r\n                let usersArr = JSON.parse(usersStr);\r\n                const userObj = JSON.parse(userStr);\r\n                usersArr = usersArr.map((u: any) => {\r\n                    const amigosCount = Array.isArray(u.amigos) ? u.amigos.length : 0;\r\n                    return {\r\n                        ...u,\r\n                        trofeosDesbloqueados: Array.isArray(u.trofeosDesbloqueados)\r\n                            ? u.trofeosDesbloqueados.filter((idx: number) => idx !== 9 || true)\r\n                            : []\r\n                    };\r\n                });\r\n                // Rankings\r\n                const rankingLikes = [...usersArr].sort((a, b) => (b.likes || 0) - (a.likes || 0)).slice(0, 3).filter(u => (u.likes || 0) > 0);\r\n                const rankingComentarios = [...usersArr].sort((a, b) => (b.comentariosRecibidos || 0) - (a.comentariosRecibidos || 0)).slice(0, 3).filter(u => (u.comentariosRecibidos || 0) > 0);\r\n                const rankingAmigos = [...usersArr].sort((a, b) => (b.amigos?.length || 0) - (a.amigos?.length || 0)).slice(0, 3).filter(u => (u.amigos?.length || 0) > 0);\r\n                const rankingHistorias = [...usersArr].sort((a, b) => (b.historias?.length || 0) - (a.historias?.length || 0)).slice(0, 3).filter(u => (u.historias?.length || 0) > 0);\r\n                const rankingConcursos = [...usersArr].sort((a, b) => (b.concursosGanados || 0) - (a.concursosGanados || 0)).slice(0, 3).filter(u => (u.concursosGanados || 0) > 0);\r\n                const rankingCompeticiones = [...usersArr].sort((a, b) => (b.competicionesSuperadas || 0) - (a.competicionesSuperadas || 0)).slice(0, 3).filter(u => (u.competicionesSuperadas || 0) > 0);\r\n                usersArr = usersArr.map((u: any) => ({\r\n                    ...u,\r\n                    estaEnRanking:\r\n                        rankingLikes.some(r => r.nick === u.nick) ||\r\n                        rankingComentarios.some(r => r.nick === u.nick) ||\r\n                        rankingAmigos.some(r => r.nick === u.nick) ||\r\n                        rankingHistorias.some(r => r.nick === u.nick) ||\r\n                        rankingConcursos.some(r => r.nick === u.nick) ||\r\n                        rankingCompeticiones.some(r => r.nick === u.nick),\r\n                    estaEnRankingCompeticiones:\r\n                        rankingCompeticiones.some(r => r.nick === u.nick)\r\n                }));\r\n                let userFromArr = usersArr.find((u: any) => u.nick === userObj.nick);\r\n                if (!userFromArr) userFromArr = userObj;\r\n                if (userFromArr) {\r\n                    const amigosStr = localStorage.getItem(`amigos_${userObj.nick}`);\r\n                    let amigosArr = [];\r\n                    if (amigosStr) {\r\n                        try { amigosArr = JSON.parse(amigosStr); } catch { amigosArr = []; }\r\n                    }\r\n                    if (!Array.isArray(amigosArr)) amigosArr = [];\r\n                    let competicionesSuperadas = userFromArr.competicionesSuperadas;\r\n                    if (typeof competicionesSuperadas !== 'number') {\r\n                        competicionesSuperadas = userObj.competicionesSuperadas || 0;\r\n                    }\r\n                    let trofeosDesbloqueados = userFromArr.trofeosDesbloqueados;\r\n                    let trofeosBloqueados = userFromArr.trofeosBloqueados || [];\r\n                    const amigosCount = Array.isArray(amigosArr) ? amigosArr.length : 0;\r\n                    if (Array.isArray(trofeosDesbloqueados)) {\r\n                        trofeosDesbloqueados = trofeosDesbloqueados.filter(idx => idx !== 9 || true);\r\n                    }\r\n                    const autoTrofeos = TROFEOS_AUTO\r\n                        .map((t, idx) => (typeof t.condicion === 'function' && t.condicion({ ...userFromArr, amigos: amigosArr })) ? idx : null)\r\n                        .filter((idx: number | null) => idx !== null);\r\n                    const usuarioActualizado = { ...userFromArr, amigos: amigosArr, competicionesSuperadas, estaEnRanking: userFromArr.estaEnRanking, trofeosDesbloqueados, trofeosBloqueados, autoTrofeos };\r\n                    setUser(usuarioActualizado);\r\n                    // Asignar trofeos si el centro gan칩 premios este mes\r\n                    asignarTrofeosUsuario(usuarioActualizado as Usuario);\r\n                }\r\n                setUsuarios(usersArr);\r\n                localStorage.setItem(\"users\", JSON.stringify(usersArr));\r\n            }\r\n            const lastId = localStorage.getItem(\"lastConcursoId\");\r\n            if (lastId) setConcursoId(parseInt(lastId) + 1);\r\n        }\r\n    }, []);\r\n\r\n    // Cargar mensajes del chat y aviso solo cuando cambia el usuario\r\n    useEffect(() => {\r\n        if (user && user.nick) {\r\n            const mensajesGuardados = localStorage.getItem(`chat_${user.nick}`);\r\n            if (mensajesGuardados) {\r\n                setChatMessages(JSON.parse(mensajesGuardados));\r\n            }\r\n            const aviso = localStorage.getItem(`chat_aviso_${user.nick}`);\r\n            setMensajeRecibido(aviso === \"1\");\r\n        }\r\n    }, [user]);\r\n\r\n    // Escuchar cambios en el perfil\r\n    useEffect(() => {\r\n        const handleProfileUpdate = () => {\r\n            const usersStr = localStorage.getItem(\"users\");\r\n            if (usersStr) {\r\n                setUsuarios(JSON.parse(usersStr));\r\n            }\r\n            const userStr = localStorage.getItem(\"user\");\r\n            if (userStr) {\r\n                setUser(JSON.parse(userStr));\r\n            }\r\n        };\r\n        window.addEventListener('profileUpdate', handleProfileUpdate);\r\n        window.addEventListener('storage', handleProfileUpdate);\r\n        return () => {\r\n            window.removeEventListener('profileUpdate', handleProfileUpdate);\r\n            window.removeEventListener('storage', handleProfileUpdate);\r\n        };\r\n    }, []);\r\n\r\n    const handlePalabraProhibidaSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        alert(`Palabra prohibida seleccionada: ${palabraProhibida}`);\r\n        setPalabraProhibida(\"\");\r\n    };\r\n    const handleApagarBullying = () => {\r\n        setBullyingActivo(false);\r\n        setUsuarioBullying(\"\");\r\n    };\r\n    const handleConcursoSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        // Guardar el concurso en localStorage, incluyendo el ganador si existe\r\n        const concursosStr = localStorage.getItem(\"concursos\");\r\n        let concursosArr = concursosStr ? JSON.parse(concursosStr) : [];\r\n        concursosArr.unshift({\r\n            numero: concursoId,\r\n            titulo: concursoTitulo,\r\n            texto: concursoTexto,\r\n            inicio: fechaInicio,\r\n            fin: fechaFin,\r\n            autor: user ? user.nick : \"\",\r\n            ganador: usuarioGanador,\r\n            fechaFinal: fechaFin\r\n        });\r\n        localStorage.setItem(\"concursos\", JSON.stringify(concursosArr));\r\n        localStorage.setItem(\"lastConcursoId\", concursoId.toString());\r\n        setConcursoId(concursoId + 1);\r\n        setConcursoTitulo(\"\");\r\n        setConcursoTexto(\"\");\r\n        setFechaInicio(\"\");\r\n        setFechaFin(\"\");\r\n        setUsuarioGanador(\"\");\r\n        // Refrescar concursos en otras p치ginas\r\n        window.dispatchEvent(new Event('storage'));\r\n        alert(\"Concurso creado y ganador registrado\");\r\n    };\r\n    const handleSeleccionarGanador = () => {\r\n        if (usuarioGanador) {\r\n            // Guardar el ganador en el concurso m치s reciente\r\n            const concursosStr = localStorage.getItem(\"concursos\");\r\n            let concursosArr = concursosStr ? JSON.parse(concursosStr) : [];\r\n            if (concursosArr.length > 0) {\r\n                concursosArr[0].ganador = usuarioGanador;\r\n                localStorage.setItem(\"concursos\", JSON.stringify(concursosArr));\r\n            }\r\n            // Sumar concursosGanados al usuario seleccionado\r\n            const updatedUsers = usuarios.map(u =>\r\n                u.nick === usuarioGanador\r\n                    ? { ...u, concursosGanados: (u.concursosGanados || 0) + 1 }\r\n                    : u\r\n            );\r\n            setUsuarios(updatedUsers);\r\n            localStorage.setItem(\"users\", JSON.stringify(updatedUsers));\r\n            // Si el usuario actual es el ganador, actualizar tambi칠n el estado user\r\n            if (user && user.nick === usuarioGanador) {\r\n                setUser({ ...user, concursosGanados: (user.concursosGanados || 0) + 1 });\r\n                localStorage.setItem(\"user\", JSON.stringify({ ...user, concursosGanados: (user.concursosGanados || 0) + 1 }));\r\n            }\r\n            // Refrescar perfil y concursos\r\n            window.dispatchEvent(new Event('profileUpdate'));\r\n            window.dispatchEvent(new Event('storage'));\r\n            alert(`Ganador seleccionado: ${usuarioGanador}`);\r\n        } else {\r\n            alert(\"Selecciona un usuario ganador\");\r\n        }\r\n    };\r\n    const handleAsignarGanador = () => {\r\n        if (!concursoSeleccionado || !ganadorSeleccionado) {\r\n            alert(\"Selecciona un concurso y un ganador\");\r\n            return;\r\n        }\r\n        const concursosStr = localStorage.getItem(\"concursos\");\r\n        let concursosArr = concursosStr ? JSON.parse(concursosStr) : [];\r\n        const concursoIndex = concursosArr.findIndex((c: any) => String(c.numero) === String(concursoSeleccionado));\r\n        if (concursoIndex !== -1) {\r\n            concursosArr[concursoIndex].ganador = ganadorSeleccionado;\r\n            localStorage.setItem(\"concursos\", JSON.stringify(concursosArr));\r\n            // Sumar concursosGanados al usuario seleccionado\r\n            const updatedUsers = usuarios.map(u =>\r\n                u.nick === ganadorSeleccionado\r\n                    ? { ...u, concursosGanados: (u.concursosGanados || 0) + 1 }\r\n                    : u\r\n            );\r\n            setUsuarios(updatedUsers);\r\n            localStorage.setItem(\"users\", JSON.stringify(updatedUsers));\r\n            // Si el usuario actual es el ganador, actualizar tambi칠n el estado user\r\n            if (user && user.nick === ganadorSeleccionado) {\r\n                setUser({ ...user, concursosGanados: (user.concursosGanados || 0) + 1 });\r\n                localStorage.setItem(\"user\", JSON.stringify({ ...user, concursosGanados: (user.concursosGanados || 0) + 1 }));\r\n            }\r\n            // Sumar 10 likes al ganador\r\n            updateLikes(ganadorSeleccionado, 10);\r\n            // Limpiar selecciones\r\n            setConcursoSeleccionado('');\r\n            setGanadorSeleccionado('');\r\n            // Refrescar perfil y concursos\r\n            window.dispatchEvent(new Event('profileUpdate'));\r\n            window.dispatchEvent(new Event('storage'));\r\n            alert(`Ganador asignado a concurso ${concursoSeleccionado}: ${ganadorSeleccionado}`);\r\n            setConcursoSeleccionado(\"\");\r\n            setGanadorSeleccionado(\"\");\r\n            // Forzar re-render para actualizar la lista de concursos\r\n            setRefreshKey(prev => prev + 1);\r\n        } else {\r\n            alert(\"Concurso no encontrado\");\r\n        }\r\n    };\r\n    const handleNoticiaSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setNoticiaTitulo(\"\");\r\n        setNoticiaTexto(\"\");\r\n        setNoticiaImagen(\"\");\r\n        alert(\"Noticia publicada (simulado)\");\r\n    };\r\n\r\n    // Funci칩n para enviar pregunta\r\n    const enviarPregunta = async () => {\r\n        if (!pregunta.trim() || !respuesta.trim()) {\r\n            alert(\"Por favor, completa la pregunta y la respuesta\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch('/api/add-question', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    curso: cursoSeleccionado,\r\n                    asignatura: asignaturaSeleccionada,\r\n                    pregunta: pregunta.trim(),\r\n                    respuesta: respuesta.trim(),\r\n                }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (response.ok) {\r\n                alert(`Pregunta agregada exitosamente a ${asignaturaSeleccionada}-${cursoSeleccionado}.json\\n\\nPregunta: ${pregunta}\\nRespuesta: ${respuesta}`);\r\n                // Limpiar campos\r\n                setPregunta(\"\");\r\n                setRespuesta(\"\");\r\n            } else {\r\n                alert(`Error: ${data.error}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al enviar pregunta:', error);\r\n            alert('Error al enviar la pregunta. Int칠ntalo de nuevo.');\r\n        }\r\n    };\r\n\r\n    // Funci칩n para a침adir trofeo al usuario seleccionado\r\n    const handleAddTrofeo = () => {\r\n        if (!selectedUser) return;\r\n        const updatedUsers = usuarios.map(u =>\r\n            u.nick === selectedUser\r\n                ? { ...u, trofeos: (u.trofeos || 0) + 1 }\r\n                : u\r\n        );\r\n        setUsuarios(updatedUsers);\r\n        localStorage.setItem(\"users\", JSON.stringify(updatedUsers));\r\n        alert(`Trofeo a침adido a ${selectedUser}`);\r\n    };\r\n    // Funci칩n general para sumar o restar likes a cualquier usuario\r\n    const updateLikes = (nick: string, cantidad: number) => {\r\n        if (!nick) return;\r\n        const updatedUsers = usuarios.map(u =>\r\n            u.nick === nick\r\n                ? { ...u, likes: (u.likes || 0) + cantidad }\r\n                : u\r\n        );\r\n        setUsuarios(updatedUsers);\r\n        localStorage.setItem(\"users\", JSON.stringify(updatedUsers));\r\n        // Si el usuario actual es el modificado, actualiza tambi칠n el estado user\r\n        if (user && user.nick === nick) {\r\n            setUser({ ...user, likes: (user.likes || 0) + cantidad });\r\n            localStorage.setItem(\"user\", JSON.stringify({ ...user, likes: (user.likes || 0) + cantidad }));\r\n        }\r\n        // Eliminar cualquier uso de likes_${nick} en localStorage\r\n        localStorage.removeItem(`likes_${nick}`);\r\n        // Emitir evento 'storage' manualmente para refrescar otras p치ginas\r\n        window.dispatchEvent(new Event('storage'));\r\n    };\r\n    // Funci칩n para desbloquear trofeo espec칤fico\r\n    const handleUnlockTrofeo = (trofeoIdx: number) => {\r\n        if (!selectedUser) return;\r\n        const updatedUsers = usuarios.map(u =>\r\n            u.nick === selectedUser\r\n                ? {\r\n                    ...u,\r\n                    trofeosDesbloqueados: Array.isArray(u.trofeosDesbloqueados)\r\n                        ? [...new Set([...(u.trofeosDesbloqueados || []), trofeoIdx])]\r\n                        : [trofeoIdx],\r\n                    trofeosBloqueados: Array.isArray(u.trofeosBloqueados)\r\n                        ? u.trofeosBloqueados.filter((idx: number) => idx !== trofeoIdx)\r\n                        : []\r\n                }\r\n                : u\r\n        );\r\n        setUsuarios(updatedUsers);\r\n        localStorage.setItem(\"users\", JSON.stringify(updatedUsers));\r\n        // Guardar los trofeos desbloqueados en localStorage para estad칤sticas\r\n        const userTrofeos = updatedUsers.find(u => u.nick === selectedUser)?.trofeosDesbloqueados || [];\r\n        const userBloqueados = updatedUsers.find(u => u.nick === selectedUser)?.trofeosBloqueados || [];\r\n        localStorage.setItem(`trofeos_${selectedUser}`, JSON.stringify(userTrofeos));\r\n        localStorage.setItem(`bloqueados_${selectedUser}`, JSON.stringify(userBloqueados));\r\n        // Si el usuario administrado es el actual, actualiza tambi칠n el estado y localStorage\r\n        if (user && user.nick === selectedUser) {\r\n            setUser({ ...user, trofeosDesbloqueados: userTrofeos, trofeosBloqueados: userBloqueados });\r\n            localStorage.setItem(\"user\", JSON.stringify({ ...user, trofeosDesbloqueados: userTrofeos, trofeosBloqueados: userBloqueados }));\r\n        }\r\n        // Disparar evento para refrescar la UI\r\n        window.dispatchEvent(new Event('storage'));\r\n        alert(`Trofeo #${trofeoIdx + 1} desbloqueado para ${selectedUser}`);\r\n    };\r\n\r\n    // Lista de trofeos normales (24)\r\n    const TROFEOS = [\r\n        { src: \"/trofeo1.jpg\", texto: \"Trofeo 1\", tipo: \"auto\" },\r\n        { src: \"/trofeo2.jpg\", texto: \"Trofeo 2\", tipo: \"auto\" },\r\n        { src: \"/trofeo3.jpg\", texto: \"Trofeo 3\", tipo: \"auto\" },\r\n        { src: \"/trofeo4.jpg\", texto: \"Trofeo 4\", tipo: \"auto\" },\r\n        { src: \"/trofeo5.jpg\", texto: \"Trofeo 5\", tipo: \"auto\" },\r\n        { src: \"/trofeo6.jpg\", texto: \"Trofeo 6\", tipo: \"auto\" },\r\n        { src: \"/trofeo7.jpg\", texto: \"Trofeo 7\", tipo: \"auto\" },\r\n        { src: \"/trofeo8.jpg\", texto: \"Trofeo 8\", tipo: \"auto\" },\r\n        { src: \"/trofeo9.jpg\", texto: \"Trofeo 9\", tipo: \"auto\" },\r\n        { src: \"/trofeo10.jpg\", texto: \"Trofeo 10\", tipo: \"auto\" },\r\n        { src: \"/trofeo11.jpg\", texto: \"Trofeo 11\", tipo: \"auto\" },\r\n        { src: \"/trofeo12.jpg\", texto: \"Trofeo 12\", tipo: \"auto\" },\r\n        { src: \"/trofeo13.png\", texto: \"Trofeo 13\", tipo: \"auto\" },\r\n        { src: \"/trofeo14.jpg\", texto: \"Trofeo 14\", tipo: \"auto\" },\r\n        { src: \"/trofeo15.jpg\", texto: \"Trofeo 15\", tipo: \"auto\" },\r\n        { src: \"/trofeo16.jpg\", texto: \"Trofeo 16\", tipo: \"auto\" },\r\n        { src: \"/trofeo17.jpg\", texto: \"Trofeo 17\", tipo: \"auto\" },\r\n        { src: \"/trofeo18.jpg\", texto: \"Trofeo 18\", tipo: \"auto\" },\r\n        { src: \"/trofeo19.jpg\", texto: \"Trofeo 19\", tipo: \"auto\" },\r\n        { src: \"/trofeo20.jpg\", texto: \"Trofeo 20\", tipo: \"auto\" },\r\n        { src: \"/trofeo21.jpg\", texto: \"Trofeo 21\", tipo: \"auto\" },\r\n        { src: \"/trofeo22.jpg\", texto: \"Trofeo 22\", tipo: \"auto\" },\r\n        { src: \"/trofeo23.jpg\", texto: \"Trofeo 23\", tipo: \"auto\" },\r\n        { src: \"/trofeo24.jpg\", texto: \"Trofeo 24\", tipo: \"auto\" },\r\n        { src: \"/trofeo1.jpg\", texto: \"游끥 Campe칩n Mensual\", tipo: \"asignado\" },\r\n        { src: \"/trofeo2.jpg\", texto: \"游볟 Subcampe칩n Mensual\", tipo: \"asignado\" },\r\n        { src: \"/trofeo3.jpg\", texto: \"游볠 Tercer Lugar Mensual\", tipo: \"asignado\" },\r\n        { src: \"/trofeo4.jpg\", texto: \"游끤 Top 10 Mensual\", tipo: \"asignado\" },\r\n        { src: \"/trofeo5.jpg\", texto: \"游닄 Participante Activo\", tipo: \"asignado\" }\r\n    ];\r\n    // Lista de trofeos premium (12)\r\n    // TROFEOS_PREMIUM ahora se importa desde trofeosPremiumImport.ts\r\n    // Trofeos autom치ticos con condici칩n\r\n    const TROFEOS_AUTO = [\r\n        { src: \"/trofeo1.jpg\", texto: \"Trofeo 1\", tipo: \"auto\", condicion: (user: any) => (user.likes || 0) >= 10 },\r\n        { src: \"/trofeo2.jpg\", texto: \"Trofeo 2\", tipo: \"auto\", condicion: (user: any) => (user.amigos?.length || 0) >= 1 },\r\n        { src: \"/trofeo3.jpg\", texto: \"Trofeo 3\", tipo: \"auto\", condicion: (user: any) => (user.comentariosRealizados || 0) >= 1 },\r\n        { src: \"/trofeo4.jpg\", texto: \"Trofeo 4\", tipo: \"auto\", condicion: (user: any) => (user.historias?.length || 0) >= 1 },\r\n        { src: \"/trofeo5.jpg\", texto: \"Trofeo 5\", tipo: \"auto\", condicion: (user: any) => (user.preguntasAcertadas || 0) >= 20 },\r\n        { src: \"/trofeo6.jpg\", texto: \"Trofeo 6\", tipo: \"auto\", condicion: (user: any) => (user.competicionesSuperadas || 0) >= 1 },\r\n        { src: \"/trofeo7.jpg\", texto: \"Trofeo 7\", tipo: \"auto\", condicion: (user: any) => !!user.estaEnRanking },\r\n        { src: \"/trofeo8.jpg\", texto: \"Trofeo 8\", tipo: \"auto\", condicion: (user: any) => (user.concursosGanados || 0) >= 1 },\r\n        { src: \"/trofeo9.jpg\", texto: \"Trofeo 9\", tipo: \"auto\", condicion: (user: any) => (user.likes || 0) >= 100 },\r\n        { src: \"/trofeo10.jpg\", texto: \"Trofeo 10\", tipo: \"auto\", condicion: (user: any) => (user.amigos?.length || 0) >= 10 },\r\n        { src: \"/trofeo11.jpg\", texto: \"Trofeo 11\", tipo: \"auto\", condicion: (user: any) => (user.historias?.length || 0) >= 3 },\r\n        { src: \"/trofeo12.jpg\", texto: \"Trofeo 12\", tipo: \"auto\", condicion: (user: any) => (user.comentariosRecibidos || 0) >= 3 },\r\n        { src: \"/trofeo13.png\", texto: \"Trofeo 13\", tipo: \"auto\", condicion: (user: any) => !!user.estaEnRankingCompeticiones },\r\n        { src: \"/trofeo14.jpg\", texto: \"Trofeo 14\", tipo: \"auto\", condicion: (user: any) => (user.likes || 0) >= 500 },\r\n        { src: \"/trofeo15.jpg\", texto: \"Trofeo 15\", tipo: \"auto\", condicion: (user: any) => (user.amigos?.length || 0) >= 30 },\r\n        { src: \"/trofeo16.jpg\", texto: \"Trofeo 16\", tipo: \"auto\", condicion: (user: any) => (user.comentariosRecibidos || 0) >= 10 },\r\n        { src: \"/trofeo17.jpg\", texto: \"Trofeo 17\", tipo: \"auto\", condicion: (user: any) => (user.historias?.length || 0) >= 15 },\r\n        { src: \"/trofeo18.jpg\", texto: \"Trofeo 18\", tipo: \"auto\", condicion: (user: any) => (user.concursosGanados || 0) >= 3 },\r\n        { src: \"/trofeo19.jpg\", texto: \"Trofeo 19\", tipo: \"auto\", condicion: (user: any) => (user.preguntasAcertadas || 0) >= 1000 },\r\n        {\r\n            src: \"/trofeo20.jpg\", texto: \"Trofeo 20\", tipo: \"auto\", condicion: (user: any) => {\r\n                if (!user.fechaInscripcion) return false;\r\n                const fecha = new Date(user.fechaInscripcion);\r\n                const ahora = new Date();\r\n                const diff = ahora.getTime() - fecha.getTime();\r\n                return diff >= 365 * 24 * 60 * 60 * 1000; // 1 a침o en ms\r\n            }\r\n        },\r\n        { src: \"/trofeo21.jpg\", texto: \"Trofeo 21\", tipo: \"auto\", condicion: (user: any) => (user.historias?.length || 0) >= 30 },\r\n        { src: \"/trofeo22.jpg\", texto: \"Trofeo 22\", tipo: \"auto\", condicion: (user: any) => (user.likes || 0) >= 1000 },\r\n        { src: \"/trofeo23.jpg\", texto: \"Trofeo 23\", tipo: \"auto\", condicion: (user: any) => (user.amigos?.length || 0) >= 50 }\r\n    ];\r\n    // Unificar todos los trofeos para el selector\r\n    const TROFEOS_ALL = [...TROFEOS, ...TROFEOS_PREMIUM];\r\n    // Funci칩n para obtener trofeos desbloqueados autom치ticamente\r\n    const getAutoTrofeos = (user: any) => {\r\n        // Trofeo Premium 7: Dise침ador del Futuro\r\n        // ...existing code...\r\n        // Asegurar que el campo amigos es siempre un array actualizado\r\n        const userSync = {\r\n            ...user,\r\n            amigos: Array.isArray(user.amigos) ? user.amigos : []\r\n        };\r\n        let autoTrofeos = TROFEOS_AUTO\r\n            .map((t, idx) => (typeof t.condicion === 'function' && t.condicion(userSync)) ? idx : null)\r\n            .filter(idx => idx !== null);\r\n\r\n        // Desbloqueo autom치tico de trofeos premium\r\n        const esPremium = userSync.premium === true || userSync.isPremium === true || userSync.tipo === \"premium\";\r\n        const historiasCreadas = Array.isArray(userSync.historias) ? userSync.historias.length : (userSync.historiasCreadas || 0);\r\n        const preguntasAcertadas = userSync.preguntasAcertadas || 0;\r\n        // Trofeo Premium 1: Historiador Premium\r\n        if (esPremium && historiasCreadas >= 35) {\r\n            autoTrofeos.push(TROFEOS.length); // 칈ndice del trofeo premium 1\r\n        }\r\n        // Trofeo Premium 2: Sabio Premium\r\n        if (esPremium && preguntasAcertadas >= 1200) {\r\n            autoTrofeos.push(TROFEOS.length + 1); // 칈ndice del trofeo premium 2\r\n        }\r\n        // Trofeo Premium 3: Amigo Premium\r\n        const amigosCount = Array.isArray(userSync.amigos) ? userSync.amigos.length : 0;\r\n        if (esPremium && amigosCount >= 60) {\r\n            autoTrofeos.push(TROFEOS.length + 2); // 칈ndice del trofeo premium 3\r\n        }\r\n        // Trofeo Premium 4: Esp칤ritu Navide침o Premium\r\n        let tieneHistoriaNavidad = false;\r\n        if (esPremium && Array.isArray(userSync.historias)) {\r\n            tieneHistoriaNavidad = userSync.historias.some((historia: any) => {\r\n                if (!historia || !historia.titulo || !historia.fecha || !historia.modo) return false;\r\n                const tituloLower = historia.titulo.toLowerCase();\r\n                const esNavidad = tituloLower.includes(\"navidad\") || tituloLower.includes(\"navide침o\") || tituloLower.includes(\"navide침a\");\r\n                const fecha = new Date(historia.fecha);\r\n                const year = fecha.getFullYear();\r\n                // Rango: 20 diciembre a 6 enero (del a침o siguiente)\r\n                const inicio = new Date(year, 11, 20); // 20 diciembre\r\n                const fin = new Date(year + 1, 0, 6, 23, 59, 59); // 6 enero\r\n                return historia.modo === \"My Live\" && esNavidad && fecha >= inicio && fecha <= fin;\r\n            });\r\n        }\r\n        if (esPremium && tieneHistoriaNavidad) {\r\n            autoTrofeos.push(TROFEOS.length + 3); // 칈ndice del trofeo premium 4\r\n        }\r\n        // Trofeo Premium 5: Verano Dorado Premium\r\n        let tieneHistoriaVerano = false;\r\n        if (esPremium && Array.isArray(userSync.historias)) {\r\n            tieneHistoriaVerano = userSync.historias.some((historia: any) => {\r\n                if (!historia || !historia.fecha || !historia.modo) return false;\r\n                const fecha = new Date(historia.fecha);\r\n                // Rango: 15 junio a 15 septiembre\r\n                const year = fecha.getFullYear();\r\n                const inicio = new Date(year, 5, 15); // 15 junio\r\n                const fin = new Date(year, 8, 15, 23, 59, 59); // 15 septiembre\r\n                return historia.modo === \"My Live\" && fecha >= inicio && fecha <= fin;\r\n            });\r\n        }\r\n        if (esPremium && tieneHistoriaVerano) {\r\n            autoTrofeos.push(TROFEOS.length + 4); // 칈ndice del trofeo premium 5\r\n        }\r\n        // Trofeo Premium 6: Veterano Dorado\r\n        let mesesPremium = 0;\r\n        if (userSync.premiumInicio && userSync.premiumExpiracion) {\r\n            const inicio = new Date(userSync.premiumInicio);\r\n            const fin = new Date(userSync.premiumExpiracion);\r\n            // Calcular meses completos entre inicio y fin\r\n            mesesPremium = (fin.getFullYear() - inicio.getFullYear()) * 12 + (fin.getMonth() - inicio.getMonth());\r\n            // Si el d칤a de expiraci칩n es menor que el de inicio, restar un mes\r\n            if (fin.getDate() < inicio.getDate()) {\r\n                mesesPremium--;\r\n            }\r\n        }\r\n        if (esPremium && mesesPremium >= 6) {\r\n            autoTrofeos.push(TROFEOS.length + 5); // 칈ndice del trofeo premium 6\r\n        }\r\n        // Trofeo Premium 7: Dise침ador del Futuro\r\n        let tieneLogoStoryUp = false;\r\n        if (esPremium && Array.isArray(userSync.historias)) {\r\n            tieneLogoStoryUp = userSync.historias.some((historia: any) => {\r\n                if (!historia || !historia.titulo || !historia.imagen) return false;\r\n                const tituloLower = historia.titulo.toLowerCase();\r\n                return tituloLower.includes(\"logo storyup\") && !!historia.imagen;\r\n            });\r\n        }\r\n        if (esPremium && tieneLogoStoryUp) {\r\n            autoTrofeos.push(TROFEOS.length + 6); // 칈ndice del trofeo premium 7\r\n        }\r\n        // Trofeo Premium 8: Escritor Premium\r\n        if (esPremium && historiasCreadas >= 15) {\r\n            autoTrofeos.push(TROFEOS.length + 7); // 칈ndice del trofeo premium 8\r\n        }\r\n\r\n        // Trofeo Premium 9: Competidor Premium\r\n        // Consigue al menos 30 trofeos (normales + premium)\r\n        const totalTrofeosDesbloqueados = Array.isArray(userSync.trofeosDesbloqueados) ? userSync.trofeosDesbloqueados.length : 0;\r\n        // Incluye los autom치ticos calculados en esta funci칩n\r\n        const totalAutoTrofeos = autoTrofeos.length;\r\n        const totalTrofeos = totalTrofeosDesbloqueados + totalAutoTrofeos;\r\n        if (esPremium && totalTrofeos >= 30) {\r\n            autoTrofeos.push(TROFEOS.length + 8); // 칈ndice del trofeo premium 9\r\n        }\r\n        // Trofeo Premium 10: Cerebro de Oro\r\n        // 2500+ preguntas acertadas en Aprende con Pipo\r\n        if (esPremium && preguntasAcertadas >= 2500) {\r\n            autoTrofeos.push(TROFEOS.length + 9); // 칈ndice del trofeo premium 10\r\n        }\r\n\r\n        // Trofeo Premium 11: Analista Premium\r\n        // Consigue nivel 3 en todas las materias en \"Analisis por materias\" de Estad칤sticas premium Avanzadas\r\n        // Suponemos que user.nivelesMaterias es un objeto tipo { matematicas: 3, lenguaje: 3, ... }\r\n        const materiasRequeridas = [\"matematicas\", \"lenguaje\", \"ciencias\", \"ingles\", \"historia\", \"geografia\", \"literatura\"];\r\n        const nivelesMaterias = userSync.nivelesMaterias || {};\r\n        const todasNivel3 = materiasRequeridas.every(m => nivelesMaterias[m] >= 3);\r\n        if (esPremium && todasNivel3) {\r\n            autoTrofeos.push(TROFEOS.length + 10); // 칈ndice del trofeo premium 11\r\n        }\r\n        // Trofeo Premium 12: Red Social Premium\r\n        // Conseguir 100+ amigos\r\n        if (esPremium && amigosCount >= 100) {\r\n            autoTrofeos.push(TROFEOS.length + 11); // 칈ndice del trofeo premium 12\r\n        }\r\n        return autoTrofeos;\r\n    };\r\n    // Funci칩n para saber si un trofeo est치 desbloqueado\r\n    const isTrofeoUnlocked = (user: any, idx: number) => {\r\n        const auto = getAutoTrofeos(user);\r\n        const manual = Array.isArray(user.trofeosDesbloqueados) ? user.trofeosDesbloqueados : [];\r\n        const bloqueados = Array.isArray(user.trofeosBloqueados) ? user.trofeosBloqueados : [];\r\n        const asignados = Array.isArray(user.trofeos) ? user.trofeos : [];\r\n        return (auto.includes(idx) || manual.includes(idx) || asignados.includes(idx)) && !bloqueados.includes(idx);\r\n    };\r\n\r\n    if (!user) {\r\n        return (\r\n            <div className=\"min-h-screen bg-green-100 flex items-center justify-center\">\r\n                <div className=\"max-w-md w-full bg-white shadow rounded p-6 text-center\">\r\n                    <h2 className=\"text-2xl font-bold mb-4\">Perfil</h2>\r\n                    <p className=\"text-gray-600\">No se ha iniciado sesi칩n.</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    const displayedUser = selectedUser ? usuarios.find(u => u.nick === selectedUser) || user : user;\r\n\r\n    const isPremium = displayedUser ? (() => {\r\n        const premiumData = localStorage.getItem(`premium_${displayedUser.nick}`);\r\n        if (premiumData) {\r\n            try {\r\n                const data = JSON.parse(premiumData);\r\n                return data.activo === true;\r\n            } catch {\r\n                return false;\r\n            }\r\n        }\r\n        return false;\r\n    })() : false;\r\n    return (\r\n        <>\r\n            <div className=\"min-h-screen bg-green-100 flex flex-col pt-4\">\r\n                <div className=\"flex items-center justify-center mt-2 mb-4\">\r\n                    {mensajeRecibido && (\r\n                        <button\r\n                            className=\"bg-yellow-400 text-white px-2 py-1 rounded font-bold mr-4 animate-bounce\"\r\n                            onClick={() => {\r\n                                setMensajeRecibido(false);\r\n                                localStorage.removeItem(`chat_aviso_${user.nick}`);\r\n                            }}\r\n                        >Mensaje recibido</button>\r\n                    )}\r\n                    <h2 className=\"text-3xl font-bold text-center\">Perfil de {renderNick(displayedUser.nick)}</h2>\r\n\r\n                    {/* Indicador Premium Animado */}\r\n                    {isPremium && (\r\n                        <div className=\"flex justify-center mt-2\">\r\n                            <div className=\"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 text-white px-6 py-2 rounded-full font-bold text-lg shadow-lg shadow-yellow-500/50 animate-pulse flex items-center gap-2\">\r\n                                <span className=\"animate-bounce\">游녬</span>\r\n                                <span>PREMIUM ACTIVO</span>\r\n                                <span className=\"animate-bounce\">九</span>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                <div className=\"flex flex-row w-full\">\r\n                    {/* Datos personales */}\r\n                    <div className={`max-w-md w-full bg-white shadow rounded p-6 ml-8 transition-all duration-500 ${isPremium\r\n                            ? 'border-4 border-yellow-400 shadow-2xl shadow-yellow-400/50 animate-pulse relative overflow-hidden'\r\n                            : ''\r\n                        }`}>\r\n                        {/* Efecto de part칤culas para premium */}\r\n                        {isPremium && (\r\n                            <div className=\"absolute inset-0 pointer-events-none\">\r\n                                <div className=\"absolute top-2 right-2 w-2 h-2 bg-yellow-400 rounded-full animate-ping opacity-75\"></div>\r\n                                <div className=\"absolute top-4 left-4 w-1 h-1 bg-yellow-300 rounded-full animate-bounce opacity-60\"></div>\r\n                                <div className=\"absolute bottom-4 right-6 w-1.5 h-1.5 bg-yellow-500 rounded-full animate-pulse opacity-80\"></div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"flex justify-between items-center mb-4 relative\">\r\n                            <h3 className={`text-xl font-bold text-center w-full transition-all duration-300 ${isPremium ? 'text-yellow-600' : ''\r\n                                }`}>\r\n                                {t('informacionPersonal')}\r\n                                {isPremium && (\r\n                                    <span className=\"ml-2 animate-spin\">游녬</span>\r\n                                )}\r\n                            </h3>\r\n                        </div>                        <div className=\"flex flex-col items-center mb-4\">\r\n                            <div className={`relative ${isPremium ? '' : ''}`}>\r\n                                <img\r\n                                    src={displayedUser.avatar || \"/avatars/default.png\"}\r\n                                    alt=\"Avatar\"\r\n                                    className={`w-20 h-20 rounded-full mb-2 transition-all duration-300 ${isPremium\r\n                                        ? 'ring-4 ring-yellow-400 ring-opacity-70 shadow-lg shadow-yellow-400/50 hover:scale-110'\r\n                                        : ''\r\n                                        }`}\r\n                                />\r\n                                {isPremium && (\r\n                                    <div className=\"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-xs animate-bounce\">\r\n                                        九\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            <button className={`px-4 py-2 rounded font-semibold transition-all duration-300 ${isPremium\r\n                                ? 'bg-gradient-to-r from-yellow-500 to-yellow-600 text-white hover:from-yellow-600 hover:to-yellow-700 shadow-lg hover:shadow-yellow-500/50 hover:scale-105'\r\n                                : 'bg-blue-500 text-white hover:bg-blue-600'\r\n                                }`} onClick={() => router.push('/perfil/avatar')}>\r\n                                Cambiar avatar\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"mb-2\"><strong>{t('nombre')}:</strong> {displayedUser.nombre}</div>\r\n                        <div className=\"mb-2\"><strong>Nick:</strong> {renderNick(displayedUser.nick)}</div>\r\n                        <div className=\"mb-2\"><strong>{t('email')}:</strong> {displayedUser.email}</div>\r\n                        <div className=\"mb-2\"><strong>{t('centroEducativo')}:</strong> {displayedUser.centro}</div>\r\n                        <div className=\"mb-2\"><strong>{t('curso')}:</strong> {displayedUser.curso}</div>\r\n                        <div className=\"mb-2\"><strong>{t('tipoUsuario')}:</strong> {user.tipo}</div>\r\n                        <div className=\"mb-2\"><strong>{t('fechaInscripcion')}:</strong> {user.fechaInscripcion ? new Date(user.fechaInscripcion).toLocaleDateString('es-ES') : ''}</div>\r\n                        <div className=\"mb-2 flex items-center\">\r\n                            {/* Datos personales en filas de dos en dos, con bloques redondos */}\r\n                            <div className=\"flex flex-col mt-2 gap-y-4\">\r\n                                <div className=\"flex flex-row gap-x-12\">\r\n                                    <div className=\"flex items-center\">\r\n                                        <span className=\"mr-2 text-lg\">游녨</span>\r\n                                        <strong>Likes:</strong>\r\n                                        <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-green-300 text-green-900 font-bold text-sm\">{displayedUser.likes || 0}</span>\r\n                                    </div>\r\n                                    <div className=\"flex items-center ml-8\">\r\n                                        <span className=\"mr-2 text-lg\">游논</span>\r\n                                        <strong>{t('totalAmigos')}:</strong>\r\n                                        <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-300 text-blue-900 font-bold text-sm\">{displayedUser.amigos ? displayedUser.amigos.length : 0}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex flex-row gap-x-12\">\r\n                                    <div className=\"flex items-center\">\r\n                                        <span className=\"mr-2 text-lg\">游닀</span>\r\n                                        <strong>{t('totalHistorias')}:</strong>\r\n                                        <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-purple-200 text-purple-900 font-bold text-sm\">{displayedUser.historias ? displayedUser.historias.length : 0}</span>\r\n                                    </div>\r\n                                    <div className=\"flex items-center\">\r\n                                        <span className=\"mr-2 text-lg\">游눫</span>\r\n                                        <strong>{t('totalComentarios')}:</strong>\r\n                                        <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-yellow-200 text-yellow-900 font-bold text-sm\">{displayedUser.comentariosRecibidos || 0}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex flex-row gap-x-12\">\r\n                                    <div className=\"flex items-center\">\r\n                                        <span className=\"mr-2 text-lg\">游끥</span>\r\n                                        <strong>{t('trofeosDesbloqueados')}:</strong>\r\n                                        {(() => {\r\n                                            // Trofeos autom치ticos\r\n                                            const auto = getAutoTrofeos(displayedUser);\r\n                                            // Manuales\r\n                                            const manual = Array.isArray(displayedUser.trofeosDesbloqueados) ? displayedUser.trofeosDesbloqueados : [];\r\n                                            // Asignados (por competiciones, etc.)\r\n                                            const asignados = Array.isArray(displayedUser.trofeos) ? displayedUser.trofeos : [];\r\n                                            // Premium\r\n                                            const premiumCount = manual.filter((idx: number) => idx >= TROFEOS.length && idx < TROFEOS.length + TROFEOS_PREMIUM.length).length;\r\n                                            // Unir todos y contar 칰nicos\r\n                                            const total = new Set([...auto, ...manual, ...asignados]).size + premiumCount;\r\n                                            return (\r\n                                                <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-pink-200 text-pink-900 font-bold text-sm\">{total}</span>\r\n                                            );\r\n                                        })()}\r\n                                    </div>\r\n                                    <div className=\"flex items-center\">\r\n                                        <span className=\"mr-2 text-lg\">九</span>\r\n                                        <strong>Respuestas acertadas:</strong>\r\n                                        <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-indigo-200 text-indigo-900 font-bold text-sm\">{user.preguntasAcertadas || 0}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex flex-row gap-x-12\">\r\n                                    <div className=\"flex items-center\">\r\n                                        <span className=\"mr-2 text-lg\">游볞</span>\r\n                                        <strong>Competiciones:</strong>\r\n                                        <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-teal-200 text-teal-900 font-bold text-sm\">{displayedUser.competicionesSuperadas || 0}</span>\r\n                                    </div>\r\n                                    <div className=\"flex items-center\">\r\n                                        <span className=\"mr-2 text-lg\">游꿀</span>\r\n                                        <strong>Concursos:</strong>\r\n                                        <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-red-200 text-red-900 font-bold text-sm\">{displayedUser.concursosGanados || 0}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex flex-col flex-1 ml-8\">\r\n                        <div className=\"flex flex-row gap-4\">\r\n                            {/* Trofeos */}\r\n                            <div className=\"max-w-md w-full bg-white shadow rounded p-6\">\r\n                                <h3 className=\"text-xl font-bold mb-4 text-center\">{t('trofeosDesbloqueados')}</h3>\r\n                                <div className=\"grid grid-cols-6 gap-2\">\r\n                                    {TROFEOS.map((trofeo, idx) => {\r\n                                        const tieneTrofeo = isTrofeoUnlocked(user, idx);\r\n                                        return (\r\n                                            <div key={idx} className={`relative bg-white rounded-lg shadow flex items-center justify-center w-14 h-14 border border-gray-200 ${tieneTrofeo ? '' : 'opacity-40'}`}>\r\n                                                <img src={trofeo.src} alt={trofeo.texto} className=\"w-10 h-10 object-contain\" />\r\n                                                {tieneTrofeo ? (\r\n                                                    <span className=\"absolute top-1 right-1 bg-yellow-200 text-xs font-bold rounded px-1 py-0.5\">{idx + 1}</span>\r\n                                                ) : (\r\n                                                    <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n                                                        <svg width=\"56\" height=\"56\" viewBox=\"0 0 56 56\" className=\"absolute text-red-500\" style={{ zIndex: 2, left: 0, top: 0 }}>\r\n                                                            <line x1=\"0\" y1=\"0\" x2=\"56\" y2=\"56\" stroke=\"currentColor\" strokeWidth=\"6\" />\r\n                                                            <line x1=\"56\" y1=\"0\" x2=\"0\" y2=\"56\" stroke=\"currentColor\" strokeWidth=\"6\" />\r\n                                                        </svg>\r\n                                                        <svg width=\"48\" height=\"48\" viewBox=\"0 0 20 20\" fill=\"none\" className=\"text-yellow-500\">\r\n                                                            <rect x=\"2\" y=\"7\" width=\"16\" height=\"10\" rx=\"3\" fill=\"currentColor\" />\r\n                                                            <rect x=\"5\" y=\"2\" width=\"10\" height=\"7\" rx=\"5\" stroke=\"currentColor\" strokeWidth=\"2\" fill=\"none\" />\r\n                                                            <circle cx=\"10\" cy=\"13\" r=\"2\" fill=\"#fff\" />\r\n                                                        </svg>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            </div>\r\n                            {/* Trofeos Premium */}\r\n                            <div className={`max-w-md w-full bg-white shadow rounded p-6 transition-all duration-500 ${isPremium\r\n                                    ? 'border-4 border-yellow-400 shadow-2xl shadow-yellow-400/50 animate-pulse relative overflow-hidden'\r\n                                    : ''\r\n                                }`}>\r\n                                {/* Efectos premium para trofeos */}\r\n                                {isPremium && (\r\n                                    <div className=\"absolute inset-0 pointer-events-none\">\r\n                                        <div className=\"absolute top-1 left-1 w-2 h-2 bg-yellow-400 rounded-full animate-ping opacity-60\"></div>\r\n                                        <div className=\"absolute bottom-2 right-2 w-1 h-1 bg-yellow-300 rounded-full animate-bounce opacity-70\"></div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                <h3 className={`text-xl font-bold mb-4 text-center transition-all duration-300 ${isPremium ? 'text-yellow-600' : ''\r\n                                    }`}>\r\n                                    Trofeos Premium\r\n                                    {isPremium && <span className=\"ml-2 animate-spin\">游녬</span>}\r\n                                </h3>\r\n                                <div className=\"grid grid-cols-4 gap-4 w-full\">\r\n                                    {TROFEOS_PREMIUM.map((trofeo, idx) => {\r\n                                        const tieneTrofeo = isTrofeoUnlocked(user, TROFEOS.length + idx);\r\n                                        return (\r\n                                            <div key={idx} className={`relative bg-white rounded-lg shadow flex items-center justify-center w-20 h-20 border-2 border-yellow-400 ${tieneTrofeo ? '' : 'opacity-40'}`}>\r\n                                                <img src={trofeo.src} alt={`Premium ${idx + 1}`} className=\"w-16 h-16 object-contain\" />\r\n                                                {tieneTrofeo ? (\r\n                                                    <span className=\"absolute top-1 right-1 bg-yellow-300 text-sm font-bold rounded px-2 py-0.5\">{idx + 1}</span>\r\n                                                ) : (\r\n                                                    <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n                                                        <svg width=\"72\" height=\"72\" viewBox=\"0 0 72 72\" className=\"absolute text-red-500\" style={{ zIndex: 2, left: 0, top: 0 }}>\r\n                                                            <line x1=\"0\" y1=\"0\" x2=\"72\" y2=\"72\" stroke=\"currentColor\" strokeWidth=\"8\" />\r\n                                                            <line x1=\"72\" y1=\"0\" x2=\"0\" y2=\"72\" stroke=\"currentColor\" strokeWidth=\"8\" />\r\n                                                        </svg>\r\n                                                        <svg width=\"64\" height=\"64\" viewBox=\"0 0 20 20\" fill=\"none\" className=\"text-yellow-500\">\r\n                                                            <rect x=\"2\" y=\"7\" width=\"16\" height=\"10\" rx=\"3\" fill=\"currentColor\" />\r\n                                                            <rect x=\"5\" y=\"2\" width=\"10\" height=\"7\" rx=\"5\" stroke=\"currentColor\" strokeWidth=\"2\" fill=\"none\" />\r\n                                                            <circle cx=\"10\" cy=\"13\" r=\"2\" fill=\"#fff\" />\r\n                                                        </svg>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {/* Chat justo debajo de los trofeos, con ancho limitado */}\r\n                        <div className=\"flex flex-row justify-start mt-16\">\r\n                            <div className=\"bg-white shadow-lg rounded-lg p-6 flex flex-row items-start gap-6\" style={{ width: 'calc(2 * 28rem + 1rem)' }}>\r\n                                {/* 2 bloques de trofeos de max-w-md (28rem) + gap-4 (1rem) */}\r\n                                <div className=\"w-64 flex flex-col items-start\">\r\n                                    <label htmlFor=\"destinatario\" className=\"font-medium mb-2 text-sm\">Enviar a usuario:</label>\r\n                                    <select\r\n                                        id=\"destinatario\"\r\n                                        className=\"px-2 py-2 rounded border border-blue-300 bg-white w-full text-sm\"\r\n                                        value={selectedUser}\r\n                                        onChange={e => setSelectedUser(e.target.value)}\r\n                                    >\r\n                                        <option value=\"\">{t('seleccionarUsuario')}</option>\r\n                                        {usuarios\r\n                                            .filter((u, i, arr) => arr.findIndex(x => x.nick === u.nick) === i)\r\n                                            .sort((a, b) => a.nick.localeCompare(b.nick))\r\n                                            .map((u: any) => (\r\n                                                <option key={u.nick} value={u.nick}>{u.nick}</option>\r\n                                            ))}\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"flex-1 flex flex-col items-center\">\r\n                                    <div className=\"flex items-center mb-4\">\r\n                                        <h3 className=\"text-xl font-bold text-center flex-1\">Chat</h3>\r\n                                    </div>\r\n                                    <div className=\"w-full h-64 bg-gray-50 rounded-lg border border-gray-200 p-4 overflow-y-auto flex flex-col\">\r\n                                        {chatMessages.length === 0 ? (\r\n                                            <div className=\"flex-1 flex items-center justify-center text-gray-400\">El chat estar치 disponible aqu칤.</div>\r\n                                        ) : (\r\n                                            chatMessages.map((msg, idx) => (\r\n                                                <div key={idx} className=\"mb-2 text-sm flex justify-between items-center\">\r\n                                                    <span>\r\n                                                        <strong>{msg.from === user.nick ? \"T칰\" : msg.from}  {msg.to === user.nick ? \"T칰\" : msg.to}:</strong> {msg.text}\r\n                                                    </span>\r\n                                                    {msg.fecha && (\r\n                                                        <span className=\"ml-2 text-xs text-gray-500\">{msg.fecha}</span>\r\n                                                    )}\r\n                                                </div>\r\n                                            ))\r\n                                        )}\r\n                                        <div className=\"w-full mt-4 flex\">\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                className=\"flex-1 border rounded-l px-3 py-2 focus:outline-none\"\r\n                                                placeholder=\"Escribe un mensaje...\"\r\n                                                value={chatInput}\r\n                                                onChange={e => setChatInput(e.target.value)}\r\n                                                disabled={!selectedUser}\r\n                                            />\r\n                                            <button\r\n                                                className=\"bg-green-500 text-white px-4 py-2 rounded-r font-semibold\"\r\n                                                disabled={!selectedUser || !chatInput.trim()}\r\n                                                onClick={() => {\r\n                                                    if (selectedUser && chatInput.trim() && user && user.nick) {\r\n                                                        // Mensaje para emisor\r\n                                                        const mensaje = { from: user.nick, to: selectedUser, text: chatInput, fecha: new Date().toLocaleString('es-ES') };\r\n                                                        const mensajesEmisorStr = localStorage.getItem(`chat_${user.nick}`);\r\n                                                        let mensajesEmisor: { from: string, to: string, text: string, fecha?: string }[] = mensajesEmisorStr ? JSON.parse(mensajesEmisorStr) : [];\r\n                                                        mensajesEmisor = [...mensajesEmisor, mensaje].slice(-5);\r\n                                                        localStorage.setItem(`chat_${user.nick}`, JSON.stringify(mensajesEmisor));\r\n                                                        setChatMessages(mensajesEmisor);\r\n\r\n                                                        // Mensaje para receptor\r\n                                                        const mensajesReceptorStr = localStorage.getItem(`chat_${selectedUser}`);\r\n                                                        let mensajesReceptor: { from: string, to: string, text: string, fecha?: string }[] = mensajesReceptorStr ? JSON.parse(mensajesReceptorStr) : [];\r\n                                                        mensajesReceptor = [...mensajesReceptor, mensaje].slice(-5);\r\n                                                        localStorage.setItem(`chat_${selectedUser}`, JSON.stringify(mensajesReceptor));\r\n                                                        // Activar aviso para receptor\r\n                                                        localStorage.setItem(`chat_aviso_${selectedUser}`, \"1\");\r\n                                                        // Forzar actualizaci칩n en la app del receptor\r\n                                                        window.dispatchEvent(new Event('storage'));\r\n\r\n                                                        setChatInput(\"\");\r\n                                                    }\r\n                                                }}\r\n                                            >{t('enviar')}</button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {/* Solo los docentes ven los siguientes bloques debajo del chat */}\r\n                {user.tipo === \"docente\" && (\r\n                    <div className=\"w-full max-w-6xl mx-auto mt-20\">\r\n                        <div className=\"grid grid-cols-2 gap-12\">\r\n                            <div className=\"bg-white shadow-lg rounded-lg p-6\">\r\n                                <h3 className=\"text-xl font-bold text-center mb-2\">Crear noticia</h3>\r\n                                <form className=\"w-full flex flex-col gap-4\" onSubmit={handleNoticiaSubmit}>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        className=\"border rounded px-3 py-2 w-full\"\r\n                                        placeholder=\"T칤tulo de la noticia\"\r\n                                        value={noticiaTitulo}\r\n                                        onChange={e => setNoticiaTitulo(e.target.value)}\r\n                                    />\r\n                                    <div className=\"relative w-full\">\r\n                                        <textarea\r\n                                            className=\"border rounded px-3 py-2 w-full min-h-[80px]\"\r\n                                            placeholder=\"Escribe la noticia aqu칤...\"\r\n                                            value={noticiaTexto}\r\n                                            onChange={e => setNoticiaTexto(e.target.value)}\r\n                                        />\r\n                                        {noticiaImagen && (\r\n                                            <img src={noticiaImagen} alt=\"Previsualizaci칩n\" className=\"absolute left-0 top-0 w-full h-full object-contain rounded shadow pointer-events-none\" style={{ zIndex: 1, opacity: 0.7 }} />\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-4 mt-2\">\r\n                                        <input\r\n                                            id=\"noticia-imagen\"\r\n                                            type=\"file\"\r\n                                            accept=\"image/*\"\r\n                                            className=\"hidden\"\r\n                                            onChange={e => {\r\n                                                const file = e.target.files?.[0];\r\n                                                if (file) {\r\n                                                    setNombreArchivo(file.name);\r\n                                                    const reader = new FileReader();\r\n                                                    reader.onload = (ev) => {\r\n                                                        setNoticiaImagen(ev.target?.result as string);\r\n                                                    };\r\n                                                    reader.readAsDataURL(file);\r\n                                                } else {\r\n                                                    setNombreArchivo(\"\");\r\n                                                    setNoticiaImagen(\"\");\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            className=\"bg-gray-200 text-gray-700 px-4 py-2 rounded font-semibold border\"\r\n                                            onClick={() => document.getElementById('noticia-imagen')?.click()}\r\n                                        >Seleccionar imagen</button>\r\n                                        <button type=\"submit\" className=\"bg-blue-500 text-white px-4 py-2 rounded font-semibold\">Publicar noticia</button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                            <div className=\"bg-white shadow-lg rounded-lg p-6\">\r\n                                <h3 className=\"text-xl font-bold text-center mb-2\">Crear concurso</h3>\r\n                                <form className=\"w-full flex flex-col gap-4\" onSubmit={handleConcursoSubmit}>\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            className=\"border rounded px-3 py-2 flex-1\"\r\n                                            placeholder={t('titulo')}\r\n                                            value={concursoTitulo}\r\n                                            onChange={e => setConcursoTitulo(e.target.value)}\r\n                                        />\r\n                                        <span className=\"text-sm text-gray-500\">ID: {concursoId}</span>\r\n                                    </div>\r\n                                    <textarea\r\n                                        className=\"border rounded px-3 py-2 w-full min-h-[80px]\"\r\n                                        placeholder={t('descripcion')}\r\n                                        value={concursoTexto}\r\n                                        onChange={e => setConcursoTexto(e.target.value)}\r\n                                    />\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <div className=\"flex flex-col flex-1\">\r\n                                            <label className=\"text-sm mb-1\">{t('fechaInicio')}</label>\r\n                                            <input type=\"date\" className=\"border rounded px-3 py-2\" value={fechaInicio} onChange={e => setFechaInicio(e.target.value)} />\r\n                                        </div>\r\n                                        <div className=\"flex flex-col flex-1\">\r\n                                            <label className=\"text-sm mb-1\">{t('fechaFin')}</label>\r\n                                            <input type=\"date\" className=\"border rounded px-3 py-2\" value={fechaFin} onChange={e => setFechaFin(e.target.value)} />\r\n                                        </div>\r\n                                        <button type=\"submit\" className=\"bg-blue-500 text-white px-4 py-2 rounded font-semibold\">{t('enviar')}</button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                        {/* Gesti칩n de Concursos Finalizados - Solo para docentes */}\r\n                        <div className=\"w-full mt-6 pt-4 border-t border-gray-200\">\r\n                            <h4 className=\"text-lg font-semibold text-center mb-3 text-gray-700\">{t('gestionarConcursosFinalizados')}</h4>\r\n                            <div className=\"flex flex-col gap-3\">\r\n                                <select\r\n                                    className=\"border rounded px-3 py-2 text-sm\"\r\n                                    value={concursoSeleccionado}\r\n                                    onChange={e => setConcursoSeleccionado(e.target.value)}\r\n                                    key={`concurso-select-${refreshKey}`}\r\n                                >\r\n                                    <option value=\"\">{t('seleccionarConcurso')}</option>\r\n                                    {(() => {\r\n                                        const concursosStr = localStorage.getItem(\"concursos\");\r\n                                        const concursosArr = concursosStr ? JSON.parse(concursosStr) : [];\r\n                                        const hoy = new Date();\r\n                                        return concursosArr\r\n                                            .filter((c: any) => {\r\n                                                if (!c.fin) return false;\r\n                                                const fechaFin = new Date(c.fin);\r\n                                                const ahora = new Date();\r\n                                                // Solo mostrar concursos del docente actual que hayan finalizado y sin ganador\r\n                                                return fechaFin < ahora && c.autor === user.nick && !c.ganador;\r\n                                            })\r\n                                            .map((c: any) => (\r\n                                                <option key={c.numero} value={c.numero}>\r\n                                                    {c.titulo} (ID: {c.numero}) - {c.ganador ? `Ganador: ${c.ganador}` : 'Sin ganador'}\r\n                                                </option>\r\n                                            ));\r\n                                    })()}\r\n                                </select>\r\n                                <select\r\n                                    className=\"border rounded px-3 py-2 text-sm\"\r\n                                    value={ganadorSeleccionado}\r\n                                    onChange={e => setGanadorSeleccionado(e.target.value)}\r\n                                >\r\n                                    <option value=\"\">{t('seleccionarGanador')}</option>\r\n                                    {usuarios.sort((a, b) => a.nick.localeCompare(b.nick)).map((u, idx) => (\r\n                                        <option key={idx} value={u.nick}>{u.nick}</option>\r\n                                    ))}\r\n                                </select>\r\n                                <button\r\n                                    className=\"bg-green-500 text-white px-4 py-2 rounded font-semibold text-sm\"\r\n                                    onClick={handleAsignarGanador}\r\n                                    disabled={!concursoSeleccionado || !ganadorSeleccionado}\r\n                                >\r\n                                    {t('asignarGanador')}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"bg-white shadow-lg rounded-lg p-6 flex flex-col gap-4 mt-6\">\r\n                            <h3 className=\"text-xl font-bold text-center mb-2\">Agregar Pregunta - Aprende con Pipo</h3>\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-blue-700 mb-2\">Curso:</label>\r\n                                    <select\r\n                                        value={cursoSeleccionado}\r\n                                        onChange={(e) => setCursoSeleccionado(e.target.value)}\r\n                                        className=\"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                    >\r\n                                        <option value=\"1primaria\">1췈 Primaria</option>\r\n                                        <option value=\"2primaria\">2췈 Primaria</option>\r\n                                        <option value=\"3primaria\">3췈 Primaria</option>\r\n                                        <option value=\"4primaria\">4췈 Primaria</option>\r\n                                        <option value=\"5primaria\">5췈 Primaria</option>\r\n                                        <option value=\"6primaria\">6췈 Primaria</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-blue-700 mb-2\">Asignatura:</label>\r\n                                    <select\r\n                                        value={asignaturaSeleccionada}\r\n                                        onChange={(e) => setAsignaturaSeleccionada(e.target.value)}\r\n                                        className=\"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                    >\r\n                                        <option value=\"campeonato\">Campeonato</option>\r\n                                        <option value=\"general\">General</option>\r\n                                        <option value=\"matematicas\">Matem치ticas</option>\r\n                                        <option value=\"lenguaje\">Lenguaje</option>\r\n                                        <option value=\"literatura\">Literatura</option>\r\n                                        <option value=\"historia\">Historia</option>\r\n                                        <option value=\"geografia\">Geograf칤a</option>\r\n                                        <option value=\"ingles\">Ingl칠s</option>\r\n                                        <option value=\"naturaleza\">Naturaleza</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-blue-700 mb-2\">Pregunta:</label>\r\n                                <textarea\r\n                                    value={pregunta}\r\n                                    onChange={(e) => setPregunta(e.target.value)}\r\n                                    placeholder=\"Escribe la pregunta aqu칤...\"\r\n                                    className=\"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-20 resize-none\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-blue-700 mb-2\">Respuesta:</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={respuesta}\r\n                                    onChange={(e) => setRespuesta(e.target.value)}\r\n                                    placeholder=\"Escribe la respuesta aqu칤...\"\r\n                                    className=\"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"text-center\">\r\n                                <button\r\n                                    onClick={enviarPregunta}\r\n                                    className=\"bg-gradient-to-r from-green-500 to-green-600 text-white px-8 py-3 rounded-lg font-bold hover:shadow-lg transform hover:scale-105 transition-all\"\r\n                                >\r\n                                    九 Enviar Pregunta\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"mt-4 p-3 bg-blue-100 border border-blue-300 rounded\">\r\n                                <p className=\"text-sm text-blue-800\">\r\n                                    <strong>游눠 Informaci칩n:</strong> Las preguntas se agregan autom치ticamente al archivo correspondiente\r\n                                    <code className=\"bg-blue-200 px-1 rounded\">{asignaturaSeleccionada}-{cursoSeleccionado}.json</code>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                {/* Panel de administraci칩n y antibullying solo para docentes */}\r\n                {\r\n                    user.tipo && user.tipo.toLowerCase() === \"docente\" && (\r\n                        <div className=\"w-full max-w-6xl mx-auto mt-16 bg-white shadow-lg rounded-lg p-6 flex flex-col items-center\">\r\n                            <div className=\"w-full\">\r\n                                <h3 className=\"text-xl font-bold mb-4 text-center\">{t('panelAdministracion')}</h3>\r\n                                <form className=\"w-full flex flex-col items-center gap-4\" onSubmit={handlePalabraProhibidaSubmit}>\r\n                                    <div className=\"flex w-full max-w-xs items-center gap-2\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            className=\"border rounded px-3 py-2 min-w-[280px] max-w-full\"\r\n                                            placeholder={t('palabraProhibida')}\r\n                                            value={palabraProhibida}\r\n                                            onChange={e => setPalabraProhibida(e.target.value)}\r\n                                        />\r\n                                        <button type=\"submit\" className=\"bg-red-500 text-white px-4 py-2 rounded font-semibold whitespace-nowrap\">Seleccionar</button>\r\n                                    </div>\r\n                                </form>\r\n                                <h4 className=\"text-lg font-semibold mt-6 text-center\">{t('sistemaAntibullying')}</h4>\r\n                                <div className=\"mt-4 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-md text-gray-700 max-w-2xl mx-auto\">\r\n                                    <div className=\"flex flex-row items-start gap-8\">\r\n                                        <div className=\"flex-1\">\r\n                                            <p className=\"font-semibold mb-2\">{t('avisoAntibullying')}</p>\r\n                                            <ol className=\"list-decimal ml-6 space-y-1\">\r\n                                                <li>{t('historiasTerror')}</li>\r\n                                                <li>{t('perdidaLikes')}</li>\r\n                                                <li>{t('mensajesUsuario')}</li>\r\n                                                <li>{t('palabrasProhibidasChat')}</li>\r\n                                                <li>{t('actividadConsecutiva')}</li>\r\n                                            </ol>\r\n                                        </div>\r\n                                        <div className=\"flex flex-col items-center justify-center min-w-[180px]\">\r\n                                            <button\r\n                                                type=\"button\"\r\n                                                className={`relative w-32 h-32 rounded-full font-bold text-white text-lg mb-2 transition-all flex items-center justify-center ${bullyingActivo ? 'bg-red-600 opacity-100 shadow-lg animate-blink' : 'bg-green-600 opacity-40'}`}\r\n                                                disabled={!bullyingActivo}\r\n                                                onClick={handleApagarBullying}\r\n                                            >\r\n                                                {bullyingActivo ? 'Aviso Antibullying' : t('sinPeligro')}\r\n                                                <span className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n                                                    <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 100 100\" className=\"opacity-70\">\r\n                                                        <line x1=\"10\" y1=\"10\" x2=\"90\" y2=\"90\" stroke=\"white\" strokeWidth=\"10\" />\r\n                                                        <line x1=\"90\" y1=\"10\" x2=\"10\" y2=\"90\" stroke=\"white\" strokeWidth=\"10\" />\r\n                                                    </svg>\r\n                                                </span>\r\n                                            </button>\r\n                                            {usuarioBullying && (\r\n                                                <div className=\"text-center text-red-700 font-semibold text-base\">{usuarioBullying}</div>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                }\r\n                {/* Bloque especial para PIPO68(Admin) */}\r\n                {\r\n                    user.nick === \"PIPO68\" && (\r\n                        <div className=\"w-full max-w-2xl mx-auto mt-16 bg-blue-50 border-l-4 border-blue-400 p-2 rounded-md text-blue-700\">\r\n                            <h4 className=\"text-lg font-bold text-center mb-2\">Solo para PIPO68(Admin)</h4>\r\n                            <div className=\"flex flex-col gap-2 items-center\">\r\n                                <label htmlFor=\"admin-user-select\" className=\"font-semibold\">Selecciona usuario:</label>\r\n                                <select\r\n                                    id=\"admin-user-select\"\r\n                                    className=\"border rounded px-3 py-2 w-full max-w-xs\"\r\n                                    value={selectedUser}\r\n                                    onChange={e => setSelectedUser(e.target.value)}\r\n                                >\r\n                                    <option value=\"\">Selecciona un usuario</option>\r\n                                    {usuarios\r\n                                        .filter((u, i, arr) => arr.findIndex(x => x.nick === u.nick) === i)\r\n                                        .sort((a, b) => a.nick.localeCompare(b.nick))\r\n                                        .map((u: any) => (\r\n                                            <option key={u.nick} value={u.nick}>{u.nick}</option>\r\n                                        ))}\r\n                                </select>\r\n                                <div className=\"flex gap-4 mt-1\">\r\n                                    <button\r\n                                        className=\"bg-pink-500 text-white px-4 py-2 rounded font-semibold\"\r\n                                        disabled={!selectedUser}\r\n                                        onClick={() => selectedUser && updateLikes(selectedUser, 1)}\r\n                                    >A침adir like</button>\r\n                                </div>\r\n                                {/* Selector de trofeos para desbloquear */}\r\n                                <div className=\"flex flex-col gap-1 mt-2 w-full max-w-xs\">\r\n                                    <label className=\"font-semibold\">Desbloquear trofeo:</label>\r\n                                    <select\r\n                                        className=\"border-2 border-blue-500 bg-white rounded px-3 py-2\"\r\n                                        value={trofeoSeleccionado}\r\n                                        onChange={e => setTrofeoSeleccionado(e.target.value)}\r\n                                    >\r\n                                        <option value=\"\">Selecciona trofeo</option>\r\n                                        {TROFEOS.map((trofeo, idx) => (\r\n                                            <option key={\"normal-\" + (idx + 1)} value={\"normal-\" + (idx + 1)}>{`Trofeo #${idx + 1} - ${trofeo.texto}`}</option>\r\n                                        ))}\r\n                                        {TROFEOS_PREMIUM.map((trofeo, idx) => (\r\n                                            <option key={\"premium-\" + (idx + 1)} value={\"premium-\" + (idx + 1)}>{`Premium #${idx + 1} - ${trofeo.texto}`}</option>\r\n                                        ))}\r\n                                    </select>\r\n                                    <button\r\n                                        className=\"bg-yellow-500 text-white px-4 py-2 rounded font-semibold mt-1\"\r\n                                        disabled={!selectedUser || trofeoSeleccionado === \"\"}\r\n                                        onClick={() => {\r\n                                            if (trofeoSeleccionado.startsWith(\"normal-\")) {\r\n                                                handleUnlockTrofeo(Number(trofeoSeleccionado.replace(\"normal-\", \"\")) - 1);\r\n                                            } else if (trofeoSeleccionado.startsWith(\"premium-\")) {\r\n                                                handleUnlockTrofeo(24 + Number(trofeoSeleccionado.replace(\"premium-\", \"\")) - 1);\r\n                                            }\r\n                                        }}\r\n                                    >\r\n                                        Desbloquear trofeo\r\n                                    </button>\r\n                                    <button\r\n                                        className=\"bg-red-500 text-white px-4 py-2 rounded font-semibold mt-1\"\r\n                                        disabled={!selectedUser || trofeoSeleccionado === \"\"}\r\n                                        onClick={() => {\r\n                                            if (trofeoSeleccionado.startsWith(\"normal-\")) {\r\n                                                handleLockTrofeo(Number(trofeoSeleccionado.replace(\"normal-\", \"\")) - 1);\r\n                                            } else if (trofeoSeleccionado.startsWith(\"premium-\")) {\r\n                                                handleLockTrofeo(24 + Number(trofeoSeleccionado.replace(\"premium-\", \"\")) - 1);\r\n                                            }\r\n                                        }}\r\n                                    >\r\n                                        Bloquear trofeo\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                }\r\n            </div >\r\n        </>\r\n    );\r\n}\r\n\r\nexport default PerfilUsuario;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}