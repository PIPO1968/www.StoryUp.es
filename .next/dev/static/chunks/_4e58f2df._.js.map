{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/src/app/perfil/avatar/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nconst AvatarSelector: React.FC = () => {\r\n    const router = useRouter();\r\n    const [user, setUser] = useState<any>(null);\r\n    const [selectedAvatar, setSelectedAvatar] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if (typeof window !== \"undefined\") {\r\n            const userStr = localStorage.getItem(\"user\");\r\n            if (userStr) {\r\n                setUser(JSON.parse(userStr));\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    if (!user) return <div>Cargando...</div>;\r\n\r\n    const isPremium = user ? (() => {\r\n        const premiumData = localStorage.getItem(`premium_${user.nick}`);\r\n        if (premiumData) {\r\n            try {\r\n                const data = JSON.parse(premiumData);\r\n                return data.activo === true;\r\n            } catch {\r\n                return false;\r\n            }\r\n        }\r\n        return false;\r\n    })() : false; // Asumir que hay un campo premium\r\n\r\n    const simpleAvatars = [\r\n        '/avatars/simple1.png',\r\n        ...Array.from({ length: 29 }, (_, i) => `/avatars/simple${i + 2}.jpg`)\r\n    ];\r\n    const premiumAvatars = Array.from({ length: 50 }, (_, i) => `/avatars/apremium${i + 1}.jpg`);\r\n\r\n    // Mostrar todos los avatares siempre, pero marcar cuÃ¡les son premium\r\n    const allAvatars = [...simpleAvatars, ...premiumAvatars];\r\n    const premiumAvatarIndices = simpleAvatars.length; // Ãndice donde empiezan los premium\r\n\r\n    const handleSelectAvatar = (avatar: string) => {\r\n        setSelectedAvatar(avatar);\r\n    };\r\n\r\n    const handleSave = () => {\r\n        if (!selectedAvatar) return;\r\n\r\n        // Verificar si el avatar seleccionado es premium y el usuario no es premium\r\n        const isSelectedPremium = premiumAvatars.includes(selectedAvatar);\r\n        if (isSelectedPremium && !isPremium) {\r\n            alert('Este avatar es exclusivo para usuarios Premium. Â¡Hazte Premium para usarlo!');\r\n            return;\r\n        }\r\n\r\n        // Actualizar user\r\n        const updatedUser = { ...user, avatar: selectedAvatar };\r\n        localStorage.setItem(\"user\", JSON.stringify(updatedUser));\r\n        // Actualizar en users array\r\n        const usersStr = localStorage.getItem(\"users\");\r\n        if (usersStr) {\r\n            const users = JSON.parse(usersStr);\r\n            const index = users.findIndex((u: any) => u.nick === user.nick);\r\n            if (index !== -1) {\r\n                users[index] = updatedUser;\r\n                localStorage.setItem(\"users\", JSON.stringify(users));\r\n            }\r\n        }\r\n        alert(\"Avatar actualizado\");\r\n        router.push(\"/perfil\");\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-green-100 flex flex-col items-center pt-8\">\r\n            <h1 className=\"text-3xl font-bold mb-4\">Seleccionar Avatar</h1>\r\n\r\n            {/* Indicador de avatares premium */}\r\n            <div className=\"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg max-w-md\">\r\n                <div className=\"flex items-center gap-2 text-yellow-800\">\r\n                    <span className=\"text-lg\">ðŸ‘‘</span>\r\n                    <span className=\"font-semibold\">Avatares Premium</span>\r\n                </div>\r\n                <p className=\"text-sm text-yellow-700 mt-1\">\r\n                    Los avatares con corona dorada son exclusivos para usuarios Premium.\r\n                    {!isPremium && \" Â¡Hazte Premium para desbloquearlos!\"}\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-5 gap-4 mb-8\">\r\n                {allAvatars.map((avatar, idx) => {\r\n                    const isPremiumAvatar = idx >= premiumAvatarIndices;\r\n                    const canSelect = !isPremiumAvatar || isPremium;\r\n\r\n                    return (\r\n                        <div key={idx} className=\"relative\">\r\n                            <img\r\n                                src={avatar}\r\n                                alt={`Avatar ${idx + 1}${isPremiumAvatar ? ' (Premium)' : ''}`}\r\n                                className={`w-16 h-16 rounded-full border-2 transition-all duration-200 ${!canSelect\r\n                                        ? 'cursor-not-allowed opacity-60 grayscale'\r\n                                        : selectedAvatar === avatar\r\n                                            ? 'border-blue-500 cursor-pointer'\r\n                                            : 'border-gray-300 cursor-pointer hover:border-blue-400'\r\n                                    } ${isPremiumAvatar ? 'ring-2 ring-yellow-400 ring-opacity-50' : ''}`}\r\n                                onClick={() => canSelect && handleSelectAvatar(avatar)}\r\n                                title={isPremiumAvatar && !isPremium ? 'Avatar Premium - Hazte Premium para usarlo' : `Avatar ${idx + 1}`}\r\n                            />\r\n                            {isPremiumAvatar && (\r\n                                <div className=\"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-lg\">\r\n                                    ðŸ‘‘\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n            <button\r\n                className=\"bg-green-500 text-white px-6 py-3 rounded font-semibold\"\r\n                onClick={handleSave}\r\n                disabled={!selectedAvatar}\r\n            >\r\n                Guardar Avatar\r\n            </button>\r\n            <button\r\n                className=\"bg-gray-500 text-white px-6 py-3 rounded font-semibold mt-4\"\r\n                onClick={() => router.push(\"/perfil\")}\r\n            >\r\n                Volver\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AvatarSelector;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/StoryUp.es%20-%20copia%20-%20copia/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}