{"version":3,"sources":["turbopack:///[project]/src/app/centros-competencia/page.tsx","turbopack:///[project]/src/utils/normalizadores.ts"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useTranslation } from '@/utils/i18n';\r\nimport { normalizarValorPremio, normalizarEventoEspecial } from '@/utils/normalizadores';\r\nimport { renderNick } from \"@/utils/renderNick\";\r\nimport trofeos from \"../../data/trofeos.json\";\r\nimport trofeosPremium from \"../../data/trofeos-premium.json\";\r\n\r\ninterface Usuario {\r\n    nick: string;\r\n    nombre: string;\r\n    email: string;\r\n    centro: string;\r\n    curso: string;\r\n    tipo: string;\r\n    fechaInscripcion: string;\r\n    likes: number;\r\n    amigos: string[];\r\n    respuestasAcertadas: number;\r\n    competicionesSuperadas: number;\r\n    concursosGanados: number;\r\n    comentariosRecibidos: number;\r\n    historiasCreadas: number;\r\n    historias?: any[];\r\n    anosEnStoryUp: number;\r\n    trofeos: any[];\r\n}\r\n\r\ninterface CentroStats {\r\n    nombre: string;\r\n    estudiantes: number;\r\n    estudiantesActivos: number; // activos en √∫ltimos 7 d√≠as\r\n    respuestasCorrectas: number;\r\n    concursosGanados: number;\r\n    historiasCreadas: number;\r\n    interaccionesSociales: number; // likes + mensajes + amigos\r\n    diasConsecutivos: number;\r\n    puntajeTotal: number;\r\n    ranking: number;\r\n    medalla: string;\r\n}\r\n\r\nexport default function CentrosCompetencia() {\r\n    const [loading, setLoading] = useState(true);\r\n    const [centros, setCentros] = useState<CentroStats[]>([]);\r\n    const [centrosAnuales, setCentrosAnuales] = useState<CentroStats[]>([]);\r\n    const [miCentro, setMiCentro] = useState<string>(\"\");\r\n    const [filtroMes, setFiltroMes] = useState<string>(\"actual\");\r\n    const [modoVisualizacion, setModoVisualizacion] = useState<\"actual\" | \"historico\" | \"anual\">(\"actual\");\r\n    const [mesSeleccionado, setMesSeleccionado] = useState<string>(\"\");\r\n    const fechaActual = new Date();\r\n    const { t } = useTranslation();\r\n    const [mesesDisponibles, setMesesDisponibles] = useState<string[]>([]);\r\n    const [historialGanadores, setHistorialGanadores] = useState<any[]>([]);\r\n    const [premiosDelMes, setPremiosDelMes] = useState<any[]>([]);\r\n    const [usuario, setUsuario] = useState<Usuario | null>(null);\r\n    const [allUsers, setAllUsers] = useState<Usuario[]>([]);\r\n\r\n    // ‚úÖ MODO VACACIONES: Estados para funcionalidades especiales\r\n    const [modoVacaciones, setModoVacaciones] = useState<boolean>(false);\r\n    const [tipoVacacion, setTipoVacacion] = useState<string>(\"\");\r\n    const [eventoEspecial, setEventoEspecial] = useState<any>(null);\r\n\r\n    // ‚úÖ COMPETENCIAS POR ASIGNATURA: Estados para filtros espec√≠ficos\r\n    const [asignaturaSeleccionada, setAsignaturaSeleccionada] = useState<string>(\"todas\");\r\n    const [hayDatosAsignatura, setHayDatosAsignatura] = useState<boolean>(true);\r\n    const [cursoSeleccionado, setCursoSeleccionado] = useState<string>(\"todos\");\r\n    const asignaturas = [\"todas\", \"Matem√°ticas\", \"Lenguaje\", \"Literatura\", \"Historia\", \"Geograf√≠a\", \"Naturaleza\", \"Ingl√©s\", \"General\"];\r\n    const cursos = [\"todos\", \"1¬∫ Primaria\", \"2¬∫ Primaria\", \"3¬∫ Primaria\", \"4¬∫ Primaria\", \"5¬∫ Primaria\", \"6¬∫ Primaria\"];\r\n\r\n    // Nota: Los datos de asignaturas se almacenan cuando los usuarios responden preguntas\r\n    // Formato: \"{asignatura}_{nickname}\" ‚Üí puntos obtenidos\r\n    // Ejemplo: \"matematicas_PIPO68\" ‚Üí \"45\"\r\n\r\n    // ‚úÖ MODO VACACIONES: Funciones para detectar per√≠odos especiales\r\n    const detectarPeriodoVacaciones = (): { esVacacion: boolean; tipo: string; evento: any } => {\r\n        const ahora = new Date();\r\n        const mes = ahora.getMonth() + 1; // 1-12\r\n        const dia = ahora.getDate();\r\n        const a√±o = ahora.getFullYear();\r\n\r\n        // Per√≠odos de vacaciones escolares en Espa√±a\r\n        const vacaciones = [\r\n            { inicio: { mes: 6, dia: 15 }, fin: { mes: 9, dia: 15 }, tipo: \"Vacaciones de Verano\", emoji: \"üèñÔ∏è\", multiplicador: 1.5 },\r\n            { inicio: { mes: 12, dia: 20 }, fin: { mes: 1, dia: 7 }, tipo: \"Vacaciones de Navidad\", emoji: \"üéÑ\", multiplicador: 1.3 },\r\n            { inicio: { mes: 3, dia: 20 }, fin: { mes: 4, dia: 5 }, tipo: \"Vacaciones de Semana Santa\", emoji: \"üê∞\", multiplicador: 1.2 },\r\n            { inicio: { mes: 10, dia: 31 }, fin: { mes: 11, dia: 2 }, tipo: \"Puente de Halloween\", emoji: \"üéÉ\", multiplicador: 1.1 },\r\n            { inicio: { mes: 12, dia: 6 }, fin: { mes: 12, dia: 8 }, tipo: \"Puente de la Constituci√≥n\", emoji: \"üá™üá∏\", multiplicador: 1.1 }\r\n        ];\r\n\r\n        for (const vacacion of vacaciones) {\r\n            let enPeriodo = false;\r\n\r\n            if (vacacion.inicio.mes === vacacion.fin.mes) {\r\n                // Mismo mes\r\n                enPeriodo = mes === vacacion.inicio.mes && dia >= vacacion.inicio.dia && dia <= vacacion.fin.dia;\r\n            } else if (vacacion.inicio.mes === 12 && vacacion.fin.mes === 1) {\r\n                // Navidad (diciembre-enero)\r\n                enPeriodo = (mes === 12 && dia >= vacacion.inicio.dia) || (mes === 1 && dia <= vacacion.fin.dia);\r\n            } else {\r\n                // Diferentes meses\r\n                enPeriodo = (mes === vacacion.inicio.mes && dia >= vacacion.inicio.dia) ||\r\n                    (mes === vacacion.fin.mes && dia <= vacacion.fin.dia) ||\r\n                    (mes > vacacion.inicio.mes && mes < vacacion.fin.mes);\r\n            }\r\n\r\n            if (enPeriodo) {\r\n                return {\r\n                    esVacacion: true,\r\n                    tipo: vacacion.tipo,\r\n                    evento: {\r\n                        emoji: vacacion.emoji,\r\n                        multiplicador: vacacion.multiplicador,\r\n                        descripcion: `Durante ${vacacion.tipo.toLowerCase()}, ¬°los puntos se multiplican por ${vacacion.multiplicador}!`\r\n                    }\r\n                };\r\n            }\r\n        }\r\n\r\n        return { esVacacion: false, tipo: \"\", evento: null };\r\n    };\r\n\r\n    // ‚úÖ CHALLENGES ESPECIALES: Eventos tem√°ticos por fecha\r\n    const obtenerChallengeActual = (): any => {\r\n        const ahora = new Date();\r\n        const mes = ahora.getMonth() + 1;\r\n        const dia = ahora.getDate();\r\n\r\n        const challenges = [\r\n            { mes: 2, dia: 14, nombre: \"Challenge del Amor\", emoji: \"üíù\", bonus: \"Historias modo 'Coraz√≥n' +3 puntos\" },\r\n            { mes: 4, dia: 23, nombre: \"D√≠a del Libro\", emoji: \"üìö\", bonus: \"Crear cualquier historia +5 puntos extra\" },\r\n            { mes: 5, dia: 15, nombre: \"Challenge de la Familia\", emoji: \"üë®‚Äçüë©‚Äçüëß‚Äçüë¶\", bonus: \"Historias modo 'My Live' +2 puntos\" },\r\n            { mes: 10, dia: 31, nombre: \"Halloween Challenge\", emoji: \"üéÉ\", bonus: \"Historias modo 'Terror' +4 puntos\" },\r\n            { mes: 12, dia: 25, nombre: \"Challenge Navide√±o\", emoji: \"üéÖ\", bonus: \"Historias modo 'My Live' +6 puntos\" }\r\n        ];\r\n\r\n        return challenges.find(ch => ch.mes === mes && dia >= ch.dia - 3 && dia <= ch.dia + 3);\r\n    };\r\n\r\n    // Funci√≥n para calcular si un usuario estuvo activo en los √∫ltimos N d√≠as\r\n    const esUsuarioActivo = (usuario: Usuario, dias: number = 7): boolean => {\r\n        // Simulamos actividad basada en datos del usuario\r\n        // Usuarios con datos recientes se consideran activos\r\n        const tieneActividad = usuario.likes > 0 || usuario.historiasCreadas > 0 || usuario.concursosGanados > 0;\r\n        const tieneAmigos = usuario.amigos && usuario.amigos.length > 0;\r\n        const tieneInteracciones = usuario.comentariosRecibidos > 0;\r\n\r\n        // Un usuario se considera activo si tiene cualquier tipo de actividad\r\n        return tieneActividad || tieneAmigos || tieneInteracciones;\r\n    };\r\n\r\n    // Funci√≥n para obtener actividad de competiciones (campeonato)\r\n    const obtenerActividadCompeticiones = (centro: string): number => {\r\n        if (typeof window === \"undefined\") return 0;\r\n\r\n        try {\r\n            let puntosCompeticion = 0;\r\n\r\n            // Buscar datos de campeonato individual por curso y temporada\r\n            const cursos = ['1primaria', '2primaria', '3primaria', '4primaria', '5primaria', '6primaria'];\r\n            const temporadaActual = new Date().getFullYear();\r\n\r\n            // Datos de estudiantes\r\n            cursos.forEach(curso => {\r\n                const key = `campeonato_individual_t${temporadaActual}`;\r\n                const datos = localStorage.getItem(key);\r\n                if (datos) {\r\n                    try {\r\n                        const campeonato = JSON.parse(datos);\r\n                        // Sumar puntos de usuarios del centro\r\n                        Object.keys(campeonato).forEach(nick => {\r\n                            const userData = localStorage.getItem('users');\r\n                            if (userData) {\r\n                                const usuarios = JSON.parse(userData);\r\n                                const usuario = usuarios.find((u: Usuario) => u.nick.toLowerCase().replace(/\\s+/g, \"\") === nick);\r\n                                if (usuario && usuario.centro === centro) {\r\n                                    const datosUsuario = campeonato[nick];\r\n                                    puntosCompeticion += (Number(datosUsuario.ganados) || 0) * 10;\r\n                                    puntosCompeticion += (Number(datosUsuario.acertadas) || Number(datosUsuario.preguntasAcertadas) || 0) * 2;\r\n                                }\r\n                            }\r\n                        });\r\n                    } catch (e) {\r\n                        // Silent fail: no console logs to keep output clean for real data presentation\r\n                    }\r\n                }\r\n            });\r\n\r\n            // Agregar datos de docentes\r\n            const docentesKey = `campeonato_docentes_t${temporadaActual}`;\r\n            const datosDocentes = localStorage.getItem(docentesKey);\r\n            if (datosDocentes) {\r\n                try {\r\n                    const campeonatoDocentes = JSON.parse(datosDocentes);\r\n                    Object.keys(campeonatoDocentes).forEach(nick => {\r\n                        const userData = localStorage.getItem('users');\r\n                        if (userData) {\r\n                            const usuarios = JSON.parse(userData);\r\n                            const usuario = usuarios.find((u: Usuario) => u.nick.toLowerCase().replace(/\\s+/g, \"\") === nick);\r\n                            if (usuario && usuario.centro === centro && usuario.tipo === \"docente\") {\r\n                                const datosUsuario = campeonatoDocentes[nick];\r\n                                // Los docentes obtienen m√°s puntos por su liderazgo\r\n                                puntosCompeticion += (Number(datosUsuario.ganados) || 0) * 15;\r\n                                puntosCompeticion += (Number(datosUsuario.acertadas) || Number(datosUsuario.preguntasAcertadas) || 0) * 3;\r\n                                puntosCompeticion += (Number(datosUsuario.likes) || 0) * 5; // Bonus por engagement\r\n                            }\r\n                        }\r\n                    });\r\n                } catch (e) {\r\n                    // Silent fail\r\n                }\r\n            }\r\n\r\n            return puntosCompeticion;\r\n        } catch (error) {\r\n            return 0;\r\n        }\r\n    };\r\n\r\n    // ‚úÖ COMPETENCIAS POR ASIGNATURA: Funci√≥n para obtener estad√≠sticas espec√≠ficas\r\n    const obtenerEstadisticasAsignatura = (asignatura: string, usuarios: Usuario[], cursoFiltro?: string): { [centro: string]: number } => {\r\n        if (typeof window === \"undefined\") return {};\r\n\r\n        const estadisticasCentros: { [centro: string]: number } = {};\r\n\r\n        if (asignatura === \"todas\") {\r\n            return {};\r\n        }\r\n\r\n        // Solo buscar datos espec√≠ficos reales por asignatura, no estimaciones\r\n        usuarios.forEach(usuario => {\r\n            if (!usuario.centro) return;\r\n\r\n            // ‚úÖ FILTRAR POR CURSO si se especifica\r\n            if (cursoFiltro && cursoFiltro !== \"todos\" && usuario.curso !== cursoFiltro) {\r\n                return;\r\n            }\r\n\r\n            const centro = usuario.centro;\r\n            if (!estadisticasCentros[centro]) {\r\n                estadisticasCentros[centro] = 0;\r\n            }\r\n\r\n            // Buscar datos espec√≠ficos por asignatura en localStorage\r\n            // Mapear de nombre display a nombre de localStorage\r\n            const mapaAsignaturasInverso: { [key: string]: string } = {\r\n                'Matem√°ticas': 'matematicas',\r\n                'Historia': 'historia',\r\n                'Geograf√≠a': 'geografia',\r\n                'Literatura': 'literatura',\r\n                'Ingl√©s': 'ingles',\r\n                'Naturaleza': 'naturaleza',\r\n                'Lenguaje': 'lenguaje',\r\n                'General': 'general'\r\n            };\r\n\r\n            const asignaturaParaLocalStorage = mapaAsignaturasInverso[asignatura] || asignatura.toLowerCase();\r\n            const claveAsignatura = `${asignaturaParaLocalStorage}_${usuario.nick}`;\r\n            const datosAsignatura = localStorage.getItem(claveAsignatura);\r\n\r\n            if (datosAsignatura && parseInt(datosAsignatura, 10) > 0) {\r\n                // Solo usar datos reales espec√≠ficos de la asignatura\r\n                estadisticasCentros[centro] += parseInt(datosAsignatura, 10);\r\n            }\r\n        });\r\n\r\n        return estadisticasCentros;\r\n    };\r\n\r\n    // Funci√≥n auxiliar - todas las asignaturas tienen la misma dificultad\r\n    const obtenerFactorAsignatura = (asignatura: string): number => {\r\n        // Todas las asignaturas tienen el mismo nivel de dificultad\r\n        return 1.0; // 100% para todas\r\n    };    // Funci√≥n para calcular estad√≠sticas de un centro\r\n    const calcularStatsDelCentro = (nombreCentro: string, usuarios: Usuario[]): CentroStats => {\r\n        // Separar estudiantes y docentes del centro\r\n        const estudiantesDelCentro = usuarios.filter(u =>\r\n            u.centro === nombreCentro && u.tipo !== \"docente\"\r\n        );\r\n\r\n        const docentesDelCentro = usuarios.filter(u =>\r\n            u.centro === nombreCentro && u.tipo === \"docente\"\r\n        );\r\n\r\n        const estudiantesActivos = estudiantesDelCentro.filter(u => esUsuarioActivo(u)).length;\r\n        const docentesActivos = docentesDelCentro.filter(u => esUsuarioActivo(u)).length;\r\n\r\n        let respuestasCorrectas, concursosGanados, historiasCreadas, interaccionesSociales;\r\n\r\n        // ‚úÖ APLICAR FILTRO POR ASIGNATURA SI EST√Å SELECCIONADO\r\n        if (asignaturaSeleccionada !== \"todas\") {\r\n            // Obtener estad√≠sticas espec√≠ficas de la asignatura\r\n            const statsAsignatura = obtenerEstadisticasAsignatura(asignaturaSeleccionada, usuarios, cursoSeleccionado);\r\n            const puntosAsignatura = statsAsignatura[nombreCentro] || 0;\r\n\r\n            // Para asignatura espec√≠fica, usamos los puntos espec√≠ficos obtenidos\r\n            respuestasCorrectas = puntosAsignatura;\r\n\r\n            // Si no hay datos espec√≠ficos, usar datos generales como fallback\r\n            if (puntosAsignatura === 0) {\r\n                const respuestasGenerales = estudiantesDelCentro.reduce((sum, u) => sum + (Number(u.respuestasAcertadas) || 0), 0) +\r\n                    docentesDelCentro.reduce((sum, u) => sum + (Number(u.respuestasAcertadas) || 0), 0);\r\n                respuestasCorrectas = respuestasGenerales;\r\n            }\r\n\r\n            // Para otras m√©tricas, usar los datos reales\r\n            concursosGanados = estudiantesDelCentro.reduce((sum, u) => sum + (Number(u.concursosGanados) || 0), 0) +\r\n                docentesDelCentro.reduce((sum, u) => sum + (Number(u.concursosGanados) || 0), 0);\r\n            historiasCreadas = estudiantesDelCentro.reduce((sum, u) => sum + (Array.isArray(u.historias) ? u.historias.length : (Number(u.historiasCreadas) || 0)), 0) +\r\n                docentesDelCentro.reduce((sum, u) => sum + (Array.isArray(u.historias) ? u.historias.length : (Number(u.historiasCreadas) || 0)), 0);\r\n            interaccionesSociales = estudiantesDelCentro.reduce((sum, u) =>\r\n                sum + (Number(u.likes) || 0) + (u.amigos?.length || 0) + (Number(u.comentariosRecibidos) || 0), 0) +\r\n                docentesDelCentro.reduce((sum, u) =>\r\n                    sum + (Number(u.likes) || 0) + (u.amigos?.length || 0) + (Number(u.comentariosRecibidos) || 0), 0);\r\n        } else {\r\n            // Estad√≠sticas generales (todas las asignaturas)\r\n            const respuestasCorrectasEstudiantes = estudiantesDelCentro.reduce((sum, u) => sum + (Number(u.respuestasAcertadas) || 0), 0);\r\n            const concursosGanadosEstudiantes = estudiantesDelCentro.reduce((sum, u) => sum + (Number(u.concursosGanados) || 0), 0);\r\n            const historiasCreadasEstudiantes = estudiantesDelCentro.reduce((sum, u) => sum + (Array.isArray(u.historias) ? u.historias.length : (Number(u.historiasCreadas) || 0)), 0);\r\n            const interaccionesSocialesEstudiantes = estudiantesDelCentro.reduce((sum, u) =>\r\n                sum + (Number(u.likes) || 0) + (u.amigos?.length || 0) + (Number(u.comentariosRecibidos) || 0), 0);\r\n\r\n            // Estad√≠sticas de docentes  \r\n            const respuestasCorrectasDocentes = docentesDelCentro.reduce((sum, u) => sum + (Number(u.respuestasAcertadas) || 0), 0);\r\n            const concursosGanadosDocentes = docentesDelCentro.reduce((sum, u) => sum + (Number(u.concursosGanados) || 0), 0);\r\n            const historiasCreadasDocentes = docentesDelCentro.reduce((sum, u) => sum + (Array.isArray(u.historias) ? u.historias.length : (Number(u.historiasCreadas) || 0)), 0);\r\n            const interaccionesSocialesDocentes = docentesDelCentro.reduce((sum, u) =>\r\n                sum + (Number(u.likes) || 0) + (u.amigos?.length || 0) + (Number(u.comentariosRecibidos) || 0), 0);\r\n\r\n            // Totales combinados\r\n            respuestasCorrectas = respuestasCorrectasEstudiantes + respuestasCorrectasDocentes;\r\n            concursosGanados = concursosGanadosEstudiantes + concursosGanadosDocentes;\r\n            historiasCreadas = historiasCreadasEstudiantes + historiasCreadasDocentes;\r\n            interaccionesSociales = interaccionesSocialesEstudiantes + interaccionesSocialesDocentes;\r\n        }\r\n\r\n        // Obtener actividad de competiciones (datos reales de campeonatos)\r\n        const puntosCompeticiones = obtenerActividadCompeticiones(nombreCentro);\r\n\r\n        // ‚úÖ PREMIOS: Obtener puntos extra por premios ganados\r\n        const premioCentro = obtenerPremioDelCentro(nombreCentro);\r\n        const puntosPremios = premioCentro ? (Number(premioCentro.puntosExtra) || 0) : 0;\r\n\r\n        // Calcular puntuaci√≥n seg√∫n el sistema propuesto (incluyendo docentes)\r\n        const puntajeTotal =\r\n            (estudiantesActivos * 10) +           // Estudiantes activos\r\n            (docentesActivos * 20) +              // Docentes activos (m√°s valor por liderazgo)\r\n            (respuestasCorrectas * 5) +           // Respuestas correctas (filtradas por asignatura si aplica)\r\n            (concursosGanados * 50) +             // Concursos ganados \r\n            (historiasCreadas * 15) +             // Historias creadas \r\n            (interaccionesSociales * 2) +         // Interacciones sociales \r\n            puntosCompeticiones +                 // Actividad en competiciones\r\n            puntosPremios;                        // Bonus por premios ganados\r\n\r\n        return {\r\n            nombre: nombreCentro,\r\n            estudiantes: estudiantesDelCentro.length + docentesDelCentro.length, // Total de miembros\r\n            estudiantesActivos: estudiantesActivos + docentesActivos, // Total de activos\r\n            respuestasCorrectas,\r\n            concursosGanados,\r\n            historiasCreadas,\r\n            interaccionesSociales,\r\n            diasConsecutivos: 0, // Placeholder por ahora\r\n            // Asegurar que puntajeTotal sea siempre number (evitar NaN por datos mal formateados)\r\n            puntajeTotal: Number(puntajeTotal) || 0,\r\n            ranking: 0, // Se calcular√° despu√©s\r\n            medalla: \"\"\r\n        };\r\n    };\r\n\r\n    // Funci√≥n para obtener el logo/escudo de un centro\r\n    const obtenerLogoCentro = (nombreCentro: string): string => {\r\n        // Validaci√≥n: si nombreCentro es undefined, null o vac√≠o, devolver logo por defecto\r\n        if (!nombreCentro || typeof nombreCentro !== 'string') {\r\n            return \"logo-pipo.jpg\";\r\n        }\r\n\r\n        // Mapeo de nombres de centros a archivos de imagen\r\n        const logosDisponibles: { [key: string]: string } = {\r\n            \"Aguere\": \"Aguere.jpg\",\r\n            \"Angeles Bermejo\": \"Angeles Bermejo.jpg\",\r\n            \"Aregume\": \"Aregume.jpg\",\r\n            \"Buen Consejo\": \"Buen Consejo.png\",\r\n            \"Camino La Villa\": \"Camino La Villa.jpg\",\r\n            \"Camino Largo\": \"Camino Largo.jpg\",\r\n            \"Casa Azul\": \"Casa Azul.png\",\r\n            \"Chamberi\": \"Chamberi.png\",\r\n            \"Chayofa\": \"Chayofa.png\",\r\n            \"Cisneros Alter\": \"Cisneros Alter.jpg\",\r\n            \"Colegio Cervantes\": \"Colegio Cervantes.jpg\",\r\n            \"Costa Adeje I\": \"Costa Adeje I..jpg\",\r\n            \"Cuesta 25 de Julio\": \"Cuesta 25 de Julio.jpg\",\r\n            \"Dominguez Alfonso\": \"Dominguez Alfonso.jpg\",\r\n            \"Echeyde Arona\": \"Echeyde Arona.png\",\r\n            \"Echeyde La Laguna\": \"Echeyde La Laguna.png\",\r\n            \"El Monte\": \"El Monte.png\",\r\n            \"Escuela Rural\": \"Escuela Rural.png\",\r\n            \"Escuelas Pias\": \"Escuelas Pias.jpg\",\r\n            \"Gobierno de Canarias\": \"Gobierno de Canarias (Educacion).jpg\",\r\n            \"Hispano La Salud\": \"Hispano La Salud.png\",\r\n            \"La Cuesta B.N\": \"La Cuesta B.N.jpg\",\r\n            \"La Higuerita\": \"La Higuerita.jpg\",\r\n            \"La Rosa\": \"La Rosa.png\",\r\n            \"La Salle\": \"La Salle.png\",\r\n            \"La Vega\": \"La Vega.jpg\",\r\n            \"La Verdellada\": \"La Verdellada.jpg\",\r\n            \"Los Alisios\": \"Los Alisios.jpg\",\r\n            \"Los Menceyes\": \"Los Menceyes.jpg\",\r\n            \"Luis Alvarez Cruz\": \"Luis Alvarez Cruz.jpg\",\r\n            \"Luther King\": \"Luther King.jpg\",\r\n            \"Mayex\": \"Mayex.jpg\",\r\n            \"Montessori\": \"Montessori.png\",\r\n            \"Nuryana\": \"Nuryana.jpg\",\r\n            \"Punta Larga\": \"Punta Larga.jpg\",\r\n            \"Pureza de Maria\": \"Pureza de Maria.png\",\r\n            \"Ravelo\": \"Ravelo.jpg\",\r\n            \"Rodriguez Alberto\": \"Rodriguez Alberto.jpg\",\r\n            \"Rodriguez Campos\": \"Rodriguez Campos.png\",\r\n            \"Saint Andrew's\": \"Saint Andrew,s.jpg\",\r\n            \"Salesianas\": \"Salesianas.jpg\",\r\n            \"San Agustin\": \"San Agustin.jpg\",\r\n            \"San Fernando\": \"San Fernando.jpg\",\r\n            \"San Isidro\": \"San Isidro.jpg\",\r\n            \"San Pablo\": \"San Pablo.png\",\r\n            \"Santa Catalina de Siena\": \"Santa Catalina de Siena.jpg\",\r\n            \"Santa Cruz de California\": \"Santa Cruz de California.jpg\",\r\n            \"Santa Maria del Mar\": \"Santa Maria del Mar.jpg\",\r\n            \"Santa Rosa de Lima\": \"Santa Rosa de Lima.jpg\",\r\n            \"Tacoronte\": \"Tacoronte.jpg\",\r\n            \"Tagoror\": \"Tagoror.jpg\",\r\n            \"Teofilo Perez\": \"Teofilo Perez.png\",\r\n            \"Tincer\": \"Tincer.jpg\",\r\n            \"Virgen de Fatima\": \"Virgen de Fatima.jpg\",\r\n            \"Virgen del Mar\": \"Virgen del Mar.png\"\r\n        };\r\n\r\n        // Buscar coincidencia exacta\r\n        if (logosDisponibles[nombreCentro]) {\r\n            return logosDisponibles[nombreCentro];\r\n        }\r\n\r\n        // Buscar coincidencia parcial (por si el nombre est√° ligeramente diferente)\r\n        // Validaci√≥n adicional antes de usar toLowerCase()\r\n        if (typeof nombreCentro !== 'string' || !nombreCentro) {\r\n            return \"logo-pipo.jpg\";\r\n        }\r\n\r\n        const nombreLimpio = nombreCentro.toLowerCase().trim();\r\n        for (const [nombre, archivo] of Object.entries(logosDisponibles)) {\r\n            if (nombreLimpio.includes(nombre.toLowerCase()) || nombre.toLowerCase().includes(nombreLimpio)) {\r\n                return archivo;\r\n            }\r\n        }\r\n\r\n        // Si no encuentra imagen espec√≠fica, usar logo por defecto\r\n        return \"logo-pipo.jpg\"; // Fallback al logo de la aplicaci√≥n\r\n    };\r\n\r\n    // Funci√≥n auxiliar para verificar si es una imagen o emoji\r\n    const esImagen = (logo: string): boolean => {\r\n        return logo.includes('.jpg') || logo.includes('.png') || logo.includes('.jpeg');\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para obtener premios del mes actual\r\n    const obtenerPremiosDelMes = (): any[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        const fechaActual = new Date();\r\n        const a√±oActual = fechaActual.getFullYear();\r\n        const mesActual = fechaActual.getMonth() + 1; // 1-12\r\n\r\n        // Clave para premios del mes actual\r\n        const clavePremiosActual = `premios_mensuales_${a√±oActual}_${mesActual.toString().padStart(2, '0')}`;\r\n\r\n        // Calcular mes anterior\r\n        let mesAnterior = mesActual - 1;\r\n        let a√±oAnterior = a√±oActual;\r\n        if (mesAnterior === 0) {\r\n            mesAnterior = 12;\r\n            a√±oAnterior = a√±oActual - 1;\r\n        }\r\n        const clavePremiosAnterior = `premios_mensuales_${a√±oAnterior}_${mesAnterior.toString().padStart(2, '0')}`;\r\n\r\n        // Si es un nuevo mes y no hay premios para el mes anterior, generarlos\r\n        if (!localStorage.getItem(clavePremiosAnterior)) {\r\n            const premiosGenerados = generarPremiosAutomaticos(mesAnterior, a√±oAnterior);\r\n            if (premiosGenerados.length > 0) {\r\n                try {\r\n                    localStorage.setItem(clavePremiosActual, JSON.stringify(premiosGenerados));\r\n                } catch (e) {\r\n                    // Silent fail\r\n                }\r\n            }\r\n        }\r\n\r\n        // Devolver premios del mes actual (que ser√°n los del mes anterior si acabamos de generarlos)\r\n        const premiosGuardados = localStorage.getItem(clavePremiosActual);\r\n        if (premiosGuardados) {\r\n            try {\r\n                const parsed = JSON.parse(premiosGuardados);\r\n\r\n                // Normalizar premios (evitar que el campo `premio` sea un objeto)\r\n                const normalized = parsed.map((p: any) => {\r\n                    const prem = p?.premio;\r\n                    if (typeof prem === 'object' && prem !== null) {\r\n                        const fallback = normalizarValorPremio(prem);\r\n                        return { ...p, premio: fallback };\r\n                    }\r\n                    return p;\r\n                });\r\n\r\n                const needsMigration = normalized.some((p: any, idx: number) => typeof parsed[idx]?.premio === 'object' && parsed[idx]?.premio !== null);\r\n                if (needsMigration && !localStorage.getItem(`${clavePremiosActual}_migrated_v1`)) {\r\n                    try {\r\n                        localStorage.setItem(clavePremiosActual, JSON.stringify(normalized));\r\n                        localStorage.setItem(`${clavePremiosActual}_migrated_v1`, 'true');\r\n                    } catch (e) {\r\n                        // Silent fail\r\n                    }\r\n                }\r\n\r\n                return normalized;\r\n            } catch (error) {\r\n                // Silent fail\r\n            }\r\n        }\r\n\r\n        return [];\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para generar premios autom√°ticamente\r\n    const generarPremiosAutomaticos = (mes?: number, a√±o?: number): any[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        // Usar mes y a√±o proporcionados, o el actual si no se especifican\r\n        const fechaActual = new Date();\r\n        const mesUsar = mes || (fechaActual.getMonth() + 1);\r\n        const a√±oUsar = a√±o || fechaActual.getFullYear();\r\n\r\n        // Obtener ranking del mes especificado\r\n        const rankingMensual = cargarRankingMensual(a√±oUsar, mesUsar);\r\n\r\n        if (rankingMensual.length === 0) return [];\r\n\r\n        const premios = [\r\n            {\r\n                posicion: 1,\r\n                emoji: \"ü•á\",\r\n                titulo: \"1er lugar\",\r\n                premio: \"Trofeo digital especial\",\r\n                descripcion: \"Trofeo exclusivo del mes + 100 puntos extra\",\r\n                centro: rankingMensual[0]?.nombre || \"\",\r\n                puntosExtra: 100\r\n            },\r\n            {\r\n                posicion: 2,\r\n                emoji: \"ü•à\",\r\n                titulo: \"2do lugar\",\r\n                premio: \"Certificado de honor\",\r\n                descripcion: \"Certificado digital de excelencia\",\r\n                centro: rankingMensual[1]?.nombre || \"\",\r\n                puntosExtra: 50\r\n            },\r\n            {\r\n                posicion: 3,\r\n                emoji: \"ü•â\",\r\n                titulo: \"3er lugar\",\r\n                premio: \"Menci√≥n especial\",\r\n                descripcion: \"Menci√≥n honor√≠fica en el ranking\",\r\n                centro: rankingMensual[2]?.nombre || \"\",\r\n                puntosExtra: 25\r\n            }\r\n        ];\r\n\r\n        // Agregar premios para Top 10\r\n        for (let i = 3; i < Math.min(10, rankingMensual.length); i++) {\r\n            premios.push({\r\n                posicion: i + 1,\r\n                emoji: \"üèÜ\",\r\n                titulo: `Top ${i + 1}`,\r\n                premio: \"Badge exclusivo\",\r\n                descripcion: `Badge especial \"Top ${i + 1}\" del mes`,\r\n                centro: rankingMensual[i]?.nombre || \"\",\r\n                puntosExtra: 10\r\n            });\r\n        }\r\n\r\n        // Agregar premios de participaci√≥n para todos los centros con actividad\r\n        rankingMensual.forEach((centro, index) => {\r\n            if (index >= 10) { // Despu√©s del Top 10\r\n                premios.push({\r\n                    posicion: index + 1,\r\n                    emoji: \"üìö\",\r\n                    titulo: \"Participaci√≥n\",\r\n                    premio: \"Reconocimiento\",\r\n                    descripcion: \"Reconocimiento por participaci√≥n activa\",\r\n                    centro: centro.nombre,\r\n                    puntosExtra: 5\r\n                });\r\n            }\r\n        });\r\n\r\n        // Nota: La asignaci√≥n de trofeos se ha movido a la p√°gina de perfil de usuario\r\n        // para que se desbloqueen solo para usuarios individuales de ese centro.\r\n\r\n        return premios;\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para asignar trofeos a usuarios de un centro\r\n    const asignarTrofeoACentro = (nombreCentro: string, idTrofeo: number): void => {\r\n        if (typeof window === \"undefined\") return;\r\n\r\n        try {\r\n            const usersStr = localStorage.getItem(\"users\");\r\n            if (!usersStr) return;\r\n\r\n            const users = JSON.parse(usersStr);\r\n            let usuariosActualizados = false;\r\n\r\n            // Asignar trofeo a todos los usuarios del centro\r\n            users.forEach((user: any) => {\r\n                if (user.centro === nombreCentro) {\r\n                    if (!user.trofeos) {\r\n                        user.trofeos = [];\r\n                    }\r\n                    if (!user.trofeos.includes(idTrofeo)) {\r\n                        user.trofeos.push(idTrofeo);\r\n                        usuariosActualizados = true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (usuariosActualizados) {\r\n                localStorage.setItem(\"users\", JSON.stringify(users));\r\n            }\r\n        } catch (error) {\r\n            // Silent fail\r\n        }\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para verificar si los trofeos ya fueron asignados este mes\r\n    const trofeosYaAsignadosEsteMes = (): boolean => {\r\n        if (typeof window === \"undefined\") return false;\r\n\r\n        const fechaActual = new Date();\r\n        const claveTrofeosAsignados = `trofeos_asignados_${fechaActual.getFullYear()}_${(fechaActual.getMonth() + 1).toString().padStart(2, '0')}`;\r\n\r\n        return localStorage.getItem(claveTrofeosAsignados) === 'true';\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para marcar que los trofeos fueron asignados este mes\r\n    const marcarTrofeosAsignadosEsteMes = (): void => {\r\n        if (typeof window === \"undefined\") return;\r\n\r\n        const fechaActual = new Date();\r\n        const claveTrofeosAsignados = `trofeos_asignados_${fechaActual.getFullYear()}_${(fechaActual.getMonth() + 1).toString().padStart(2, '0')}`;\r\n\r\n        localStorage.setItem(claveTrofeosAsignados, 'true');\r\n    };\r\n\r\n    // ‚úÖ SISTEMA DE PREMIOS: Funci√≥n para verificar si un centro gan√≥ premio\r\n    const obtenerPremioDelCentro = (nombreCentro: string): any => {\r\n        const premiosDelMes = obtenerPremiosDelMes();\r\n        return premiosDelMes.find(premio => premio.centro === nombreCentro);\r\n    };\r\n\r\n    // Normaliza un valor de premio para asegurarnos de devolver siempre una cadena\r\n    // Normalizaci√≥n sustituida por util compartido `normalizarValorPremio` en `src/utils/normalizadores.ts`\r\n\r\n    // Funci√≥n para obtener informaci√≥n del ciclo mensual\r\n    const obtenerInfoCicloMensual = () => {\r\n        const hoy = new Date();\r\n        const a√±oActual = hoy.getFullYear();\r\n        const mesActual = hoy.getMonth(); // 0-11\r\n        const diaActual = hoy.getDate();\r\n\r\n        // Calcular d√≠as restantes hasta fin de mes\r\n        const ultimoDiaDelMes = new Date(a√±oActual, mesActual + 1, 0).getDate();\r\n        const diasRestantes = ultimoDiaDelMes - diaActual + 1;\r\n\r\n        // Calcular progreso del mes\r\n        const progresoDelMes = Math.round((diaActual / ultimoDiaDelMes) * 100);\r\n\r\n        // Pr√≥ximo mes\r\n        const proximoMes = new Date(a√±oActual, mesActual + 1, 1);\r\n        const nombreProximoMes = proximoMes.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' });\r\n\r\n        return {\r\n            diasRestantes,\r\n            progresoDelMes,\r\n            nombreProximoMes\r\n        };\r\n    };\r\n\r\n    // Funci√≥n para generar clave de mes para localStorage\r\n    const generarClaveMes = (a√±o: number, mes: number): string => {\r\n        return `centros_ranking_${a√±o}_${mes.toString().padStart(2, '0')}`;\r\n    };\r\n\r\n    // Funci√≥n para obtener meses disponibles en historial\r\n    const obtenerMesesDisponibles = (): string[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        const meses = [];\r\n        const fechaActual = new Date();\r\n\r\n        // Agregar mes actual\r\n        const mesActual = `${fechaActual.getFullYear()}-${(fechaActual.getMonth() + 1).toString().padStart(2, '0')}`;\r\n        meses.push(mesActual);\r\n\r\n        // Buscar meses anteriores en localStorage\r\n        for (let i = 1; i <= 12; i++) {\r\n            const fecha = new Date(fechaActual);\r\n            fecha.setMonth(fecha.getMonth() - i);\r\n            const claveMes = generarClaveMes(fecha.getFullYear(), fecha.getMonth() + 1);\r\n\r\n            if (localStorage.getItem(claveMes)) {\r\n                const mesString = `${fecha.getFullYear()}-${(fecha.getMonth() + 1).toString().padStart(2, '0')}`;\r\n                meses.push(mesString);\r\n            }\r\n        }\r\n\r\n        return meses;\r\n    };\r\n\r\n    // Funci√≥n para guardar ranking mensual en historial\r\n    const guardarRankingMensual = (centros: CentroStats[]) => {\r\n        if (typeof window === \"undefined\") return;\r\n\r\n        const fechaActual = new Date();\r\n        const claveMes = generarClaveMes(fechaActual.getFullYear(), fechaActual.getMonth() + 1);\r\n\r\n        const datosRanking = {\r\n            fecha: fechaActual.toISOString(),\r\n            a√±o: fechaActual.getFullYear(),\r\n            mes: fechaActual.getMonth() + 1,\r\n            centros: centros,\r\n            ganador: centros[0]?.nombre || \"N/A\"\r\n        };\r\n\r\n        localStorage.setItem(claveMes, JSON.stringify(datosRanking));\r\n    };\r\n\r\n    // Funci√≥n para cargar ranking de un mes espec√≠fico\r\n    const cargarRankingMensual = (a√±o: number, mes: number): CentroStats[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        const claveMes = generarClaveMes(a√±o, mes);\r\n        const datos = localStorage.getItem(claveMes);\r\n\r\n        if (datos) {\r\n            try {\r\n                const ranking = JSON.parse(datos);\r\n                return ranking.centros || [];\r\n            } catch (error) {\r\n                // Silent fail\r\n            }\r\n        }\r\n\r\n        return [];\r\n    };\r\n\r\n    // Funci√≥n para calcular ranking anual acumulativo\r\n    const calcularRankingAnual = (): CentroStats[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        const fechaActual = new Date();\r\n        const a√±oActual = fechaActual.getFullYear();\r\n        const centrosAcumulados: { [nombre: string]: CentroStats } = {};\r\n\r\n        // Sumar puntos de todos los meses del a√±o actual\r\n        for (let mes = 1; mes <= 12; mes++) {\r\n            const rankingMensual = cargarRankingMensual(a√±oActual, mes);\r\n\r\n            rankingMensual.forEach(centro => {\r\n                if (!centrosAcumulados[centro.nombre]) {\r\n                    centrosAcumulados[centro.nombre] = {\r\n                        ...centro,\r\n                        puntajeTotal: 0,\r\n                        ranking: 0\r\n                    };\r\n                }\r\n\r\n                centrosAcumulados[centro.nombre].puntajeTotal += Number(centro.puntajeTotal) || 0;\r\n                centrosAcumulados[centro.nombre].respuestasCorrectas += Number(centro.respuestasCorrectas) || 0;\r\n                centrosAcumulados[centro.nombre].concursosGanados += Number(centro.concursosGanados) || 0;\r\n                centrosAcumulados[centro.nombre].historiasCreadas += Number(centro.historiasCreadas) || 0;\r\n                centrosAcumulados[centro.nombre].interaccionesSociales += Number(centro.interaccionesSociales) || 0;\r\n            });\r\n        }\r\n\r\n        // Convertir a array y ordenar\r\n        const centrosArray = Object.values(centrosAcumulados)\r\n            .sort((a, b) => b.puntajeTotal - a.puntajeTotal);\r\n\r\n        // Asignar medallas y rankings\r\n        return asignarMedallas(centrosArray);\r\n    };\r\n\r\n    // Funci√≥n para obtener historial de ganadores\r\n    const obtenerHistorialGanadores = (): any[] => {\r\n        if (typeof window === \"undefined\") return [];\r\n\r\n        const historial = [];\r\n        const fechaActual = new Date();\r\n\r\n        for (let i = 0; i < 12; i++) {\r\n            const fecha = new Date(fechaActual);\r\n            fecha.setMonth(fecha.getMonth() - i);\r\n\r\n            const rankingMensual = cargarRankingMensual(fecha.getFullYear(), fecha.getMonth() + 1);\r\n\r\n            if (rankingMensual.length > 0 && rankingMensual[0]) {\r\n                const ganador = rankingMensual[0];\r\n                historial.push({\r\n                    a√±o: fecha.getFullYear(),\r\n                    mes: fecha.toLocaleDateString('es-ES', { month: 'long' }),\r\n                    centro: ganador.nombre || \"Centro Desconocido\",\r\n                    puntaje: ganador.puntajeTotal || 0,\r\n                    ranking: 1\r\n                });\r\n            }\r\n        }\r\n\r\n        return historial;\r\n    };\r\n    const asignarMedallas = (centrosOrdenados: CentroStats[]): CentroStats[] => {\r\n        return centrosOrdenados.map((centro, index) => {\r\n            let medalla = \"\";\r\n            if (index === 0) medalla = \"ü•á\";\r\n            else if (index === 1) medalla = \"ü•à\";\r\n            else if (index === 2) medalla = \"ü•â\";\r\n            else if (index < 10) medalla = \"üèÜ\";\r\n            else medalla = \"üìö\";\r\n\r\n            return {\r\n                ...centro,\r\n                ranking: index + 1,\r\n                medalla\r\n            };\r\n        });\r\n    };\r\n\r\n    // Cargar datos y calcular estad√≠sticas\r\n    useEffect(() => {\r\n        const cargarDatos = () => {\r\n            try {\r\n                // Cargar usuario actual\r\n                const userData = localStorage.getItem('currentUser') || localStorage.getItem('user');\r\n                if (userData) {\r\n                    const user = JSON.parse(userData);\r\n                    setUsuario(user);\r\n                    setMiCentro(user.centro || \"\");\r\n                }\r\n\r\n                // Cargar datos hist√≥ricos\r\n                const mesesDisponibles = obtenerMesesDisponibles();\r\n                setMesesDisponibles(mesesDisponibles);\r\n\r\n                const historialGanadores = obtenerHistorialGanadores();\r\n                setHistorialGanadores(historialGanadores);\r\n\r\n                // Cargar todos los usuarios\r\n                const usuariosData = localStorage.getItem('users');\r\n                if (!usuariosData) {\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                const usuarios: Usuario[] = JSON.parse(usuariosData);\r\n                setAllUsers(usuarios);\r\n\r\n                // ‚úÖ VERIFICAR SI HAY DATOS PARA LA ASIGNATURA SELECCIONADA\r\n                if (asignaturaSeleccionada !== \"todas\") {\r\n                    // Verificar si hay datos espec√≠ficos por asignatura\r\n                    const mapaAsignaturasInverso: { [key: string]: string } = {\r\n                        'Matem√°ticas': 'matematicas',\r\n                        'Historia': 'historia',\r\n                        'Geograf√≠a': 'geografia',\r\n                        'Literatura': 'literatura',\r\n                        'Ingl√©s': 'ingles',\r\n                        'Naturaleza': 'naturaleza',\r\n                        'Lenguaje': 'lenguaje',\r\n                        'General': 'general'\r\n                    };\r\n                    const asignaturaParaLocalStorage = mapaAsignaturasInverso[asignaturaSeleccionada] || asignaturaSeleccionada.toLowerCase();\r\n\r\n                    let hayDatosEspecificos = false;\r\n                    for (let i = 0; i < localStorage.length; i++) {\r\n                        const clave = localStorage.key(i);\r\n                        if (clave && clave.startsWith(`${asignaturaParaLocalStorage}_`)) {\r\n                            const valor = localStorage.getItem(clave);\r\n                            if (valor && parseInt(valor, 10) > 0) {\r\n                                hayDatosEspecificos = true;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    setHayDatosAsignatura(hayDatosEspecificos);\r\n                } else {\r\n                    setHayDatosAsignatura(true);\r\n                }\r\n\r\n                // Obtener lista √∫nica de centros\r\n                const centrosUnicos = [...new Set(usuarios\r\n                    .filter(u => u.centro && u.centro.trim() !== \"\")\r\n                    .map(u => u.centro))];\r\n\r\n                // Calcular estad√≠sticas para cada centro\r\n                const statsDeLosCentros = centrosUnicos.map(nombreCentro =>\r\n                    calcularStatsDelCentro(nombreCentro, usuarios)\r\n                );\r\n\r\n                // Ordenar por puntuaci√≥n y asignar medallas\r\n                const centrosOrdenados = statsDeLosCentros\r\n                    .sort((a, b) => b.puntajeTotal - a.puntajeTotal);\r\n\r\n                const centrosConMedallas = asignarMedallas(centrosOrdenados);\r\n\r\n                // Manejar diferentes modos de visualizaci√≥n\r\n                if (modoVisualizacion === 'anual') {\r\n                    const centrosAnuales = calcularRankingAnual();\r\n                    setCentrosAnuales(centrosAnuales);\r\n                } else if (mesSeleccionado && mesesDisponibles.includes(mesSeleccionado)) {\r\n                    // Cargar ranking de mes espec√≠fico\r\n                    // Extraer a√±o y mes del formato \"Enero 2024\"\r\n                    const partes = mesSeleccionado.split(' ');\r\n                    const nombreMes = partes[0];\r\n                    const a√±o = parseInt(partes[1]) || fechaActual.getFullYear();\r\n\r\n                    // Convertir nombre de mes a n√∫mero\r\n                    const mesesNombres = [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\",\r\n                        \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"];\r\n                    const numeroMes = mesesNombres.indexOf(nombreMes) + 1;\r\n\r\n                    if (numeroMes > 0) {\r\n                        const rankingMes = cargarRankingMensual(a√±o, numeroMes);\r\n                        if (rankingMes.length > 0) {\r\n                            setCentros(rankingMes);\r\n                        } else {\r\n                            setCentros(centrosConMedallas);\r\n                        }\r\n                    } else {\r\n                        setCentros(centrosConMedallas);\r\n                    }\r\n                } else {\r\n                    // Mes actual\r\n                    setCentros(centrosConMedallas);\r\n                    // Guardar ranking mensual autom√°ticamente\r\n                    guardarRankingMensual(centrosConMedallas);\r\n                }\r\n\r\n                // Cargar historial de ganadores\r\n                setHistorialGanadores(obtenerHistorialGanadores());\r\n\r\n                // Cargar premios del mes\r\n                setPremiosDelMes(obtenerPremiosDelMes());\r\n\r\n                setLoading(false);\r\n\r\n            } catch (error) {\r\n                // Silent fail\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        cargarDatos();\r\n    }, [modoVisualizacion, mesSeleccionado, asignaturaSeleccionada, cursoSeleccionado]);\r\n\r\n    // ‚úÖ DETECTAR EVENTOS ESPECIALES (vacaciones y challenges) - separado para que se ejecute en el mount\r\n    useEffect(() => {\r\n        // ‚úÖ DETECTAR MODO VACACIONES AUTOM√ÅTICAMENTE\r\n        const periodoVacaciones = detectarPeriodoVacaciones();\r\n        setModoVacaciones(periodoVacaciones.esVacacion);\r\n        setTipoVacacion(periodoVacaciones.tipo);\r\n\r\n        // Normalizamos la estructura de evento para evitar pasar objetos enteros\r\n        // directamente al renderizado (causa el error: Objects are not valid as a React child).\r\n        let eventoNormalizado: any = null;\r\n        if (periodoVacaciones.esVacacion && periodoVacaciones.evento) {\r\n            eventoNormalizado = normalizarEventoEspecial({\r\n                nombre: periodoVacaciones.tipo,\r\n                descripcion: periodoVacaciones.evento.descripcion || \"\",\r\n                emoji: periodoVacaciones.evento.emoji || \"\",\r\n                tipo: \"vacacion\",\r\n                multiplicador: periodoVacaciones.evento.multiplicador || 1\r\n            });\r\n        }\r\n\r\n        // ‚úÖ DETECTAR CHALLENGE ESPECIAL\r\n        const challengeActual = obtenerChallengeActual();\r\n        if (challengeActual && !periodoVacaciones.esVacacion) {\r\n            // Tambi√©n normalizamos el challenge para que tenga campos consistentes\r\n            eventoNormalizado = normalizarEventoEspecial({\r\n                nombre: challengeActual.nombre || \"\",\r\n                descripcion: challengeActual.bonus || \"\",\r\n                emoji: challengeActual.emoji || \"\",\r\n                tipo: \"challenge\"\r\n            });\r\n        }\r\n\r\n        setEventoEspecial(eventoNormalizado);\r\n    }, []); // Sin dependencias para que se ejecute solo en mount\r\n\r\n    // Obtener el centro del usuario actual\r\n    const centroDelUsuario = centros.find(c => c.nombre === miCentro);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 flex items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                    <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4\"></div>\r\n                    <p className=\"text-blue-600 font-semibold\">Cargando competencia entre centros...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 p-8\">\r\n            <div className=\"max-w-7xl mx-auto\">\r\n                {/* Header */}\r\n                <div className=\"text-center mb-8\">\r\n                    <h1 className=\"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-green-600 mb-4\">\r\n                        üè´ {t('leagueTitle')}\r\n                    </h1>\r\n                    <p className=\"text-lg text-gray-700 max-w-2xl mx-auto\">\r\n                        {t('leagueSubtitle')}\r\n                    </p>\r\n                </div>\r\n\r\n                {/* ‚úÖ MODO VACACIONES: Banner especial */}\r\n                {modoVacaciones && eventoEspecial && (\r\n                    <div role=\"status\" aria-live=\"polite\" aria-label={eventoEspecial.nombre || 'Evento especial'} className=\"mb-8 bg-gradient-to-r from-orange-100 to-red-100 border-2 border-orange-300 rounded-xl p-6 shadow-lg animate-pulse\">\r\n                        <div className=\"text-center\">\r\n                            <h2 className=\"text-2xl font-bold text-orange-800 mb-2 flex items-center justify-center gap-2\">\r\n                                {eventoEspecial.emoji} ¬°{tipoVacacion} Activas! {eventoEspecial.emoji}\r\n                            </h2>\r\n                            <p className=\"text-lg text-orange-700 mb-4\">\r\n                                {eventoEspecial.descripcion}\r\n                            </p>\r\n                            <div className=\"bg-white bg-opacity-60 rounded-lg p-4 inline-block\">\r\n                                <p className=\"text-sm font-semibold text-orange-900\">\r\n                                    {eventoEspecial.tipo === 'vacacion' && eventoEspecial.multiplicador && (\r\n                                        <>üöÄ <strong>{t('multiplicadorActivo')}:</strong> x{eventoEspecial.multiplicador}</>\r\n                                    )}\r\n                                </p>\r\n                                <p className=\"text-xs text-orange-900 mt-1\">\r\n                                    Todas las actividades dan puntos extra durante este per√≠odo especial\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* ‚úÖ CHALLENGE ESPECIAL: Banner de evento tem√°tico */}\r\n                {!modoVacaciones && eventoEspecial && eventoEspecial.nombre && (\r\n                    <div role=\"status\" aria-live=\"polite\" aria-label={eventoEspecial.nombre || 'Evento especial'} className=\"mb-8 bg-gradient-to-r from-purple-100 to-pink-100 border-2 border-purple-300 rounded-xl p-6 shadow-lg\">\r\n                        <div className=\"text-center\">\r\n                            <h2 className=\"text-xl font-bold text-purple-800 mb-2 flex items-center justify-center gap-2\">\r\n                                {eventoEspecial.emoji} {eventoEspecial.nombre} {eventoEspecial.emoji}\r\n                            </h2>\r\n                            <p className=\"text-purple-700 font-semibold\">\r\n                                üéÅ <strong>Bonus Especial:</strong> {eventoEspecial.descripcion}\r\n                            </p>\r\n                            <p className=\"text-xs text-purple-700 mt-2\">\r\n                                {t('eventoLimitado')}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Controles de Navegaci√≥n Temporal */}\r\n                <div className=\"mb-8 bg-white rounded-lg shadow-lg border border-gray-200 p-6\">\r\n                    <div className=\"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between\">\r\n                        {/* Selector de Modo */}\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <label className=\"text-sm font-semibold text-gray-700\">Ver datos:</label>\r\n                            <div className=\"flex gap-2\">\r\n                                <button\r\n                                    onClick={() => setModoVisualizacion('actual')}\r\n                                    className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${modoVisualizacion === 'actual'\r\n                                        ? 'bg-blue-600 text-white shadow-lg'\r\n                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                                        }`}\r\n                                >\r\n                                    üìÖ Mes Actual\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setModoVisualizacion('historico')}\r\n                                    className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${modoVisualizacion === 'historico'\r\n                                        ? 'bg-blue-600 text-white shadow-lg'\r\n                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                                        }`}\r\n                                >\r\n                                    üìä Hist√≥rico\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setModoVisualizacion('anual')}\r\n                                    className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${modoVisualizacion === 'anual'\r\n                                        ? 'bg-blue-600 text-white shadow-lg'\r\n                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                                        }`}\r\n                                >\r\n                                    üèÜ Ranking Anual\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* ‚úÖ COMPETENCIAS POR ASIGNATURA: Selector de materia */}\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <label className=\"text-sm font-semibold text-gray-700\">{t('filtrarAsignatura')}</label>\r\n                            <select\r\n                                value={asignaturaSeleccionada}\r\n                                onChange={(e) => setAsignaturaSeleccionada(e.target.value)}\r\n                                className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white\"\r\n                            >\r\n                                <option value=\"todas\">üìö {t('todasAsignaturas')}</option>\r\n                                <option value=\"Matem√°ticas\">üî¢ Matem√°ticas</option>\r\n                                <option value=\"Lenguaje\">üìù Lenguaje</option>\r\n                                <option value=\"Literatura\">üìñ Literatura</option>\r\n                                <option value=\"Historia\">üèõÔ∏è Historia</option>\r\n                                <option value=\"Geograf√≠a\">üó∫Ô∏è Geograf√≠a</option>\r\n                                <option value=\"Naturaleza\">üåø Ciencias Naturales</option>\r\n                                <option value=\"Ingl√©s\">üá¨üáß Ingl√©s</option>\r\n                                <option value=\"General\">üéØ General</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* ‚úÖ FILTRO POR CURSO: Selector de curso */}\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <label className=\"text-sm font-semibold text-gray-700\">{t('filtrarCurso')}</label>\r\n                            <select\r\n                                value={cursoSeleccionado}\r\n                                onChange={(e) => setCursoSeleccionado(e.target.value)}\r\n                                className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white\"\r\n                            >\r\n                                <option value=\"todos\">üë• {t('todosCursos')}</option>\r\n                                <option value=\"1¬∫ Primaria\">1Ô∏è‚É£ 1¬∫ Primaria</option>\r\n                                <option value=\"2¬∫ Primaria\">2Ô∏è‚É£ 2¬∫ Primaria</option>\r\n                                <option value=\"3¬∫ Primaria\">3Ô∏è‚É£ 3¬∫ Primaria</option>\r\n                                <option value=\"4¬∫ Primaria\">4Ô∏è‚É£ 4¬∫ Primaria</option>\r\n                                <option value=\"5¬∫ Primaria\">5Ô∏è‚É£ 5¬∫ Primaria</option>\r\n                                <option value=\"6¬∫ Primaria\">6Ô∏è‚É£ 6¬∫ Primaria</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Selector de Mes (solo en modo hist√≥rico) */}\r\n                        {modoVisualizacion === 'historico' && mesesDisponibles.length > 0 && (\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <label className=\"text-sm font-semibold text-gray-700\">{t('mes')}</label>\r\n                                <select\r\n                                    value={mesSeleccionado}\r\n                                    onChange={(e) => setMesSeleccionado(e.target.value)}\r\n                                    className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                >\r\n                                    <option value=\"\">{t('seleccionarMes')}</option>\r\n                                    {mesesDisponibles.map((mes) => (\r\n                                        <option key={mes} value={mes}>\r\n                                            {mes}\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Indicador del per√≠odo actual */}\r\n                    <div className=\"mt-4 text-center\">\r\n                        {modoVisualizacion === 'actual' && (\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                üìÖ <strong>{t('mostrar')}</strong> {t('competenciaMesActual')} ({fechaActual.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })})\r\n                            </p>\r\n                        )}\r\n                        {modoVisualizacion === 'historico' && mesSeleccionado && (\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                üìä <strong>{t('mostrar')}</strong> {t('resultadosHistoricos')} {mesSeleccionado}\r\n                            </p>\r\n                        )}\r\n                        {modoVisualizacion === 'anual' && (\r\n                            <p className=\"text-sm text-gray-600\">\r\n                                üèÜ <strong>{t('mostrar')}</strong> {t('rankingAnual')} (a√±o {fechaActual.getFullYear()})\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Mi Centro - Destacado */}\r\n                {centroDelUsuario && (\r\n                    <div role=\"region\" aria-labelledby=\"mi-centro-title\" className=\"mb-8 bg-gradient-to-r from-yellow-50 to-orange-50 border-l-4 border-yellow-400 rounded-lg p-6 shadow-lg\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div>\r\n                                <h3 id=\"mi-centro-title\" className=\"text-xl font-bold text-yellow-800 mb-2 flex items-center\" aria-label={t('tuCentro')}>\r\n                                    {esImagen(obtenerLogoCentro(centroDelUsuario.nombre)) ? (\r\n                                        <img\r\n                                            src={`/${obtenerLogoCentro(centroDelUsuario.nombre)}`}\r\n                                            alt={`Logo ${centroDelUsuario.nombre}`}\r\n                                            className=\"w-12 h-12 object-contain rounded-lg border-2 border-yellow-400 mr-3\"\r\n                                        />\r\n                                    ) : (\r\n                                        <span className=\"text-2xl mr-3\">{obtenerLogoCentro(centroDelUsuario.nombre)}</span>\r\n                                    )}\r\n                                    üè† {t('tuCentro')}: {centroDelUsuario.nombre}\r\n                                </h3>\r\n                                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\r\n                                    <div>\r\n                                        <span className=\"font-semibold text-yellow-700\">{t('ranking')}:</span>\r\n                                        <span className=\"ml-2 text-lg\">{centroDelUsuario.medalla} #{centroDelUsuario.ranking}</span>\r\n                                    </div>\r\n                                    <div>\r\n                                        <span className=\"font-semibold text-yellow-700\">{t('puntuacion')}:</span>\r\n                                        <span className=\"ml-2 text-lg font-bold\">{centroDelUsuario.puntajeTotal.toLocaleString()}</span>\r\n                                    </div>\r\n                                    <div>\r\n                                        <span className=\"font-semibold text-yellow-700\">{t('miembros')}:</span>\r\n                                        <span className=\"ml-2\">{centroDelUsuario.estudiantesActivos}/{centroDelUsuario.estudiantes}</span>\r\n                                        <div className=\"text-xs text-yellow-600\">estudiantes + docentes</div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <span className=\"font-semibold text-yellow-700\">{t('concursos')}:</span>\r\n                                        <span className=\"ml-2\">{centroDelUsuario.concursosGanados}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* ‚úÖ PREMIOS DEL CENTRO: Secci√≥n especial para premios ganados */}\r\n                {centroDelUsuario && (() => {\r\n                    const premioCentro = obtenerPremioDelCentro(centroDelUsuario.nombre);\r\n                    return premioCentro ? (\r\n                        <div role=\"region\" aria-labelledby=\"premio-centro-title\" className=\"mb-8 bg-gradient-to-r from-purple-50 to-pink-50 border-l-4 border-purple-400 rounded-lg p-6 shadow-lg\">\r\n                            <div className=\"flex items-center\">\r\n                                <div className=\"text-4xl mr-4\">üéâ</div>\r\n                                <div>\r\n                                    <h3 id=\"premio-centro-title\" className=\"text-xl font-bold text-purple-800 mb-2\">\r\n                                        {t('felicitacionesPremio')}\r\n                                    </h3>\r\n                                    <div className=\"bg-white bg-opacity-60 rounded-lg p-4 inline-block\">\r\n                                        <div className=\"flex items-center mb-2\">\r\n                                            <span className=\"text-2xl mr-2\">{premioCentro.emoji}</span>\r\n                                            <span className=\"font-bold text-purple-800\">{premioCentro.titulo}:</span>\r\n                                            <span className=\"ml-2 text-purple-700\">{normalizarValorPremio(premioCentro.premio)}</span>\r\n                                        </div>\r\n                                        <p className=\"text-sm text-purple-600 mb-2\">{premioCentro.descripcion}</p>\r\n                                        <div className=\"space-y-1\">\r\n                                            <p className=\"text-sm font-semibold text-purple-800\">\r\n                                                üèÜ <strong>{t('bonusObtenido')}:</strong> +{Number(premioCentro.puntosExtra) || 0} puntos extra\r\n                                            </p>\r\n                                            <p className=\"text-sm text-purple-700 bg-purple-100 px-2 py-1 rounded inline-block\">\r\n                                                üèÖ <strong>{t('insigniaAutomatica')}:</strong> {t('premio')}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ) : null;\r\n                })()}\r\n\r\n                {/* ‚úÖ USUARIOS DEL CENTRO: Detalle de respuestas acertadas por usuario */}\r\n                {centroDelUsuario && allUsers.length > 0 && (() => {\r\n                    // Obtener usuarios del centro (case insensitive y trim)\r\n                    const usuariosCentro = allUsers.filter((u: Usuario) =>\r\n                        u.centro && u.centro.trim().toLowerCase() === centroDelUsuario.nombre.trim().toLowerCase()\r\n                    );\r\n\r\n                    if (usuariosCentro.length === 0) return null;\r\n\r\n                    return (\r\n                        <div className=\"mb-8 bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6 shadow-lg\">\r\n                            <h3 className=\"text-xl font-bold text-green-800 mb-4 flex items-center\">\r\n                                üë• Usuarios de {centroDelUsuario.nombre} ({usuariosCentro.length} usuarios)\r\n                            </h3>\r\n                            <div className=\"overflow-x-auto\">\r\n                                <table className=\"w-full bg-white rounded-lg shadow-sm\">\r\n                                    <thead className=\"bg-green-100\">\r\n                                        <tr>\r\n                                            <th className=\"px-4 py-2 text-left text-xs font-medium text-green-700 uppercase tracking-wider\">Usuario</th>\r\n                                            <th className=\"px-4 py-2 text-left text-xs font-medium text-green-700 uppercase tracking-wider\">Respuestas Acertadas</th>\r\n                                            <th className=\"px-4 py-2 text-left text-xs font-medium text-green-700 uppercase tracking-wider\">Historias</th>\r\n                                            <th className=\"px-4 py-2 text-left text-xs font-medium text-green-700 uppercase tracking-wider\">Concursos</th>\r\n                                            <th className=\"px-4 py-2 text-left text-xs font-medium text-green-700 uppercase tracking-wider\">Likes</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody className=\"divide-y divide-gray-200\">\r\n                                        {usuariosCentro.map((usuario: Usuario, index: number) => (\r\n                                            <tr key={usuario.nick} className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\r\n                                                <td className=\"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                                                    {renderNick(usuario.nick)}\r\n                                                </td>\r\n                                                <td className=\"px-4 py-2 whitespace-nowrap text-sm text-gray-900\">\r\n                                                    {Number(usuario.respuestasAcertadas) || 0}\r\n                                                </td>\r\n                                                <td className=\"px-4 py-2 whitespace-nowrap text-sm text-gray-900\">\r\n                                                    {Array.isArray(usuario.historias) ? usuario.historias.length : (Number(usuario.historiasCreadas) || 0)}\r\n                                                </td>\r\n                                                <td className=\"px-4 py-2 whitespace-nowrap text-sm text-gray-900\">\r\n                                                    {Number(usuario.concursosGanados) || 0}\r\n                                                </td>\r\n                                                <td className=\"px-4 py-2 whitespace-nowrap text-sm text-gray-900\">\r\n                                                    {Number(usuario.likes) || 0}\r\n                                                </td>\r\n                                            </tr>\r\n                                        ))}\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })()}                {/* ‚úÖ GR√ÅFICOS DE PROGRESO: Visualizaci√≥n avanzada de estad√≠sticas */}\r\n                <div className=\"mb-8 bg-gradient-to-br from-cyan-50 to-blue-50 border border-cyan-200 rounded-lg p-6 shadow-lg\">\r\n                    <h3 className=\"text-xl font-bold text-cyan-800 mb-6 flex items-center\" role=\"region\" aria-labelledby=\"graficos-title\">\r\n                        <span id=\"graficos-title\">üìä {t('gr√°ficosProgreso')}</span>\r\n                    </h3>\r\n\r\n                    {/* Top 3 Centros con Barras de Progreso */}\r\n                    <div className=\"mb-6\">\r\n                        <h4 className=\"text-lg font-semibold text-cyan-700 mb-4\">üèÜ Top 3 Centros - Barras de Progreso</h4>\r\n                        <div className=\"space-y-4\">\r\n                            {centros.slice(0, 3).map((centro, index) => {\r\n                                const maxPuntos = Number(centros[0]?.puntajeTotal) || 1;\r\n                                const porcentaje = (centro.puntajeTotal / maxPuntos) * 100;\r\n                                const colores = [\"from-yellow-400 to-orange-500\", \"from-gray-400 to-gray-600\", \"from-orange-400 to-red-500\"];\r\n\r\n                                return (\r\n                                    <div key={centro.nombre} className=\"bg-white rounded-lg p-4 shadow-sm\">\r\n                                        <div className=\"flex items-center justify-between mb-2\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <span className=\"text-2xl\">{centro.medalla}</span>\r\n                                                <span className=\"font-bold text-gray-800\">{centro.nombre}</span>\r\n                                            </div>\r\n                                            <span className=\"text-lg font-bold text-cyan-600\">\r\n                                                {centro.puntajeTotal.toLocaleString()} pts\r\n                                            </span>\r\n                                        </div>\r\n\r\n                                        {/* Barra de progreso animada */}\r\n                                        <div className=\"w-full bg-gray-200 rounded-full h-4 overflow-hidden\">\r\n                                            <div\r\n                                                className={`h-full bg-gradient-to-r ${colores[index]} transition-all duration-1000 ease-out rounded-full`}\r\n                                                style={{ width: `${porcentaje}%` }}\r\n                                            ></div>\r\n                                        </div>\r\n                                        <div className=\"text-xs text-gray-600 mt-1\">\r\n                                            {porcentaje.toFixed(1)}% del m√°ximo\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Estad√≠sticas por Asignatura */}\r\n                    {asignaturaSeleccionada !== \"todas\" && (\r\n                        <div className=\"mb-6\">\r\n                            <h4 className=\"text-lg font-semibold text-cyan-700 mb-4\">\r\n                                üìö An√°lisis Espec√≠fico: {asignaturaSeleccionada.charAt(0).toUpperCase() + asignaturaSeleccionada.slice(1)}\r\n                            </h4>\r\n\r\n                            {hayDatosAsignatura ? (\r\n                                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                                    <p className=\"text-sm text-blue-800\">\r\n                                        üîç <strong>Vista filtrada por asignatura:</strong> Mostrando solo actividad relacionada con {asignaturaSeleccionada}\r\n                                    </p>\r\n                                    <p className=\"text-xs text-blue-600 mt-2\">\r\n                                        Los puntos de respuestas correctas corresponden √∫nicamente a preguntas de esta materia espec√≠fica.\r\n                                        Las dem√°s m√©tricas (concursos, historias, interacciones) se muestran proporcionalmente.\r\n                                    </p>\r\n                                    <div className=\"mt-3 text-xs text-blue-500 bg-blue-100 rounded p-2\">\r\n                                        üí° <strong>Tip:</strong> Para ver el rendimiento completo de todos los centros, selecciona \"üìö todas las asignaturas\"\r\n                                    </div>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\r\n                                    <p className=\"text-sm text-orange-800\">\r\n                                        üìä <strong>Sin datos espec√≠ficos:</strong> A√∫n no hay actividad registrada para {asignaturaSeleccionada}\r\n                                    </p>\r\n                                    <p className=\"text-xs text-orange-600 mt-2\">\r\n                                        Los rankings mostrados son estimaciones basadas en el rendimiento general de cada centro.\r\n                                        Los datos reales aparecer√°n cuando los usuarios respondan preguntas de esta materia.\r\n                                    </p>\r\n                                    <div className=\"mt-3 text-xs text-orange-500 bg-orange-100 rounded p-2\">\r\n                                        üéØ <strong>Para generar datos reales:</strong> Los usuarios deben participar en competencias o responder preguntas espec√≠ficas de {asignaturaSeleccionada}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* M√©tricas de Participaci√≥n */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                        <div className=\"bg-white rounded-lg p-4 shadow-sm border-l-4 border-green-500\">\r\n                            <div className=\"text-sm font-semibold text-green-700\">Total de Centros</div>\r\n                            <div className=\"text-2xl font-bold text-green-800\">{centros.length}</div>\r\n                            <div className=\"text-xs text-green-600\">Participando en la liga</div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white rounded-lg p-4 shadow-sm border-l-4 border-blue-500\">\r\n                            <div className=\"text-sm font-semibold text-blue-700\">Puntuaci√≥n Total</div>\r\n                            <div className=\"text-2xl font-bold text-blue-800\">\r\n                                {centros.reduce((total, centro) => total + (Number(centro.puntajeTotal) || 0), 0).toLocaleString()}\r\n                            </div>\r\n                            <div className=\"text-xs text-blue-600\">Puntos acumulados</div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white rounded-lg p-4 shadow-sm border-l-4 border-purple-500\">\r\n                            <div className=\"text-sm font-semibold text-purple-700\">Promedio de Centro</div>\r\n                            <div className=\"text-2xl font-bold text-purple-800\">\r\n                                {Math.round(centros.reduce((total, centro) => total + (Number(centro.puntajeTotal) || 0), 0) / (centros.length || 1)).toLocaleString()}\r\n                            </div>\r\n                            <div className=\"text-xs text-purple-600\">Puntos por centro</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Informaci√≥n del Ciclo Mensual */}\r\n                <div className=\"mb-8 bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-6\">\r\n                    <h3 className=\"text-lg font-bold text-indigo-800 mb-4 flex items-center\">\r\n                        üìÖ Informaci√≥n del Ciclo de Competencia\r\n                    </h3>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                        <div className=\"bg-white rounded-lg p-4 border border-indigo-200\">\r\n                            <div className=\"text-sm text-indigo-600 font-semibold\">Mes Actual</div>\r\n                            <div className=\"text-xl font-bold text-indigo-800\">\r\n                                {new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}\r\n                            </div>\r\n                            <div className=\"text-sm text-indigo-600 mt-1\">\r\n                                Progreso: {obtenerInfoCicloMensual().progresoDelMes}%\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white rounded-lg p-4 border border-orange-200\">\r\n                            <div className=\"text-sm text-orange-600 font-semibold\">D√≠as Restantes</div>\r\n                            <div className=\"text-xl font-bold text-orange-800\">\r\n                                {obtenerInfoCicloMensual().diasRestantes} d√≠as\r\n                            </div>\r\n                            <div className=\"text-sm text-orange-600 mt-1\">\r\n                                Hasta pr√≥ximo ranking\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white rounded-lg p-4 border border-green-200\">\r\n                            <div className=\"text-sm text-green-600 font-semibold\">Pr√≥ximo Ciclo</div>\r\n                            <div className=\"text-xl font-bold text-green-800 text-sm\">\r\n                                {obtenerInfoCicloMensual().nombreProximoMes}\r\n                            </div>\r\n                            <div className=\"text-sm text-green-600 mt-1\">\r\n                                Nuevo ranking mensual\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"mt-4 text-xs text-indigo-600 bg-white rounded p-3 border border-indigo-200\">\r\n                        <strong>üìä Ciclo de Competencia:</strong> Los rankings se actualizan autom√°ticamente cada mes.\r\n                        Los puntos se acumulan desde el d√≠a 1 hasta el √∫ltimo d√≠a del mes, creando una competencia fresca cada 30 d√≠as.\r\n                        <strong> ¬°Cada mes es una nueva oportunidad para que tu centro llegue al primer puesto!</strong>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Sistema de Puntuaci√≥n */}\r\n                <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\r\n                    <h3 className=\"text-xl font-bold text-gray-800 mb-4\">üìä Sistema de Puntuaci√≥n</h3>\r\n                    <div className=\"mb-4 p-3 bg-gradient-to-r from-blue-50 to-green-50 rounded-lg border border-blue-200\">\r\n                        <p className=\"text-sm text-gray-700\">\r\n                            <strong>¬°Novedad!</strong> üéâ Ahora los <strong>docentes tambi√©n participan</strong> en el ranking de su centro.\r\n                            ¬°Profesores y estudiantes trabajando juntos por el √©xito del centro!\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-6 gap-4 text-sm\">\r\n                        <div className=\"bg-blue-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-blue-700\">Estudiantes Activos</div>\r\n                            <div className=\"text-2xl font-bold text-blue-800\">10 pts</div>\r\n                            <div className=\"text-xs text-blue-600\">por estudiante activo</div>\r\n                        </div>\r\n                        <div className=\"bg-indigo-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-indigo-700\">Docentes Activos</div>\r\n                            <div className=\"text-2xl font-bold text-indigo-800\">20 pts</div>\r\n                            <div className=\"text-xs text-indigo-600\">por docente activo</div>\r\n                        </div>\r\n                        <div className=\"bg-green-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-green-700\">Respuestas Correctas</div>\r\n                            <div className=\"text-2xl font-bold text-green-800\">5 pts</div>\r\n                            <div className=\"text-xs text-green-600\">estudiantes + docentes</div>\r\n                        </div>\r\n                        <div className=\"bg-yellow-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-yellow-700\">Concursos Ganados</div>\r\n                            <div className=\"text-2xl font-bold text-yellow-800\">50 pts</div>\r\n                            <div className=\"text-xs text-yellow-600\">estudiantes + docentes</div>\r\n                        </div>\r\n                        <div className=\"bg-purple-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-purple-700\">Historias Creadas</div>\r\n                            <div className=\"text-2xl font-bold text-purple-800\">15 pts</div>\r\n                            <div className=\"text-xs text-purple-600\">estudiantes + docentes</div>\r\n                        </div>\r\n                        <div className=\"bg-pink-50 p-3 rounded\">\r\n                            <div className=\"font-semibold text-pink-700\">Interacciones</div>\r\n                            <div className=\"text-2xl font-bold text-pink-800\">2 pts</div>\r\n                            <div className=\"text-xs text-pink-600\">likes, amigos, comentarios</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Ranking de Centros */}\r\n                <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\r\n                    <div className=\"bg-gradient-to-r from-blue-600 to-green-600 p-6 text-white\">\r\n                        <h3 className=\"text-2xl font-bold\">\r\n                            üèÜ Ranking de Centros Educativos\r\n                            {asignaturaSeleccionada !== \"todas\" && (\r\n                                <span className=\"text-lg font-normal opacity-90 ml-2\">\r\n                                    - {asignaturaSeleccionada.charAt(0).toUpperCase() + asignaturaSeleccionada.slice(1)}\r\n                                    {!hayDatosAsignatura && <span className=\"text-sm\"> (Estimado)</span>}\r\n                                </span>\r\n                            )}\r\n                            {cursoSeleccionado !== \"todos\" && (\r\n                                <span className=\"text-lg font-normal opacity-90 ml-2\">\r\n                                    - {cursoSeleccionado}\r\n                                </span>\r\n                            )}\r\n                        </h3>\r\n                        <p className=\"opacity-90\">\r\n                            {asignaturaSeleccionada === \"todas\" && cursoSeleccionado === \"todos\"\r\n                                ? `Competencia del mes de ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                                : asignaturaSeleccionada !== \"todas\" && cursoSeleccionado === \"todos\"\r\n                                    ? hayDatosAsignatura\r\n                                        ? `Vista espec√≠fica de ${asignaturaSeleccionada} - ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                                        : `Estimaciones para ${asignaturaSeleccionada} (sin datos espec√≠ficos a√∫n) - ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                                    : asignaturaSeleccionada === \"todas\" && cursoSeleccionado !== \"todos\"\r\n                                        ? `Vista espec√≠fica de ${cursoSeleccionado} - ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                                        : hayDatosAsignatura\r\n                                            ? `Vista espec√≠fica de ${asignaturaSeleccionada} (${cursoSeleccionado}) - ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                                            : `Estimaciones para ${asignaturaSeleccionada} (${cursoSeleccionado}) - ${new Date().toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}`\r\n                            }\r\n                        </p>\r\n                        <div className=\"mt-2 text-sm opacity-80\">\r\n                            üìÖ Se actualiza autom√°ticamente cada mes | üîÑ Datos en tiempo real\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"w-full\">\r\n                            <thead className=\"bg-gray-50\">\r\n                                <tr>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Ranking</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Centro</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Puntuaci√≥n</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Miembros</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Activos</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Respuestas</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Concursos</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Historias</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                                {centros.map((centro, index) => (\r\n                                    <tr\r\n                                        key={centro.nombre}\r\n                                        className={`hover:bg-gray-50 ${centro.nombre === miCentro ? 'bg-yellow-50 border-l-4 border-yellow-400' : ''}`}\r\n                                    >\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <div className=\"flex items-center\">\r\n                                                <span className=\"text-2xl mr-2\">{centro.medalla}</span>\r\n                                                <span className=\"text-lg font-bold text-gray-900\">#{centro.ranking}</span>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <div className=\"flex items-center\">\r\n                                                {esImagen(obtenerLogoCentro(centro.nombre)) ? (\r\n                                                    <img\r\n                                                        src={`/${obtenerLogoCentro(centro.nombre)}`}\r\n                                                        alt={`Logo ${centro.nombre}`}\r\n                                                        className=\"w-10 h-10 object-contain rounded-lg border border-gray-300 mr-3\"\r\n                                                    />\r\n                                                ) : (\r\n                                                    <span className=\"text-2xl mr-3\">{obtenerLogoCentro(centro.nombre)}</span>\r\n                                                )}\r\n                                                <div>\r\n                                                    <div className=\"font-medium text-gray-900\">{centro.nombre}</div>\r\n                                                    {centro.nombre === miCentro && (\r\n                                                        <div className=\"text-sm text-yellow-600\">üëà Tu centro</div>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <div className=\"text-2xl font-bold text-blue-600\">\r\n                                                {centro.puntajeTotal.toLocaleString()}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                                            {centro.estudiantes}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <span className=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800\">\r\n                                                {centro.estudiantesActivos}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                            {centro.respuestasCorrectas}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                            {centro.concursosGanados}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                                            {centro.historiasCreadas}\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    {centros.length === 0 && (\r\n                        <div className=\"text-center py-12\">\r\n                            <div className=\"text-gray-400 text-xl mb-4\">üìä</div>\r\n                            <p className=\"text-gray-500\">No hay datos de centros disponibles todav√≠a.</p>\r\n                            <p className=\"text-sm text-gray-400 mt-2\">Los datos aparecer√°n cuando haya actividad de estudiantes.</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Informaci√≥n adicional */}\r\n                <div className=\"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                        <h4 className=\"font-bold text-blue-800 mb-2\">üéØ ¬øC√≥mo Participar?</h4>\r\n                        <ul className=\"text-sm text-blue-700 space-y-1\">\r\n                            <li>‚Ä¢ <strong>Estudiantes y Docentes</strong> pueden participar</li>\r\n                            <li>‚Ä¢ Mantente activo en la plataforma</li>\r\n                            <li>‚Ä¢ Responde preguntas correctamente</li>\r\n                            <li>‚Ä¢ Participa en concursos</li>\r\n                            <li>‚Ä¢ Crea historias interesantes</li>\r\n                            <li>‚Ä¢ Interact√∫a con compa√±eros y profesores</li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                        <h4 className=\"font-bold text-green-800 mb-2\">üèÜ {t('premiosDelMes')}</h4>\r\n                        {premiosDelMes.length > 0 ? (\r\n                            <div className=\"space-y-2\">\r\n                                {premiosDelMes.slice(0, 10).map((premio, index) => (\r\n                                    <div key={index} className={`flex items-center justify-between p-2 rounded ${premio.centro === miCentro ? 'bg-yellow-100 border border-yellow-300' : 'bg-white'\r\n                                        }`}>\r\n                                        <div className=\"flex items-center\">\r\n                                            <span className=\"text-lg mr-2\">{premio.emoji}</span>\r\n                                            <div>\r\n                                                <span className=\"font-medium text-green-800\">{premio.titulo}:</span>\r\n                                                <span className=\"text-green-700 ml-1\">{premio.premio}</span>\r\n                                                {premio.centro === miCentro && (\r\n                                                    <span className=\"text-yellow-600 font-bold ml-2\">üéâ ¬°Tu centro!</span>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"text-right\">\r\n                                            <div className=\"text-sm font-semibold text-green-800\">{premio.centro}</div>\r\n                                            <div className=\"text-xs text-green-600\">+{premio.puntosExtra} pts</div>\r\n                                            <div className=\"text-xs text-green-500\">üèÖ Insignia asignada</div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                                {premiosDelMes.length > 10 && (\r\n                                    <div className=\"text-center text-sm text-green-600 mt-2\">\r\n                                        Y {premiosDelMes.length - 10} premios m√°s de participaci√≥n...\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ) : (\r\n                            <ul className=\"text-sm text-green-700 space-y-1\">\r\n                                <li>ü•á 1er lugar: Trofeo digital especial</li>\r\n                                <li>ü•à 2do lugar: Certificado de honor</li>\r\n                                <li>ü•â 3er lugar: Menci√≥n especial</li>\r\n                                <li>üèÜ Top 10: Badge exclusivo</li>\r\n                                <li>üìö Participaci√≥n: Reconocimiento</li>\r\n                            </ul>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                        <h4 className=\"font-bold text-green-800 mb-2\">‚úÖ Caracter√≠sticas Implementadas</h4>\r\n                        <ul className=\"text-sm text-green-700 space-y-1\">\r\n                            <li>‚úÖ Competencias por asignatura (selector activo)</li>\r\n                            <li>‚úÖ Gr√°ficos de progreso (rankings visuales)</li>\r\n                            <li>‚úÖ Modo vacaciones (detecci√≥n autom√°tica)</li>\r\n                            <li>‚úÖ Challenges especiales (eventos tem√°ticos)</li>\r\n                            <li>‚úÖ Sistema anti-trampa (cursos autom√°ticos)</li>\r\n                            <li>‚úÖ Rankings hist√≥ricos (persistencia completa)</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Ranking Anual - Solo visible en modo anual */}\r\n                {modoVisualizacion === 'anual' && centrosAnuales.length > 0 && (\r\n                    <div className=\"mt-8 bg-gradient-to-br from-amber-50 to-yellow-50 border border-amber-200 rounded-lg p-6 shadow-lg\">\r\n                        <h3 className=\"text-2xl font-bold text-amber-800 mb-6 flex items-center\">\r\n                            üèÜ Ranking Acumulativo Anual {fechaActual.getFullYear()}\r\n                        </h3>\r\n                        <div className=\"grid gap-4\">\r\n                            {centrosAnuales.slice(0, 10).map((centro, index) => (\r\n                                <div key={centro.nombre} className={`flex items-center justify-between p-4 rounded-lg border-2 ${index === 0 ? 'bg-gradient-to-r from-yellow-100 to-amber-100 border-yellow-400' :\r\n                                    index === 1 ? 'bg-gradient-to-r from-gray-100 to-slate-100 border-gray-400' :\r\n                                        index === 2 ? 'bg-gradient-to-r from-orange-100 to-amber-100 border-orange-400' :\r\n                                            'bg-white border-gray-200'\r\n                                    }`}>\r\n                                    <div className=\"flex items-center space-x-4\">\r\n                                        <span className={`text-2xl font-bold ${index === 0 ? 'text-yellow-600' :\r\n                                            index === 1 ? 'text-gray-600' :\r\n                                                index === 2 ? 'text-orange-600' :\r\n                                                    'text-gray-800'\r\n                                            }`}>\r\n                                            #{index + 1}\r\n                                        </span>\r\n                                        {esImagen(obtenerLogoCentro(centro.nombre)) ? (\r\n                                            <img\r\n                                                src={`/${obtenerLogoCentro(centro.nombre)}`}\r\n                                                alt={`Logo ${centro.nombre}`}\r\n                                                className=\"w-12 h-12 object-contain rounded-lg border border-gray-300\"\r\n                                            />\r\n                                        ) : (\r\n                                            <span className=\"text-3xl\">{obtenerLogoCentro(centro.nombre)}</span>\r\n                                        )}\r\n                                        <div>\r\n                                            <h4 className=\"font-bold text-gray-800\">{centro.nombre}</h4>\r\n                                            <p className=\"text-sm text-gray-600\">\r\n                                                Puntuaci√≥n acumulativa: <span className=\"font-semibold\">{centro.puntajeTotal.toLocaleString()}</span>\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"text-right\">\r\n                                        <span className={`text-3xl ${index === 0 ? 'ü•á' :\r\n                                            index === 1 ? 'ü•à' :\r\n                                                index === 2 ? 'ü•â' :\r\n                                                    'üèÖ'\r\n                                            }`}>\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Historial de Ganadores Mensuales */}\r\n                {historialGanadores.length > 0 && (\r\n                    <div className=\"mt-8 bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-6 shadow-lg\">\r\n                        <h3 className=\"text-2xl font-bold text-indigo-800 mb-6 flex items-center\">\r\n                            üìÖ Historial de Ganadores Mensuales\r\n                        </h3>\r\n                        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n                            {historialGanadores.slice(0, 12).map((ganador) => (\r\n                                <div key={`${ganador.mes}-${ganador.a√±o}`} className=\"bg-white rounded-lg border border-indigo-200 p-4 shadow-sm\">\r\n                                    <div className=\"text-center\">\r\n                                        <div className=\"flex justify-center mb-3\">\r\n                                            {esImagen(obtenerLogoCentro(ganador.centro || \"\")) ? (\r\n                                                <img\r\n                                                    src={`/${obtenerLogoCentro(ganador.centro || \"\")}`}\r\n                                                    alt={`Logo ${ganador.centro || \"Centro\"}`}\r\n                                                    className=\"w-16 h-16 object-contain rounded-lg border-2 border-yellow-400\"\r\n                                                />\r\n                                            ) : (\r\n                                                <span className=\"text-4xl\">{obtenerLogoCentro(ganador.centro || \"\")}</span>\r\n                                            )}\r\n                                        </div>\r\n                                        <h4 className=\"font-bold text-gray-800 mb-1\">{ganador.centro || \"Centro Desconocido\"}</h4>\r\n                                        <p className=\"text-sm text-gray-600 mb-2\">\r\n                                            {ganador.mes} {ganador.a√±o}\r\n                                        </p>\r\n                                        <p className=\"text-lg font-semibold text-indigo-600\">\r\n                                            {(ganador.puntaje || 0).toLocaleString()} pts\r\n                                        </p>\r\n                                        <div className=\"text-2xl mt-2\">üèÜ</div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        {historialGanadores.length > 12 && (\r\n                            <div className=\"text-center mt-4\">\r\n                                <p className=\"text-sm text-gray-600\">\r\n                                    Y {historialGanadores.length - 12} ganadores m√°s en el historial...\r\n                                </p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","// Utilidades para normalizar datos que provienen de localStorage o de la API\r\n// Objetivo: evitar renderizar objetos directamente en JSX y mantener consistencia\r\n\r\nexport const normalizarValorPremio = (valor: any): string => {\r\n    if (valor == null) return \"\";\r\n    if (typeof valor === 'string') return valor;\r\n    if (typeof valor === 'number') return String(valor);\r\n    if (typeof valor === 'object') {\r\n        // Preferimos campos legibles: nombre > titulo > descripcion\r\n        // Si no hay ninguno, guardamos JSON como fallback.\r\n        return valor.nombre || valor.titulo || valor.descripcion || JSON.stringify(valor);\r\n    }\r\n    // Guardar algo sensato para otros tipos\r\n    return String(valor);\r\n};\r\n\r\nexport const normalizarEventoEspecial = (evento: any) => {\r\n    if (!evento) return null;\r\n    if (typeof evento === 'string') {\r\n        return { nombre: evento, descripcion: evento, emoji: '', tipo: '' };\r\n    }\r\n\r\n    if (typeof evento === 'object') {\r\n        return {\r\n            nombre: evento.nombre || evento.tipo || '',\r\n            descripcion: evento.descripcion || evento.bonus || '',\r\n            emoji: evento.emoji || '',\r\n            tipo: evento.tipo || '',\r\n            multiplicador: evento.multiplicador || null\r\n        };\r\n    }\r\n\r\n    return null;\r\n};\r\n"],"names":[],"mappings":"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"}