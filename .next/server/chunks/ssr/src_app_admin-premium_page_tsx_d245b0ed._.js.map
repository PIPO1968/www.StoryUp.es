{"version":3,"sources":["turbopack:///[project]/src/app/admin-premium/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n// Interfaces de tipos\r\ninterface SolicitudPago {\r\n    id: string;\r\n    nick: string;\r\n    email: string;\r\n    fechaSolicitud: string;\r\n    estado: 'pendiente' | 'aprobado' | 'rechazado';\r\n    tipo: string;\r\n    precio: number;\r\n    metodoPago: string;\r\n    fechaAprobacion?: string;\r\n    fechaRechazo?: string;\r\n    motivo?: string;\r\n}\r\n\r\ninterface Usuario {\r\n    nick: string;\r\n    email?: string;\r\n    tipo?: string;\r\n}\r\n\r\nexport default function AdminPremium() {\r\n    const [mensaje, setMensaje] = useState<string>(\"\");\r\n    const [solicitudesPendientes, setSolicitudesPendientes] = useState<SolicitudPago[]>([]);\r\n    const [mostrarSolicitudes, setMostrarSolicitudes] = useState<boolean>(false);\r\n    const [usuarioLogueado, setUsuarioLogueado] = useState<Usuario | null>(null);\r\n    const [accesoDenegado, setAccesoDenegado] = useState<boolean>(false);\r\n    const [nick, setNick] = useState<string>(\"\");\r\n\r\n    // Lista de administradores autorizados - Solo PIPO68\r\n    const ADMINS_AUTORIZADOS = ['PIPO68'];\r\n\r\n    useEffect(() => {\r\n        // Verificar si hay usuario logueado via API\r\n        const checkUser = async () => {\r\n            try {\r\n                const response = await fetch('/api/auth/me');\r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    if (data.user) {\r\n                        setUsuarioLogueado(data.user);\r\n                    } else {\r\n                        setAccesoDenegado(true);\r\n                    }\r\n                } else {\r\n                    setAccesoDenegado(true);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error checking user:', error);\r\n                setAccesoDenegado(true);\r\n            }\r\n        };\r\n\r\n        checkUser();\r\n    }, []);\r\n\r\n    // Si no tiene acceso, mostrar p√°gina de error\r\n    if (accesoDenegado) {\r\n        return (\r\n            <div className=\"min-h-screen bg-gradient-to-br from-red-100 to-red-200 flex items-center justify-center p-8\">\r\n                <div className=\"max-w-md mx-auto bg-white rounded-2xl shadow-2xl p-8 text-center\">\r\n                    <div className=\"text-6xl mb-4\">üö´</div>\r\n                    <h1 className=\"text-2xl font-bold text-red-600 mb-4\">\r\n                        Acceso Denegado\r\n                    </h1>\r\n                    <p className=\"text-gray-600 mb-6\">\r\n                        Acceso restringido a esta p√°gina de administraci√≥n.\r\n                    </p>\r\n                    <button\r\n                        onClick={() => window.location.href = '/'}\r\n                        className=\"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-bold transition-all\"\r\n                    >\r\n                        Volver al Inicio\r\n                    </button>\r\n\r\n                    <div className=\"mt-6 p-4 bg-gray-100 rounded-lg text-left\">\r\n                        <p className=\"text-xs text-gray-600\">\r\n                            <strong>Acceso autorizado para usuarios registrados:</strong><br />\r\n                            ‚Ä¢ Administrador: <strong>PIPO68</strong><br />\r\n                            ‚Ä¢ Docentes: Usuarios con tipo \"docente\"<br />\r\n                            URL: <code className=\"bg-gray-200 px-1 rounded\">tudominio.com/admin-premium</code>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Cargar solicitudes pendientes\r\n    const cargarSolicitudes = (): void => {\r\n        try {\r\n            const solicitudes: SolicitudPago[] = JSON.parse(localStorage.getItem('solicitudes_premium') || '[]');\r\n            setSolicitudesPendientes(solicitudes.filter((s: SolicitudPago) => s.estado === 'pendiente'));\r\n            setMostrarSolicitudes(true);\r\n        } catch (error) {\r\n            console.error('Error al cargar solicitudes:', error);\r\n            setMensaje(\"‚ùå Error al cargar solicitudes de pago\");\r\n        }\r\n    };\r\n\r\n    // Aprobar solicitud de pago (activar Premium)\r\n    const aprobarSolicitud = (solicitud: SolicitudPago): void => {\r\n        try {\r\n            // Activar Premium para el usuario\r\n            const fechaExpiracion = new Date();\r\n            fechaExpiracion.setFullYear(fechaExpiracion.getFullYear() + 1);\r\n\r\n            const premiumData = {\r\n                activo: true,\r\n                fechaInicio: new Date().toISOString(),\r\n                expiracion: fechaExpiracion.toISOString(),\r\n                tipo: solicitud.tipo,\r\n                precio: solicitud.precio,\r\n                metodoPago: solicitud.metodoPago,\r\n                activadoPorAdmin: true,\r\n                solicitudId: solicitud.id,\r\n                emailPago: solicitud.email\r\n            };\r\n\r\n            localStorage.setItem(`premium_${solicitud.nick}`, JSON.stringify(premiumData));\r\n\r\n            // Marcar solicitud como aprobada\r\n            const todasSolicitudes: SolicitudPago[] = JSON.parse(localStorage.getItem('solicitudes_premium') || '[]');\r\n            const solicitudIndex = todasSolicitudes.findIndex((s: SolicitudPago) => s.id === solicitud.id);\r\n            if (solicitudIndex !== -1) {\r\n                todasSolicitudes[solicitudIndex].estado = 'aprobado';\r\n                todasSolicitudes[solicitudIndex].fechaAprobacion = new Date().toISOString();\r\n                localStorage.setItem('solicitudes_premium', JSON.stringify(todasSolicitudes));\r\n            }\r\n\r\n            setMensaje(`üéâ Premium activado para ${solicitud.nick} tras verificar pago de ‚Ç¨${solicitud.precio}`);\r\n            cargarSolicitudes(); // Recargar lista\r\n\r\n            // Disparar eventos para actualizar componentes\r\n            window.dispatchEvent(new Event('storage'));\r\n            window.dispatchEvent(new CustomEvent('premiumUpdate', { detail: { nick: solicitud.nick, action: 'add' } }));\r\n\r\n        } catch (error) {\r\n            console.error('Error al aprobar solicitud:', error);\r\n            setMensaje(\"‚ùå Error al aprobar la solicitud\");\r\n        }\r\n    };\r\n\r\n    // Rechazar solicitud\r\n    const rechazarSolicitud = (solicitud: SolicitudPago, motivo: string = 'Pago no verificado'): void => {\r\n        try {\r\n            const todasSolicitudes: SolicitudPago[] = JSON.parse(localStorage.getItem('solicitudes_premium') || '[]');\r\n            const solicitudIndex = todasSolicitudes.findIndex((s: SolicitudPago) => s.id === solicitud.id);\r\n            if (solicitudIndex !== -1) {\r\n                todasSolicitudes[solicitudIndex].estado = 'rechazado';\r\n                todasSolicitudes[solicitudIndex].fechaRechazo = new Date().toISOString();\r\n                todasSolicitudes[solicitudIndex].motivo = motivo;\r\n                localStorage.setItem('solicitudes_premium', JSON.stringify(todasSolicitudes));\r\n            }\r\n\r\n            setMensaje(`‚ùå Solicitud rechazada para ${solicitud.nick}: ${motivo}`);\r\n            cargarSolicitudes(); // Recargar lista\r\n\r\n        } catch (error) {\r\n            console.error('Error al rechazar solicitud:', error);\r\n            setMensaje(\"‚ùå Error al rechazar la solicitud\");\r\n        }\r\n    };\r\n\r\n    // Hacer Premium\r\n    const hacerPremium = async (): Promise<void> => {\r\n        if (!nick.trim()) {\r\n            setMensaje(\"‚ùå Ingresa un nick v√°lido\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch('/api/premium', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ action: 'activate', nick })\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (response.ok) {\r\n                setMensaje(`üéâ ${data.message}`);\r\n            } else {\r\n                setMensaje(`‚ùå ${data.error}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al activar premium:', error);\r\n            setMensaje(\"‚ùå Error al activar Premium\");\r\n        }\r\n    };\r\n\r\n    // Anular Premium\r\n    const anularPremium = async (): Promise<void> => {\r\n        if (!nick.trim()) {\r\n            setMensaje(\"‚ùå Ingresa un nick v√°lido\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch('/api/premium', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ action: 'deactivate', nick })\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (response.ok) {\r\n                setMensaje(`üóëÔ∏è ${data.message}`);\r\n            } else {\r\n                setMensaje(`‚ùå ${data.error}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al anular premium:', error);\r\n            setMensaje(\"‚ùå Error al anular Premium\");\r\n        }\r\n    };\r\n\r\n    const activarPremium = async (): Promise<void> => {\r\n        if (!nick.trim()) {\r\n            setMensaje(\"‚ùå Ingresa un nick v√°lido\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch('/api/premium', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ action: 'activate', nick })\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (response.ok) {\r\n                setMensaje(`üéâ ¬°Premium activado exitosamente para ${nick}!`);\r\n            } else {\r\n                setMensaje(`‚ùå ${data.error}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al activar Premium:', error);\r\n            setMensaje(\"‚ùå Error al activar Premium. Int√©ntalo de nuevo.\");\r\n        }\r\n    };\r\n\r\n    const verificarPremium = async (): Promise<void> => {\r\n        if (!nick.trim()) {\r\n            setMensaje(\"‚ùå Ingresa un nick v√°lido\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch('/api/premium', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ action: 'check', nick })\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (response.ok) {\r\n                if (data.premium) {\r\n                    setMensaje(`‚úÖ ${nick} tiene Premium ACTIVO`);\r\n                } else {\r\n                    setMensaje(`‚ùå ${nick} NO tiene Premium activado`);\r\n                }\r\n            } else {\r\n                setMensaje(`‚ùå ${data.error}`);\r\n            }\r\n        } catch (error) {\r\n            setMensaje(\"‚ùå Error al verificar Premium\");\r\n        }\r\n    };\r\n\r\n    const desactivarPremium = async (): Promise<void> => {\r\n        if (!nick.trim()) {\r\n            setMensaje(\"‚ùå Ingresa un nick v√°lido\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch('/api/premium', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ action: 'deactivate', nick })\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (response.ok) {\r\n                setMensaje(`üóëÔ∏è ${data.message}`);\r\n            } else {\r\n                setMensaje(`‚ùå ${data.error}`);\r\n            }\r\n        } catch (error) {\r\n            setMensaje(\"‚ùå Error al desactivar Premium\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-br from-gray-800 via-gray-900 to-black p-8\">\r\n            <div className=\"max-w-2xl mx-auto\">\r\n                <div className=\"bg-white rounded-2xl shadow-2xl p-8\">\r\n                    <h1 className=\"text-3xl font-bold text-center mb-8 text-gray-800\">\r\n                        üîß Admin Premium\r\n                    </h1>\r\n\r\n                    <div className=\"mb-6\">\r\n                        <label className=\"block text-sm font-bold text-gray-700 mb-2\">\r\n                            Nick del usuario:\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={nick}\r\n                            onChange={(e) => setNick(e.target.value)}\r\n                            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                            placeholder=\"Ej: PIPO68\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n                        <button\r\n                            onClick={activarPremium}\r\n                            className=\"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transform hover:scale-105 transition-all\"\r\n                        >\r\n                            ‚úÖ Activar Premium\r\n                        </button>\r\n\r\n                        <button\r\n                            onClick={anularPremium}\r\n                            className=\"bg-gradient-to-r from-red-500 to-rose-600 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transform hover:scale-105 transition-all\"\r\n                        >\r\n                            üóëÔ∏è Anular Premium\r\n                        </button>\r\n\r\n                        <button\r\n                            onClick={verificarPremium}\r\n                            className=\"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transform hover:scale-105 transition-all\"\r\n                        >\r\n                            üîç Verificar Estado\r\n                        </button>\r\n\r\n                        <button\r\n                            onClick={cargarSolicitudes}\r\n                            className=\"bg-gradient-to-r from-amber-500 to-orange-600 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transform hover:scale-105 transition-all\"\r\n                        >\r\n                            üìã Ver Solicitudes\r\n                        </button>\r\n                    </div>\r\n\r\n                    {mensaje && (\r\n                        <div className={`p-4 rounded-lg ${mensaje.includes('‚úÖ') || mensaje.includes('üéâ')\r\n                            ? 'bg-green-100 border border-green-300 text-green-800'\r\n                            : mensaje.includes('‚ùå')\r\n                                ? 'bg-red-100 border border-red-300 text-red-800'\r\n                                : 'bg-blue-100 border border-blue-300 text-blue-800'\r\n                            }`}>\r\n                            <pre className=\"whitespace-pre-wrap font-semibold\">{mensaje}</pre>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Secci√≥n de solicitudes pendientes */}\r\n                    {mostrarSolicitudes && (\r\n                        <div className=\"mt-8 p-6 bg-gray-50 border border-gray-200 rounded-lg\">\r\n                            <h3 className=\"font-bold text-gray-800 mb-4 flex items-center gap-2\">\r\n                                üìã Solicitudes de Pago Pendientes\r\n                                <span className=\"bg-orange-500 text-white text-xs px-2 py-1 rounded-full\">\r\n                                    {solicitudesPendientes.length}\r\n                                </span>\r\n                            </h3>\r\n\r\n                            {solicitudesPendientes.length === 0 ? (\r\n                                <p className=\"text-gray-500 text-center py-8\">\r\n                                    ‚úÖ No hay solicitudes pendientes\r\n                                </p>\r\n                            ) : (\r\n                                <div className=\"space-y-4\">\r\n                                    {solicitudesPendientes.map((solicitud) => (\r\n                                        <div key={solicitud.id} className=\"bg-white border border-gray-200 rounded-lg p-4\">\r\n                                            <div className=\"flex justify-between items-start mb-3\">\r\n                                                <div className=\"flex-1\">\r\n                                                    <h4 className=\"font-bold text-lg text-gray-800\">{solicitud.nick}</h4>\r\n                                                    <p className=\"text-sm text-gray-600\">{solicitud.email}</p>\r\n                                                    <p className=\"text-xs text-gray-500 mt-1\">\r\n                                                        üìÖ {new Date(solicitud.fechaSolicitud).toLocaleString()}\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div className=\"text-right\">\r\n                                                    <span className=\"bg-blue-100 text-blue-800 text-sm px-3 py-1 rounded-full\">\r\n                                                        {solicitud.metodoPago.toUpperCase()} ‚Ç¨{solicitud.precio}\r\n                                                    </span>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div className=\"flex gap-3\">\r\n                                                <button\r\n                                                    onClick={() => aprobarSolicitud(solicitud)}\r\n                                                    className=\"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-bold text-sm transition-all\"\r\n                                                >\r\n                                                    ‚úÖ Aprobar y Activar Premium\r\n                                                </button>\r\n                                                <button\r\n                                                    onClick={() => rechazarSolicitud(solicitud)}\r\n                                                    className=\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-bold text-sm transition-all\"\r\n                                                >\r\n                                                    ‚ùå Rechazar\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n                        <h3 className=\"font-bold text-yellow-800 mb-2\">üìã Instrucciones:</h3>\r\n                        <ul className=\"text-sm text-yellow-700 space-y-1\">\r\n                            <li><strong>Activar Premium:</strong> Activa Premium por 1 a√±o para cualquier usuario</li>\r\n                            <li><strong>Anular Premium:</strong> Remueve el estado Premium de un usuario</li>\r\n                            <li><strong>Verificar Estado:</strong> Comprueba si un usuario ya tiene Premium activo</li>\r\n                            <li><strong>Ver Solicitudes:</strong> Muestra pagos pendientes de verificaci√≥n</li>\r\n                            <li><strong>Aprobar/Rechazar:</strong> Gestiona las solicitudes tras verificar Bizum</li>\r\n                        </ul>\r\n\r\n                        <div className=\"mt-4 p-3 bg-orange-100 border border-orange-300 rounded\">\r\n                            <p className=\"text-sm text-orange-800\">\r\n                                <strong>üîí Proceso de seguridad:</strong> Ahora los usuarios NO pueden hacerse Premium autom√°ticamente.\r\n                                Deben solicitar y esperar verificaci√≥n manual del pago.\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"mt-4 p-3 bg-blue-100 border border-blue-300 rounded\">\r\n                            <p className=\"text-sm text-blue-800\">\r\n                                <strong>üåê Acceso en servidor:</strong><br />\r\n                                ‚Ä¢ URL: <code className=\"bg-blue-200 px-1 rounded\">tudominio.com/admin-premium</code><br />\r\n                                ‚Ä¢ Protegido por nick de administrador<br />\r\n                                ‚Ä¢ Solo usuario autorizado: <strong>PIPO68</strong>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"mt-6 text-center\">\r\n                        <button\r\n                            onClick={() => window.location.href = '/estadisticas'}\r\n                            className=\"bg-gradient-to-r from-purple-500 to-violet-600 text-white px-8 py-3 rounded-full font-bold hover:shadow-lg transform hover:scale-105 transition-all\"\r\n                        >\r\n                            üìä Ver Estad√≠sticas\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"wDACA,EAAA,EAAA,CAAA,CAAA,OAuBe,SAAS,IACpB,GAAM,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IACzC,CAAC,EAAuB,EAAyB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAkB,EAAE,EAChF,CAAC,EAAoB,EAAsB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAU,GAChE,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAiB,MACjE,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAU,GACxD,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IA8BzC,GAzBA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAEY,AAmBlB,WAlBI,GAAI,CACA,IAAM,EAAW,MAAM,MAAM,gBAC7B,GAAI,EAAS,EAAE,CAAE,CACb,IAAM,EAAO,MAAM,EAAS,IAAI,EAC5B,GAAK,IAAI,CACT,CADW,CACQ,EAAK,IAAI,EAE5B,GAAkB,EAE1B,MACI,CADG,EACe,EAE1B,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,uBAAwB,GACtC,GAAkB,EACtB,EACJ,GAGJ,EAAG,EAAE,EAGD,EACA,MACI,CAAA,EAAA,EAAA,GAAA,AAFY,EAEX,MAAA,CAAI,UAAU,uGACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6EACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,OAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gDAAuC,oBAGrD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8BAAqB,wDAGlC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,IAAM,OAAO,QAAQ,CAAC,IAAI,CAAG,IACtC,UAAU,kGACb,qBAID,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qDACX,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCACT,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,iDAAqD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAA,GAAK,oBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,WAAe,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAA,GAAK,0CACP,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAA,GAAK,QACxC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oCAA2B,0CASxE,IAAM,EAAoB,KACtB,GAAI,CACA,IAAM,EAA+B,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,wBAA0B,MAC/F,EAAyB,EAAY,MAAM,CAAC,AAAC,GAAkC,cAAb,EAAE,MAAM,GAC1E,GAAsB,EAC1B,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,+BAAgC,GAC9C,EAAW,wCACf,CACJ,EA6FM,EAAgB,UAClB,GAAI,CAAC,EAAK,IAAI,GAAI,YACd,EAAW,4BAIf,GAAI,CACA,IAAM,EAAW,MAAM,MAAM,eAAgB,CACzC,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CAAE,OAAQ,kBAAc,CAAK,EACtD,GAEM,EAAO,MAAM,EAAS,IAAI,GAC5B,EAAS,EAAE,CACX,CADa,CACF,CAAC,IAAI,EAAE,EAAK,OAAO,CAAA,CAAE,EAEhC,EAAW,CAAC,EAAE,EAAE,EAAK,KAAK,CAAA,CAAE,CAEpC,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,2BAA4B,GAC1C,EAAW,4BACf,CACJ,EAEM,EAAiB,UACnB,GAAI,CAAC,EAAK,IAAI,GAAI,YACd,EAAW,4BAIf,GAAI,CACA,IAAM,EAAW,MAAM,MAAM,eAAgB,CACzC,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CAAE,OAAQ,gBAAY,CAAK,EACpD,GAEM,EAAO,MAAM,EAAS,IAAI,GAC5B,EAAS,EAAE,CACX,CADa,CACF,CAAC,0CAAuC,EAAE,EAAK,CAAC,CAAC,EAE5D,EAAW,CAAC,EAAE,EAAE,EAAK,KAAK,CAAA,CAAE,CAEpC,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,4BAA6B,GAC3C,EAAW,kDACf,CACJ,EAEM,EAAmB,UACrB,GAAI,CAAC,EAAK,IAAI,GAAI,YACd,EAAW,4BAIf,GAAI,CACA,IAAM,EAAW,MAAM,MAAM,eAAgB,CACzC,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CAAE,OAAQ,aAAS,CAAK,EACjD,GAEM,EAAO,MAAM,EAAS,IAAI,GAC5B,EAAS,EAAE,CACP,CADS,CACJ,OAAO,CACZ,CADc,CACH,CAAC,EAAE,EAAE,EAAK,qBAAqB,CAAC,EAE3C,EAAW,CAAC,EAAE,EAAE,EAAK,0BAA0B,CAAC,EAGpD,EAAW,CAAC,EAAE,EAAE,EAAK,KAAK,CAAA,CAAE,CAEpC,CAAE,MAAO,EAAO,CACZ,EAAW,+BACf,CACJ,EA0BA,MACI,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kFACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gDACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6DAAoD,qBAIlE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACX,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,sDAA6C,sBAG9D,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAQ,EAAE,MAAM,CAAC,KAAK,EACvC,UAAU,4GACV,YAAY,kBAIpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uDACX,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,EACT,UAAU,6JACb,sBAID,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,EACT,UAAU,wJACb,uBAID,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,EACT,UAAU,2JACb,wBAID,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,EACT,UAAU,4JACb,0BAKJ,GACG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,eAAe,EAAE,EAAQ,QAAQ,CAAC,MAAQ,EAAQ,QAAQ,CAAC,MACtE,sDACA,EAAQ,QAAQ,CAAC,KACb,gDACA,mDAAA,CACJ,UACF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CAAqC,MAK3D,GACG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kEACX,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,iEAAuD,oCAEjE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mEACX,EAAsB,MAAM,MAIH,IAAjC,EAAsB,MAAM,CACzB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,0CAAiC,oCAI9C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACV,EAAsB,GAAG,CAAC,AAAC,GACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAuB,UAAU,2DAC9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2CAAmC,EAAU,IAAI,GAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAyB,EAAU,KAAK,GACrD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,uCAA6B,MAClC,IAAI,KAAK,EAAU,cAAc,EAAE,cAAc,SAG7D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,qEACX,EAAU,UAAU,CAAC,WAAW,GAAG,KAAG,EAAU,MAAM,SAKnE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACX,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,IAAM,CAjStC,AAAC,IACtB,GAAI,CAEA,IAAM,EAAkB,IAAI,KAC5B,EAAgB,WAAW,CAAC,EAAgB,WAAW,GAAK,GAE5D,IAAM,EAAc,CAChB,QAAQ,EACR,YAAa,IAAI,OAAO,WAAW,GACnC,WAAY,EAAgB,WAAW,GACvC,KAAM,EAAU,IAAI,CACpB,OAAQ,EAAU,MAAM,CACxB,WAAY,EAAU,UAAU,CAChC,iBAAkB,GAClB,YAAa,EAAU,EAAE,CACzB,UAAW,EAAU,KACzB,AAD8B,EAG9B,aAAa,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAU,IAAI,CAAA,CAAE,CAAE,KAAK,SAAS,CAAC,IAGjE,IAAM,EAAoC,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,wBAA0B,MAC9F,EAAiB,EAAiB,SAAS,CAAE,AAAD,GAAsB,EAAE,EAAE,GAAK,EAAU,EAAE,EACtE,CAAC,GAAG,CAAvB,IACA,CAAgB,CAAC,EAAe,CAAC,MAAM,CAAG,WAC1C,CAAgB,CAAC,EAAe,CAAC,eAAe,CAAG,IAAI,OAAO,WAAW,GACzE,aAAa,OAAO,CAAC,sBAAuB,KAAK,SAAS,CAAC,KAG/D,EAAW,CAAC,yBAAyB,EAAE,EAAU,IAAI,CAAC,yBAAyB,EAAE,EAAU,MAAM,CAAA,CAAE,EACnG,IAGA,OAAO,UAHc,GAGD,CAAC,IAAI,MAAM,GAHO,SAItC,OAAO,aAAa,CAAC,IAAI,YAAY,gBAAiB,CAAE,OAAQ,CAAE,KAAM,EAAU,IAAI,CAAE,OAAQ,KAAM,CAAE,GAE5G,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,8BAA+B,GAC7C,EAAW,kCACf,EACJ,EAyPgF,GAChC,UAAU,4GACb,gCAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,IAAM,CA5PrC,CAAC,EAA0B,EAAiB,oBAAoB,IACtF,GAAI,CACA,IAAM,EAAoC,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,wBAA0B,MAC9F,EAAiB,EAAiB,SAAS,CAAC,AAAC,GAAqB,EAAE,EAAE,GAAK,EAAU,EAAE,EACtE,CAAC,GAAG,CAAvB,IACA,CAAgB,CAAC,EAAe,CAAC,MAAM,CAAG,YAC1C,CAAgB,CAAC,EAAe,CAAC,YAAY,CAAG,IAAI,OAAO,WAAW,GACtE,CAAgB,CAAC,EAAe,CAAC,MAAM,CAAG,EAC1C,aAAa,OAAO,CAAC,sBAAuB,KAAK,SAAS,CAAC,KAG/D,EAAW,CAAC,2BAA2B,EAAE,EAAU,IAAI,CAAC,EAAE,EAAE,EAAA,CAAQ,EACpE,GAEJ,CAAE,MAAO,EAAO,CACZ,QAHqB,AAGb,KAAK,CAAC,WAHwB,oBAGQ,GAC9C,EAAW,mCACf,CACJ,GA0OiF,GACjC,UAAU,wGACb,oBA1BC,EAAU,EAAE,QAqC1C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sEACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0CAAiC,sBAC/C,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,8CACV,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WAAG,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,qBAAyB,sDACrC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WAAG,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,oBAAwB,8CACpC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WAAG,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,sBAA0B,sDACtC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WAAG,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,qBAAyB,+CACrC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WAAG,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,sBAA0B,uDAG1C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mEACX,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,oCACT,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,6BAAiC,8HAKjD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+DACX,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCACT,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,2BAA+B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAA,GAAK,UACtC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oCAA2B,gCAAkC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAA,GAAK,wCACrD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAA,GAAK,8BAChB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,mBAK/C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4BACX,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,IAAM,OAAO,QAAQ,CAAC,IAAI,CAAG,gBACtC,UAAU,+JACb,gCAQzB"}