module.exports=[68384,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.s(["default",0,({userGrade:d,userSchool:e})=>{let[f,g]=c.default.useState(""),[h,i]=c.default.useState(""),[j,k]=c.default.useState(""),[l,m]=c.default.useState(""),[n,o]=c.default.useState([]),[p,q]=c.default.useState(300),[r,s]=c.default.useState(!1),[t,u]=c.default.useState(null),[v,w]=c.default.useState([]);c.default.useEffect(()=>{(async()=>{try{let a=await fetch("/api/auth/me");if(a.ok){let b=await a.json();u(b)}}catch(a){console.error("Error loading user:",a)}})()},[]);let x=async a=>{if(t)try{let b=await fetch("/api/user/update-likes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({likesDelta:a})});if(b.ok){let a=await b.json();u(a),window.dispatchEvent(new Event("profileUpdate"))}}catch(a){console.error("Error updating likes:",a)}},y=async a=>{try{(await fetch("/api/stats/championship",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok||console.error("Error updating championship stats")}catch(a){console.error("Error updating championship stats:",a)}};c.default.useEffect(()=>{if(!f||r)return;if(0===p){s(!0),m("‚è∞ Tiempo agotado. No puedes responder esta pregunta. -3 likes"),x(-3);return}let a=setTimeout(()=>q(p-1),1e3);return()=>clearTimeout(a)},[p,f,r]);let z=[];try{z=a.f({"../questions/campeonato-1primaria.json":{id:()=>5251,module:()=>a.r(5251)},"../questions/campeonato-2primaria.json":{id:()=>31668,module:()=>a.r(31668)},"../questions/campeonato-3primaria.json":{id:()=>85700,module:()=>a.r(85700)},"../questions/campeonato-4primaria.json":{id:()=>8433,module:()=>a.r(8433)},"../questions/campeonato-5primaria.json":{id:()=>59447,module:()=>a.r(59447)},"../questions/campeonato-6primaria.json":{id:()=>6959,module:()=>a.r(6959)}})(`../questions/campeonato-${d}primaria.json`)}catch{z=[]}return(0,b.jsxs)("div",{className:"p-4 bg-yellow-100 rounded-lg",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Modo Campeonato"}),(0,b.jsxs)("p",{children:["Curso seleccionado: ",d,"¬∫ Primaria"]}),(0,b.jsxs)("p",{children:["Centro escolar: ",e||"No especificado"]}),(0,b.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded mt-2",onClick:function(){if(n.length>=25){if(g(""),i(""),m("¬°Has completado las 25 preguntas del campeonato!"),s(!0),t){let a=new Date,b=a.getFullYear();a.getMonth()+1>=10&&(b+=1);let c=`t${b}`,d=v.filter(a=>a.correcta).length,e=v.filter(a=>!a.correcta).length,f=v.reduce((a,b)=>a+(b.likes||0),0);y({nick:t.nick,centro:t.centro,curso:t.curso,temporada:c,acertadas:d,falladas:e,likes:f,ganado:+(d>12),perdido:+(d<=12),tipo:t.tipo}),w([])}return}q(300),s(!1);let a=z.filter(a=>!n.includes(a.pregunta));if(0===a.length){g(""),i(""),m("¬°No hay m√°s preguntas disponibles en el banco!"),s(!0);return}let b=Math.floor(Math.random()*a.length);g(a[b].pregunta),i(a[b].respuesta),k(""),m(""),o([...n,a[b].pregunta])},children:"Generar pregunta de campeonato"}),f&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("div",{className:"font-semibold mb-2",children:f}),(0,b.jsxs)("div",{className:"font-bold text-lg mb-2",children:["‚è∞ Tiempo: ",Math.floor(p/60),":",(p%60).toString().padStart(2,"0")," min"]}),(0,b.jsx)("input",{type:"text",className:"border rounded px-2 py-1 w-full mb-2",value:j,onChange:a=>k(a.target.value),placeholder:"Escribe tu respuesta aqu√≠",disabled:r}),(0,b.jsx)("button",{className:"bg-green-500 text-white px-4 py-2 rounded",onClick:function(){function a(a){return a.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/\s+/g,"").trim()}if(r)return;let b=a(j)===a(h);s(!0);let c=0;b?(m("¬°Correcto! üéâ"),c=p>120?2:1):(m(`Incorrecto. La respuesta era: ${h}`),c=p>120?-1:-2),x(c);let d={pregunta:f,respuestaUsuario:j,respuestaCorrecta:h,correcta:b,tiempo:p,likes:c};w(a=>[...a,d])},disabled:r,children:"Enviar respuesta"}),l&&(0,b.jsx)("div",{className:"mt-2 font-bold",children:l})]}),l&&!f&&(0,b.jsx)("div",{className:"mt-2 font-bold text-red-600",children:l})]})}])},40777,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=["1¬∫ primaria","2¬∫ primaria","3¬∫ primaria","4¬∫ primaria","5¬∫ primaria","6¬∫ primaria"],e=()=>{let[a,e]=(0,c.useState)(!0);return c.default.useEffect(()=>{fetch("/api/auth/me").then(a=>a.json()).then(a=>{a.user&&(window.location.href="/perfil")}).catch(()=>{})},[]),(0,b.jsxs)("div",{className:"max-w-md mx-auto bg-white shadow rounded p-6 mt-8",children:[(0,b.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,b.jsx)("button",{onClick:()=>e(!0),className:a?"font-bold":"",children:"Registro"}),(0,b.jsx)("button",{onClick:()=>e(!1),className:a?"":"font-bold",children:"Login"})]}),a?(0,b.jsxs)("form",{onSubmit:async a=>{a.preventDefault();let b=new FormData(a.target),c={nombre:b.get("nombre"),nick:b.get("nick"),centro:b.get("centro"),curso:b.get("curso"),tipo:b.get("tipo"),email:b.get("email"),password:b.get("password")};try{let a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),b=await a.json();b.error?alert(b.error):window.location.href="/perfil"}catch(a){alert("Error en el registro")}},children:[(0,b.jsx)("input",{type:"text",name:"nombre",placeholder:"Nombre real",className:"w-full mb-2 p-2 border rounded",required:!0}),(0,b.jsx)("input",{type:"text",name:"nick",placeholder:"Nick",className:"w-full mb-2 p-2 border rounded",required:!0}),(0,b.jsxs)("div",{className:"flex mb-2",children:[(0,b.jsx)("span",{className:"mr-2",children:"CEIP:"}),(0,b.jsx)("input",{type:"text",name:"centro",placeholder:"Nombre del centro escolar",className:"flex-1 p-2 border rounded",required:!0})]}),(0,b.jsxs)("select",{name:"curso",className:"w-full mb-2 p-2 border rounded",required:!0,children:[(0,b.jsx)("option",{value:"",children:"Selecciona curso"}),d.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsxs)("div",{className:"w-full mb-2",children:[(0,b.jsx)("label",{className:"block mb-1",children:"Tipo de usuario:"}),(0,b.jsxs)("select",{name:"tipo",className:"w-full p-2 border rounded",required:!0,children:[(0,b.jsx)("option",{value:"",children:"Selecciona tipo"}),(0,b.jsx)("option",{value:"usuario",children:"Usuario"}),(0,b.jsx)("option",{value:"docente",children:"Docente"})]})]}),(0,b.jsx)("input",{type:"email",name:"email",placeholder:"Email",className:"w-full mb-2 p-2 border rounded",required:!0}),(0,b.jsx)("input",{type:"password",name:"password",placeholder:"Contrase√±a",className:"w-full mb-4 p-2 border rounded",required:!0}),(0,b.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded",children:"Registrarse"})]}):(0,b.jsxs)("form",{onSubmit:async a=>{a.preventDefault();let b=new FormData(a.target),c=b.get("email"),d=b.get("password");try{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:d})}),b=await a.json();b.error?alert(b.error):window.location.href="/perfil"}catch(a){alert("Error en el login")}},children:[(0,b.jsx)("input",{type:"email",name:"email",placeholder:"Email",className:"w-full mb-2 p-2 border rounded",required:!0}),(0,b.jsx)("input",{type:"password",name:"password",placeholder:"Contrase√±a",className:"w-full mb-4 p-2 border rounded",required:!0}),(0,b.jsx)("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 rounded",children:"Iniciar sesi√≥n"})]})]})},f=({title:a,description:c})=>(0,b.jsxs)("div",{className:"bg-white rounded shadow p-6 w-96 h-40 flex flex-col items-center justify-center text-center border-2 border-blue-200",children:[(0,b.jsxs)("div",{className:"mb-2 text-4xl",children:["Perfil"===a&&"üë§","Historias"===a&&"üìñ","Crea tu Historia"===a&&"‚úçÔ∏è","Noticias"===a&&"üì∞","Concursos"===a&&"üéâ","Competiciones"===a&&"üèÜ","Estad√≠sticas"===a&&"üìä","Aprende con Pipo"===a&&"üß†"]}),(0,b.jsx)("h3",{className:"font-bold mb-2 text-blue-900 text-lg",children:a}),(0,b.jsx)("p",{className:"text-sm text-gray-700",children:c})]});var g=a.i(68384),h=a.i(44355);function i(){let{t:a}=(0,h.useTranslation)(),d=[],i=["Aguere.jpg","Angeles Bermejo.jpg","Aregume.jpg","Buen Consejo.png","Camino La Villa.jpg","Camino Largo.jpg","Casa Azul.png","Chamberi.png","Chayofa.png","Cisneros Alter.jpg","Colegio Cervantes.jpg","Costa Adeje I..jpg","Cuesta 25 de Julio.jpg","Dominguez Alfonso.jpg","Echeyde Arona.png","Echeyde La Laguna.png","El Monte.png","Escuela Rural.png","Escuelas Pias.jpg","Gobierno de Canarias (Educacion).jpg","Hispano La Salud.png","La Cuesta B.N.jpg","La Higuerita.jpg","La Rosa.png","La Salle.png","La Vega.jpg","La Verdellada.jpg","logo-pipo.jpg","Los Alisios.jpg","Los Menceyes.jpg","Luis Alvarez Cruz.jpg","Luther King.jpg","Mayex.jpg","Montessori.png","Nuryana.jpg","Punta Larga.jpg","Pureza de Maria.png","Ravelo.jpg","Rodriguez Alberto.jpg","Rodriguez Campos.png","avatars/Saint Andrews.jpg","Salesianas.jpg","San Agustin.jpg","San Fernando.jpg","San Isidro.jpg","San Pablo.png","Santa Catalina de Siena.jpg","Santa Cruz de California.jpg","Santa Maria del Mar.jpg","Santa Rosa de Lima.jpg","Tacoronte.jpg","Tagoror.jpg","Teofilo Perez.png","Tincer.jpg","Virgen de Fatima.jpg","Virgen del Mar.png"],j=Math.ceil(i.length/4);for(let a=0;a<j&&d.length<i.length;a++){let b=5+90*a/(j-1);(b<30||b>70)&&d.push({left:`${b}%`,top:"2%"})}for(let a=0;a<j&&d.length<i.length;a++){let b=20+60*a/(j-1);d.push({left:`${b}%`,top:"93%"})}for(let a=0;a<j&&d.length<i.length;a++)d.push({left:"2%",top:`${10+80*a/(j-1)}%`});for(let a=0;a<j&&d.length<i.length;a++)d.push({left:"96%",top:`${10+80*a/(j-1)}%`});let k=[{title:a("perfil"),description:a("perfilDesc")},{title:a("historias"),description:a("historiasDesc")},{title:a("creaTuHistoria"),description:a("creaTuHistoriaDesc")},{title:a("noticias"),description:a("noticiasDesc")},{title:a("concursosHome"),description:a("concursosHomeDesc")},{title:a("competiciones"),description:a("competicionesDesc")},{title:a("estadisticas"),description:a("estadisticasDesc")},{title:a("aprendeConPipo"),description:a("aprendeConPipoDesc")}],[l,m]=c.default.useState(!1);return c.default.useEffect(()=>{m(!1)},[]),(0,b.jsxs)("div",{className:"min-h-[calc(100vh+120px)] bg-green-100 font-sans flex flex-col items-center justify-center relative pb-32",children:[["Aguere.jpg","Angeles Bermejo.jpg","Aregume.jpg","Buen Consejo.png","Camino La Villa.jpg","Camino Largo.jpg","Casa Azul.png","Chamberi.png","Chayofa.png","Cisneros Alter.jpg","Colegio Cervantes.jpg","Costa Adeje I..jpg","Cuesta 25 de Julio.jpg","Dominguez Alfonso.jpg","Echeyde Arona.png","Echeyde La Laguna.png","El Monte.png","Escuela Rural.png","Escuelas Pias.jpg","Gobierno de Canarias (Educacion).jpg","Hispano La Salud.png","La Cuesta B.N.jpg","La Higuerita.jpg","La Rosa.png","La Salle.png","La Vega.jpg","La Verdellada.jpg","logo-pipo.jpg","Los Alisios.jpg","Los Menceyes.jpg","Luis Alvarez Cruz.jpg","Luther King.jpg","Mayex.jpg","Montessori.png","Nuryana.jpg","Punta Larga.jpg","Pureza de Maria.png","Ravelo.jpg","Rodriguez Alberto.jpg","Rodriguez Campos.png","avatars/Saint Andrews.jpg","Salesianas.jpg","San Agustin.jpg","San Fernando.jpg","San Isidro.jpg","San Pablo.png","Santa Catalina de Siena.jpg","Santa Cruz de California.jpg","Santa Maria del Mar.jpg","Santa Rosa de Lima.jpg","Tacoronte.jpg","Tagoror.jpg","Teofilo Perez.png","Tincer.jpg","Virgen de Fatima.jpg","Virgen del Mar.png"].map((a,c)=>{if(c<d.length){let e=d[c];return(0,b.jsx)("img",{src:`/${a}`,alt:a.replace(/\.[a-zA-Z]+$/,""),className:"absolute object-contain rounded-full shadow",style:{width:40,height:40,left:e.left,top:e.top,opacity:.85,zIndex:0}},a)}return null}),(0,b.jsxs)("main",{className:"w-full flex flex-col items-center justify-center max-w-6xl",children:[(0,b.jsxs)("div",{className:"w-full flex flex-col items-center mt-8 mb-2",children:[(0,b.jsxs)("h1",{className:"text-5xl font-extrabold drop-shadow-lg tracking-wide mb-2",style:{letterSpacing:"0.08em"},children:[(0,b.jsx)("span",{className:"text-blue-700",children:"Story"}),(0,b.jsx)("span",{className:"text-red-600",children:"Up"})]}),(0,b.jsx)("p",{className:"text-lg text-gray-700 font-semibold mb-4",children:a("tuRedSocialEscolar")})]}),(0,b.jsxs)("div",{className:"flex w-full justify-center gap-4 mt-4",children:[(0,b.jsx)("div",{className:"flex items-center justify-center w-96",id:"imagen-izquierda",children:(0,b.jsx)("img",{src:"/trofeo3.jpg",alt:"Trofeo 3",className:"w-32 h-32 object-contain rounded-xl shadow-lg"})}),(0,b.jsx)(f,{title:k[1].title,description:k[1].description}),(0,b.jsx)("div",{className:"flex items-center justify-center w-96",id:"imagen-derecha",children:(0,b.jsx)("img",{src:"/trofeo7.jpg",alt:"Trofeo 7",className:"w-32 h-32 object-contain rounded-xl shadow-lg"})})]}),(0,b.jsxs)("div",{className:"flex w-full justify-center gap-4 mt-2",children:[(0,b.jsx)(f,{title:k[3].title,description:k[3].description}),(0,b.jsx)(f,{title:k[4].title,description:k[4].description}),(0,b.jsx)(f,{title:k[5].title,description:k[5].description})]}),(0,b.jsxs)("div",{className:"flex w-full justify-center gap-4 mt-2",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 justify-center",children:[(0,b.jsx)(f,{title:k[0].title,description:k[0].description}),(0,b.jsx)(f,{title:k[2].title,description:k[2].description})]}),(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsx)(e,{})}),(0,b.jsxs)("div",{className:"flex flex-col gap-4 justify-center",children:[(0,b.jsx)(f,{title:k[6].title,description:k[6].description}),(0,b.jsx)(f,{title:k[7].title,description:k[7].description})]})]}),l&&(0,b.jsxs)("div",{className:"flex flex-col items-center mt-4",children:[(0,b.jsx)("h2",{children:"Aprende con Pipo"}),(0,b.jsx)(g.default,{userGrade:6,userSchool:"Centro Escolar Ejemplo"})]})]})]})}a.s(["default",()=>i],40777)}];

//# sourceMappingURL=src_d4bbb689._.js.map