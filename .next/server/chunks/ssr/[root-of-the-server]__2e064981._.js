module.exports=[43285,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/dynamic-access-async-storage.external.js",()=>require("next/dist/server/app-render/dynamic-access-async-storage.external.js"))},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__"},54427,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},88644,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"InvariantError",{enumerable:!0,get:function(){return d}});class d extends Error{constructor(a,b){super(`Invariant: ${a.endsWith(".")?a:a+"."} This is a bug in Next.js.`,b),this.name="InvariantError"}}},51234,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"HandleISRError",{enumerable:!0,get:function(){return e}});let d=a.r(56704).workAsyncStorage;function e({error:a}){if(d){let b=d.getStore();if(b?.isStaticGeneration)throw a&&console.error(a),a}return null}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},40622,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return h}});let d=a.r(87924),e=a.r(51234),f={fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},g={fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"},h=function({error:a}){let b=a?.digest;return(0,d.jsxs)("html",{id:"__next_error__",children:[(0,d.jsx)("head",{}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.HandleISRError,{error:a}),(0,d.jsx)("div",{style:f,children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{style:g,children:["Application error: a ",b?"server":"client","-side exception has occurred while loading ",window.location.hostname," (see the"," ",b?"server logs":"browser console"," for more information)."]}),b?(0,d.jsx)("p",{style:g,children:`Digest: ${b}`}):null]})})]})]})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},25518,a=>{a.v({className:"geist_a71539c9-module__T19VSG__className",variable:"geist_a71539c9-module__T19VSG__variable"})},29269,a=>{a.v({className:"geist_mono_8d43a2aa-module__8Li5zG__className",variable:"geist_mono_8d43a2aa-module__8Li5zG__variable"})},91599,a=>{"use strict";var b=a.i(87924),c=a.i(25518);let d={className:c.default.className,style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"}};null!=c.default.variable&&(d.variable=c.default.variable);var e=a.i(29269);let f={className:e.default.className,style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"}};null!=e.default.variable&&(f.variable=e.default.variable);var g=a.i(72131),h=a.i(44355);let i=()=>{let[a,c]=(0,g.useState)("");(0,g.useEffect)(()=>{let a=()=>{c(new Date().toLocaleString("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,day:"2-digit",month:"2-digit",year:"numeric",timeZone:"Europe/London"}))};a();let b=setInterval(a,1e3);return()=>clearInterval(b)},[]);let{lang:d,setLang:e,t:f}=(0,h.useTranslation)(),[i,j]=(0,g.useState)(null),[k,l]=(0,g.useState)(null),[m,n]=(0,g.useState)(null),[o,p]=(0,g.useState)(!1);return(0,g.useEffect)(()=>{fetch("/api/auth/me").then(a=>a.json()).then(a=>{a.user?(j(a.user),p(a.user.premium||!1),n(1)):n(0)}).catch(()=>{n(0)}),fetch("/api/users").then(a=>a.json()).then(a=>{l(a.length)}).catch(a=>{console.warn("No se pudo cargar la lista de usuarios:",a),l(0)})},[]),(0,b.jsxs)("header",{className:"w-full flex items-center justify-between bg-blue-900 shadow px-6 py-3 text-white",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("img",{src:"/favicon.ico",alt:"Trofeo principal",className:"h-10 w-10"}),null!==k&&null!==m?(0,b.jsxs)("span",{children:[f("usuarios"),": ",(0,b.jsx)("span",{id:"registered-users",children:k})," | ",f("online"),": ",(0,b.jsx)("span",{id:"online-users",children:m})]}):(0,b.jsx)("span",{children:f("cargandoUsuarios")}),i&&(0,b.jsxs)("span",{className:"ml-4 font-bold flex items-center gap-2",children:["ðŸ‘¤ ",i.nick,o&&(0,b.jsx)("span",{className:"bg-gradient-to-r from-sky-100 to-blue-100 text-amber-900 text-xs px-2 py-1 rounded-full font-bold shadow-md border border-sky-300",title:f("usuarioPremium"),children:"ðŸ‘‘"})]})]}),(0,b.jsx)("div",{className:"flex-1 flex justify-center",children:(0,b.jsx)("span",{className:"font-mono text-lg",children:a})}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[o?(0,b.jsx)("button",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-4 py-2 rounded-full font-bold text-sm hover:shadow-lg transform hover:scale-105 transition-all duration-200",onClick:()=>window.location.href="/premium-nuevo",title:f("premiumTitle"),children:f("miPremium")}):(0,b.jsx)("button",{className:"bg-gradient-to-r from-yellow-500 to-amber-600 text-white px-4 py-2 rounded-full font-bold text-sm hover:shadow-lg transform hover:scale-105 transition-all duration-200",onClick:()=>window.location.href="/premium-nuevo",title:f("haztePremiumTitle"),children:f("haztePremium")}),i&&"PIPO68"===i.nick&&(0,b.jsx)("button",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white px-3 py-2 rounded-full font-bold text-sm hover:shadow-lg transform hover:scale-105 transition-all duration-200",onClick:()=>window.location.href="/admin-premium",title:f("adminTitle"),children:f("admin")}),(0,b.jsxs)("select",{"aria-label":f("seleccionaIdioma"),className:"border rounded px-2 py-1",value:d,onChange:a=>e(a.target.value),children:[(0,b.jsx)("option",{value:"es",children:f("espanol")}),(0,b.jsx)("option",{value:"en",children:f("ingles")}),(0,b.jsx)("option",{value:"fr",children:f("frances")}),(0,b.jsx)("option",{value:"de",children:f("aleman")})]}),(0,b.jsx)("button",{className:"bg-red-500 text-white px-3 py-1 rounded",onClick:async()=>{await fetch("/api/auth/logout",{method:"POST"}),window.location.href="/"},children:f("cerrarSesion")})]})]})};var j=a.i(38246);let k=[{href:"/perfil",label:"Perfil"},{href:"/historias",label:"Historias"},{href:"/crea-historia",label:"Crea tu Historia"},{href:"/noticias",label:"Noticias"},{href:"/concursos",label:"Concursos"},{href:"/competiciones",label:"Competiciones"},{href:"/centros-competencia",label:"Liga de Centros"},{href:"/estadisticas",label:"EstadÃ­sticas"},{href:"/aprende-con-pipo",label:"Aprende con Pipo"},{href:"/trofeos",label:"Trofeos"}],l=()=>{let[a,c]=(0,g.useState)([]),[d,e]=(0,g.useState)(!1),[f,h]=(0,g.useState)(null);return(0,g.useEffect)(()=>{},[]),(0,g.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/users");if(a.ok){let b=await a.json();c(b)}}catch(a){console.error("Error loading users:",a)}})()},[]),(0,b.jsx)("nav",{className:"w-full bg-blue-100 shadow flex justify-center py-2 sticky top-0 z-40",children:(0,b.jsxs)("ul",{className:"flex gap-2 items-center flex-nowrap overflow-x-auto whitespace-nowrap",children:[k.map(a=>(0,b.jsxs)("li",{className:"flex-shrink-0 relative",children:[(0,b.jsx)(j.default,{href:a.href,className:"px-2 py-1 rounded hover:bg-blue-300 font-medium text-sm",children:a.label}),"/perfil"===a.href&&d&&(0,b.jsx)("div",{className:"absolute top-0 right-0 w-3 h-3 bg-red-500 rounded-full animate-pulse"})]},a.href)),(0,b.jsx)("li",{className:"flex-shrink-0",children:(0,b.jsxs)("div",{className:"relative flex items-center",children:[(0,b.jsx)("label",{htmlFor:"buscarUsuario",className:"font-medium mr-1 text-sm",children:"Buscar Usuario:"}),(0,b.jsxs)("select",{id:"buscarUsuario",className:"px-1 py-1 rounded border border-blue-300 bg-white min-w-[120px] text-sm",onChange:a=>{a.target.value&&(window.location.href=`/perfil/${a.target.value}`)},defaultValue:"",children:[(0,b.jsx)("option",{value:"",disabled:!0,children:"Selecciona un usuario"}),a.filter((a,b,c)=>c.findIndex(b=>b.nick===a.nick)===b).sort((a,b)=>a.nick.localeCompare(b.nick)).map(a=>(0,b.jsx)("option",{value:a.nick,children:a.nick},a.nick))]})]})}),f?.tipo==="docente"&&(0,b.jsx)("li",{className:"flex-shrink-0",children:(0,b.jsxs)(j.default,{href:"/docentes",className:"px-2 py-1 rounded font-bold text-indigo-700 bg-indigo-100 hover:bg-indigo-200 text-sm flex items-center gap-1 border border-indigo-300 shadow",children:["Docentes: ",(0,b.jsx)("span",{role:"img","aria-label":"informaciÃ³n",children:"â„¹ï¸"})]})})]})})};function m({children:a}){let[c,e]=g.default.useState(!1);return g.default.useEffect(()=>{},[]),(0,b.jsxs)("html",{lang:"es",children:[(0,b.jsxs)("head",{children:[(0,b.jsx)("link",{rel:"icon",href:"/favicon.ico",type:"image/x-icon"}),(0,b.jsx)("title",{children:"StoryUp"})]}),(0,b.jsx)("body",{className:`${d.variable} ${f.variable} antialiased bg-green-100`,children:(0,b.jsxs)(h.I18nProvider,{children:[(0,b.jsx)(i,{}),c&&(0,b.jsx)(l,{}),(0,b.jsx)("main",{children:a})]})})]})}a.s(["default",()=>m],91599)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2e064981._.js.map