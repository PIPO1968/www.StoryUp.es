{"version":3,"sources":["turbopack:///[project]/src/components/UserLink.tsx","turbopack:///[project]/src/utils/renderNick.tsx","turbopack:///[project]/src/app/historias/page.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\ninterface UserLinkProps {\r\n    nick: string;\r\n    className?: string;\r\n}\r\n\r\nexport const UserLink: React.FC<UserLinkProps> = ({ nick, className }) => {\r\n    const [isPremium, setIsPremium] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const checkPremium = async () => {\r\n            if (nick) {\r\n                try {\r\n                    const response = await fetch(`/api/user/premium-status?nick=${encodeURIComponent(nick)}`);\r\n                    const data = await response.json();\r\n                    setIsPremium(data.isPremium || false);\r\n                } catch (error) {\r\n                    setIsPremium(false);\r\n                }\r\n            }\r\n        };\r\n\r\n        // Verificar inicialmente\r\n        checkPremium();\r\n    }, [nick]);\r\n\r\n    const normalized = (nick || \"\").trim().toLowerCase();\r\n    if (!nick || normalized === \"anonimo\" || normalized === \"an칩nimo\") {\r\n        return <span className={className || \"text-gray-500\"}>{nick || \"(sin nick)\"}</span>;\r\n    }\r\n\r\n    return (\r\n        <a\r\n            href={`/perfil/${encodeURIComponent(nick)}`}\r\n            className={className || \"text-blue-600 underline hover:text-blue-800\"}\r\n            title={`Ver perfil de ${nick}${isPremium ? ' (Usuario Premium)' : ''}`}\r\n        >\r\n            {nick}\r\n            {isPremium && (\r\n                <span className=\"ml-1 inline-flex items-center\">\r\n                    <span\r\n                        className=\"bg-gradient-to-r from-sky-100 to-blue-100 text-amber-900 text-xs px-2 py-1 rounded-full font-bold shadow-md border border-sky-300\"\r\n                        title=\"Usuario Premium\"\r\n                    >\r\n                        游녬\r\n                    </span>\r\n                </span>\r\n            )}\r\n        </a>\r\n    );\r\n};\r\n","import React from \"react\";\r\nimport { UserLink } from \"@/components/UserLink\";\r\n\r\nexport function renderNick(nick: string, className?: string) {\r\n    return <UserLink nick={nick} className={className} />;\r\n}\r\n","\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { renderNick } from \"@/utils/renderNick\";\r\nimport { useTranslation } from \"@/utils/i18n\";\r\n\r\ntype Historia = {\r\n    id: number;\r\n    titulo: string;\r\n    autor: string;\r\n    fecha: string;\r\n    imagen?: string;\r\n    likes?: number;\r\n    comentarios?: any[];\r\n};\r\n\r\nexport default function Historias() {\r\n    const [historias, setHistorias] = useState<Historia[]>([]);\r\n    const [topLikes, setTopLikes] = useState<Historia[]>([]);\r\n    const [topComentarios, setTopComentarios] = useState<Historia[]>([]);\r\n    const { t } = useTranslation();\r\n    useEffect(() => {\r\n        if (typeof window !== \"undefined\") {\r\n            const guardadas = localStorage.getItem(\"historias\");\r\n            const arr = guardadas ? JSON.parse(guardadas) : [];\r\n            setHistorias(arr.slice(0, 25));\r\n            setTopLikes([...arr].sort((a, b) => (b.likes || 0) - (a.likes || 0)).slice(0, 25));\r\n            setTopComentarios([...arr].sort((a, b) => (b.comentarios?.length || 0) - (a.comentarios?.length || 0)).slice(0, 25));\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-green-100 p-8\">\r\n            <h1 className=\"text-2xl font-bold mb-4 text-center\">{t('historiasTitle')}</h1>\r\n            {/* Bloque superior: 칰ltimas 25 historias */}\r\n            <div className=\"bg-white rounded-lg shadow-md p-6 max-w-4xl mx-auto mb-8\">\r\n                <h2 className=\"text-lg font-bold mb-2 text-center\">{t('ultimas25Historias')}</h2>\r\n                <ul className=\"divide-y\">\r\n                    {historias.length > 0 ? (\r\n                        historias.map((historia, idx) => (\r\n                            <li key={historia.id} className=\"flex items-center justify-between py-2\">\r\n                                <span className=\"font-bold w-8 text-center\">{idx + 1}췈</span>\r\n                                <a href={`/historias/${historia.id}`} className=\"text-blue-600 hover:underline flex-1 ml-2\">{historia.titulo}</a>\r\n                                <span className=\"ml-4 text-gray-700\">{renderNick(historia.autor)}</span>\r\n                                <span className=\"ml-4 text-gray-500 text-sm\">{historia.fecha}</span>\r\n                                <span className=\"ml-4 text-pink-600 font-bold\">仇벒잺 {historia.likes || 0}</span>\r\n                            </li>\r\n                        ))\r\n                    ) : (\r\n                        Array.from({ length: 25 }, (_, idx) => (\r\n                            <li key={idx} className=\"flex items-center justify-between py-2\">\r\n                                <span className=\"font-bold w-8 text-center\">{idx + 1}췈</span>\r\n                                <span className=\"text-gray-400 flex-1 ml-2\">{t('aunNoHayHistoria')}</span>\r\n                            </li>\r\n                        ))\r\n                    )}\r\n                </ul>\r\n            </div>\r\n            {/* Bloques inferiores: m치s likes y m치s comentarios */}\r\n            <div className=\"flex flex-row gap-8 max-w-7xl mx-auto\">\r\n                {/* Bloque: historias con m치s likes */}\r\n                <div className=\"bg-white rounded-lg shadow-md p-6 w-1/2\">\r\n                    <h2 className=\"text-lg font-bold mb-2 text-center\">{t('topHistoriasLikes')}</h2>\r\n                    <ul className=\"divide-y\">\r\n                        {topLikes.length > 0 ? (\r\n                            topLikes.map((historia, idx) => (\r\n                                <li key={historia.id} className=\"flex items-center justify-between py-2\">\r\n                                    <span className=\"font-bold w-8 text-center\">{idx + 1}췈</span>\r\n                                    <a href={`/historias/${historia.id}`} className=\"text-blue-600 hover:underline flex-1 ml-2\">{historia.titulo}</a>\r\n                                    <span className=\"ml-4 text-gray-700\">{renderNick(historia.autor)}</span>\r\n                                    <span className=\"ml-4 text-gray-500 text-sm\">{historia.fecha}</span>\r\n                                    <span className=\"ml-4 text-pink-600 font-bold\">仇벒잺 {historia.likes || 0}</span>\r\n                                </li>\r\n                            ))\r\n                        ) : (\r\n                            Array.from({ length: 25 }, (_, idx) => (\r\n                                <li key={idx} className=\"flex items-center justify-between py-2\">\r\n                                    <span className=\"font-bold w-8 text-center\">{idx + 1}췈</span>\r\n                                    <span className=\"text-gray-400 flex-1 ml-2\">{t('aunNoHayHistoria')}</span>\r\n                                </li>\r\n                            ))\r\n                        )}\r\n                    </ul>\r\n                </div>\r\n                {/* Bloque: historias con m치s comentarios */}\r\n                <div className=\"bg-white rounded-lg shadow-md p-6 w-1/2\">\r\n                    <h2 className=\"text-lg font-bold mb-2 text-center\">{t('topHistoriasComentarios')}</h2>\r\n                    <ul className=\"divide-y\">\r\n                        {topComentarios.length > 0 ? (\r\n                            topComentarios.map((historia, idx) => (\r\n                                <li key={historia.id} className=\"flex items-center justify-between py-2\">\r\n                                    <span className=\"font-bold w-8 text-center\">{idx + 1}췈</span>\r\n                                    <a href={`/historias/${historia.id}`} className=\"text-blue-600 hover:underline flex-1 ml-2\">{historia.titulo}</a>\r\n                                    <span className=\"ml-4 text-gray-700\">{renderNick(historia.autor)}</span>\r\n                                    <span className=\"ml-4 text-gray-500 text-sm\">{historia.fecha}</span>\r\n                                    <span className=\"ml-4 text-green-600 font-bold\">游눫 {historia.comentarios?.length || 0}</span>\r\n                                </li>\r\n                            ))\r\n                        ) : (\r\n                            Array.from({ length: 25 }, (_, idx) => (\r\n                                <li key={idx} className=\"flex items-center justify-between py-2\">\r\n                                    <span className=\"font-bold w-8 text-center\">{idx + 1}췈</span>\r\n                                    <span className=\"text-gray-400 flex-1 ml-2\">{t('aunNoHayHistoria')}</span>\r\n                                </li>\r\n                            ))\r\n                        )}\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"wDAAA,EAAA,EAAA,CAAA,CAAA,OAOO,IAAM,EAAoC,CAAC,MAAE,CAAI,WAAE,CAAS,CAAE,IACjE,GAAM,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IAE3C,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAcN,CAbqB,UACjB,GAAI,EACA,GAAI,CADE,AAEF,IAAM,EAAW,MAAM,MAAM,CAAC,8BAA8B,EAAE,mBAAmB,GAAA,CAAO,EAClF,EAAO,MAAM,EAAS,IAAI,GAChC,EAAa,EAAK,SAAS,GAAI,EACnC,CAAE,MAAO,EAAO,CACZ,GAAa,EACjB,EAER,GAIJ,EAAG,CAAC,EAAK,EAET,IAAM,EAAa,CAAC,GAAQ,EAAA,CAAE,CAAE,IAAI,GAAG,WAAW,UAClD,AAAI,AAAC,GAAQ,AAAe,eAA4B,WAAW,CAA1B,EAKrC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CACG,KAAM,CAAC,QAAQ,EAAE,mBAAmB,GAAA,CAAO,CAC3C,UAAW,GAAa,8CACxB,MAAO,CAAC,cAAc,EAAE,EAAA,EAAO,EAAY,qBAAuB,GAAA,CAAI,WAErE,EACA,GACG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACG,UAAU,oIACV,MAAM,2BACT,YAfN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,GAAa,yBAAkB,GAAQ,cAsBvE,EChDO,SAAS,EAAW,CAAY,CAAE,CAAkB,EACvD,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAS,KAAM,EAAM,UAAW,GAC5C,0ECJA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAYe,SAAS,IACpB,GAAM,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAqB,EAAE,EACnD,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAa,EAAE,EACjD,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAa,EAAE,EAC7D,GAAE,CAAC,CAAE,CAAG,CAAA,EAAA,EAAA,cAAA,AAAc,IAW5B,MAVA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAQV,EAAG,EAAE,EAGD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0CACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+CAAuC,EAAE,oBAEvD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qEACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8CAAsC,EAAE,wBACtD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oBACT,EAAU,MAAM,CAAG,EAChB,EAAU,GAAG,CAAC,CAAC,EAAU,IACrB,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAqB,UAAU,mDAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,sCAA6B,EAAM,EAAE,OACrD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAM,CAAC,WAAW,EAAE,EAAS,EAAE,CAAA,CAAE,CAAE,UAAU,qDAA6C,EAAS,MAAM,GAC5G,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8BAAsB,CAAA,EAAA,EAAA,UAAU,AAAV,EAAW,EAAS,KAAK,IAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sCAA8B,EAAS,KAAK,GAC5D,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,yCAA+B,MAAI,EAAS,KAAK,EAAI,OALhE,EAAS,EAAE,GASxB,MAAM,IAAI,CAAC,CAAE,OAAQ,EAAG,EAAG,CAAC,EAAG,IAC3B,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAa,UAAU,mDACpB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,sCAA6B,EAAM,EAAE,OACrD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qCAA6B,EAAE,wBAF1C,SASzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDAEX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8CAAsC,EAAE,uBACtD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oBACT,EAAS,MAAM,CAAG,EACf,EAAS,GAAG,CAAC,CAAC,EAAU,IACpB,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAqB,UAAU,mDAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,sCAA6B,EAAM,EAAE,OACrD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAM,CAAC,WAAW,EAAE,EAAS,EAAE,CAAA,CAAE,CAAE,UAAU,qDAA6C,EAAS,MAAM,GAC5G,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8BAAsB,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAS,KAAK,IAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sCAA8B,EAAS,KAAK,GAC5D,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,yCAA+B,MAAI,EAAS,KAAK,EAAI,OALhE,EAAS,EAAE,GASxB,MAAM,IAAI,CAAC,CAAE,OAAQ,EAAG,EAAG,CAAC,EAAG,IAC3B,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAa,UAAU,mDACpB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,sCAA6B,EAAM,EAAE,OACrD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qCAA6B,EAAE,wBAF1C,SASzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8CAAsC,EAAE,6BACtD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oBACT,EAAe,MAAM,CAAG,EACrB,EAAe,GAAG,CAAC,CAAC,EAAU,IAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAqB,UAAU,mDAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,sCAA6B,EAAM,EAAE,OACrD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAM,CAAC,WAAW,EAAE,EAAS,EAAE,CAAA,CAAE,CAAE,UAAU,qDAA6C,EAAS,MAAM,GAC5G,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8BAAsB,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAS,KAAK,IAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sCAA8B,EAAS,KAAK,GAC5D,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,0CAAgC,MAAI,EAAS,WAAW,EAAE,QAAU,OAL/E,EAAS,EAAE,GASxB,MAAM,IAAI,CAAC,CAAE,OAAQ,EAAG,EAAG,CAAC,EAAG,IAC3B,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAa,UAAU,mDACpB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,sCAA6B,EAAM,EAAE,OACrD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qCAA6B,EAAE,wBAF1C,cAWzC"}