module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},32149,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.s(["default",0,()=>{let a=(0,d.useRouter)(),[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!1);if((0,c.useEffect)(()=>{(async()=>{try{let b=await fetch("/api/auth/me");if(!b.ok)return void a.push("/login");{let a=await b.json();f(a.user)}}catch(b){console.error("Error loading user:",b),a.push("/login");return}finally{j(!1)}})()},[a]),i)return(0,b.jsx)("div",{className:"min-h-screen bg-green-100 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900 mx-auto mb-4"}),(0,b.jsx)("p",{children:"Cargando..."})]})});if(!e)return(0,b.jsx)("div",{className:"min-h-screen bg-green-100 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{children:"No se pudo cargar la informaciÃ³n del usuario."}),(0,b.jsx)("button",{className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded",onClick:()=>a.push("/login"),children:"Ir al login"})]})});let m=e.premium||!1,n=["/avatars/simple1.png",...Array.from({length:29},(a,b)=>`/avatars/simple${b+2}.jpg`)],o=Array.from({length:50},(a,b)=>`/avatars/apremium${b+1}.jpg`),p=[...n,...o],q=n.length,r=async()=>{if(g&&!k){if(o.includes(g)&&!m)return void alert("Este avatar es exclusivo para usuarios Premium. Â¡Hazte Premium para usarlo!");l(!0);try{let b=await fetch("/api/user/update-avatar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatar:g})});if(b.ok)alert("Avatar actualizado correctamente"),a.push("/perfil");else{let a=await b.json();alert(`Error al actualizar avatar: ${a.error||"Error desconocido"}`)}}catch(a){console.error("Error saving avatar:",a),alert("Error al guardar el avatar. IntÃ©ntalo de nuevo.")}finally{l(!1)}}};return(0,b.jsxs)("div",{className:"min-h-screen bg-green-100 flex flex-col items-center pt-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Seleccionar Avatar"}),(0,b.jsxs)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg max-w-md",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-yellow-800",children:[(0,b.jsx)("span",{className:"text-lg",children:"ðŸ‘‘"}),(0,b.jsx)("span",{className:"font-semibold",children:"Avatares Premium"})]}),(0,b.jsxs)("p",{className:"text-sm text-yellow-700 mt-1",children:["Los avatares con corona dorada son exclusivos para usuarios Premium.",!m&&" Â¡Hazte Premium para desbloquearlos!"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-5 gap-4 mb-8",children:p.map((a,c)=>{let d=c>=q,e=!d||m;return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("img",{src:a,alt:`Avatar ${c+1}${d?" (Premium)":""}`,className:`w-16 h-16 rounded-full border-2 transition-all duration-200 ${!e?"cursor-not-allowed opacity-60 grayscale":g===a?"border-blue-500 cursor-pointer":"border-gray-300 cursor-pointer hover:border-blue-400"} ${d?"ring-2 ring-yellow-400 ring-opacity-50":""}`,onClick:()=>e&&void h(a),title:d&&!m?"Avatar Premium - Hazte Premium para usarlo":`Avatar ${c+1}`}),d&&(0,b.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-lg",children:"ðŸ‘‘"})]},c)})}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{className:"bg-green-500 text-white px-6 py-3 rounded font-semibold disabled:opacity-50 disabled:cursor-not-allowed",onClick:r,disabled:!g||k,children:k?"Guardando...":"Guardar Avatar"}),(0,b.jsx)("button",{className:"bg-gray-500 text-white px-6 py-3 rounded font-semibold",onClick:()=>a.push("/perfil"),disabled:k,children:"Volver"})]})]})}])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__f023d2d2._.js.map