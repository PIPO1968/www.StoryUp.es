{"version":3,"sources":["turbopack:///[project]/src/app/crea-noticia/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from \"react\";\r\n\r\nexport default function CreaNoticia() {\r\n    const [titulo, setTitulo] = useState(\"\");\r\n    const [contenido, setContenido] = useState(\"\");\r\n    const [enviando, setEnviando] = useState(false);\r\n\r\n    const handleEnviar = () => {\r\n        setEnviando(true);\r\n        let autor = \"\";\r\n        if (typeof window !== \"undefined\") {\r\n            // Buscar nick en usuarioActual y si no, en user\r\n            const actual = localStorage.getItem(\"usuarioActual\");\r\n            if (actual) {\r\n                try {\r\n                    const obj = JSON.parse(actual);\r\n                    autor = obj.nick || \"\";\r\n                } catch {\r\n                    autor = \"\";\r\n                }\r\n            }\r\n            if (!autor) {\r\n                const userStr = localStorage.getItem(\"user\");\r\n                if (userStr) {\r\n                    try {\r\n                        const userObj = JSON.parse(userStr);\r\n                        autor = userObj.nick || \"\";\r\n                    } catch {\r\n                        autor = \"\";\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (!autor) {\r\n            alert(\"No se ha detectado usuario. Inicia sesión como docente o alumno.\");\r\n            setEnviando(false);\r\n            return;\r\n        }\r\n        const nuevaNoticia = {\r\n            titulo,\r\n            contenido,\r\n            autor,\r\n            fecha: new Date().toLocaleString(),\r\n        };\r\n        let noticias = [];\r\n        if (typeof window !== \"undefined\") {\r\n            const guardadas = localStorage.getItem(\"noticias\");\r\n            noticias = guardadas ? JSON.parse(guardadas) : [];\r\n            noticias.unshift(nuevaNoticia);\r\n            localStorage.setItem(\"noticias\", JSON.stringify(noticias));\r\n        }\r\n        alert(\"Noticia enviada!\");\r\n        setTitulo(\"\");\r\n        setContenido(\"\");\r\n        setEnviando(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-blue-50 p-8\">\r\n            <h1 className=\"text-2xl font-bold mb-4 text-center\">Crear Noticia</h1>\r\n            <div className=\"bg-white rounded-lg shadow-md p-6 max-w-xl mx-auto flex flex-col gap-4\">\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Título de la noticia\"\r\n                    className=\"w-full border rounded px-3 py-2 font-semibold text-lg mb-2\"\r\n                    value={titulo}\r\n                    onChange={e => setTitulo(e.target.value)}\r\n                />\r\n                <textarea\r\n                    placeholder=\"Escribe la noticia aquí...\"\r\n                    className=\"w-full border rounded px-3 py-2 min-h-[120px] mb-2\"\r\n                    value={contenido}\r\n                    onChange={e => setContenido(e.target.value)}\r\n                />\r\n                <button\r\n                    className=\"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded self-end\"\r\n                    onClick={handleEnviar}\r\n                    disabled={enviando}\r\n                >Enviar</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"uDACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACpB,GAAM,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/B,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACrC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAoDzC,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+CAAsC,kBACpD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mFACX,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,KAAK,OACL,YAAY,uBACZ,UAAU,6DACV,MAAO,EACP,SAAU,GAAK,EAAU,EAAE,MAAM,CAAC,KAAK,IAE3C,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACG,YAAY,6BACZ,UAAU,qDACV,MAAO,EACP,SAAU,GAAK,EAAa,EAAE,MAAM,CAAC,KAAK,IAE9C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,UAAU,gFACV,QArEK,CAqEI,IApErB,GAAY,GA0BR,MAAM,oEACN,GAAY,EAoBpB,EAsBgB,SAAU,WACb,gBAIjB"}