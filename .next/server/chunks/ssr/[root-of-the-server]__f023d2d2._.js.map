{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","turbopack:///[project]/src/app/perfil/avatar/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nconst AvatarSelector: React.FC = () => {\r\n    const router = useRouter();\r\n    const [user, setUser] = useState<any>(null);\r\n    const [selectedAvatar, setSelectedAvatar] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if (typeof window !== \"undefined\") {\r\n            const userStr = localStorage.getItem(\"user\");\r\n            if (userStr) {\r\n                setUser(JSON.parse(userStr));\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    if (!user) return <div>Cargando...</div>;\r\n\r\n    const isPremium = user ? (() => {\r\n        const premiumData = localStorage.getItem(`premium_${user.nick}`);\r\n        if (premiumData) {\r\n            try {\r\n                const data = JSON.parse(premiumData);\r\n                return data.activo === true;\r\n            } catch {\r\n                return false;\r\n            }\r\n        }\r\n        return false;\r\n    })() : false; // Asumir que hay un campo premium\r\n\r\n    const simpleAvatars = [\r\n        '/avatars/simple1.png',\r\n        ...Array.from({ length: 29 }, (_, i) => `/avatars/simple${i + 2}.jpg`)\r\n    ];\r\n    const premiumAvatars = Array.from({ length: 50 }, (_, i) => `/avatars/apremium${i + 1}.jpg`);\r\n\r\n    // Mostrar todos los avatares siempre, pero marcar cuÃ¡les son premium\r\n    const allAvatars = [...simpleAvatars, ...premiumAvatars];\r\n    const premiumAvatarIndices = simpleAvatars.length; // Ãndice donde empiezan los premium\r\n\r\n    const handleSelectAvatar = (avatar: string) => {\r\n        setSelectedAvatar(avatar);\r\n    };\r\n\r\n    const handleSave = () => {\r\n        if (!selectedAvatar) return;\r\n\r\n        // Verificar si el avatar seleccionado es premium y el usuario no es premium\r\n        const isSelectedPremium = premiumAvatars.includes(selectedAvatar);\r\n        if (isSelectedPremium && !isPremium) {\r\n            alert('Este avatar es exclusivo para usuarios Premium. Â¡Hazte Premium para usarlo!');\r\n            return;\r\n        }\r\n\r\n        // Actualizar user\r\n        const updatedUser = { ...user, avatar: selectedAvatar };\r\n        localStorage.setItem(\"user\", JSON.stringify(updatedUser));\r\n        // Actualizar en users array\r\n        const usersStr = localStorage.getItem(\"users\");\r\n        if (usersStr) {\r\n            const users = JSON.parse(usersStr);\r\n            const index = users.findIndex((u: any) => u.nick === user.nick);\r\n            if (index !== -1) {\r\n                users[index] = updatedUser;\r\n                localStorage.setItem(\"users\", JSON.stringify(users));\r\n            }\r\n        }\r\n        alert(\"Avatar actualizado\");\r\n        router.push(\"/perfil\");\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-green-100 flex flex-col items-center pt-8\">\r\n            <h1 className=\"text-3xl font-bold mb-4\">Seleccionar Avatar</h1>\r\n\r\n            {/* Indicador de avatares premium */}\r\n            <div className=\"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg max-w-md\">\r\n                <div className=\"flex items-center gap-2 text-yellow-800\">\r\n                    <span className=\"text-lg\">ðŸ‘‘</span>\r\n                    <span className=\"font-semibold\">Avatares Premium</span>\r\n                </div>\r\n                <p className=\"text-sm text-yellow-700 mt-1\">\r\n                    Los avatares con corona dorada son exclusivos para usuarios Premium.\r\n                    {!isPremium && \" Â¡Hazte Premium para desbloquearlos!\"}\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-5 gap-4 mb-8\">\r\n                {allAvatars.map((avatar, idx) => {\r\n                    const isPremiumAvatar = idx >= premiumAvatarIndices;\r\n                    const canSelect = !isPremiumAvatar || isPremium;\r\n\r\n                    return (\r\n                        <div key={idx} className=\"relative\">\r\n                            <img\r\n                                src={avatar}\r\n                                alt={`Avatar ${idx + 1}${isPremiumAvatar ? ' (Premium)' : ''}`}\r\n                                className={`w-16 h-16 rounded-full border-2 transition-all duration-200 ${!canSelect\r\n                                        ? 'cursor-not-allowed opacity-60 grayscale'\r\n                                        : selectedAvatar === avatar\r\n                                            ? 'border-blue-500 cursor-pointer'\r\n                                            : 'border-gray-300 cursor-pointer hover:border-blue-400'\r\n                                    } ${isPremiumAvatar ? 'ring-2 ring-yellow-400 ring-opacity-50' : ''}`}\r\n                                onClick={() => canSelect && handleSelectAvatar(avatar)}\r\n                                title={isPremiumAvatar && !isPremium ? 'Avatar Premium - Hazte Premium para usarlo' : `Avatar ${idx + 1}`}\r\n                            />\r\n                            {isPremiumAvatar && (\r\n                                <div className=\"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-lg\">\r\n                                    ðŸ‘‘\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n            <button\r\n                className=\"bg-green-500 text-white px-6 py-3 rounded font-semibold\"\r\n                onClick={handleSave}\r\n                disabled={!selectedAvatar}\r\n            >\r\n                Guardar Avatar\r\n            </button>\r\n            <button\r\n                className=\"bg-gray-500 text-white px-6 py-3 rounded font-semibold mt-4\"\r\n                onClick={() => router.push(\"/perfil\")}\r\n            >\r\n                Volver\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AvatarSelector;"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1]}