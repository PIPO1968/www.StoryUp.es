(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71177,e=>{"use strict";var r=e.i(43476),t=e.i(71645);function a(){let[e,a]=(0,t.useState)(""),[i,o]=(0,t.useState)([]),[s,l]=(0,t.useState)(!1),[n,d]=(0,t.useState)(null),[c,m]=(0,t.useState)(!1),[u,g]=(0,t.useState)("");if((0,t.useEffect)(()=>{{let e=localStorage.getItem("user");if(e){d(JSON.parse(e));let r=localStorage.getItem("users");if(r)try{let e=JSON.parse(r);console.log("Usuarios cargados:",e)}catch(e){console.error("Error al parsear usuarios:",e)}else console.log("No se encontraron usuarios en localStorage")}else m(!0)}},[]),c)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-100 to-red-200 flex items-center justify-center p-8",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow-2xl p-8 text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"ðŸš«"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Acceso Denegado"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Acceso restringido a esta pÃ¡gina de administraciÃ³n."}),(0,r.jsx)("button",{onClick:()=>window.location.href="/",className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-bold transition-all",children:"Volver al Inicio"}),(0,r.jsx)("div",{className:"mt-6 p-4 bg-gray-100 rounded-lg text-left",children:(0,r.jsxs)("p",{className:"text-xs text-gray-600",children:[(0,r.jsx)("strong",{children:"Acceso autorizado para usuarios registrados:"}),(0,r.jsx)("br",{}),"â€¢ Administrador: ",(0,r.jsx)("strong",{children:"PIPO68"}),(0,r.jsx)("br",{}),'â€¢ Docentes: Usuarios con tipo "docente"',(0,r.jsx)("br",{}),"URL: ",(0,r.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:"tudominio.com/admin-premium"})]})})]})});let x=()=>{try{let e=JSON.parse(localStorage.getItem("solicitudes_premium")||"[]");o(e.filter(e=>"pendiente"===e.estado)),l(!0)}catch(e){console.error("Error al cargar solicitudes:",e),a("âŒ Error al cargar solicitudes de pago")}};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-800 via-gray-900 to-black p-8",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center mb-8 text-gray-800",children:"ðŸ”§ Admin Premium"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Nick del usuario:"}),(0,r.jsx)("input",{type:"text",value:u,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: PIPO68"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,r.jsx)("button",{onClick:()=>{if(!u.trim())return void a("âŒ Ingresa un nick vÃ¡lido");try{let e=localStorage.getItem(`premium_${u}`),r=new Date,t=0;if(e){let r=JSON.parse(e),a=new Date(r.expiracion),i=new Date;a>i&&(t=Math.ceil((a.getTime()-i.getTime())/864e5))}r.setFullYear(r.getFullYear()+1),r.setDate(r.getDate()+t);let i={activo:!0,fechaInicio:new Date().toISOString(),expiracion:r.toISOString(),tipo:"anual",precio:12,activadoPorAdmin:!0,tiempoRestanteExtendido:t>0,beneficios:{perfil:"Avatar personalizado, marco dorado, efectos visuales",competencia:"Liga Premium exclusiva, eventos temÃ¡ticos",aprendizaje:"Minijuegos Premium, pistas ilimitadas, historias Premium"}};localStorage.setItem(`premium_${u}`,JSON.stringify(i));let o=t>0?`

â° Se ha a\xf1adido 1 a\xf1o al tiempo restante de tu premium anterior (${t} d\xedas).`:"";a(`ðŸŽ‰ \xa1Premium activado exitosamente para ${u}!

V\xe1lido hasta: ${r.toLocaleDateString()}
Beneficios: Liga Premium Exclusiva, Estad\xedsticas Avanzadas, Avatares Especiales y m\xe1s.${o}`),window.dispatchEvent(new Event("storage")),window.dispatchEvent(new CustomEvent("premiumUpdate",{detail:{nick:u,action:"add"}}))}catch(e){console.error("Error al activar Premium:",e),a("âŒ Error al activar Premium. IntÃ©ntalo de nuevo.")}},className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transform hover:scale-105 transition-all",children:"âœ… Activar Premium"}),(0,r.jsx)("button",{onClick:()=>{if(!u.trim())return void a("âŒ Ingresa un nick vÃ¡lido");try{localStorage.removeItem(`premium_${u}`),a(`ðŸ—‘ï¸ Premium anulado para ${u}`),window.dispatchEvent(new Event("storage")),window.dispatchEvent(new CustomEvent("premiumUpdate",{detail:{nick:u,action:"remove"}}))}catch(e){console.error("Error al anular premium:",e),a("âŒ Error al anular Premium")}},className:"bg-gradient-to-r from-red-500 to-rose-600 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transform hover:scale-105 transition-all",children:"ðŸ—‘ï¸ Anular Premium"}),(0,r.jsx)("button",{onClick:()=>{if(!u.trim())return void a("âŒ Ingresa un nick vÃ¡lido");try{let e=localStorage.getItem(`premium_${u}`);if(e){let r=JSON.parse(e);new Date(r.expiracion)>new Date?a(`âœ… ${u} tiene Premium ACTIVO hasta: ${new Date(r.expiracion).toLocaleDateString()}`):a(`âŒ ${u} ten\xeda Premium pero ha EXPIRADO el: ${new Date(r.expiracion).toLocaleDateString()}`)}else a(`âŒ ${u} NO tiene Premium activado`)}catch(e){a("âŒ Error al verificar Premium")}},className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transform hover:scale-105 transition-all",children:"ðŸ” Verificar Estado"}),(0,r.jsx)("button",{onClick:x,className:"bg-gradient-to-r from-amber-500 to-orange-600 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transform hover:scale-105 transition-all",children:"ðŸ“‹ Ver Solicitudes"})]}),e&&(0,r.jsx)("div",{className:`p-4 rounded-lg ${e.includes("âœ…")||e.includes("ðŸŽ‰")?"bg-green-100 border border-green-300 text-green-800":e.includes("âŒ")?"bg-red-100 border border-red-300 text-red-800":"bg-blue-100 border border-blue-300 text-blue-800"}`,children:(0,r.jsx)("pre",{className:"whitespace-pre-wrap font-semibold",children:e})}),s&&(0,r.jsxs)("div",{className:"mt-8 p-6 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,r.jsxs)("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:["ðŸ“‹ Solicitudes de Pago Pendientes",(0,r.jsx)("span",{className:"bg-orange-500 text-white text-xs px-2 py-1 rounded-full",children:i.length})]}),0===i.length?(0,r.jsx)("p",{className:"text-gray-500 text-center py-8",children:"âœ… No hay solicitudes pendientes"}):(0,r.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-bold text-lg text-gray-800",children:e.nick}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.email}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["ðŸ“… ",new Date(e.fechaSolicitud).toLocaleString()]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("span",{className:"bg-blue-100 text-blue-800 text-sm px-3 py-1 rounded-full",children:[e.metodoPago.toUpperCase()," â‚¬",e.precio]})})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>(e=>{try{let r=new Date;r.setFullYear(r.getFullYear()+1);let t={activo:!0,fechaInicio:new Date().toISOString(),expiracion:r.toISOString(),tipo:e.tipo,precio:e.precio,metodoPago:e.metodoPago,activadoPorAdmin:!0,solicitudId:e.id,emailPago:e.email};localStorage.setItem(`premium_${e.nick}`,JSON.stringify(t));let i=JSON.parse(localStorage.getItem("solicitudes_premium")||"[]"),o=i.findIndex(r=>r.id===e.id);-1!==o&&(i[o].estado="aprobado",i[o].fechaAprobacion=new Date().toISOString(),localStorage.setItem("solicitudes_premium",JSON.stringify(i))),a(`ðŸŽ‰ Premium activado para ${e.nick} tras verificar pago de â‚¬${e.precio}`),x(),window.dispatchEvent(new Event("storage")),window.dispatchEvent(new CustomEvent("premiumUpdate",{detail:{nick:e.nick,action:"add"}}))}catch(e){console.error("Error al aprobar solicitud:",e),a("âŒ Error al aprobar la solicitud")}})(e),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-bold text-sm transition-all",children:"âœ… Aprobar y Activar Premium"}),(0,r.jsx)("button",{onClick:()=>((e,r="Pago no verificado")=>{try{let t=JSON.parse(localStorage.getItem("solicitudes_premium")||"[]"),i=t.findIndex(r=>r.id===e.id);-1!==i&&(t[i].estado="rechazado",t[i].fechaRechazo=new Date().toISOString(),t[i].motivo=r,localStorage.setItem("solicitudes_premium",JSON.stringify(t))),a(`âŒ Solicitud rechazada para ${e.nick}: ${r}`),x()}catch(e){console.error("Error al rechazar solicitud:",e),a("âŒ Error al rechazar la solicitud")}})(e),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-bold text-sm transition-all",children:"âŒ Rechazar"})]})]},e.id))})]}),(0,r.jsxs)("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-bold text-yellow-800 mb-2",children:"ðŸ“‹ Instrucciones:"}),(0,r.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Activar Premium:"})," Activa Premium por 1 aÃ±o para cualquier usuario"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Anular Premium:"})," Remueve el estado Premium de un usuario"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Verificar Estado:"})," Comprueba si un usuario ya tiene Premium activo"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Ver Solicitudes:"})," Muestra pagos pendientes de verificaciÃ³n"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Aprobar/Rechazar:"})," Gestiona las solicitudes tras verificar Bizum"]})]}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-orange-100 border border-orange-300 rounded",children:(0,r.jsxs)("p",{className:"text-sm text-orange-800",children:[(0,r.jsx)("strong",{children:"ðŸ”’ Proceso de seguridad:"})," Ahora los usuarios NO pueden hacerse Premium automÃ¡ticamente. Deben solicitar y esperar verificaciÃ³n manual del pago."]})}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-blue-100 border border-blue-300 rounded",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,r.jsx)("strong",{children:"ðŸŒ Acceso en servidor:"}),(0,r.jsx)("br",{}),"â€¢ URL: ",(0,r.jsx)("code",{className:"bg-blue-200 px-1 rounded",children:"tudominio.com/admin-premium"}),(0,r.jsx)("br",{}),"â€¢ Protegido por nick de administrador",(0,r.jsx)("br",{}),"â€¢ Solo usuario autorizado: ",(0,r.jsx)("strong",{children:"PIPO68"})]})})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsx)("button",{onClick:()=>window.location.href="/estadisticas",className:"bg-gradient-to-r from-purple-500 to-violet-600 text-white px-8 py-3 rounded-full font-bold hover:shadow-lg transform hover:scale-105 transition-all",children:"ðŸ“Š Ver EstadÃ­sticas"})})]})})})}e.s(["default",()=>a])}]);