(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56095,e=>{"use strict";var t=e.i(43476),s=e.i(71645);let l=({nick:e,className:l})=>{let[a,i]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{if(e)try{let t=await fetch(`/api/user/premium-status?nick=${encodeURIComponent(e)}`),s=await t.json();i(s.isPremium||!1)}catch(e){i(!1)}})()},[e]);let n=(e||"").trim().toLowerCase();return e&&"anonimo"!==n&&"anÃ³nimo"!==n?(0,t.jsxs)("a",{href:`/perfil/${encodeURIComponent(e)}`,className:l||"text-blue-600 underline hover:text-blue-800",title:`Ver perfil de ${e}${a?" (Usuario Premium)":""}`,children:[e,a&&(0,t.jsx)("span",{className:"ml-1 inline-flex items-center",children:(0,t.jsx)("span",{className:"bg-gradient-to-r from-sky-100 to-blue-100 text-amber-900 text-xs px-2 py-1 rounded-full font-bold shadow-md border border-sky-300",title:"Usuario Premium",children:"ðŸ‘‘"})})]}):(0,t.jsx)("span",{className:l||"text-gray-500",children:e||"(sin nick)"})};function a(e,s){return(0,t.jsx)(l,{nick:e,className:s})}e.s(["renderNick",()=>a],56095)},18566,(e,t,s)=>{t.exports=e.r(76562)},38614,e=>{"use strict";var t=e.i(43476),s=e.i(71645),l=e.i(18566),a=e.i(56095);let i=({perfilNick:e})=>{let[l,a]=(0,s.useState)(null),[i,n]=(0,s.useState)(!1),[r,c]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{{let t=localStorage.getItem("user");if(!t)return;let s=JSON.parse(t);if(a(s),!e||e===s.nick)return;let l=localStorage.getItem(`amigos_${s.nick}`),i=[];if(l)try{i=JSON.parse(l)}catch{}n(i.some(t=>t.nick===e));let r=localStorage.getItem(`solicitudes_${e}`),o=!1;if(r)try{o=JSON.parse(r).some(e=>e.origen===s.nick&&"pendiente"===e.estado)}catch{}c(o)}},[e]),l&&e!==l.nick)?i?(0,t.jsx)("button",{className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-6 rounded-xl text-base shadow mb-2 animate-pulse",onClick:()=>{if(!l)return;let t=localStorage.getItem(`amigos_${l.nick}`),s=t?JSON.parse(t):[];s=s.filter(t=>t.nick!==e),localStorage.setItem(`amigos_${l.nick}`,JSON.stringify(s));let a=localStorage.getItem(`amigos_${e}`),i=a?JSON.parse(a):[];i=i.filter(e=>e.nick!==l.nick),localStorage.setItem(`amigos_${e}`,JSON.stringify(i));let r={...l,amigos:s};localStorage.setItem("user",JSON.stringify(r));let c=localStorage.getItem("users");if(c){let e=JSON.parse(c);e=e.map(e=>e.nick===l.nick?{...e,amigos:s}:e),localStorage.setItem("users",JSON.stringify(e))}n(!1),alert(`Has eliminado la amistad con ${e}`)},children:"Finalizar amistad"}):r?(0,t.jsxs)("span",{className:"bg-yellow-300 text-yellow-900 font-bold py-2 px-6 rounded-xl text-base shadow mb-2 animate-pulse flex items-center gap-2",children:["Amistad pendiente",(0,t.jsx)("a",{href:"#",className:"text-green-700 underline text-xs ml-2",onClick:t=>{t.preventDefault();let s=JSON.parse(localStorage.getItem(`amigos_${l.nick}`)||"[]");s.push({nick:e}),localStorage.setItem(`amigos_${l.nick}`,JSON.stringify(s));let a=JSON.parse(localStorage.getItem(`amigos_${e}`)||"[]");a.push({nick:l.nick}),localStorage.setItem(`amigos_${e}`,JSON.stringify(a));let i={...l,amigos:s};localStorage.setItem("user",JSON.stringify(i));let r=localStorage.getItem("users");if(r){let e=JSON.parse(r);e=e.map(e=>e.nick===l.nick?{...e,amigos:s}:e),localStorage.setItem("users",JSON.stringify(e))}let o=localStorage.getItem(`solicitudes_${e}`),d=o?JSON.parse(o):[];d=d.filter(e=>e.origen!==l.nick||"pendiente"!==e.estado),localStorage.setItem(`solicitudes_${e}`,JSON.stringify(d)),c(!1),n(!0),alert("Â¡Amistad aceptada!")},children:"Aceptar"}),(0,t.jsx)("a",{href:"#",className:"text-red-700 underline text-xs ml-2",onClick:t=>{t.preventDefault();let s=localStorage.getItem(`solicitudes_${e}`),a=s?JSON.parse(s):[];a=a.filter(e=>e.origen!==l.nick||"pendiente"!==e.estado),localStorage.setItem(`solicitudes_${e}`,JSON.stringify(a)),c(!1),alert("Solicitud de amistad rechazada")},children:"Rechazar"})]}):(0,t.jsx)("button",{className:"bg-blue-600 hover:bg-blue-800 text-white font-bold py-2 px-6 rounded-xl text-base shadow mb-2 animate-bounce",onClick:()=>{if(!l||!e||e===l.nick)return;let t={origen:l.nick,destino:e,estado:"pendiente"},s=localStorage.getItem(`solicitudes_${e}`),a=s?JSON.parse(s):[];a.push(t),localStorage.setItem(`solicitudes_${e}`,JSON.stringify(a)),c(!0),alert(`Solicitud de amistad enviada a ${e}`)},children:"Solicitar Amistad"}):null};function n(){let e,n=(0,l.useParams)(),r=n?.nick,[c,o]=(0,s.useState)(null),[d,m]=(0,s.useState)(null),[x,u]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1),h=!!c&&(()=>{let e=localStorage.getItem(`premium_${c.nick}`);if(e)try{let t=JSON.parse(e);return!0===t.activo}catch{}return!1})();return((0,s.useEffect)(()=>{{let e=localStorage.getItem("user"),t=localStorage.getItem("users");if(!e||!t)return;let s=JSON.parse(e);m(s);let l=JSON.parse(t).find(e=>e.nick===r);if(!l)return void o(null);o(l);let a=localStorage.getItem(`amigos_${s.nick}`),i=[];if(a)try{i=JSON.parse(a)}catch{}u(i.some(e=>e.nick===l.nick));let n=localStorage.getItem(`solicitudes_${l.nick}`),c=[];if(n)try{c=JSON.parse(n)}catch{}f(c.some(e=>e.origen===s.nick&&"pendiente"===e.estado))}},[r]),c)?(0,t.jsxs)("div",{className:"min-h-screen bg-green-100 p-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center",children:"InformaciÃ³n Personal"}),h&&(0,t.jsx)("div",{className:"flex justify-center mt-2 mb-4",children:(0,t.jsxs)("div",{className:"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 text-white px-6 py-2 rounded-full font-bold text-lg shadow-lg shadow-yellow-500/50 animate-pulse flex items-center gap-2",children:[(0,t.jsx)("span",{className:"animate-bounce",children:"ðŸ‘‘"}),(0,t.jsx)("span",{children:"PREMIUM ACTIVO"}),(0,t.jsx)("span",{className:"animate-bounce",children:"âœ¨"})]})}),(0,t.jsxs)("div",{className:`max-w-lg mx-auto bg-white rounded-lg shadow-md p-6 flex flex-col items-center relative transition-all duration-500 ${h?"border-4 border-yellow-400 shadow-2xl shadow-yellow-400/50 animate-pulse overflow-hidden":""}`,children:[h&&(0,t.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,t.jsx)("div",{className:"absolute top-2 right-2 w-2 h-2 bg-yellow-400 rounded-full animate-ping opacity-75"}),(0,t.jsx)("div",{className:"absolute top-4 left-4 w-1 h-1 bg-yellow-300 rounded-full animate-bounce opacity-60"}),(0,t.jsx)("div",{className:"absolute bottom-4 right-6 w-1.5 h-1.5 bg-yellow-500 rounded-full animate-pulse opacity-80"})]}),(0,t.jsx)(i,{perfilNick:c.nick}),(0,t.jsx)("div",{className:"flex justify-between items-center mb-4 relative",children:(0,t.jsxs)("h3",{className:`text-xl font-bold text-center w-full transition-all duration-300 ${h?"text-yellow-600":""}`,children:["InformaciÃ³n Personal",h&&(0,t.jsx)("span",{className:"ml-2 animate-spin",children:"ðŸ‘‘"})]})}),(0,t.jsx)("div",{className:"flex flex-col items-center mb-4 relative",children:(0,t.jsxs)("div",{className:"relative ",children:[(0,t.jsx)("img",{src:c.avatar||"/avatars/default.png",alt:"Avatar",className:`w-20 h-20 rounded-full mb-2 transition-all duration-300 ${h?"ring-4 ring-yellow-400 ring-opacity-70 shadow-lg shadow-yellow-400/50 hover:scale-110":""}`}),h&&(0,t.jsx)("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-xs animate-bounce",children:"âœ¨"})]})}),(0,t.jsx)("div",{className:"flex justify-between items-center mb-4 relative",children:(0,t.jsxs)("h3",{className:`text-xl font-bold text-center w-full transition-all duration-300 ${h?"text-yellow-600":""}`,children:["InformaciÃ³n Personal",h&&(0,t.jsx)("span",{className:"ml-2 animate-spin",children:"ðŸ‘‘"})]})}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Nick:"})," ",(0,a.renderNick)(c.nick)]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Email:"})," ",c.email]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Centro Educativo:"})," ",c.centro]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Curso:"})," ",c.curso]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Tipo de Usuario:"})," ",c.tipo]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Fecha de InscripciÃ³n:"})," ",c.fechaInscripcion?new Date(c.fechaInscripcion).toLocaleDateString("es-ES"):""]}),(0,t.jsx)("div",{className:"mb-2 flex items-center",children:(0,t.jsxs)("div",{className:"flex flex-col mt-2 gap-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-x-12",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ‘"}),(0,t.jsx)("strong",{children:"Likes:"}),(0,t.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-green-300 text-green-900 font-bold text-sm",children:c.likes||0})]}),(0,t.jsxs)("div",{className:"flex items-center ml-8",children:[(0,t.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ‘¥"}),(0,t.jsx)("strong",{children:"Total de Amigos:"}),(0,t.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-300 text-blue-900 font-bold text-sm",children:c.amigos?c.amigos.length:0})]})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-x-12",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ“–"}),(0,t.jsx)("strong",{children:"Total de Historias:"}),(0,t.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-purple-200 text-purple-900 font-bold text-sm",children:c.historias?c.historias.length:0})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ’¬"}),(0,t.jsx)("strong",{children:"Total de Comentarios:"}),(0,t.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-yellow-200 text-yellow-900 font-bold text-sm",children:c.comentariosRecibidos||0})]})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-x-12",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ†"}),(0,t.jsx)("strong",{children:"Trofeos Desbloqueados:"}),(e=(Array.isArray(c.trofeos)?c.trofeos:[]).length,(0,t.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-pink-200 text-pink-900 font-bold text-sm",children:e}))]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"mr-2 text-lg",children:"âœ…"}),(0,t.jsx)("strong",{children:"Respuestas acertadas:"}),(0,t.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-indigo-200 text-indigo-900 font-bold text-sm",children:c.preguntasAcertadas||0})]})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-x-12",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ¥‡"}),(0,t.jsx)("strong",{children:"Competiciones:"}),(0,t.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-teal-200 text-teal-900 font-bold text-sm",children:c.competicionesSuperadas||0})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"mr-2 text-lg",children:"ðŸŽ‰"}),(0,t.jsx)("strong",{children:"Concursos:"}),(0,t.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-red-200 text-red-900 font-bold text-sm",children:c.concursosGanados||0})]})]})]})})]})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-red-100 p-8 flex flex-col items-center justify-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center text-red-700",children:"Usuario no encontrado"}),(0,t.jsx)("p",{className:"text-center",children:"El perfil solicitado no existe o es anÃ³nimo."})]})}e.s(["default",()=>n],38614)}]);