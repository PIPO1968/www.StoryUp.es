(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56095,e=>{"use strict";var t=e.i(43476),s=e.i(71645);let a=({nick:e,className:a})=>{let[r,l]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{if(e)try{let t=await fetch(`/api/user/premium-status?nick=${encodeURIComponent(e)}`),s=await t.json();l(s.isPremium||!1)}catch(e){l(!1)}})()},[e]);let n=(e||"").trim().toLowerCase();return e&&"anonimo"!==n&&"anÃ³nimo"!==n?(0,t.jsxs)("a",{href:`/perfil/${encodeURIComponent(e)}`,className:a||"text-blue-600 underline hover:text-blue-800",title:`Ver perfil de ${e}${r?" (Usuario Premium)":""}`,children:[e,r&&(0,t.jsx)("span",{className:"ml-1 inline-flex items-center",children:(0,t.jsx)("span",{className:"bg-gradient-to-r from-sky-100 to-blue-100 text-amber-900 text-xs px-2 py-1 rounded-full font-bold shadow-md border border-sky-300",title:"Usuario Premium",children:"ðŸ‘‘"})})]}):(0,t.jsx)("span",{className:a||"text-gray-500",children:e||"(sin nick)"})};function r(e,s){return(0,t.jsx)(a,{nick:e,className:s})}e.s(["renderNick",()=>r],56095)},96987,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(56095),r=e.i(88379);function l(){let e,{t:l}=(0,r.useTranslation)(),[n,i]=s.default.useState(!1),[c,o]=s.default.useState(null);function d(e){if(!e||!e.nick)return 0;let t=0;return["matematicas","lenguaje","geografia","historia","literatura","ingles","naturaleza"].forEach(s=>{let a=parseInt(localStorage.getItem(`${s}_${e.nick}`)||"0",10);t+=a}),t+=e.likes||0,t+=10*(e.competicionesSuperadas||0),t+=2*(e.preguntasAcertadas||0)}function m(){let e=new Date,t=e.getFullYear();return e.getMonth()+1<10?t-1:t}let[x,u]=s.default.useState(m()),[h,g]=s.default.useState([]),[p,j]=s.default.useState({}),[f,N]=s.default.useState({}),[b,S]=s.default.useState({}),[k,I]=s.default.useState(!1),[y,v]=s.default.useState([]),[w,O]=s.default.useState(!1);function J({nick:e}){return(0,a.renderNick)(e)}return s.default.useEffect(()=>{I(!0);{let e=localStorage.getItem("currentUser")||localStorage.getItem("user");if(e){let t=JSON.parse(e);o(t);let s=localStorage.getItem(`premium_${t.nick}`);s&&new Date(JSON.parse(s).expiracion)>new Date&&i(!0)}}function e(){g(e=>[...e]),j(e=>({...e})),N(e=>({...e})),S(e=>({...e})),v(e=>[...e]),O(e=>e)}return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[]),s.default.useEffect(()=>{g(function(){let e=[];for(let t=2023;t<=m();t++)(localStorage.getItem(`campeonato_individual_t${t}`)||localStorage.getItem(`campeonato_centro_t${t}`))&&e.push(t);return e.includes(m())||e.push(m()),e.sort((e,t)=>t-e)}())},[]),s.default.useEffect(()=>{{let e=`campeonato_individual_t${x}`,t=`campeonato_centro_t${x}`,s={},a={};try{s=JSON.parse(localStorage.getItem(e)||"{}")}catch{s={}}try{a=JSON.parse(localStorage.getItem(t)||"{}")}catch{a={}}j(s),N(a)}},[x]),s.default.useEffect(()=>{{let e=localStorage.getItem(`campeonato_docentes_t${x}`),t={};try{t=e?JSON.parse(e):{}}catch{t={}}S(t)}},[x]),s.default.useEffect(()=>{{let e=localStorage.getItem("users");if(e)try{let t=JSON.parse(e),s={};t.forEach(e=>{e.centro&&(e.centro in s||(s[e.centro]=0),s[e.centro]+=Number(e.likes)||0)});let a=Object.entries(s).map(([e,t])=>({centro:e,likes:t})).sort((e,t)=>t.likes-e.likes);v(a)}catch{v([])}else v([]);O(!0)}},[]),(0,t.jsxs)("div",{className:"min-h-screen bg-green-100 p-8",children:[(0,t.jsx)("div",{className:"text-center mb-4",children:(0,t.jsx)("h1",{className:"text-2xl font-bold",children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-yellow-600",children:l("estadisticasPremium")}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Â¡Hola ",c?.nick,"! Disfrutas de estadÃ­sticas avanzadas"]})]}):(0,t.jsxs)(t.Fragment,{children:["EstadÃ­sticas",(0,t.jsx)("div",{className:"text-sm text-blue-600 mt-1",children:(0,t.jsxs)("button",{onClick:()=>window.location.href="/premium-nuevo",className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-xs hover:shadow-lg transform hover:scale-105 transition-all",children:["âœ¨ ",l("haztePremiumParaVer")," âœ¨"]})})]})})}),k&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-bold mb-4 text-center",children:l("estadisticasGlobales")}),(0,t.jsxs)("ul",{className:"space-y-2",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,t.jsxs)("b",{children:[l("totalCompeticionesSuperadas"),":"]})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{let t=JSON.parse(e),s=0;return t.forEach(e=>{s+=e.competicionesSuperadas||0}),s}catch{}}return 0})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ‘¥"}),(0,t.jsxs)("b",{children:[l("totalUsuarios"),":"]})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{return JSON.parse(e).length}catch{}}return 0})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ“–"}),(0,t.jsxs)("b",{children:[l("totalHistoriasCreadas"),":"]})," ",(()=>{{let e=localStorage.getItem("historias");if(e)try{return JSON.parse(e).length}catch{}}return 0})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,t.jsxs)("b",{children:[l("totalConcursosCreados"),":"]})," ",(()=>{{let e=localStorage.getItem("concursos");if(e)try{return JSON.parse(e).length}catch{}}return 0})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ’¬"}),(0,t.jsx)("b",{children:"Total de comentarios realizados:"})," ",(()=>{{let e=localStorage.getItem("historias");if(e)try{let t=JSON.parse(e),s=0;return t.forEach(e=>{s+=e.comentarios?e.comentarios.length:0}),s}catch{}}return 0})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ«"}),(0,t.jsx)("b",{children:"Total de centros escolares registrados:"})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{let t=JSON.parse(e);return new Set(t.map(e=>e.centro).filter(Boolean)).size}catch{}}return 0})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ‘¨â€ðŸ«"}),(0,t.jsx)("b",{children:"Total de docentes registrados:"})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{return JSON.parse(e).filter(e=>"docente"===(e.tipo||"").toLowerCase()).length||0}catch{}return 0}})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ¤"}),(0,t.jsx)("b",{children:"Total de amigos creados:"})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{let t=JSON.parse(e),s=0;return t.forEach(e=>{let t=localStorage.getItem(`amigos_${e.nick}`);if(t)try{let e=JSON.parse(t);s+=e.length}catch{}}),s>0?s:0}catch{}return 0}})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ…"}),(0,t.jsx)("b",{children:"Total de historias ganadoras:"})," ",(()=>{{let e=localStorage.getItem("concursos");if(e)try{return JSON.parse(e).filter(e=>e.historiaGanadora).length||0}catch{}return 0}})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦"}),(0,t.jsx)("b",{children:"Total de participantes en concursos:"})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{let t=JSON.parse(e),s=0;return t.forEach(e=>{e.historias&&Array.isArray(e.historias)&&e.historias.length>0&&s++}),s}catch{}return 0}})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"â¤ï¸"}),(0,t.jsx)("b",{children:"Total de likes:"})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{let t=JSON.parse(e),s=0;return t.forEach(e=>{s+=e.likes||0}),s}catch{}}return 0})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"â“"}),(0,t.jsx)("b",{children:"Total de preguntas respondidas:"})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{let t=JSON.parse(e),s=0,a=0;return t.forEach(e=>{s+=e.preguntasAcertadas||0,a+=e.preguntasFalladas||0,a+=parseInt(localStorage.getItem("falladas_"+e.nick)||"0",10)}),s+a}catch{}}return 0})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"â“"}),(0,t.jsxs)("b",{children:[l("totalPreguntasAcertadas"),":"]})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{let t=JSON.parse(e),s=0;return t.forEach(e=>{s+=e.preguntasAcertadas||0}),s}catch{}}return 0})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"â“"}),(0,t.jsx)("b",{children:"Total de preguntas falladas:"})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{let t=JSON.parse(e),s=0;return t.forEach(e=>{s+=e.preguntasFalladas||0,s+=parseInt(localStorage.getItem("falladas_"+e.nick)||"0",10)}),s}catch{}}return 0})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,t.jsx)("b",{children:"Total de concursos ganados:"})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{let t=JSON.parse(e),s=0;return t.forEach(e=>{s+=e.concursosGanados||0}),s}catch{}}return 0})()]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-bold mb-4 text-center",children:"Rankings"}),(0,t.jsxs)("ul",{className:"space-y-2",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"â¤ï¸"}),(0,t.jsxs)("b",{children:[l("usuariosMasLikes"),":"]})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{let s=JSON.parse(e).map(e=>({nick:e.nick,nombre:e.nombre,totalLikes:e.likes||0})).filter(e=>e.nick&&e.totalLikes>0).sort((e,t)=>t.totalLikes-e.totalLikes).slice(0,5);if(0===s.length)return(0,t.jsx)("span",{className:"block",children:"No hay usuarios con likes."});return s.map((e,s)=>(0,t.jsxs)("span",{className:"block",children:[s+1,". ",(0,t.jsx)("b",{children:(0,t.jsx)(J,{nick:e.nick})})," (",e.totalLikes," likes)"]},e.nick))}catch{}}return(0,t.jsx)("span",{className:"block",children:"No hay usuarios con likes."})})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ’¬"}),(0,t.jsxs)("b",{children:[l("usuariosMasComentarios"),":"]})," ",(()=>{{let e=localStorage.getItem("historias");if(e)try{let s=JSON.parse(e),a={};s.forEach(e=>{e.autor&&(a[e.autor]=(a[e.autor]||0)+(e.comentarios?e.comentarios.length:0))});let r=Object.entries(a).map(([e,t])=>({nick:e,totalComentarios:t})).filter(e=>e.nick&&e.totalComentarios>0).sort((e,t)=>t.totalComentarios-e.totalComentarios).slice(0,5);if(0===r.length)return(0,t.jsx)("span",{className:"block",children:"No hay usuarios con comentarios aÃºn."});return r.map((e,s)=>(0,t.jsxs)("span",{className:"block",children:[s+1,". ",(0,t.jsx)("b",{children:(0,t.jsx)(J,{nick:e.nick})})," (",e.totalComentarios," comentarios)"]},e.nick))}catch{}}return(0,t.jsx)("span",{className:"block",children:"No hay usuarios con comentarios aÃºn."})})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ¤"}),(0,t.jsx)("b",{children:"Usuarios con mÃ¡s amigos:"})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{let s=JSON.parse(e).map(e=>{let t=localStorage.getItem(`amigos_${e.nick}`),s=0;if(t)try{let e=JSON.parse(t);s=Array.isArray(e)?e.length:0}catch{s=0}return{nick:e.nick,numAmigos:s}}).filter(e=>e.nick&&e.numAmigos>0).sort((e,t)=>t.numAmigos-e.numAmigos).slice(0,5);if(0===s.length)return(0,t.jsx)("span",{className:"block",children:"No hay usuarios con amigos aÃºn."});return s.map((e,s)=>(0,t.jsxs)("span",{className:"block",children:[s+1,". ",(0,t.jsx)("b",{children:(0,t.jsx)(J,{nick:e.nick})})," (",e.numAmigos," amigos)"]},e.nick))}catch{}}return(0,t.jsx)("span",{className:"block",children:"No hay usuarios con amigos aÃºn."})})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ“–"}),(0,t.jsx)("b",{children:"Usuarios con mÃ¡s historias:"})," ",(()=>{{let e=localStorage.getItem("historias");if(e)try{let s=JSON.parse(e),a={};s.forEach(e=>{e.autor&&(a[e.autor]=(a[e.autor]||0)+1)});let r=Object.entries(a).map(([e,t])=>({nick:e,totalHistorias:t})).filter(e=>e.nick&&e.totalHistorias>0).sort((e,t)=>t.totalHistorias-e.totalHistorias).slice(0,5);if(0===r.length)return(0,t.jsx)("span",{className:"block",children:"No hay usuarios con historias aÃºn."});return r.map((e,s)=>(0,t.jsxs)("span",{className:"block",children:[s+1,". ",(0,t.jsx)("b",{children:(0,t.jsx)(J,{nick:e.nick})})," (",e.totalHistorias," historias)"]},e.nick))}catch{}}return(0,t.jsx)("span",{className:"block",children:"No hay usuarios con historias aÃºn."})})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,t.jsx)("b",{children:"Usuarios con mÃ¡s concursos ganados:"})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{let s=JSON.parse(e).map(e=>({nick:e.nick,nombre:e.nombre,totalConcursos:e.concursosGanados||0})).filter(e=>e.totalConcursos>0).sort((e,t)=>t.totalConcursos-e.totalConcursos).slice(0,5);if(0===s.length)return(0,t.jsx)("span",{className:"block",children:"No hay usuarios con concursos ganados aÃºn."});return s.map((e,s)=>(0,t.jsxs)("span",{className:"block",children:[s+1,". ",(0,t.jsx)("b",{children:(0,t.jsx)(J,{nick:e.nick})})," (",e.totalConcursos," concursos)"]},e.nick))}catch{}}return"-"})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,t.jsx)("b",{children:"Usuarios con mÃ¡s competiciones superadas:"})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{let s=JSON.parse(e).map(e=>({nick:e.nick,nombre:e.nombre,totalCompeticiones:e.competicionesSuperadas||0})).filter(e=>e.totalCompeticiones>0).sort((e,t)=>t.totalCompeticiones-e.totalCompeticiones).slice(0,5);if(0===s.length)return(0,t.jsx)("span",{className:"block",children:"No hay usuarios con competiciones superadas aÃºn."});return s.map((e,s)=>(0,t.jsxs)("span",{className:"block",children:[s+1,". ",(0,t.jsx)("b",{children:(0,t.jsx)(J,{nick:e.nick})})," (",e.totalCompeticiones," competiciones)"]},e.nick))}catch{}}return"-"})()]})]})]})]}),n&&(0,t.jsx)("div",{className:"max-w-5xl mx-auto mt-8",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 rounded-2xl p-1 shadow-2xl",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-600",children:"ðŸ‘‘ EstadÃ­sticas Premium Avanzadas ðŸ‘‘"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-4",children:[(0,t.jsx)("h3",{className:"font-bold text-blue-800 mb-3 text-center",children:"ðŸ“ˆ Tu AnÃ¡lisis Personal"}),(0,t.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"ðŸŽ¯ PrecisiÃ³n promedio:"}),(0,t.jsx)("span",{className:"font-bold text-blue-600",children:(()=>{if(c){let e=(c.preguntasAcertadas||0)+parseInt(localStorage.getItem("acertadas_"+c.nick)||"0",10),t=e+((c.preguntasFalladas||0)+parseInt(localStorage.getItem("falladas_"+c.nick)||"0",10));return t>0?(e/t*100).toFixed(1)+"%":"0%"}return"0%"})()})]}),(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"âš¡ Racha actual:"}),(0,t.jsxs)("span",{className:"font-bold text-blue-600",children:[c?.racha||0," dÃ­as"]})]}),(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"ðŸ“… DÃ­as activo:"}),(0,t.jsx)("span",{className:"font-bold text-blue-600",children:(()=>{if(c?.fechaRegistro){let e=new Date(c.fechaRegistro);return Math.ceil(Math.abs(new Date().getTime()-e.getTime())/864e5)}return 0})()})]}),(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"ðŸ† Tu ranking:"}),(0,t.jsx)("span",{className:"font-bold text-blue-600",children:(()=>{let e=localStorage.getItem("users");if(e&&c){let t=JSON.parse(e).map(e=>({...e,puntosTotales:d(e)})).sort((e,t)=>t.puntosTotales-e.puntosTotales).findIndex(e=>e.nick===c.nick)+1;return t>0?`#${t}`:"-"}return"-"})()})]})]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-4",children:[(0,t.jsx)("h3",{className:"font-bold text-green-800 mb-3 text-center",children:"ðŸ“š AnÃ¡lisis por Materias"}),(0,t.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"ðŸ”¬ MatemÃ¡ticas:"}),(0,t.jsx)("span",{className:"font-bold text-green-600",children:(()=>{if(c){let e=Math.floor(parseInt(localStorage.getItem(`matematicas_${c.nick}`)||"0",10)/5)+1;return`Nivel ${e}`}return"Nivel 1"})()})]}),(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"ðŸ“– Lenguaje:"}),(0,t.jsx)("span",{className:"font-bold text-green-600",children:(()=>{if(c){let e=Math.floor(parseInt(localStorage.getItem(`lenguaje_${c.nick}`)||"0",10)/5)+1;return`Nivel ${e}`}return"Nivel 1"})()})]}),(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"ðŸŒ GeografÃ­a:"}),(0,t.jsx)("span",{className:"font-bold text-green-600",children:(()=>{if(c){let e=Math.floor(parseInt(localStorage.getItem(`geografia_${c.nick}`)||"0",10)/5)+1;return`Nivel ${e}`}return"Nivel 1"})()})]}),(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"ðŸ“š Historia:"}),(0,t.jsx)("span",{className:"font-bold text-green-600",children:(()=>{if(c){let e=Math.floor(parseInt(localStorage.getItem(`historia_${c.nick}`)||"0",10)/5)+1;return`Nivel ${e}`}return"Nivel 1"})()})]}),(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"ðŸŽ¨ Tu fuerte:"}),(0,t.jsx)("span",{className:"font-bold text-green-600",children:(()=>{if(c){let e=[{nombre:"MatemÃ¡ticas",puntos:parseInt(localStorage.getItem(`matematicas_${c.nick}`)||"0",10)},{nombre:"Lenguaje",puntos:parseInt(localStorage.getItem(`lenguaje_${c.nick}`)||"0",10)},{nombre:"GeografÃ­a",puntos:parseInt(localStorage.getItem(`geografia_${c.nick}`)||"0",10)},{nombre:"Historia",puntos:parseInt(localStorage.getItem(`historia_${c.nick}`)||"0",10)},{nombre:"Literatura",puntos:parseInt(localStorage.getItem(`literatura_${c.nick}`)||"0",10)},{nombre:"InglÃ©s",puntos:parseInt(localStorage.getItem(`ingles_${c.nick}`)||"0",10)},{nombre:"Naturaleza",puntos:parseInt(localStorage.getItem(`naturaleza_${c.nick}`)||"0",10)}].reduce((e,t)=>t.puntos>e.puntos?t:e);return e.puntos>0?e.nombre:"Ninguna aÃºn"}return"Ninguna aÃºn"})()})]})]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-violet-100 rounded-xl p-4",children:[(0,t.jsx)("h3",{className:"font-bold text-purple-800 mb-3 text-center",children:"ðŸŽ¯ Logros y ProyecciÃ³n"}),(0,t.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"ðŸ“ˆ Crecimiento:"}),(0,t.jsx)("span",{className:"font-bold text-purple-600",children:(()=>{if(c){let e=c.preguntasAcertadas||0,t=e+((c.preguntasFalladas||0)+parseInt(localStorage.getItem("falladas_"+c.nick)||"0",10));if(t>0){let s=Math.max(0,Math.floor(e/t*100-50));return`+${s}% sem.`}}return"+0% sem."})()})]}),(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"ðŸŽ¯ Meta semanal:"}),(0,t.jsx)("span",{className:"font-bold text-purple-600",children:(()=>{if(c){let e=(c.preguntasAcertadas||0)+parseInt(localStorage.getItem("acertadas_"+c.nick)||"0",10),t=e+((c.preguntasFalladas||0)+parseInt(localStorage.getItem("falladas_"+c.nick)||"0",10));if(t>0){let s=e/t*100;return s>=75?"75% âœ…":`${s.toFixed(1)}% âŒ`}}return"0% âŒ"})()})]}),(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"â­ PrÃ³ximo nivel:"}),(0,t.jsx)("span",{className:"font-bold text-purple-600",children:(()=>{if(c){let e=d(c),t=Math.floor(e/100);return`${(t+1)*100-e} pts`}return"100 pts"})()})]})]})]})]}),(0,t.jsxs)("div",{className:"mt-6 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4",children:[(0,t.jsx)("h3",{className:"font-bold text-indigo-800 mb-3 text-center",children:"ðŸ“Š GrÃ¡fico de Progreso Semanal"}),(0,t.jsx)("div",{className:"flex items-end justify-between h-32 gap-2",children:[...Array(7)].map((e,s)=>{let a=c?Math.max(0,Math.floor((parseInt(localStorage.getItem("acertadas_"+c.nick)||"0",10)+parseInt(localStorage.getItem("falladas_"+c.nick)||"0",10))/7)+(Math.floor(5*Math.random())-2)):Math.floor(5*Math.random())+1,r=Math.max(20,Math.min(100,a/25*80+20)),l=["L","M","X","J","V","S","D"][s],n=s===new Date().getDay()-1||0===new Date().getDay()&&6===s;return(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:`w-8 rounded-t-md ${n?"bg-gradient-to-t from-orange-500 to-red-500":"bg-gradient-to-t from-blue-500 to-purple-500"}`,style:{height:`${r}%`}}),(0,t.jsx)("span",{className:`text-xs mt-1 font-semibold ${n?"text-orange-600":"text-indigo-600"}`,children:l}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:a})]},s)})}),(0,t.jsxs)("div",{className:"text-center mt-3 text-sm text-indigo-600",children:["ðŸ“ˆ ",(0,t.jsx)("strong",{children:"Tendencia:"})," ",(()=>{if(c){let e=(c.preguntasAcertadas||0)+parseInt(localStorage.getItem("acertadas_"+c.nick)||"0",10),t=(c.preguntasFalladas||0)+parseInt(localStorage.getItem("falladas_"+c.nick)||"0",10),s=t+e>0?e/(t+e)*100:0;return s>=80?"Â¡Excelente! MantÃ©n este nivel de precisiÃ³n.":s>=60?"Â¡Vas muy bien! MantÃ©n el ritmo esta semana.":s>=40?"Buen progreso. Â¡Sigue practicando!":"Empezando bien. Â¡Cada respuesta cuenta!"}return"Â¡Empieza tu aventura de aprendizaje!"})()]})]}),(0,t.jsxs)("div",{className:"mt-6 bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4",children:[(0,t.jsx)("h3",{className:"font-bold text-orange-800 mb-3 text-center",children:"âš”ï¸ Tu PosiciÃ³n vs. Mejores"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg p-3",children:[(0,t.jsx)("div",{className:"text-2xl",children:"ðŸ¥‡"}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"1Âº Lugar"}),(0,t.jsx)("div",{className:"font-bold text-yellow-600",children:(()=>{{let e=JSON.parse(localStorage.getItem("users")||"[]");if(e.length>0){let t=e.map(e=>({...e,puntosTotales:d(e)})).sort((e,t)=>t.puntosTotales-e.puntosTotales);return t[0]?.puntosTotales||0}}return 0})()}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:(()=>{{let e=JSON.parse(localStorage.getItem("users")||"[]");if(e.length>0){let t=e.map(e=>({...e,puntosTotales:d(e)})).sort((e,t)=>t.puntosTotales-e.puntosTotales);return t[0]?.nick||"Nadie"}}return"Nadie"})()})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg p-3 border-2 border-blue-300",children:[(0,t.jsx)("div",{className:"text-2xl",children:"ðŸ‘‘"}),(0,t.jsx)("div",{className:"text-xs text-blue-600 font-bold",children:"TÃš"}),(0,t.jsx)("div",{className:"font-bold text-blue-600",children:c?d(c):0}),(0,t.jsx)("div",{className:"text-xs text-blue-500",children:(()=>{if(c){let e=JSON.parse(localStorage.getItem("users")||"[]");if(e.length>0){let t=e.map(e=>({...e,puntosTotales:d(e)})).sort((e,t)=>t.puntosTotales-e.puntosTotales).findIndex(e=>e.nick===c.nick)+1;return t>0?`Posici\xf3n #${t}`:"Sin clasificar"}}return"Sin clasificar"})()})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-3",children:[(0,t.jsx)("div",{className:"text-2xl",children:"ðŸŽ¯"}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Promedio"}),(0,t.jsx)("div",{className:"font-bold text-gray-600",children:(()=>{{let e=JSON.parse(localStorage.getItem("users")||"[]");if(e.length>0)return Math.floor(e.reduce((e,t)=>e+d(t),0)/e.length)}return 0})()}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:(e=JSON.parse(localStorage.getItem("users")||"[]"),`${e.length} usuarios`)})]})]}),(0,t.jsx)("div",{className:"mt-3 text-center text-sm",children:(()=>{if(c){let e=JSON.parse(localStorage.getItem("users")||"[]");if(e.length>0){let s=Math.floor(e.reduce((e,t)=>e+d(t),0)/e.length),a=d(c)-s;return a>0?(0,t.jsxs)("span",{className:"text-green-600",children:["ðŸ“ˆ +",a," puntos sobre el promedio"]}):a<0?(0,t.jsxs)("span",{className:"text-red-600",children:["ðŸ“‰ ",Math.abs(a)," puntos bajo el promedio"]}):(0,t.jsx)("span",{className:"text-blue-600",children:"ðŸŽ¯ Exactamente en el promedio"})}}return(0,t.jsx)("span",{className:"text-gray-500",children:"Sin datos para comparar"})})()})]})]})})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 max-w-5xl mx-auto mt-8",children:[(0,t.jsx)("h2",{className:"text-lg font-bold mb-4 text-center",children:"Mejores estadÃ­sticas"}),(0,t.jsxs)("ul",{className:"space-y-2 text-center",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ“–"}),(0,t.jsx)("b",{children:"Historia con mÃ¡s likes:"})," ",(()=>{{let e=localStorage.getItem("historias");if(e)try{let s=JSON.parse(e);if(0===s.length)return"-";let a=s.reduce((e,t)=>(t.likes||0)>(e.likes||0)?t:e,s[0]);return(0,t.jsxs)("span",{children:[(0,t.jsx)("b",{children:a.titulo})," por ",(0,t.jsx)("b",{children:(0,t.jsx)(J,{nick:a.autor})})," ",(0,t.jsxs)("span",{className:"text-pink-600",children:["â¤ï¸ ",a.likes||0]})]})}catch{}}return"-"})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ’¬"}),(0,t.jsx)("b",{children:"Historia mÃ¡s comentada:"})," ",(()=>{{let e=localStorage.getItem("historias");if(e)try{let s=JSON.parse(e);if(0===s.length)return"-";let a=s.reduce((e,t)=>{let s=t.comentarios?t.comentarios.length:0,a=e.comentarios?e.comentarios.length:0;return s>a?t:e},s[0]);return(0,t.jsxs)("span",{children:[(0,t.jsx)("b",{children:a.titulo})," por ",(0,t.jsx)("b",{children:(0,t.jsx)(J,{nick:a.autor})})," ",(0,t.jsxs)("span",{className:"text-blue-600",children:["ðŸ’¬ ",a.comentarios?a.comentarios.length:0]})]})}catch{}}return"-"})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ«"}),(0,t.jsx)("b",{children:"Centro con mÃ¡s historias creadas:"})," ",(()=>{{let e=localStorage.getItem("historias"),s=localStorage.getItem("users");if(e&&s)try{let a=JSON.parse(e),r=JSON.parse(s);if(0===a.length||0===r.length)return"-";let l={};r.forEach(e=>{e.nick&&e.centro&&(l[e.nick]=e.centro)});let n={};a.forEach(e=>{let t=e.centro||l[e.autor]||null;t&&(n[t]=(n[t]||0)+1)});let i=Object.entries(n).sort((e,t)=>t[1]-e[1])[0];if(!i)return"-";return(0,t.jsxs)("span",{children:[(0,t.jsx)("b",{children:i[0]})," ",(0,t.jsxs)("span",{className:"text-purple-600",children:["ðŸ« ",i[1]]})]})}catch{return(0,t.jsx)("span",{children:"-"})}}return"-"})()]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ«"}),(0,t.jsx)("b",{children:"Centro Escolar con mÃ¡s usuarios activos:"})," ",(()=>{{let e=localStorage.getItem("users");if(e)try{let s=JSON.parse(e);if(0===s.length)return"-";let a={};s.forEach(e=>{e.centro&&(a[e.centro]=(a[e.centro]||0)+1)});let r=Object.entries(a).sort((e,t)=>t[1]-e[1])[0];if(!r)return"-";return(0,t.jsxs)("span",{children:[(0,t.jsx)("b",{children:r[0]})," ",(0,t.jsxs)("span",{className:"text-blue-600",children:["ðŸ« ",r[1]]})]})}catch{}}return"-"})()]})]})]})]})]})}e.s(["default",()=>l])}]);