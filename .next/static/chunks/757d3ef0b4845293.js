(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,r,a)=>{r.exports=e.r(76562)},53164,e=>{"use strict";var r=e.i(43476),a=e.i(71645),t=e.i(18566);e.s(["default",0,()=>{let e=(0,t.useRouter)(),[s,l]=(0,a.useState)(null),[i,o]=(0,a.useState)(""),[n,d]=(0,a.useState)(!0),[c,u]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{(async()=>{try{let r=await fetch("/api/auth/me");if(!r.ok)return void e.push("/login");{let e=await r.json();l(e.user)}}catch(r){console.error("Error loading user:",r),e.push("/login");return}finally{d(!1)}})()},[e]),n)return(0,r.jsx)("div",{className:"min-h-screen bg-green-100 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900 mx-auto mb-4"}),(0,r.jsx)("p",{children:"Cargando..."})]})});if(!s)return(0,r.jsx)("div",{className:"min-h-screen bg-green-100 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{children:"No se pudo cargar la informaciÃ³n del usuario."}),(0,r.jsx)("button",{className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded",onClick:()=>e.push("/login"),children:"Ir al login"})]})});let m=s.premium||!1,p=["/avatars/simple1.png",...Array.from({length:29},(e,r)=>`/avatars/simple${r+2}.jpg`)],h=Array.from({length:50},(e,r)=>`/avatars/apremium${r+1}.jpg`),x=[...p,...h],g=p.length,b=async()=>{if(i&&!c){if(h.includes(i)&&!m)return void alert("Este avatar es exclusivo para usuarios Premium. Â¡Hazte Premium para usarlo!");u(!0);try{let r=await fetch("/api/user/update-avatar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatar:i})});if(r.ok)alert("Avatar actualizado correctamente"),e.push("/perfil");else{let e=await r.json();alert(`Error al actualizar avatar: ${e.error||"Error desconocido"}`)}}catch(e){console.error("Error saving avatar:",e),alert("Error al guardar el avatar. IntÃ©ntalo de nuevo.")}finally{u(!1)}}};return(0,r.jsxs)("div",{className:"min-h-screen bg-green-100 flex flex-col items-center pt-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Seleccionar Avatar"}),(0,r.jsxs)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg max-w-md",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-yellow-800",children:[(0,r.jsx)("span",{className:"text-lg",children:"ğŸ‘‘"}),(0,r.jsx)("span",{className:"font-semibold",children:"Avatares Premium"})]}),(0,r.jsxs)("p",{className:"text-sm text-yellow-700 mt-1",children:["Los avatares con corona dorada son exclusivos para usuarios Premium.",!m&&" Â¡Hazte Premium para desbloquearlos!"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-5 gap-4 mb-8",children:x.map((e,a)=>{let t=a>=g,s=!t||m;return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:e,alt:`Avatar ${a+1}${t?" (Premium)":""}`,className:`w-16 h-16 rounded-full border-2 transition-all duration-200 ${!s?"cursor-not-allowed opacity-60 grayscale":i===e?"border-blue-500 cursor-pointer":"border-gray-300 cursor-pointer hover:border-blue-400"} ${t?"ring-2 ring-yellow-400 ring-opacity-50":""}`,onClick:()=>s&&void o(e),title:t&&!m?"Avatar Premium - Hazte Premium para usarlo":`Avatar ${a+1}`}),t&&(0,r.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-lg",children:"ğŸ‘‘"})]},a)})}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{className:"bg-green-500 text-white px-6 py-3 rounded font-semibold disabled:opacity-50 disabled:cursor-not-allowed",onClick:b,disabled:!i||c,children:c?"Guardando...":"Guardar Avatar"}),(0,r.jsx)("button",{className:"bg-gray-500 text-white px-6 py-3 rounded font-semibold",onClick:()=>e.push("/perfil"),disabled:c,children:"Volver"})]})]})}])}]);